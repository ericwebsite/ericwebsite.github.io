(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["c19ed17eed0ed37a24c99762b78ab9a0"],{"+reu":function(e,t,L){"use strict";L("ma9I");L("fbCW");L("yXV3");L("+2oP");L("zKZe");L("5DmW");L("07d7");L("5s+n");L("TWNs");L("JfAA");L("Rm1S");L("UxlC");L("hByQ");L("SYor");var n=r(L("q1tI"));var m=i(L("j6G6"));var B=i(L("Q8Wn"));var p=i(L("r+gr"));function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function o(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var O=L("e2gc");window.Handlebars=L("7JHY");window.Backbone=L("q1z7");window._=L("F/us");L("ZaBc");L("VscY");var a=L("z/9C");var g=L("i8i4");var s=L("6ZeH");var _=L("F/us");var l=L("e2gc");var v=n.createFactory(L("tm9o"));var i18n=L("HEOz");var c=L("HYvl");var u=L("E9A0");var M=L("iQJ3");var b=L("bLWT");var h=L("MhIR"),w=h.Scratchpad;var d=L("MhIR"),y=d.ScratchpadRevision;var f=L("MhIR"),C=f.UserScratchpad;var E=L("8crR"),A=E.ScratchpadChallenge;var x=L("/eLw");var P=a.LiveEditor;P.prototype.render=function(){};var S=1e3;var I=10*S;var N={dom:{PAGE:".scratchpad-page",EDITOR:".scratchpad-editor",CANVAS_LOADING:".scratchpad-canvas-loading",OUTPUT_FRAME:"#output-frame",ALL_OUTPUT:"#output, #output-frame",DRAG_HANDLE:".scratchpad-drag-handle",SCRATCHPAD_WRAP:".scratchpad-wrap",SCRATCHPAD_WRAP_OUTER:".scratchpad-wrap-outer",CANVAS_WRAP:".scratchpad-canvas-wrap",EDITOR_WRAP:".scratchpad-editor-wrap",NOTICE_CONTAINER:".spinoff-notice",NOTICE_TEXT:".spinoff-text",NOTICE_BUTTON:".spinoff-notice a"},noOutput:{document:true},forceRedirect:function e(t){N.triggerRemove();O(window).unbind("beforeunload.scratchpad");var n={url:t};O(N).trigger("redirect",n);top.location.href=n.url},initKeybindings:function e(){O(document).off("keydown",k);O(document).on("keydown",k)},canEditCurrentScratchpad:function e(){return N.scratchpad.isNew()||N.scratchpad.isOwner()||m.default.isDeveloper()},inEditMode:function e(){return!N.embedded},hasEditor:function e(){var t=N.embedded&&N.scratchpad.get("canvasOnly");return!t},shouldDisableChallengePaste:function e(){return N.scratchpad.get("defaultUrlPath")&&N.scratchpad.get("defaultUrlPath").indexOf("/programming/")>-1},handleStartOver:function e(){var t=N.isRedirectedProjectFork?N.originScratchpad:N.scratchpad;var n=t.getCode();N.liveEditor.editor.text(n);O(N).trigger("startCodeOver")},handleUndo:function e(){N.liveEditor.editor.undo();N.liveEditor.editor.focus()},handleToggleProp:function e(t){var n=N.scratchpad;n.save(o({},t,!n.get(t)),{patch:true})},handleDelete:function e(){return new Promise(function(e,t){N.scratchpad.destroy({success:function e(){N.forceRedirect(N.topic.relativeUrl)},error:t})})},setTitle:function e(i){return new Promise(function(e,t){var n=N.scratchpad;n.setTitle(i);if(n.get("userAuthoredContentType")==="webpage"){N.updateCodeFromScratchpadTitle()}e()})},handleSaveScratchpad:function e(s){return new Promise(function(o,a){N.liveEditor.getScreenshot(function(e){var t=N.scratchpad;var r=t.isNew();if(s){t=t.fork()}var n=t.currentRevision();var i={code:N.liveEditor.editor.text(),editor_type:N.liveEditor.options.editorType,folds:N.liveEditor.editor.getAllFolds(),image_url:e,config_version:t.getVersion(),topic_slug:N.topicSlug};O(N).trigger("saveData",i);n.set(i);t.save({},{success:function e(t){if(r){M.del(N.localStorage.SCRATCHPADS)}if(window.ga){window.ga("send","event","Learning-Action","Scratchpad-Saved",t.get("title"))}if(s&&N.scratchpad.isProject()){N.stashUserCode(null,"")}var n=t.attributes;var i=n.userAuthoredContentType;if(i==="document"){N.liveEditor.editor.text(t.currentRevision().attributes.code)}if(s||r){N.forceRedirect(t.pathForShow())}O(N).trigger("saveCompleted",t);o()},error:function e(t,n){if(n.status===413){a(i18n._("Your creation is too large. Please "+"shorten the content and try again."))}else{a(i18n._("Error saving your creation to the "+"server. Please try again!"))}O(N).trigger("saveFailed")}})})})},registerCodeChange:function e(t){O(N).on("codeChange",_.debounce(t,300))},registerPlayUpdate:function e(t){N.liveEditor.record.bind({playUpdate:function e(){t(N.liveEditor.record.currentTime()/1e3)}})},onSeekStart:function e(){N.wasPlaying=N.liveEditor.record.playing;N.liveEditor.record.seeking=true;N.liveEditor.record.pausePlayback()},onSeek:function e(t){N.liveEditor.record.trigger("beforeSeek");N.liveEditor.seekTo(t)},onSeekEnd:function e(){N.liveEditor.record.seeking=false;if(N.wasPlaying){N.liveEditor.record.play()}},isSpinOffAllowed:function e(){var t=N.scratchpad;var n=t.isChallenge();var i=n&&!N.userScratchpad.get("isComplete");return!(t.isNew()||i||N.isRedirectedProjectFork)},hasUnsavedChanges:function e(){var t=N.scratchpad;var n=N.liveEditor.editor.text();var i=N.isSaveable()||!t.isTalkie()&&N.isSpinOffAllowed();var r=t.getCode();if(N.stashedCode){r=N.stashedCode}return i&&O.trim(n)!==O.trim(r)},isSaveable:function e(){return N.inEditMode()&&N.canEditCurrentScratchpad()||N.isRedirectedProjectFork},triggerSave:function e(){if(N._saveHandler){N._saveHandler()}},triggerSpinOff:function e(){if(N._spinOffHandler){N._spinOffHandler()}},loadDocumentationScratchpads:function e(){if(N._loadingDocumentationScratchpads||!N.liveEditor.hasFrame()){return}N._loadingDocumentationScratchpads=true;O.get("/api/internal/scratchpads/documentation/titles",function(e){N.liveEditor.postFrame({documentation:e})})},displayLanguageAllowsEditing:function e(){return N.scratchpad&&(!N.scratchpad.get("category")||B.default.language.indexOf("en")===0)},getHostName:function e(){return window.location.host.toLowerCase()},isProdServer:function e(){var t=this.getHostName();return/khanacademy\.org/.test(t)||/khan-academy\.appspot\.com/.test(t)},prefixDomain:function e(t){if(this.isProdServer()){var n=this.getHostName();var i=/^(.*)-dot-khan-academy\.appspot\.com/.test(n)?RegExp.$1:"www";return"https://"+i+".kasandbox.org"+t}return t},sandboxUrl:function e(){var t=N.scratchpad.get("userAuthoredContentType");var n="/computer-programming/exec/".concat(t);if(t==="document"){return""}if(t in N.noOutput){return n}if(n.indexOf("lang=")<0){n+="?lang="+B.default.language}n=this.prefixDomain(n);return n},loadData:function e(t,n,i,r){var o=(n||"scratchpad").toLowerCase();var a="/api/internal/show_".concat(o,"?").concat(o,"_id=").concat(t,"&casing=camel");if(r){a+="&allow_redirect=1"}O.ajax({type:"GET",url:a,data:{topic_slug:N.topicSlug},success:function e(t){if(n==="Project"){t.scratchpad=t.scratchpad.project||t.scratchpad.spinoff}i(t);delete N.requestedScratchpadID},error:function e(){window.alert(i18n._("We couldn't load the program, can you try reloading?"))}})},getTabFromFeedbackType:function e(t){if(t==="projecthelp"){return"projectfeedback"}else if(t==="comment"){return"comments"}else if(t==="projecteval"||t==="projectevalanswer"){return""}return"questions"},init:function e(n){n=n||{};N.topicSlug=n.scratchpad&&n.scratchpad.forkedFromTopic||n.topic.slug||"computer-programming";var t="cs-scratchpad-new"+m.default.userId;if(n.userAuthoredContentType){t+="-"+n.userAuthoredContentType}N.localStorage=O.extend(N.localStorage||{},{SCRATCHPADS:t});var i=/\/(\d+)(\/embedded)?$/.exec(window.location.pathname);n.id=n.id||i&&i[1]||"";n.embedded=i&&i[2]||n.embedded||N.embedded;if(!n.id){var r=/([A-Za-z]+):(\w+)(\/embedded)?$/.exec(window.location.pathname);if(r){n.contentKind=r[1];n.id=r[2];n.embedded=true}}N.embedded=n.embedded;N.topic=n.topic;N.nextSlug=n.nextSlug||N.nextSlug;var o=x(window.location.search.slice(1));if(!n.scratchpad&&n.id){N.requestedScratchpadID=n.id;return N.loadData(n.id,n.contentKind,function(e){for(var t in e){if(!n[t]){n[t]=e[t]}}N.init(n)},n.embedded&&!o.disallowRedirect)}var a=n.el||".scratchpad-page";N.$el=a?O(a):O(document);N.el=N.$el[0];N.$el.off();N.isRedirectedProjectFork=N.requestedScratchpadID&&n.scratchpad&&String(N.requestedScratchpadID)!==String(n.scratchpad.id);if(n.scratchpad){N.scratchpad=new w;N.scratchpad.set(N.scratchpad.parse(n.scratchpad))}else{var s=N.termMap["new"];N.scratchpad=new w({title:s,translatedTitle:s,category:null,difficulty:null,tags:[],userAuthoredContentType:n.userAuthoredContentType,topicId:n.topic.id,revision:new y({code:N.termMap["code"]||"",created:new Date})});var l=M.get(N.localStorage.SCRATCHPADS);if(l){var c=N.scratchpad.parse(l.scratchpad);var u=c.revision&&c.revision.get("code");if(u){N.scratchpad.set(c)}}}N.userScratchpad=new C({scratchpadId:N.scratchpad.get("id"),scratchpadKind:N.scratchpad.get("contentKind")});N.originScratchpad=new w;if(n.originScratchpad){N.originScratchpad.set(N.originScratchpad.parse(n.originScratchpad))}var h=N.scratchpad;N.trusted=n.embedded;N.localStorage=O.extend(N.localStorage||{},{SEEN_COMPLETED_PROJECT:"cs-scratchpad-seen-completed"+m.default.userId+"-"+h.get("id")});var d=h.get("userAuthoredContentType");N.challenge=null;if(h.isChallenge()){N.challenge=new A({userScratchpad:N.userScratchpad,contentType:d})}var f=document.documentElement;if(o.editor==="no"){f.className+=" no-editor"}if(o.output==="no"){f.className+=" no-output"}if(o.buttons==="no"){f.className+=" no-buttons"}if(o.author==="no"){f.className+=" no-author"}if(o.blank==="yes"){N.blank=true}var p=n.embedded||"upVoted"in n;var g=N.initUserScratchpad(n);if(n.id&&(!p||!g)){if(!(h.isChallenge()||h.isProject()||h.isTalkie())){return N.startScratch(o,n)}N.loadData(n.id,n.contentKind,function(e){N.initUserScratchpad(e);N.startScratch(o,n)})}else{N.startScratch(o,n)}},initLiveEditor:function e(i){var t=N.scratchpad;var n=t.currentRevision();var r=t.get("userAuthoredContentType");var o;var a=true;var s={};if(i.autoFocus==="no"){a=false}if(O(window).width()<=1024){a=false}if(i.settings){try{s=JSON.parse(i.settings)}catch(e){}}var l=M.get(N.localStorage.SCRATCHPADS);if(l){o=l.cursor}var c,u,h;try{c=window.parent;u=i.origin||c.location.origin}catch(e){}var d=function e(t){if(c&&u&&c!==window){t.id=h||i.id||"";try{c.postMessage(JSON.stringify(t),u)}catch(e){}}};var f="";if(!N.blank&&!i.code){f=i.code||t.getCode()||""}var p=t.getPlayback();if(p){p=JSON.parse(p)}var g;if(t.isResizableType()){g=N.hasEditor()?"50%":"100%"}var m=parseFloat(i.width)||g||t.get("width")||400;var v=parseFloat(i.height)||t.get("height")||400;var b;if(t.isTalkie()){b=window.setTimeout(function(){if(!N.liveEditor.audioReadyToPlay()){N.$el.find(".scratchpad-editor-youtube-link").show()}},15*1e3)}var w=N.prefixDomain("/third_party/javascript-khansrc/live-editor/build/images/");if(r==="webpage"){w="https://www.kasandbox.org/programming-images/"}var y="ace";var C=v;if(r==="document"){y="textarea";v="auto";C="auto"}var E;if(t.get("contentKind")==="Talkthrough"){E=t.get("translatedMp3Url")}else{E=n.getMp3Url()}var A;if(t.get("contentKind")==="Challenge"){A=t.get("tests")}else{A=n.get("tests")}N.liveEditor=new P({el:N.$el,editorType:y+"_"+r,outputType:r,width:m,height:v,editorHeight:C,newErrorExperience:true,autoFocus:a,code:f,validation:A,version:t.get("configVersion"),cursor:o,settings:s,recordingMP3:E,recordingCommands:p&&p.commands,recordingInit:p&&p.init,workersDir:N.prefixDomain("/third_party/javascript-khansrc/live-editor/build/workers/"),externalsDir:N.prefixDomain("/third_party/javascript-khansrc/live-editor/build/external/"),soundsDir:"https://www.kasandbox.org/programming-sounds/",imagesDir:w,jshintFile:N.prefixDomain((B.default.language!=="en"?"/genfiles/translations/"+B.default.kaLocale:"")+"/third_party/javascript-khansrc/live-editor/"+"build/external/jshint/jshint.js"),redirectUrl:window.location.origin+"/computer-programming/link_redirector",execFile:N.sandboxUrl(),enableLoopProtect:!t.get("canvasOnly")});if(t.isChallenge()){N.challenge.setLiveEditor(N.liveEditor)}N.$el.addClass("editor-"+y);if(y==="textarea"){var x={forcePasteAsPlainText:false,toolbar:[["Undo"],["Bold","Italic","Underline","-","RemoveFormat"],["Format"],["NumberedList","BulletedList"],["Link","Unlink"],["Drawing"]],plugins:["format","list","drawing"]};var S=N.$el.find(".textarea-editor")[0];Promise.all([L.e("shared"),L.e("react-components"),L.e("a4f42c7a39ad5d43eb067e8bdd0b46de"),L.e("4be074bcd1e9d308c8b58d836cd0623f"),L.e("48abeff682e966bcd4298d20048bb13d")]).then(L.t.bind(null,"W4aj",7)).then(function(e){return e.default}).then(function(e){e.whenReady(function(){e.createEditor(S,x,{_onChangeField:function e(t){t.editor.updateElement()}})})})}N.liveEditor.editor.on("change",function(){return O(N).trigger("codeChange")});N.liveEditor.on("readyToPlay",function(){O(N).trigger("readyToPlay");window.clearTimeout(b);N.$el.find(".scratchpad-editor-youtube-link").hide()});N.liveEditor.on("canvasSizeUpdated",function(e){var t=e.width;var n=e.height;N.$el.find(N.dom.CANVAS_WRAP).width(t);N.$el.find(N.dom.DRAG_HANDLE).find("div").height(n);if(N.embedded){if(i.editor==="no"){O("html").width(t).height(n)}else if(i.editor==="yes"){O("html").width(820)}}});N.liveEditor.trigger("canvasSizeUpdated",{width:m,height:v});N.liveEditor.listenTo(t,"change:width change:height",function(){N.liveEditor.updateCanvasSize(t.get("width"),t.get("height"));if(r!=="document"){N.liveEditor.restartCode()}});N.liveEditor.off("update").on("update",function(e){if(e.results&&c&&e.pass!==undefined){d({testsPassed:e.pass},"*")}else if(e.action==="link-click"){var t=i18n._("The link you clicked was on a user-created webpage."+"  Are you sure you would like to visit "+"the following website?\n%(url)s",{url:e.url});if(confirm(t)){window.open(e.url)}}else if(e.action==="page-info"){if(!N.trusted){var n=e.title||N.termMap["new"];N.scratchpad.setTitle(n)}}else if(e.action==="sql-table-click"){var i=N.liveEditor.editor.text();i=O.trim(i)+"\nSELECT * FROM "+e.table+";";N.liveEditor.editor.text(i)}O(N).trigger("update",e)});N.liveEditor.on("runCode",function(e){O(N).trigger("runCode",e)});var k=N.liveEditor.record;var F=undefined;var T=undefined;var D=function e(){clearInterval(T);T=undefined;F=undefined};var R=function e(){D();F=k.currentTime();T=setInterval(function(){return $(k.currentTime())},I)};var $=function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(F===undefined){return}var r=N.scratchpad.id;var o=t-F;if(o<1){return}var a={content_kind:N.scratchpad.get("contentKind"),user_sp_id:N.userScratchpad.id,last_ms_watched:t,ms_watched:o,ms_duration:k.endTime(),fully_watched:n?1:0,update_progress:i?1:0};var s="/api/internal/_mt/user/talkthroughs/".concat(r,"/log");O.ajax({type:"POST",url:s,data:a}).then(function(e){if(i){N.userScratchpad.set(e)}});F=t};k.on({beforeSeek:function e(){$(k.currentTime());D()},playStarted:function e(){R()},playPaused:function e(){if(k.currentTime()===0){return}$(k.currentTime(),false,true);D()},playEnded:function e(){$(k.endTime(),true,true);D()}})},initUserScratchpad:function e(t){if(t.userScratchpad){N.userScratchpad.set(N.userScratchpad.parse(t.userScratchpad));return true}},initResizing:function e(){if(N.scratchpad.isResizableType()){var a=400;var s=410;var n=O(this.dom.DRAG_HANDLE);var i=O(this.dom.OUTPUT_FRAME);var l=O(this.dom.SCRATCHPAD_WRAP);n.on("mousedown",function(e){var r=e.pageX;var o=i.width();var t=_.throttle(function(e){var t=e.pageX-r;if(l.css("direction")==="rtl"){t=-t}var n=o-t;var i=l.width();if(n<a){n=a}else if(i-n<s){n=i-s}N.liveEditor.updateCanvasSize(n);return false},30);n.addClass("dragging");i.css("pointer-events","none");O(document).on("mousemove",t);O(document).one("mouseup",function(){O(document).off("mousemove",t);n.removeClass("dragging");i.css("pointer-events","auto")})});n.show()}},triggerRemove:function e(){O(N).trigger("remove")},updateCodeFromScratchpadTitle:function e(){var t=N.scratchpad.get("translatedTitle");var n=N.liveEditor.editor.text();var i=/(<title\b[^>]*>)[^<>]*(<\/title>)/i;var r=n.match(i);if(!r){return}N.liveEditor.editor.setReadOnly(true);window.setTimeout(function(){N.liveEditor.editor.setReadOnly(false)},500);t="<title>"+t+"</title>";N.liveEditor.editor.editor.replace(t,{needle:r[0]})},termMap:{},renderScratchpad:function e(t,n){var i=N.scratchpad;var r=i.currentRevision();var o=i.get("userAuthoredContentType");var a=m.default.getUserProfile();N.liveEditor=null;var s=new Promise(function(t,e){var n=function e(){if(N.liveEditor&&N.liveEditor.record){t(N.liveEditor)}else{window.setTimeout(e,10)}};n()});var l="allow-pointer-lock allow-same-origin allow-scripts";if(o==="webpage"){l+=" allow-popups allow-modals allow-forms"}var c=i.isChallenge()&&!(N.userScratchpad&&N.userScratchpad.get("isComplete"));var u={scratchpad:i,userScratchpad:N.userScratchpad,originScratchpad:n.originScratchpad&&new w(n.originScratchpad),creatorProfile:n.creatorProfile&&new b(n.creatorProfile),discussion:n.discussion,challenge:N.challenge,userAuthoredContentType:n.userAuthoredContentType,nextSlug:N.nextSlug,liveEditorPromise:s,embedded:!!n.embedded,embeddedAndWithFrame:n.embedded&&/\/embedded$/.test(window.location.pathname),trusted:n.embedded,appVersion:p.default.version,sandboxUrl:N.sandboxUrl(),inEditModeAndCanEdit:N.inEditMode()&&N.canEditCurrentScratchpad(),canEdit:N.canEditCurrentScratchpad(),isDeveloper:m.default.isDeveloper(),isOwner:i.isOwner(),isModerator:a&&a.get("isModerator")&&!N.isRedirectedProjectFork,profileRoot:a&&a.get("profileRoot"),translatedDescription:i.get("translatedDescription"),translatedTitle:i.get("translatedTitle"),tutorialUrl:i.get("defaultUrlPath"),isNew:i.isNew(),isDocumentation:i.get("category")==="documentation",isOfficial:i.isOfficial(),isProject:i.isProject(),isChallenge:i.isChallenge(),isUneditableProjectFork:i.get("originIsProject")&&!N.canEditCurrentScratchpad(),hasAudio:i.isTalkie(),lastUpdatedTime:r.get("created").toISOString(),sandboxProps:l,youtubeUrl:i.getYoutubeUrl(),hasUnsavedChanges:function e(){return N.hasUnsavedChanges()},shouldHideRestart:T,showShareButton:!i.isNew()&&(!a||!a.get("isChildAccount")),showProjectEvalArea:a&&i.get("originIsProject"),showProjectHelpButton:a&&!a.get("isChildAccount")&&(i.isOwner()&&!i.isTalkie()&&!i.isChallenge()||i.isProject()),showStartOverButton:i.isChallenge()||N.isRedirectedProjectFork,hideSave:!N.inEditMode()&&!i.isChallenge()&&!N.isRedirectedProjectFork,showDescription:!!(i.get("translatedDescription")||i.isProject()||i.get("originIsProject")),hideDocumentation:!N.hasEditor(),hideSpinOffs:i.isNew()||N.isRedirectedProjectFork||c||!N.hasEditor(),hideDiscussion:i.isNew()||c,hideEditor:!N.hasEditor()||t.editor==="no",hideVotes:N.isRedirectedProjectFork||i.inTutorial(),hideVoteControls:N.isRedirectedProjectFork||i.inTutorial(),hideEditTitle:N.isRedirectedProjectFork,hideDelete:N.isRedirectedProjectFork,isRedirectedProjectFork:N.isRedirectedProjectFork,isSaveable:N.isSaveable(),isSpinOffAllowed:N.isSpinOffAllowed,useContentHeader:n.embedded,onToggleProp:N.handleToggleProp,onStartOver:N.handleStartOver,onTriggerSpinoff:N.triggerSpinOff,onUndo:N.handleUndo,onSave:N.triggerSave,onSeekStart:N.onSeekStart,onSeek:N.onSeek,onSeekEnd:N.onSeekEnd,setTitle:N.setTitle,deleteScratchpad:N.handleDelete,saveScratchpad:N.handleSaveScratchpad,registerCodeChange:N.registerCodeChange,registerTriggerSave:function e(t){return N._saveHandler=t},registerTriggerSpinOff:function e(t){return N._spinOffHandler=t},registerPlayUpdate:N.registerPlayUpdate,newTitle:N.termMap["new"],restartLabel:N.termMap["restart"],domain:n.domain,topic:n.topic,topicSlug:N.topicSlug,isComputerProgramming:n.topic.slug==="computer-programming"};if(i.get("byChild")){u.private=true}else if(i.get("key")){var h={sumVotesIncremented:i.get("sumVotesIncremented"),voteUpOnly:true,upVoted:n.upVoted,scratchpadKey:i.get("key"),showModControls:a&&a.get("isModerator"),flags:i.get("flags"),flaggedBy:i.get("flaggedBy"),flaggedByUser:n.flaggedByUser,numberOfFlags:i.get("flags").length,flagButton:true,definitelyNotSpam:i.get("definitelyNotSpam"),hideFlagControls:i.inTutorial()||i.isCategorySet(),showAuthorControls:i.isOwner(),inQueue:false,hideModDelete:i.isOwner()||m.default.isDeveloper()};Object.assign(u,h);u.discussionMeta=h}if(!n.embeddedAndWithFrame){if(!n.discussion){n.discussion={}}if(!n.discussion.topicSlug){n.discussion.topicSlug=N.topicSlug}if(t.qa_expand_key&&N.ancestorFeedbackType){n.discussion.expandFeedbackType=N.getTabFromFeedbackType(N.ancestorFeedbackType);n.discussion.qaExpandKey=t.qa_expand_key}Object.assign(u,n.discussion)}var d=n.onSetComponent;if(d){var f=d(v(u));if(!f){return}N.startScratch(t,n,true);return}O(N).trigger("render");g.render(v(u),N.$el[0])}};function k(e){if(!l.browser.msie&&e.which===8&&!O(e.target).is(":input")&&O(e.target).closest("[contenteditable=true]").length===0){e.preventDefault()}if(e.which===83&&(e.ctrlKey||e.metaKey)){if(N.isSaveable()){N.triggerSave()}e.preventDefault()}}N.initAndBind=function(){var e=this;if(F()){return}O(N).trigger("load");var i=false;var t=function e(){if(!m.default.isPhantom()&&!i&&N.liveEditor.record.currentTime()){i=true;var t=N.scratchpad.get("contentKind");var n="/api/internal/user/badge_action/"+t+":"+N.scratchpad.get("id");O.post(n,{action:"SCRATCHPAD_TINKER",casing:"camel"})}};N.liveEditor.on("userChangedCode",_.debounce(t,500));e.$el.on("click",".fork",function(e){if(O(e.target).hasClass("discussion-author")){O(N).trigger("clickedSpinoffAuthor")}else{O(N).trigger("clickedSpinoff")}});e.$el.on("click",".hover-card-content a",function(){O(N).trigger("clickedSpinoffAuthor")});O(window).unbind("beforeunload.scratchpad");O(window).bind("beforeunload.scratchpad",function(){N.triggerRemove();if(!N.scratchpad.isNew()){var e={defaultMsg:i18n._("You have unsaved changes! "+"Are you sure you wish to leave the page?")};if(N.hasUnsavedChanges()){e.warnMsg=e.defaultMsg}O(N).trigger("beforeunload",e);return e.warnMsg}})};N.isAttemptingSomething=function(){if(N.embedded&&!N.inEditMode()){return true}return!N.canEditCurrentScratchpad()};N.loadUserSpinOffs=function(){if(N.scratchpad.isProject()&&N.userScratchpad.get("isComplete")){if(window._kiq){window._kiq.push(["set",{view_project_completed:"true"}])}if(!M.get(N.localStorage.SEEN_COMPLETED_PROJECT)){M.set(N.localStorage.SEEN_COMPLETED_PROJECT,1)}var e=i18n._("You've completed this project! View your "+"spin-offs of this project to see your solution.");N.$el.find("#complete-spin-off").hide();N.$el.find(N.dom.NOTICE_TEXT).text(e);N.$el.find(N.dom.NOTICE_CONTAINER).slideDown(1e3)}};N.stashUserCode=function(e,t){if(!N.liveEditor){return}if(_.isUndefined(t)){t=N.liveEditor.editor.text()}var n=N.userScratchpad;e=e||{};var i=_.extend({stashedCode:t},e.attrs||{});i["scratchpadId"]=n.get("scratchpadId");e.attrs=i;n.save(i,e);N.stashedCode=t};var F=function e(){var t=x(window.location.search.slice(1));var n=N.scratchpad.get("defaultUrlPath");if(n&&!N.embedded&&!N.canEditCurrentScratchpad()&&!t.no_redirect){N.forceRedirect(n+window.location.search);return true}return false};N.startScratch=function(e,t,n){if(!n){N.renderScratchpad(e,t);if(t.onSetComponent){return}}N.initLiveEditor(e);N.initAndBind();N.initKeybindings();var i=L("YXAN");i.init();var r={code:""};O(N).trigger("initCode",r);N.stashedCode=r.code;if(N.stashedCode){N.liveEditor.editor.text(N.stashedCode)}O(N).trigger("started")};var T=function e(){var t=N.liveEditor.editor.text();var n=N.scratchpad.get("userAuthoredContentType");if(n==="webpage"){if(t.match(/<script>/)||t.match(/animation:/)){return false}}else if(n==="pjs"){var i=["function(){var draw = function(){};}","function(){draw = function(){};}","function(){var mousePressed = function(){};}","function(){var mouseReleased = function(){};}","function(){var mouseMoved = function(){};}","function(){var mouseClicked = function(){};}","function(){var keyPressed = function(){};}","function(){mousePressed = function(){};}","function(){mouseReleased = function(){};}","function(){mouseMoved = function(){};}","function(){mouseClicked = function(){};}","function(){keyPressed = function(){};}","function(){random();}","function(){var _ = new Random();}","function(){var _ = random();}"];try{for(var r=0;r<i.length;r++){if(s.match(t,i[r])){return false}}return true}catch(e){}}return true};var D=function e(){L("+yQP");L("XkaS");L("3Owj");L("hz+2");L("P6H5").bindEvents();L("NqAJ").bindEvents();L("VszD").bindEvents();O(document).on("mouseenter",".author-nickname",function(){var e="top left";if(window!==window.top){e="bottom left"}c.createHoverCardQtip(O(this),{my:e,at:"bottom left"})});O(N).on({started:function e(){N.registerCodeChange(function(){N.loadDocumentationScratchpads()});var t=N.liveEditor.editor;t.on("click",function(){var e=N.scratchpad.isTalkie();if(e&&!N.liveEditor.record.playing||!e){t.insertNewlineIfCursorAtEnd()}});var n=N.scratchpad.getFolds();N.liveEditor.editor.setFolds(n);N.initResizing()}});O(N).on("remove",function(){if(!N.liveEditor){return}N.liveEditor.remove();var e=N.scratchpad;var t=N.liveEditor.editor.text();var n=e.currentRevision();if(e.isNew()){n.set("code",t);M.set(N.localStorage.SCRATCHPADS,{cursor:N.liveEditor.editor.getCursor(),scratchpad:N.scratchpad})}})};window.ScratchpadUI=N;e.exports={ScratchpadUI:N,ScratchpadUIStart:D};u.LegacyRequireIfLoaded["ScratchpadUIModule"]=e.exports},"+yQP":function(e,t,C){(function(){var e="ace";var i=function(){return this}();if(!e&&typeof requirejs!=="undefined")return;var s=function(e,t,n){if(typeof e!=="string"){if(s.original)s.original.apply(window,arguments);else{console.error("dropping module because define wasn't a string.");console.trace()}return}if(arguments.length==2)n=t;if(!s.modules){s.modules={};s.payloads={}}s.payloads[e]=n;s.modules[e]=null};var l=function(e,t,n){if(Object.prototype.toString.call(t)==="[object Array]"){var i=[];for(var r=0,o=t.length;r<o;++r){var a=u(e,t[r]);if(!a&&l.original)return l.original.apply(window,arguments);i.push(a)}if(n){n.apply(null,i)}}else if(typeof t==="string"){var s=u(e,t);if(!s&&l.original)return l.original.apply(window,arguments);if(n){n()}return s}else{if(l.original)return l.original.apply(window,arguments)}};var c=function(e,t){if(t.indexOf("!")!==-1){var n=t.split("!");return c(e,n[0])+"!"+c(e,n[1])}if(t.charAt(0)=="."){var i=e.split("/").slice(0,-1).join("/");t=i+"/"+t;while(t.indexOf(".")!==-1&&r!=t){var r=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return t};var u=function(e,n){n=c(e,n);var t=s.modules[n];if(!t){t=s.payloads[n];if(typeof t==="function"){var i={};var r={id:n,uri:"",exports:i,packaged:true};var o=function(e,t){return l(n,e,t)};var a=t(o,i,r);i=a||r.exports;s.modules[n]=i;delete s.payloads[n]}t=s.modules[n]=i||t}return t};function t(e){var t=function(e,t){return l("",e,t)};var n=i;if(e){if(!i[e])i[e]={};n=i[e]}if(!n.define||!n.define.packaged){s.original=n.define;n.define=s;n.define.packaged=true}if(!n.require||!n.require.packaged){l.original=n.require;n.require=t;n.require.packaged=true}}t(e)})();ace.define("ace/lib/regexp",["require","exports","module"],function(e,t,n){"use strict";var o={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},a=o.exec.call(/()??/,"")[1]===undefined,s=function(){var e=/^/g;o.test.call(e,"");return!e.lastIndex}();if(s&&a)return;RegExp.prototype.exec=function(e){var t=o.exec.apply(this,arguments),n,i;if(typeof e=="string"&&t){if(!a&&t.length>1&&c(t,"")>-1){i=RegExp(this.source,o.replace.call(l(this),"g",""));o.replace.call(e.slice(t.index),i,function(){for(var e=1;e<arguments.length-2;e++){if(arguments[e]===undefined)t[e]=undefined}})}if(this._xregexp&&this._xregexp.captureNames){for(var r=1;r<t.length;r++){n=this._xregexp.captureNames[r-1];if(n)t[n]=t[r]}}if(!s&&this.global&&!t[0].length&&this.lastIndex>t.index)this.lastIndex--}return t};if(!s){RegExp.prototype.test=function(e){var t=o.exec.call(this,e);if(t&&this.global&&!t[0].length&&this.lastIndex>t.index)this.lastIndex--;return!!t}}function l(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function c(e,t,n){if(Array.prototype.indexOf)return e.indexOf(t,n);for(var i=n||0;i<e.length;i++){if(e[i]===t)return i}return-1}});ace.define("ace/lib/es5-shim",["require","exports","module"],function(e,t,n){function o(){}if(!Function.prototype.bind){Function.prototype.bind=function e(t){var n=this;if(typeof n!="function"){throw new TypeError("Function.prototype.bind called on incompatible "+n)}var i=d.call(arguments,1);var r=function(){if(this instanceof r){var e=n.apply(this,i.concat(d.call(arguments)));if(Object(e)===e){return e}return this}else{return n.apply(t,i.concat(d.call(arguments)))}};if(n.prototype){o.prototype=n.prototype;r.prototype=new o;o.prototype=null}return r}}var i=Function.prototype.call;var r=Array.prototype;var s=Object.prototype;var d=r.slice;var c=i.bind(s.toString);var l=i.bind(s.hasOwnProperty);var a;var u;var h;var f;var p;if(p=l(s,"__defineGetter__")){a=i.bind(s.__defineGetter__);u=i.bind(s.__defineSetter__);h=i.bind(s.__lookupGetter__);f=i.bind(s.__lookupSetter__)}if([1,2].splice(0).length!=2){if(function(){function e(e){var t=new Array(e+2);t[0]=t[1]=0;return t}var t=[],n;t.splice.apply(t,e(20));t.splice.apply(t,e(26));n=t.length;t.splice(5,0,"XXX");n+1==t.length;if(n+1==t.length){return true}}()){var g=Array.prototype.splice;Array.prototype.splice=function(e,t){if(!arguments.length){return[]}else{return g.apply(this,[e===void 0?0:e,t===void 0?this.length-e:t].concat(d.call(arguments,2)))}}}else{Array.prototype.splice=function(e,t){var n=this.length;if(e>0){if(e>n)e=n}else if(e==void 0){e=0}else if(e<0){e=Math.max(n+e,0)}if(!(e+t<n))t=n-e;var i=this.slice(e,e+t);var r=d.call(arguments,2);var o=r.length;if(e===n){if(o){this.push.apply(this,r)}}else{var a=Math.min(t,n-e);var s=e+a;var l=s+o-a;var c=n-s;var u=n-a;if(l<s){for(var h=0;h<c;++h){this[l+h]=this[s+h]}}else if(l>s){for(h=c;h--;){this[l+h]=this[s+h]}}if(o&&e===u){this.length=u;this.push.apply(this,r)}else{this.length=u+o;for(h=0;h<o;++h){this[e+h]=r[h]}}}return i}}}if(!Array.isArray){Array.isArray=function e(t){return c(t)=="[object Array]"}}var m=Object("a"),v=m[0]!="a"||!(0 in m);if(!Array.prototype.forEach){Array.prototype.forEach=function e(t){var n=I(this),i=v&&c(this)=="[object String]"?this.split(""):n,r=arguments[1],o=-1,a=i.length>>>0;if(c(t)!="[object Function]"){throw new TypeError}while(++o<a){if(o in i){t.call(r,i[o],o,n)}}}}if(!Array.prototype.map){Array.prototype.map=function e(t){var n=I(this),i=v&&c(this)=="[object String]"?this.split(""):n,r=i.length>>>0,o=Array(r),a=arguments[1];if(c(t)!="[object Function]"){throw new TypeError(t+" is not a function")}for(var s=0;s<r;s++){if(s in i)o[s]=t.call(a,i[s],s,n)}return o}}if(!Array.prototype.filter){Array.prototype.filter=function e(t){var n=I(this),i=v&&c(this)=="[object String]"?this.split(""):n,r=i.length>>>0,o=[],a,s=arguments[1];if(c(t)!="[object Function]"){throw new TypeError(t+" is not a function")}for(var l=0;l<r;l++){if(l in i){a=i[l];if(t.call(s,a,l,n)){o.push(a)}}}return o}}if(!Array.prototype.every){Array.prototype.every=function e(t){var n=I(this),i=v&&c(this)=="[object String]"?this.split(""):n,r=i.length>>>0,o=arguments[1];if(c(t)!="[object Function]"){throw new TypeError(t+" is not a function")}for(var a=0;a<r;a++){if(a in i&&!t.call(o,i[a],a,n)){return false}}return true}}if(!Array.prototype.some){Array.prototype.some=function e(t){var n=I(this),i=v&&c(this)=="[object String]"?this.split(""):n,r=i.length>>>0,o=arguments[1];if(c(t)!="[object Function]"){throw new TypeError(t+" is not a function")}for(var a=0;a<r;a++){if(a in i&&t.call(o,i[a],a,n)){return true}}return false}}if(!Array.prototype.reduce){Array.prototype.reduce=function e(t){var n=I(this),i=v&&c(this)=="[object String]"?this.split(""):n,r=i.length>>>0;if(c(t)!="[object Function]"){throw new TypeError(t+" is not a function")}if(!r&&arguments.length==1){throw new TypeError("reduce of empty array with no initial value")}var o=0;var a;if(arguments.length>=2){a=arguments[1]}else{do{if(o in i){a=i[o++];break}if(++o>=r){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;o<r;o++){if(o in i){a=t.call(void 0,a,i[o],o,n)}}return a}}if(!Array.prototype.reduceRight){Array.prototype.reduceRight=function e(t){var n=I(this),i=v&&c(this)=="[object String]"?this.split(""):n,r=i.length>>>0;if(c(t)!="[object Function]"){throw new TypeError(t+" is not a function")}if(!r&&arguments.length==1){throw new TypeError("reduceRight of empty array with no initial value")}var o,a=r-1;if(arguments.length>=2){o=arguments[1]}else{do{if(a in i){o=i[a--];break}if(--a<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}do{if(a in this){o=t.call(void 0,o,i[a],a,n)}}while(a--);return o}}if(!Array.prototype.indexOf||[0,1].indexOf(1,2)!=-1){Array.prototype.indexOf=function e(t){var n=v&&c(this)=="[object String]"?this.split(""):I(this),i=n.length>>>0;if(!i){return-1}var r=0;if(arguments.length>1){r=O(arguments[1])}r=r>=0?r:Math.max(0,i+r);for(;r<i;r++){if(r in n&&n[r]===t){return r}}return-1}}if(!Array.prototype.lastIndexOf||[0,1].lastIndexOf(0,-3)!=-1){Array.prototype.lastIndexOf=function e(t){var n=v&&c(this)=="[object String]"?this.split(""):I(this),i=n.length>>>0;if(!i){return-1}var r=i-1;if(arguments.length>1){r=Math.min(r,O(arguments[1]))}r=r>=0?r:i-Math.abs(r);for(;r>=0;r--){if(r in n&&t===n[r]){return r}}return-1}}if(!Object.getPrototypeOf){Object.getPrototypeOf=function e(t){return t.__proto__||(t.constructor?t.constructor.prototype:s)}}if(!Object.getOwnPropertyDescriptor){var b="Object.getOwnPropertyDescriptor called on a "+"non-object: ";Object.getOwnPropertyDescriptor=function e(t,n){if(typeof t!="object"&&typeof t!="function"||t===null)throw new TypeError(b+t);if(!l(t,n))return;var i,r,o;i={enumerable:true,configurable:true};if(p){var a=t.__proto__;t.__proto__=s;var r=h(t,n);var o=f(t,n);t.__proto__=a;if(r||o){if(r)i.get=r;if(o)i.set=o;return i}}i.value=t[n];return i}}if(!Object.getOwnPropertyNames){Object.getOwnPropertyNames=function e(t){return Object.keys(t)}}if(!Object.create){var w;if(Object.prototype.__proto__===null){w=function(){return{__proto__:null}}}else{w=function(){var e={};for(var t in e)e[t]=null;e.constructor=e.hasOwnProperty=e.propertyIsEnumerable=e.isPrototypeOf=e.toLocaleString=e.toString=e.valueOf=e.__proto__=null;return e}}Object.create=function e(t,n){var i;if(t===null){i=w()}else{if(typeof t!="object")throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var r=function(){};r.prototype=t;i=new r;i.__proto__=t}if(n!==void 0)Object.defineProperties(i,n);return i}}function y(e){try{Object.defineProperty(e,"sentinel",{});return"sentinel"in e}catch(e){}}if(Object.defineProperty){var C=y({});var E=typeof document=="undefined"||y(document.createElement("div"));if(!C||!E){var A=Object.defineProperty}}if(!Object.defineProperty||A){var x="Property description must be an object: ";var S="Object.defineProperty called on non-object: ";var k="getters & setters can not be defined "+"on this javascript engine";Object.defineProperty=function e(t,n,i){if(typeof t!="object"&&typeof t!="function"||t===null)throw new TypeError(S+t);if(typeof i!="object"&&typeof i!="function"||i===null)throw new TypeError(x+i);if(A){try{return A.call(Object,t,n,i)}catch(e){}}if(l(i,"value")){if(p&&(h(t,n)||f(t,n))){var r=t.__proto__;t.__proto__=s;delete t[n];t[n]=i.value;t.__proto__=r}else{t[n]=i.value}}else{if(!p)throw new TypeError(k);if(l(i,"get"))a(t,n,i.get);if(l(i,"set"))u(t,n,i.set)}return t}}if(!Object.defineProperties){Object.defineProperties=function e(t,n){for(var i in n){if(l(n,i))Object.defineProperty(t,i,n[i])}return t}}if(!Object.seal){Object.seal=function e(t){return t}}if(!Object.freeze){Object.freeze=function e(t){return t}}try{Object.freeze(function(){})}catch(e){Object.freeze=function e(n){return function e(t){if(typeof t=="function"){return t}else{return n(t)}}}(Object.freeze)}if(!Object.preventExtensions){Object.preventExtensions=function e(t){return t}}if(!Object.isSealed){Object.isSealed=function e(t){return false}}if(!Object.isFrozen){Object.isFrozen=function e(t){return false}}if(!Object.isExtensible){Object.isExtensible=function e(t){if(Object(t)===t){throw new TypeError}var n="";while(l(t,n)){n+="?"}t[n]=true;var i=l(t,n);delete t[n];return i}}if(!Object.keys){var F=true,T=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],D=T.length;for(var R in{toString:null}){F=false}Object.keys=function e(t){if(typeof t!="object"&&typeof t!="function"||t===null){throw new TypeError("Object.keys called on a non-object")}var e=[];for(var n in t){if(l(t,n)){e.push(n)}}if(F){for(var i=0,r=D;i<r;i++){var o=T[i];if(l(t,o)){e.push(o)}}}return e}}if(!Date.now){Date.now=function e(){return(new Date).getTime()}}var $="\t\n\v\f\r   ᠎    "+"         　\u2028"+"\u2029\ufeff";if(!String.prototype.trim||$.trim()){$="["+$+"]";var L=new RegExp("^"+$+$+"*"),B=new RegExp($+$+"*$");String.prototype.trim=function e(){return String(this).replace(L,"").replace(B,"")}}function O(e){e=+e;if(e!==e){e=0}else if(e!==0&&e!==1/0&&e!==-(1/0)){e=(e>0||-1)*Math.floor(Math.abs(e))}return e}function M(e){var t=typeof e;return e===null||t==="undefined"||t==="boolean"||t==="number"||t==="string"}function P(e){var t,n,i;if(M(e)){return e}n=e.valueOf;if(typeof n==="function"){t=n.call(e);if(M(t)){return t}}i=e.toString;if(typeof i==="function"){t=i.call(e);if(M(t)){return t}}throw new TypeError}var I=function(e){if(e==null){throw new TypeError("can't convert "+e+" to object")}return Object(e)}});ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(e,t,n){"use strict";e("./regexp");e("./es5-shim")});ace.define("ace/lib/dom",["require","exports","module"],function(e,s,t){"use strict";if(typeof document=="undefined")return;var o="http://www.w3.org/1999/xhtml";s.getDocumentHead=function(e){if(!e)e=document;return e.head||e.getElementsByTagName("head")[0]||e.documentElement};s.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||o,e):document.createElement(e)};s.hasCssClass=function(e,t){var n=e.className.split(/\s+/g);return n.indexOf(t)!==-1};s.addCssClass=function(e,t){if(!s.hasCssClass(e,t)){e.className+=" "+t}};s.removeCssClass=function(e,t){var n=e.className.split(/\s+/g);while(true){var i=n.indexOf(t);if(i==-1){break}n.splice(i,1)}e.className=n.join(" ")};s.toggleCssClass=function(e,t){var n=e.className.split(/\s+/g),i=true;while(true){var r=n.indexOf(t);if(r==-1){break}i=false;n.splice(r,1)}if(i)n.push(t);e.className=n.join(" ");return i};s.setCssClass=function(e,t,n){if(n){s.addCssClass(e,t)}else{s.removeCssClass(e,t)}};s.hasCssString=function(e,t){var n=0,i;t=t||document;if(t.createStyleSheet&&(i=t.styleSheets)){while(n<i.length)if(i[n++].owningElement.id===e)return true}else if(i=t.getElementsByTagName("style")){while(n<i.length)if(i[n++].id===e)return true}return false};s.importCssString=function e(t,n,i){i=i||document;if(n&&s.hasCssString(n,i))return null;var r;if(i.createStyleSheet){r=i.createStyleSheet();r.cssText=t;if(n)r.owningElement.id=n}else{r=i.createElementNS?i.createElementNS(o,"style"):i.createElement("style");r.appendChild(i.createTextNode(t));if(n)r.id=n;s.getDocumentHead(i).appendChild(r)}};s.importCssStylsheet=function(e,t){if(t.createStyleSheet){t.createStyleSheet(e)}else{var n=s.createElement("link");n.rel="stylesheet";n.href=e;s.getDocumentHead(t).appendChild(n)}};s.getInnerWidth=function(e){return parseInt(s.computedStyle(e,"paddingLeft"),10)+parseInt(s.computedStyle(e,"paddingRight"),10)+e.clientWidth};s.getInnerHeight=function(e){return parseInt(s.computedStyle(e,"paddingTop"),10)+parseInt(s.computedStyle(e,"paddingBottom"),10)+e.clientHeight};if(window.pageYOffset!==undefined){s.getPageScrollTop=function(){return window.pageYOffset};s.getPageScrollLeft=function(){return window.pageXOffset}}else{s.getPageScrollTop=function(){return document.body.scrollTop};s.getPageScrollLeft=function(){return document.body.scrollLeft}}if(window.getComputedStyle)s.computedStyle=function(e,t){if(t)return(window.getComputedStyle(e,"")||{})[t]||"";return window.getComputedStyle(e,"")||{}};else s.computedStyle=function(e,t){if(t)return e.currentStyle[t];return e.currentStyle};s.scrollbarWidth=function(e){var t=s.createElement("ace_inner");t.style.width="100%";t.style.minWidth="0px";t.style.height="200px";t.style.display="block";var n=s.createElement("ace_outer");var i=n.style;i.position="absolute";i.left="-10000px";i.overflow="hidden";i.width="200px";i.minWidth="0px";i.height="150px";i.display="block";n.appendChild(t);var r=e.documentElement;r.appendChild(n);var o=t.offsetWidth;i.overflow="scroll";var a=t.offsetWidth;if(o==a){a=n.clientWidth}r.removeChild(n);return o-a};s.setInnerHtml=function(e,t){var n=e.cloneNode(false);n.innerHTML=t;e.parentNode.replaceChild(n,e);return n};if("textContent"in document.documentElement){s.setInnerText=function(e,t){e.textContent=t};s.getInnerText=function(e){return e.textContent}}else{s.setInnerText=function(e,t){e.innerText=t};s.getInnerText=function(e){return e.innerText}}s.getParentWindow=function(e){return e.defaultView||e.parentWindow}});ace.define("ace/lib/oop",["require","exports","module"],function(e,n,t){"use strict";n.inherits=function(e,t){e.super_=t;e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}})};n.mixin=function(e,t){for(var n in t){e[n]=t[n]}return e};n.implement=function(e,t){n.mixin(e,t)}});ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,n){"use strict";var i=e("./oop");var r=function(){var n={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}};var e,t;for(t in n.FUNCTION_KEYS){e=n.FUNCTION_KEYS[t].toLowerCase();n[e]=parseInt(t,10)}for(t in n.PRINTABLE_KEYS){e=n.PRINTABLE_KEYS[t].toLowerCase();n[e]=parseInt(t,10)}i.mixin(n,n.MODIFIER_KEYS);i.mixin(n,n.PRINTABLE_KEYS);i.mixin(n,n.FUNCTION_KEYS);n.enter=n["return"];n.escape=n.esc;n.del=n["delete"];n[173]="-";(function(){var e=["cmd","ctrl","alt","shift"];for(var t=Math.pow(2,e.length);t--;){n.KEY_MODS[t]=e.filter(function(e){return t&n.KEY_MODS[e]}).join("-")+"-"}})();return n}();i.mixin(t,r);t.keyCodeToString=function(e){var t=r[e];if(typeof t!="string")t=String.fromCharCode(e);return t.toLowerCase()}});ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"};t.getOS=function(){if(t.isMac){return t.OS.MAC}else if(t.isLinux){return t.OS.LINUX}else{return t.OS.WINDOWS}};if(typeof navigator!="object")return;var i=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase();var r=navigator.userAgent;t.isWin=i=="win";t.isMac=i=="mac";t.isLinux=i=="linux";t.isIE=navigator.appName=="Microsoft Internet Explorer"||navigator.appName.indexOf("MSAppHost")>=0?parseFloat((r.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((r.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]);t.isOldIE=t.isIE&&t.isIE<9;t.isGecko=t.isMozilla=(window.Controllers||window.controllers)&&window.navigator.product==="Gecko";t.isOldGecko=t.isGecko&&parseInt((r.match(/rv\:(\d+)/)||[])[1],10)<4;t.isOpera=window.opera&&Object.prototype.toString.call(window.opera)=="[object Opera]";t.isWebKit=parseFloat(r.split("WebKit/")[1])||undefined;t.isChrome=parseFloat(r.split(" Chrome/")[1])||undefined;t.isAIR=r.indexOf("AdobeAIR")>=0;t.isIPad=r.indexOf("iPad")>=0;t.isTouchPad=r.indexOf("TouchPad")>=0;t.isChromeOS=r.indexOf(" CrOS ")>=0});ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,u,t){"use strict";var a=e("./keys");var h=e("./useragent");u.addListener=function(e,t,n){if(e.addEventListener){return e.addEventListener(t,n,false)}if(e.attachEvent){var i=function(){n.call(e,window.event)};n._wrapper=i;e.attachEvent("on"+t,i)}};u.removeListener=function(e,t,n){if(e.removeEventListener){return e.removeEventListener(t,n,false)}if(e.detachEvent){e.detachEvent("on"+t,n._wrapper||n)}};u.stopEvent=function(e){u.stopPropagation(e);u.preventDefault(e);return false};u.stopPropagation=function(e){if(e.stopPropagation)e.stopPropagation();else e.cancelBubble=true};u.preventDefault=function(e){if(e.preventDefault)e.preventDefault();else e.returnValue=false};u.getButton=function(e){if(e.type=="dblclick")return 0;if(e.type=="contextmenu"||h.isMac&&(e.ctrlKey&&!e.altKey&&!e.shiftKey))return 2;if(e.preventDefault){return e.button}else{return{1:0,2:2,4:1}[e.button]}};u.capture=function(e,t,n){function i(e){t&&t(e);n&&n(e);u.removeListener(document,"mousemove",t,true);u.removeListener(document,"mouseup",i,true);u.removeListener(document,"dragstart",i,true)}u.addListener(document,"mousemove",t,true);u.addListener(document,"mouseup",i,true);u.addListener(document,"dragstart",i,true);return i};u.addMouseWheelListener=function(e,n){if("onmousewheel"in e){u.addListener(e,"mousewheel",function(e){var t=8;if(e.wheelDeltaX!==undefined){e.wheelX=-e.wheelDeltaX/t;e.wheelY=-e.wheelDeltaY/t}else{e.wheelX=0;e.wheelY=-e.wheelDelta/t}n(e)})}else if("onwheel"in e){u.addListener(e,"wheel",function(e){var t=.35;switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=e.deltaX*t||0;e.wheelY=e.deltaY*t||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=(e.deltaX||0)*5;e.wheelY=(e.deltaY||0)*5;break}n(e)})}else{u.addListener(e,"DOMMouseScroll",function(e){if(e.axis&&e.axis==e.HORIZONTAL_AXIS){e.wheelX=(e.detail||0)*5;e.wheelY=0}else{e.wheelX=0;e.wheelY=(e.detail||0)*5}n(e)})}};u.addMultiMouseDownListener=function(e,n,i,r){var o=0;var a,s,l;var c={2:"dblclick",3:"tripleclick",4:"quadclick"};u.addListener(e,"mousedown",function(e){if(u.getButton(e)!==0){o=0}else if(e.detail>1){o++;if(o>4)o=1}else{o=1}if(h.isIE){var t=Math.abs(e.clientX-a)>5||Math.abs(e.clientY-s)>5;if(!l||t)o=1;if(l)clearTimeout(l);l=setTimeout(function(){l=null},n[o-1]||600);if(o==1){a=e.clientX;s=e.clientY}}i[r]("mousedown",e);if(o>4)o=0;else if(o>1)return i[r](c[o],e)});if(h.isOldIE){u.addListener(e,"dblclick",function(e){o=2;if(l)clearTimeout(l);l=setTimeout(function(){l=null},n[o-1]||600);i[r]("mousedown",e);i[r](c[o],e)})}};var s=h.isMac&&h.isOpera&&!("KeyboardEvent"in window)?function(e){return 0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)}:function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)};u.getModifierString=function(e){return a.KEY_MODS[s(e)]};function o(e,t,n){var i=s(t);if(!h.isMac&&l){if(l[91]||l[92])i|=8;if(l.altGr){if((3&i)!=3)l.altGr=0;else return}if(n===18||n===17){var r=t.location||t.keyLocation;if(n===17&&r===1){c=t.timeStamp}else if(n===18&&i===3&&r===2){var o=-c;c=t.timeStamp;o+=c;if(o<3)l.altGr=true}}}if(n in a.MODIFIER_KEYS){switch(a.MODIFIER_KEYS[n]){case"Alt":i=2;break;case"Shift":i=4;break;case"Ctrl":i=1;break;default:i=8;break}n=-1}if(i&8&&(n===91||n===93)){n=-1}if(!i&&n===13){if(t.location||t.keyLocation===3){e(t,i,-n);if(t.defaultPrevented)return}}if(h.isChromeOS&&i&8){e(t,i,n);if(t.defaultPrevented)return;else i&=~8}if(!i&&!(n in a.FUNCTION_KEYS)&&!(n in a.PRINTABLE_KEYS)){return false}return e(t,i,n)}var l=null;var c=0;u.addCommandKeyListener=function(e,n){var t=u.addListener;if(h.isOldGecko||h.isOpera&&!("KeyboardEvent"in window)){var i=null;t(e,"keydown",function(e){i=e.keyCode});t(e,"keypress",function(e){return o(n,e,i)})}else{var r=null;t(e,"keydown",function(e){l[e.keyCode]=true;var t=o(n,e,e.keyCode);r=e.defaultPrevented;return t});t(e,"keypress",function(e){if(r&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)){u.stopEvent(e);r=null}});t(e,"keyup",function(e){l[e.keyCode]=null});if(!l){l=Object.create(null);t(window,"focus",function(e){l=Object.create(null)})}}};if(window.postMessage&&!h.isOldIE){var d=1;u.nextTick=function(n,i){i=i||window;var r="zero-timeout-message-"+d;u.addListener(i,"message",function e(t){if(t.data==r){u.stopPropagation(t);u.removeListener(i,"message",e);n()}});i.postMessage(r,"*")}}u.nextFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame;if(u.nextFrame)u.nextFrame=u.nextFrame.bind(window);else u.nextFrame=function(e){setTimeout(e,17)}});ace.define("ace/lib/lang",["require","exports","module"],function(e,r,t){"use strict";r.last=function(e){return e[e.length-1]};r.stringReverse=function(e){return e.split("").reverse().join("")};r.stringRepeat=function(e,t){var n="";while(t>0){if(t&1)n+=e;if(t>>=1)e+=e}return n};var n=/^\s\s*/;var i=/\s\s*$/;r.stringTrimLeft=function(e){return e.replace(n,"")};r.stringTrimRight=function(e){return e.replace(i,"")};r.copyObject=function(e){var t={};for(var n in e){t[n]=e[n]}return t};r.copyArray=function(e){var t=[];for(var n=0,i=e.length;n<i;n++){if(e[n]&&typeof e[n]=="object")t[n]=this.copyObject(e[n]);else t[n]=e[n]}return t};r.deepCopy=function(e){if(typeof e!=="object"||!e)return e;var t=e.constructor;if(t===RegExp)return e;var n=t();for(var i in e){if(typeof e[i]==="object"){n[i]=r.deepCopy(e[i])}else{n[i]=e[i]}}return n};r.arrayToMap=function(e){var t={};for(var n=0;n<e.length;n++){t[e[n]]=1}return t};r.createMap=function(e){var t=Object.create(null);for(var n in e){t[n]=e[n]}return t};r.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++){if(t===e[n]){e.splice(n,1)}}};r.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")};r.escapeHTML=function(e){return e.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")};r.getMatchOffsets=function(e,t){var n=[];e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})});return n};r.deferredCall=function(e){var t=null;var n=function(){t=null;e()};var i=function(e){i.cancel();t=setTimeout(n,e||0);return i};i.schedule=i;i.call=function(){this.cancel();e();return i};i.cancel=function(){clearTimeout(t);t=null;return i};i.isPending=function(){return t};return i};r.delayedCall=function(e,t){var n=null;var i=function(){n=null;e()};var r=function(e){if(n==null)n=setTimeout(i,e||t)};r.delay=function(e){n&&clearTimeout(n);n=setTimeout(i,e||t)};r.schedule=r;r.call=function(){this.cancel();e()};r.cancel=function(){n&&clearTimeout(n);n=null};r.isPending=function(){return n};return r}});ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"],function(e,t,n){"use strict";var M=e("../lib/event");var P=e("../lib/useragent");var I=e("../lib/dom");var N=e("../lib/lang");var H=P.isChrome<18;var j=P.isIE;var i=function(e,s){var l=I.createElement("textarea");l.className="ace_text-input";if(P.isTouchPad)l.setAttribute("x-palm-disable-auto-cap",true);l.wrap="off";l.autocorrect="off";l.autocapitalize="off";l.spellcheck=false;l.style.opacity="0";e.insertBefore(l,e.firstChild);var n="";var i=false;var r=false;var o=false;var c="";var t=true;try{var a=document.activeElement===l}catch(e){}M.addListener(l,"blur",function(){s.onBlur();a=false});M.addListener(l,"focus",function(){a=true;s.onFocus();d()});this.focus=function(){l.focus()};this.blur=function(){l.blur()};this.isFocused=function(){return a};var u=N.delayedCall(function(){a&&d(t)});var h=N.delayedCall(function(){if(!o){l.value=n;a&&d()}});function d(e){if(o)return;if(y){t=0;n=e?0:l.value.length-1}else{var t=e?2:1;var n=2}try{l.setSelectionRange(t,n)}catch(e){}}function f(){if(o)return;l.value=n;if(P.isWebKit)h.schedule()}P.isWebKit||s.addEventListener("changeSelection",function(){if(s.selection.isEmpty()!=t){t=!t;u.schedule()}});f();if(a)s.onFocus();var p=function(e){return e.selectionStart===0&&e.selectionEnd===e.value.length};if(!l.setSelectionRange&&l.createTextRange){l.setSelectionRange=function(e,t){var n=this.createTextRange();n.collapse(true);n.moveStart("character",e);n.moveEnd("character",t);n.select()};p=function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}if(!t||t.parentElement()!=e)return false;return t.text==e.value}}if(P.isOldIE){var g=false;var m=function(e){if(g)return;var t=l.value;if(o||!t||t==n)return;if(e&&t==n[0])return v.schedule();E(t);g=true;f();g=false};var v=N.delayedCall(m);M.addListener(l,"propertychange",m);var b={13:1,27:1};M.addListener(l,"keyup",function(e){if(o&&(!l.value||b[e.keyCode]))setTimeout($,0);if((l.value.charCodeAt(0)||0)<129){return v.call()}o?R():D()});M.addListener(l,"keydown",function(e){v.schedule(50)})}var w=function(e){if(i){i=false}else if(p(l)){s.selectAll();d()}else if(y){d(s.selection.isEmpty())}};var y=null;this.setInputHandler=function(e){y=e};this.getInputHandler=function(){return y};var C=false;var E=function(e){if(y){e=y(e);y=null}if(r){d();if(e)s.onPaste(e);r=false}else if(e==n.charAt(0)){if(C)s.execCommand("del",{source:"ace"});else s.execCommand("backspace",{source:"ace"})}else{if(e.substring(0,2)==n)e=e.substr(2);else if(e.charAt(0)==n.charAt(0))e=e.substr(1);else if(e.charAt(e.length-1)==n.charAt(0))e=e.slice(0,-1);if(e.charAt(e.length-1)==n.charAt(0))e=e.slice(0,-1);if(e)s.onTextInput(e)}if(C)C=false};var A=function(e){if(o)return;var t=l.value;E(t);f()};var x=function(e,t){var n=e.clipboardData||window.clipboardData;if(!n||H)return;var i=j?"Text":"text/plain";if(t){return n.setData(i,t)!==false}else{return n.getData(i)}};var S=function(e,t){var n=s.getCopyText();if(!n)return M.preventDefault(e);if(x(e,n)){t?s.onCut():s.onCopy();M.preventDefault(e)}else{i=true;l.value=n;l.select();setTimeout(function(){i=false;f();d();t?s.onCut():s.onCopy()})}};var k=function(e){S(e,true)};var F=function(e){S(e,false)};var T=function(e){var t=x(e);if(typeof t=="string"){if(t)s.onPaste(t);if(P.isIE)setTimeout(d);M.preventDefault(e)}else{l.value="";r=true}};M.addCommandKeyListener(l,s.onCommandKey.bind(s));M.addListener(l,"select",w);M.addListener(l,"input",A);M.addListener(l,"cut",k);M.addListener(l,"copy",F);M.addListener(l,"paste",T);if(!("oncut"in l)||!("oncopy"in l)||!("onpaste"in l)){M.addListener(e,"keydown",function(e){if(P.isMac&&!e.metaKey||!e.ctrlKey)return;switch(e.keyCode){case 67:F(e);break;case 86:T(e);break;case 88:k(e);break}})}var D=function(e){if(o||!s.onCompositionStart)return;o={};s.onCompositionStart();setTimeout(R,0);s.on("mousedown",$);if(!s.selection.isEmpty()){s.insert("");s.session.markUndoGroup();s.selection.clearSelection()}s.session.markUndoGroup()};var R=function(){if(!o||!s.onCompositionUpdate)return;var e=l.value.replace(/\x01/g,"");if(o.lastValue===e)return;s.onCompositionUpdate(e);if(o.lastValue)s.undo();o.lastValue=e;if(o.lastValue){var t=s.selection.getRange();s.insert(o.lastValue);s.session.markUndoGroup();o.range=s.selection.getRange();s.selection.setRange(t);s.selection.clearSelection()}};var $=function(e){if(!s.onCompositionEnd)return;var n=o;o=false;var i=setTimeout(function(){i=null;var e=l.value.replace(/\x01/g,"");if(o)return;else if(e==n.lastValue)f();else if(!n.lastValue&&e){f();E(e)}});y=function e(t){if(i)clearTimeout(i);t=t.replace(/\x01/g,"");if(t==n.lastValue)return"";if(n.lastValue&&i)s.undo();return t};s.onCompositionEnd();s.removeListener("mousedown",$);if(e.type=="compositionend"&&n.range){s.selection.setRange(n.range)}};var L=N.delayedCall(R,50);M.addListener(l,"compositionstart",D);if(P.isGecko){M.addListener(l,"text",function(){L.schedule()})}else{M.addListener(l,"keyup",function(){L.schedule()});M.addListener(l,"keydown",function(){L.schedule()})}M.addListener(l,"compositionend",$);this.getElement=function(){return l};this.setReadOnly=function(e){l.readOnly=e};this.onContextMenu=function(e){C=true;if(!c)c=l.style.cssText;l.style.cssText="z-index:100000;"+(P.isIE?"opacity:0.1;":"");d(s.selection.isEmpty());s._emit("nativecontextmenu",{target:s,domEvent:e});var t=s.container.getBoundingClientRect();var n=I.computedStyle(s.container);var i=t.top+(parseInt(n.borderTopWidth)||0);var r=t.left+(parseInt(t.borderLeftWidth)||0);var o=t.bottom-i-l.clientHeight;var a=function(e){l.style.left=e.clientX-r-2+"px";l.style.top=Math.min(e.clientY-i-2,o)+"px"};a(e);if(e.type!="mousedown")return;if(s.renderer.$keepTextAreaAtCursor)s.renderer.$keepTextAreaAtCursor=null;if(P.isWin)M.capture(s.container,a,B)};this.onContextMenuClose=B;function B(){setTimeout(function(){if(c){l.style.cssText=c;c=""}if(s.renderer.$keepTextAreaAtCursor==null){s.renderer.$keepTextAreaAtCursor=true;s.renderer.$moveTextAreaToCursor()}},0)}if(!P.isGecko||P.isMac){var O=function(e){s.textInput.onContextMenu(e);B()};M.addListener(s.renderer.scroller,"contextmenu",O);M.addListener(l,"contextmenu",O)}};t.TextInput=i});ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var i=e("../lib/dom");var r=e("../lib/event");var o=e("../lib/useragent");var a=0;function s(t){t.$clickSelection=null;var e=t.editor;e.setDefaultHandler("mousedown",this.onMouseDown.bind(t));e.setDefaultHandler("dblclick",this.onDoubleClick.bind(t));e.setDefaultHandler("tripleclick",this.onTripleClick.bind(t));e.setDefaultHandler("quadclick",this.onQuadClick.bind(t));e.setDefaultHandler("mousewheel",this.onMouseWheel.bind(t));var n=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];n.forEach(function(e){t[e]=this[e]},this);t.selectByLines=this.extendSelectionBy.bind(t,"getLineRange");t.selectByWords=this.extendSelectionBy.bind(t,"getWordRange")}(function(){this.onMouseDown=function(e){var t=e.inSelection();var n=e.getDocumentPosition();this.mousedownEvent=e;var i=this.editor;var r=e.getButton();if(r!==0){var o=i.getSelectionRange();var a=o.isEmpty();if(a){i.selection.moveToPosition(n)}i.textInput.onContextMenu(e.domEvent);return}if(t&&!i.isFocused()){i.focus();if(this.$focusTimout&&!this.$clickSelection&&!i.inMultiSelectMode){this.mousedownEvent.time=Date.now();this.setState("focusWait");this.captureMouse(e);return}}this.captureMouse(e);if(!t||this.$clickSelection||e.getShiftKey()||i.inMultiSelectMode){this.startSelect(n)}else if(t){this.mousedownEvent.time=Date.now();this.startSelect(n)}return e.preventDefault()};this.startSelect=function(e){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var t=this.editor;var n=this.mousedownEvent.getShiftKey();setTimeout(function(){if(n){t.selection.selectToPosition(e)}else if(!this.$clickSelection){t.selection.moveToPosition(e)}this.select()}.bind(this),0);if(t.renderer.scroller.setCapture){t.renderer.scroller.setCapture()}t.setStyle("ace_selecting");this.setState("select")};this.select=function(){var e,t=this.editor;var n=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var i=this.$clickSelection.comparePoint(n);if(i==-1){e=this.$clickSelection.end}else if(i==1){e=this.$clickSelection.start}else{var r=c(this.$clickSelection,n);n=r.cursor;e=r.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n);t.renderer.scrollCursorIntoView()};this.extendSelectionBy=function(e){var t,n=this.editor;var i=n.renderer.screenToTextCoordinates(this.x,this.y);var r=n.selection[e](i.row,i.column);if(this.$clickSelection){var o=this.$clickSelection.comparePoint(r.start);var a=this.$clickSelection.comparePoint(r.end);if(o==-1&&a<=0){t=this.$clickSelection.end;if(r.end.row!=i.row||r.end.column!=i.column)i=r.start}else if(a==1&&o>=0){t=this.$clickSelection.start;if(r.start.row!=i.row||r.start.column!=i.column)i=r.end}else if(o==-1&&a==1){i=r.end;t=r.start}else{var s=c(this.$clickSelection,i);i=s.cursor;t=s.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(i);n.renderer.scrollCursorIntoView()};this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null;this.editor.unsetStyle("ace_selecting");if(this.editor.renderer.scroller.releaseCapture){this.editor.renderer.scroller.releaseCapture()}};this.focusWait=function(){var e=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);var t=Date.now();if(e>a||t-this.mousedownEvent.time>this.$focusTimout)this.startSelect(this.mousedownEvent.getDocumentPosition())};this.onDoubleClick=function(e){var t=e.getDocumentPosition();var n=this.editor;var i=n.session;var r=i.getBracketRange(t);if(r){if(r.isEmpty()){r.start.column--;r.end.column++}this.setState("select")}else{r=n.selection.getWordRange(t.row,t.column);this.setState("selectByWords")}this.$clickSelection=r};this.onTripleClick=function(e){var t=e.getDocumentPosition();var n=this.editor;this.setState("selectByLines");var i=n.getSelectionRange();if(i.isMultiLine()&&i.contains(t.row,t.column)){this.$clickSelection=n.selection.getLineRange(i.start.row);this.$clickSelection.end=n.selection.getLineRange(i.end.row).end}else{this.$clickSelection=n.selection.getLineRange(t.row)}};this.onQuadClick=function(e){var t=this.editor;t.selectAll();this.$clickSelection=t.getSelectionRange();this.setState("selectAll")};this.onMouseWheel=function(e){if(e.getAccelKey())return;if(e.getShiftKey()&&e.wheelY&&!e.wheelX){e.wheelX=e.wheelY;e.wheelY=0}var t=e.domEvent.timeStamp;var n=t-(this.$lastScrollTime||0);var i=this.editor;var r=i.renderer.isScrollableBy(e.wheelX*e.speed,e.wheelY*e.speed);if(r||n<200){this.$lastScrollTime=t;i.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed);return e.stop()}}}).call(s.prototype);t.DefaultHandlers=s;function l(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))}function c(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else if(e.start.row==e.end.row-1&&!e.start.column&&!e.end.column)var n=t.column-4;else var n=2*t.row-e.start.row-e.end.row;if(n<0)return{cursor:e.start,anchor:e.end};else return{cursor:e.end,anchor:e.start}}});ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(e,t,n){"use strict";var i=e("./lib/oop");var r=e("./lib/dom");function o(e){this.isOpen=false;this.$element=null;this.$parentNode=e}(function(){this.$init=function(){this.$element=r.createElement("div");this.$element.className="ace_tooltip";this.$element.style.display="none";this.$parentNode.appendChild(this.$element);return this.$element};this.getElement=function(){return this.$element||this.$init()};this.setText=function(e){r.setInnerText(this.getElement(),e)};this.setHtml=function(e){this.getElement().innerHTML=e};this.setPosition=function(e,t){this.getElement().style.left=e+"px";this.getElement().style.top=t+"px"};this.setClassName=function(e){r.addCssClass(this.getElement(),e)};this.show=function(e,t,n){if(e!=null)this.setText(e);if(t!=null&&n!=null)this.setPosition(t,n);if(!this.isOpen){this.getElement().style.display="block";this.isOpen=true}};this.hide=function(){if(this.isOpen){this.getElement().style.display="none";this.isOpen=false}};this.getHeight=function(){return this.getElement().offsetHeight};this.getWidth=function(){return this.getElement().offsetWidth}}).call(o.prototype);t.Tooltip=o});ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(e,t,n){"use strict";var r=e("../lib/dom");var i=e("../lib/oop");var o=e("../lib/event");var a=e("../tooltip").Tooltip;function s(l){var c=l.editor;var u=c.renderer.$gutterLayer;var h=new m(c.container);l.editor.setDefaultHandler("guttermousedown",function(e){if(!c.isFocused()||e.getButton()!=0)return;var t=u.getRegion(e);if(t=="foldWidgets")return;var n=e.getDocumentPosition().row;var i=c.session.selection;if(e.getShiftKey())i.selectTo(n,0);else{if(e.domEvent.detail==2){c.selectAll();return e.preventDefault()}l.$clickSelection=c.selection.getLineRange(n)}l.setState("selectByLines");l.captureMouse(e);return e.preventDefault()});var n,d,f;function i(){var e=d.getDocumentPosition().row;var t=u.$annotations[e];if(!t)return p();var n=c.session.getLength();if(e==n){var i=c.renderer.pixelToScreenCoordinates(0,d.y).row;var r=d.$pos;if(i>c.session.documentToScreenRow(r.row,r.column))return p()}if(f==t)return;f=t.text.join("<br/>");h.setHtml(f);h.show();c.on("mousewheel",p);if(l.$tooltipFollowsMouse){g(d)}else{var o=u.$cells[c.session.documentToScreenRow(e,0)].element;var a=o.getBoundingClientRect();var s=h.getElement().style;s.left=a.right+"px";s.top=a.bottom+"px"}}function p(){if(n)n=clearTimeout(n);if(f){h.hide();f=null;c.removeEventListener("mousewheel",p)}}function g(e){h.setPosition(e.x,e.y)}l.editor.setDefaultHandler("guttermousemove",function(e){var t=e.domEvent.target||e.domEvent.srcElement;if(r.hasCssClass(t,"ace_fold-widget"))return p();if(f&&l.$tooltipFollowsMouse)g(e);d=e;if(n)return;n=setTimeout(function(){n=null;if(d&&!l.isMousePressed)i();else p()},50)});o.addListener(c.renderer.$gutter,"mouseout",function(e){d=null;if(!f||n)return;n=setTimeout(function(){n=null;p()},50)});c.on("changeSession",p)}function m(e){a.call(this,e)}i.inherits(m,a);(function(){this.setPosition=function(e,t){var n=window.innerWidth||document.documentElement.clientWidth;var i=window.innerHeight||document.documentElement.clientHeight;var r=this.getWidth();var o=this.getHeight();e+=15;t+=15;if(e+r>n){e-=e+r-n}if(t+o>i){t-=20+o}a.prototype.setPosition.call(this,e,t)}}).call(m.prototype);t.GutterHandler=s});ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var i=e("../lib/event");var r=e("../lib/useragent");var o=t.MouseEvent=function(e,t){this.domEvent=e;this.editor=t;this.x=this.clientX=e.clientX;this.y=this.clientY=e.clientY;this.$pos=null;this.$inSelection=null;this.propagationStopped=false;this.defaultPrevented=false};(function(){this.stopPropagation=function(){i.stopPropagation(this.domEvent);this.propagationStopped=true};this.preventDefault=function(){i.preventDefault(this.domEvent);this.defaultPrevented=true};this.stop=function(){this.stopPropagation();this.preventDefault()};this.getDocumentPosition=function(){if(this.$pos)return this.$pos;this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY);return this.$pos};this.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var e=this.editor;var t=e.getSelectionRange();if(t.isEmpty())this.$inSelection=false;else{var n=this.getDocumentPosition();this.$inSelection=t.contains(n.row,n.column)}return this.$inSelection};this.getButton=function(){return i.getButton(this.domEvent)};this.getShiftKey=function(){return this.domEvent.shiftKey};this.getAccelKey=r.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(o.prototype)});ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var k=e("../lib/dom");var F=e("../lib/event");var T=e("../lib/useragent");var D=200;var R=200;var $=5;function i(t){var f=t.editor;var i=k.createElement("img");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(T.isOpera)i.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;";var e=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];e.forEach(function(e){t[e]=this[e]},this);f.addEventListener("mousedown",this.onMouseDown.bind(t));var r=f.container;var o,p,g;var n,a;var s,l=0;var c;var u;var m;var h;var d;this.onDragStart=function(e){if(this.cancelDrag||!r.draggable){var t=this;setTimeout(function(){t.startSelect();t.captureMouse(e)},0);return e.preventDefault()}a=f.getSelectionRange();var n=e.dataTransfer;n.effectAllowed=f.getReadOnly()?"copy":"copyMove";if(T.isOpera){f.container.appendChild(i);i._top=i.offsetTop}n.setDragImage&&n.setDragImage(i,0,0);if(T.isOpera){f.container.removeChild(i)}n.clearData();n.setData("Text",f.session.getTextRange());u=true;this.setState("drag")};this.onDragEnd=function(e){r.draggable=false;u=false;this.setState(null);if(!f.getReadOnly()){var t=e.dataTransfer.dropEffect;if(!c&&t=="move")f.session.remove(f.getSelectionRange());f.renderer.$cursorLayer.setBlinking(true)}this.editor.unsetStyle("ace_dragging")};this.onDragEnter=function(e){if(f.getReadOnly()||!x(e.dataTransfer))return;if(!o)y();l++;e.dataTransfer.dropEffect=c=S(e);return F.preventDefault(e)};this.onDragOver=function(e){if(f.getReadOnly()||!x(e.dataTransfer))return;if(!o){y();l++}if(E!==null)E=null;p=e.clientX;g=e.clientY;e.dataTransfer.dropEffect=c=S(e);return F.preventDefault(e)};this.onDragLeave=function(e){l--;if(l<=0&&o){C();c=null;return F.preventDefault(e)}};this.onDrop=function(e){if(!o)return;var t=e.dataTransfer;if(u){switch(c){case"move":if(a.contains(s.row,s.column)){a={start:s,end:s}}else{a=f.moveText(a,s)}break;case"copy":a=f.moveText(a,s,true);break}}else{var n=t.getData("Text");a={start:s,end:f.session.insert(s,n)};f.focus();c=null}C();return F.preventDefault(e)};F.addListener(r,"dragstart",this.onDragStart.bind(t));F.addListener(r,"dragend",this.onDragEnd.bind(t));F.addListener(r,"dragenter",this.onDragEnter.bind(t));F.addListener(r,"dragover",this.onDragOver.bind(t));F.addListener(r,"dragleave",this.onDragLeave.bind(t));F.addListener(r,"drop",this.onDrop.bind(t));function v(e,t){var n=Date.now();var i=!t||e.row!=t.row;var r=!t||e.column!=t.column;if(!h||i||r){f.$blockScrolling+=1;f.moveCursorToPosition(e);f.$blockScrolling-=1;h=n;d={x:p,y:g}}else{var o=L(d.x,d.y,p,g);if(o>$){h=null}else if(n-h>=R){f.renderer.scrollCursorIntoView();h=null}}}function b(e,t){var n=Date.now();var i=f.renderer.layerConfig.lineHeight;var r=f.renderer.layerConfig.characterWidth;var o=f.renderer.scroller.getBoundingClientRect();var a={x:{left:p-o.left,right:o.right-p},y:{top:g-o.top,bottom:o.bottom-g}};var s=Math.min(a.x.left,a.x.right);var l=Math.min(a.y.top,a.y.bottom);var c={row:e.row,column:e.column};if(s/r<=2){c.column+=a.x.left<a.x.right?-3:+2}if(l/i<=1){c.row+=a.y.top<a.y.bottom?-1:+1}var u=e.row!=c.row;var h=e.column!=c.column;var d=!t||e.row!=t.row;if(u||h&&!d){if(!m)m=n;else if(n-m>=D)f.renderer.scrollCursorIntoView(c)}else{m=null}}function w(){var e=s;s=f.renderer.screenToTextCoordinates(p,g);v(s,e);b(s,e)}function y(){a=f.selection.toOrientedRange();o=f.session.addMarker(a,"ace_selection",f.getSelectionStyle());f.clearSelection();if(f.isFocused())f.renderer.$cursorLayer.setBlinking(false);clearInterval(n);n=setInterval(w,20);l=0;F.addListener(document,"mousemove",A)}function C(){clearInterval(n);f.session.removeMarker(o);o=null;f.$blockScrolling+=1;f.selection.fromOrientedRange(a);f.$blockScrolling-=1;if(f.isFocused()&&!u)f.renderer.$cursorLayer.setBlinking(!f.getReadOnly());a=null;l=0;m=null;h=null;F.removeListener(document,"mousemove",A)}var E=null;function A(){if(E==null){E=setTimeout(function(){if(E!=null&&o)C()},20)}}function x(e){var t=e.types;return!t||Array.prototype.some.call(t,function(e){return e=="text/plain"||e=="Text"})}function S(e){var t=["copy","copymove","all","uninitialized"];var n=["move","copymove","linkmove","all","uninitialized"];var i=T.isMac?e.altKey:e.ctrlKey;var r="uninitialized";try{r=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var o="none";if(i&&t.indexOf(r)>=0)o="copy";else if(n.indexOf(r)>=0)o="move";else if(t.indexOf(r)>=0)o="copy";return o}}(function(){this.dragWait=function(){var e=Date.now()-this.mousedownEvent.time;if(e>this.editor.getDragDelay())this.startDrag()};this.dragWaitEnd=function(){var e=this.editor.container;e.draggable=false;this.startSelect(this.mousedownEvent.getDocumentPosition());this.selectEnd()};this.dragReadyEnd=function(e){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly());this.editor.unsetStyle("ace_dragging");this.dragWaitEnd()};this.startDrag=function(){this.cancelDrag=false;var e=this.editor.container;e.draggable=true;this.editor.renderer.$cursorLayer.setBlinking(false);this.editor.setStyle("ace_dragging");this.setState("dragReady")};this.onMouseDrag=function(e){var t=this.editor.container;if(T.isIE&&this.state=="dragReady"){var n=L(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);if(n>3)t.dragDrop()}if(this.state==="dragWait"){var n=L(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);if(n>0){t.draggable=false;this.startSelect(this.mousedownEvent.getDocumentPosition())}}};this.onMouseDown=function(e){if(!this.$dragEnabled)return;this.mousedownEvent=e;var t=this.editor;var n=e.inSelection();var i=e.getButton();var r=e.domEvent.detail||1;if(r===1&&i===0&&n){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var o=e.domEvent.target||e.domEvent.srcElement;if("unselectable"in o)o.unselectable="on";if(t.getDragDelay()){if(T.isWebKit){this.cancelDrag=true;var a=t.container;a.draggable=true}this.setState("dragWait")}else{this.startDrag()}this.captureMouse(e,this.onMouseDrag.bind(this));e.defaultPrevented=true}}}).call(i.prototype);function L(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))}t.DragdropHandler=i});ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var r=e("./dom");t.get=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,true);n.onreadystatechange=function(){if(n.readyState===4){t(n.responseText)}};n.send(null)};t.loadScript=function(e,t){var n=r.getDocumentHead();var i=document.createElement("script");i.src=e;n.appendChild(i);i.onload=i.onreadystatechange=function(_,e){if(e||!i.readyState||i.readyState=="loaded"||i.readyState=="complete"){i=i.onload=i.onreadystatechange=null;if(!e)t()}}};t.qualifyURL=function(e){var t=document.createElement("a");t.href=e;return t.href}});ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";var i={};var o=function(){this.propagationStopped=true};var a=function(){this.defaultPrevented=true};i._emit=i._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={});this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[];var i=this._defaultHandlers[e];if(!n.length&&!i)return;if(typeof t!="object"||!t)t={};if(!t.type)t.type=e;if(!t.stopPropagation)t.stopPropagation=o;if(!t.preventDefault)t.preventDefault=a;n=n.slice();for(var r=0;r<n.length;r++){n[r](t,this);if(t.propagationStopped)break}if(i&&!t.defaultPrevented)return i(t,this)};i._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(!n)return;n=n.slice();for(var i=0;i<n.length;i++)n[i](t,this)};i.once=function(t,n){var i=this;n&&this.addEventListener(t,function e(){i.removeEventListener(t,e);n.apply(null,arguments)})};i.setDefaultHandler=function(e,t){var n=this._defaultHandlers;if(!n)n=this._defaultHandlers={_disabled_:{}};if(n[e]){var i=n[e];var r=n._disabled_[e];if(!r)n._disabled_[e]=r=[];r.push(i);var o=r.indexOf(t);if(o!=-1)r.splice(o,1)}n[e]=t};i.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(!n)return;var i=n._disabled_[e];if(n[e]==t){var r=n[e];if(i)this.setDefaultHandler(e,i.pop())}else if(i){var o=i.indexOf(t);if(o!=-1)i.splice(o,1)}};i.on=i.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[e];if(!i)i=this._eventRegistry[e]=[];if(i.indexOf(t)==-1)i[n?"unshift":"push"](t);return t};i.off=i.removeListener=i.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(!n)return;var i=n.indexOf(t);if(i!==-1)n.splice(i,1)};i.removeAllListeners=function(e){if(this._eventRegistry)this._eventRegistry[e]=[]};t.EventEmitter=i});ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/event_emitter"],function(g,m,v){"no use strict";var e=g("./lib/lang");var t=g("./lib/oop");var o=g("./lib/net");var n=g("./lib/event_emitter").EventEmitter;var b=function(){return this}();var w={packaged:false,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};m.get=function(e){if(!w.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return w[e]};m.set=function(e,t){if(!w.hasOwnProperty(e))throw new Error("Unknown config key: "+e);w[e]=t};m.all=function(){return e.copyObject(w)};t.implement(m,n);m.moduleUrl=function(e,t){if(w.$moduleUrls[e])return w.$moduleUrls[e];var n=e.split("/");t=t||n[n.length-2]||"";var i=t=="snippets"?"/":"-";var r=n[n.length-1];if(i=="-"){var o=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");r=r.replace(o,"")}if((!r||r==t)&&n.length>1)r=n[n.length-2];var a=w[t+"Path"];if(a==null){a=w.basePath}else if(i=="/"){t=i=""}if(a&&a.slice(-1)!="/")a+="/";return a+t+i+r+this.get("suffix")};m.setModuleUrl=function(e,t){return w.$moduleUrls[e]=t};m.$loading={};m.loadModule=function(n,e){var t,i;if(Array.isArray(n)){i=n[0];n=n[1]}try{t=g(n)}catch(e){}if(t&&!m.$loading[n])return e&&e(t);if(!m.$loading[n])m.$loading[n]=[];m.$loading[n].push(e);if(m.$loading[n].length>1)return;var r=function(){g([n],function(t){m._emit("load.module",{name:n,module:t});var e=m.$loading[n];m.$loading[n]=null;e.forEach(function(e){e&&e(t)})})};if(!m.get("packaged"))return r();o.loadScript(m.moduleUrl(n,i),r)};i(true);function i(e){w.packaged=e||g.packaged||v.packaged||b.define&&C("B9Yq").packaged;if(!b.document)return"";var t={};var n="";var i=document.currentScript||document._currentScript;var r=i&&i.ownerDocument||document;var o=r.getElementsByTagName("script");for(var a=0;a<o.length;a++){var s=o[a];var l=s.src||s.getAttribute("src");if(!l)continue;var c=s.attributes;for(var u=0,h=c.length;u<h;u++){var d=c[u];if(d.name.indexOf("data-ace-")===0){t[y(d.name.replace(/^data-ace-/,""))]=d.value}}var f=l.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);if(f)n=f[1]}if(n){t.base=t.base||n;t.packaged=true}t.basePath=t.base;t.workerPath=t.workerPath||t.base;t.modePath=t.modePath||t.base;t.themePath=t.themePath||t.base;delete t.base;for(var p in t)if(typeof t[p]!=="undefined")m.set(p,t[p])}m.init=i;function y(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}var r={setOptions:function(t){Object.keys(t).forEach(function(e){this.setOption(e,t[e])},this)},getOptions:function(e){var t={};if(!e){e=Object.keys(this.$options)}else if(!Array.isArray(e)){t=e;e=Object.keys(t)}e.forEach(function(e){t[e]=this.getOption(e)},this);return t},setOption:function(e,t){if(this["$"+e]===t)return;var n=this.$options[e];if(!n){if(typeof console!="undefined"&&console.warn)console.warn('misspelled option "'+e+'"');return undefined}if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(e,t);if(!n.handlesSet)this["$"+e]=t;if(n&&n.set)n.set.call(this,t)},getOption:function(e){var t=this.$options[e];if(!t){if(typeof console!="undefined"&&console.warn)console.warn('misspelled option "'+e+'"');return undefined}if(t.forwardTo)return this[t.forwardTo]&&this[t.forwardTo].getOption(e);return t&&t.get?t.get.call(this):this["$"+e]}};var a={};m.defineOptions=function(n,e,i){if(!n.$options)a[e]=n.$options={};Object.keys(i).forEach(function(e){var t=i[e];if(typeof t=="string")t={forwardTo:t};t.name||(t.name=e);n.$options[t.name]=t;if("initialValue"in t)n["$"+t.name]=t.initialValue});t.implement(n,r);return this};m.resetOptions=function(n){Object.keys(n.$options).forEach(function(e){var t=n.$options[e];if("value"in t)n.setOption(e,t.value)})};m.setDefaultValue=function(e,t,n){var i=a[e]||(a[e]={});if(i[t]){if(i.forwardTo)m.setDefaultValue(i.forwardTo,t,n);else i[t].value=n}};m.setDefaultValues=function(t,n){Object.keys(n).forEach(function(e){m.setDefaultValue(t,e,n[e])})}});ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],function(e,t,n){"use strict";var l=e("../lib/event");var c=e("../lib/useragent");var i=e("./default_handlers").DefaultHandlers;var a=e("./default_gutter_handler").GutterHandler;var u=e("./mouse_event").MouseEvent;var s=e("./dragdrop_handler").DragdropHandler;var r=e("../config");var o=function(r){var o=this;this.editor=r;new i(this);new a(this);new s(this);var e=function(e){if(!r.isFocused()&&r.textInput)r.textInput.onContextMenu(e);r.focus()};var t=r.renderer.getMouseEventTarget();l.addListener(t,"click",this.onMouseEvent.bind(this,"click"));l.addListener(t,"mousemove",this.onMouseMove.bind(this,"mousemove"));l.addMultiMouseDownListener(t,[400,300,250],this,"onMouseEvent");if(r.renderer.scrollBarV){l.addMultiMouseDownListener(r.renderer.scrollBarV.inner,[400,300,250],this,"onMouseEvent");l.addMultiMouseDownListener(r.renderer.scrollBarH.inner,[400,300,250],this,"onMouseEvent");if(c.isIE){l.addListener(r.renderer.scrollBarV.element,"mousedown",e);l.addListener(r.renderer.scrollBarH.element,"mousemove",e)}}l.addMouseWheelListener(r.container,this.onMouseWheel.bind(this,"mousewheel"));var n=r.renderer.$gutter;l.addListener(n,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"));l.addListener(n,"click",this.onMouseEvent.bind(this,"gutterclick"));l.addListener(n,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"));l.addListener(n,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"));l.addListener(t,"mousedown",e);l.addListener(n,"mousedown",function(e){r.focus();return l.preventDefault(e)});r.on("mousemove",function(e){if(o.state||o.$dragDelay||!o.$dragEnabled)return;var t=r.renderer.screenToTextCoordinates(e.x,e.y);var n=r.session.selection.getRange();var i=r.renderer;if(!n.isEmpty()&&n.insideStart(t.row,t.column)){i.setCursorStyle("default")}else{i.setCursorStyle("")}})};(function(){this.onMouseEvent=function(e,t){this.editor._emit(e,new u(t,this.editor))};this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;if(!n||!n.length)return;this.editor._emit(e,new u(t,this.editor))};this.onMouseWheel=function(e,t){var n=new u(t,this.editor);n.speed=this.$scrollSpeed*2;n.wheelX=t.wheelX;n.wheelY=t.wheelY;this.editor._emit(e,n)};this.setState=function(e){this.state=e};this.captureMouse=function(e,t){this.x=e.x;this.y=e.y;this.isMousePressed=true;var n=this.editor.renderer;if(n.$keepTextAreaAtCursor)n.$keepTextAreaAtCursor=null;var i=this;var r=function(e){if(!e)return;if(c.isWebKit&&!e.which&&i.releaseMouse)return i.releaseMouse();i.x=e.clientX;i.y=e.clientY;t&&t(e);i.mouseEvent=new u(e,i.editor);i.$mouseMoved=true};var o=function(e){clearInterval(s);a();i[i.state+"End"]&&i[i.state+"End"](e);i.state="";if(n.$keepTextAreaAtCursor==null){n.$keepTextAreaAtCursor=true;n.$moveTextAreaToCursor()}i.isMousePressed=false;i.$onCaptureMouseMove=i.releaseMouse=null;e&&i.onMouseEvent("mouseup",e)};var a=function(){i[i.state]&&i[i.state]();i.$mouseMoved=false};if(c.isOldIE&&e.domEvent.type=="dblclick"){return setTimeout(function(){o(e)})}i.$onCaptureMouseMove=r;i.releaseMouse=l.capture(this.editor.container,r,o);var s=setInterval(a,20)};this.releaseMouse=null;this.cancelContextMenu=function(){var t=function(e){if(e&&e.domEvent&&e.domEvent.type!="contextmenu")return;this.editor.off("nativecontextmenu",t);if(e&&e.domEvent)l.stopEvent(e.domEvent)}.bind(this);setTimeout(t,10);this.editor.on("nativecontextmenu",t)}}).call(o.prototype);r.defineOptions(o.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:c.isMac?150:0},dragEnabled:{initialValue:true},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:true}});t.MouseHandler=o});ace.define("ace/mouse/fold_handler",["require","exports","module"],function(e,t,n){"use strict";function i(s){s.on("click",function(e){var t=e.getDocumentPosition();var n=s.session;var i=n.getFoldAt(t.row,t.column,1);if(i){if(e.getAccelKey())n.removeFold(i);else n.expandFold(i);e.stop()}});s.on("gutterclick",function(e){var t=s.renderer.$gutterLayer.getRegion(e);if(t=="foldWidgets"){var n=e.getDocumentPosition().row;var i=s.session;if(i.foldWidgets&&i.foldWidgets[n])s.session.onFoldWidgetClick(n,e);if(!s.isFocused())s.focus();e.stop()}});s.on("gutterdblclick",function(e){var t=s.renderer.$gutterLayer.getRegion(e);if(t=="foldWidgets"){var n=e.getDocumentPosition().row;var i=s.session;var r=i.getParentFoldRangeData(n,true);var o=r.range||r.firstRange;if(o){n=o.start.row;var a=i.getFoldAt(n,i.getLine(n).length,1);if(a){i.removeFold(a)}else{i.addFold("...",o);s.renderer.scrollCursorIntoView({row:o.start.row,column:0})}}e.stop()}})}t.FoldHandler=i});ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var r=e("../lib/keys");var l=e("../lib/event");var i=function(e){this.$editor=e;this.$data={editor:e};this.$handlers=[];this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler);this.$defaultHandler=e;this.addKeyboardHandler(e,0)};this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]==e)return;while(t[t.length-1]&&t[t.length-1]!=this.$defaultHandler)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)};this.addKeyboardHandler=function(e,t){if(!e)return;if(typeof e=="function"&&!e.handleKeyboard)e.handleKeyboard=e;var n=this.$handlers.indexOf(e);if(n!=-1)this.$handlers.splice(n,1);if(t==undefined)this.$handlers.push(e);else this.$handlers.splice(t,0,e);if(n==-1&&e.attach)e.attach(this.$editor)};this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);if(t==-1)return false;this.$handlers.splice(t,1);e.detach&&e.detach(this.$editor);return true};this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]};this.$callKeyboardHandlers=function(e,t,n,i){var r;var o=false;var a=this.$editor.commands;for(var s=this.$handlers.length;s--;){r=this.$handlers[s].handleKeyboard(this.$data,e,t,n,i);if(!r||!r.command)continue;if(r.command=="null"){o=true}else{o=a.exec(r.command,this.$editor,r.args,i)}if(o&&i&&e!=-1&&r.passEvent!=true&&r.command.passEvent!=true){l.stopEvent(i)}if(o)break}return o};this.onCommandKey=function(e,t,n){var i=r.keyCodeToString(n);this.$callKeyboardHandlers(t,i,n,e)};this.onTextInput=function(e){var t=this.$callKeyboardHandlers(-1,e);if(!t)this.$editor.commands.exec("insertstring",this.$editor,e)}}).call(i.prototype);t.KeyBinding=i});ace.define("ace/range",["require","exports","module"],function(e,t,n){"use strict";var i=function(e,t){return e.row-t.row||e.column-t.column};var o=function(e,t,n,i){this.start={row:e,column:t};this.end={row:n,column:i}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column};this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"};this.contains=function(e,t){return this.compare(e,t)==0};this.compareRange=function(e){var t,n=e.end,i=e.start;t=this.compare(n.row,n.column);if(t==1){t=this.compare(i.row,i.column);if(t==1){return 2}else if(t==0){return 1}else{return 0}}else if(t==-1){return-2}else{t=this.compare(i.row,i.column);if(t==-1){return-1}else if(t==1){return 42}else{return 0}}};this.comparePoint=function(e){return this.compare(e.row,e.column)};this.containsRange=function(e){return this.comparePoint(e.start)==0&&this.comparePoint(e.end)==0};this.intersects=function(e){var t=this.compareRange(e);return t==-1||t==0||t==1};this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t};this.isStart=function(e,t){return this.start.row==e&&this.start.column==t};this.setStart=function(e,t){if(typeof e=="object"){this.start.column=e.column;this.start.row=e.row}else{this.start.row=e;this.start.column=t}};this.setEnd=function(e,t){if(typeof e=="object"){this.end.column=e.column;this.end.row=e.row}else{this.end.row=e;this.end.column=t}};this.inside=function(e,t){if(this.compare(e,t)==0){if(this.isEnd(e,t)||this.isStart(e,t)){return false}else{return true}}return false};this.insideStart=function(e,t){if(this.compare(e,t)==0){if(this.isEnd(e,t)){return false}else{return true}}return false};this.insideEnd=function(e,t){if(this.compare(e,t)==0){if(this.isStart(e,t)){return false}else{return true}}return false};this.compare=function(e,t){if(!this.isMultiLine()){if(e===this.start.row){return t<this.start.column?-1:t>this.end.column?1:0}}if(e<this.start.row)return-1;if(e>this.end.row)return 1;if(this.start.row===e)return t>=this.start.column?0:-1;if(this.end.row===e)return t<=this.end.column?0:1;return 0};this.compareStart=function(e,t){if(this.start.row==e&&this.start.column==t){return-1}else{return this.compare(e,t)}};this.compareEnd=function(e,t){if(this.end.row==e&&this.end.column==t){return 1}else{return this.compare(e,t)}};this.compareInside=function(e,t){if(this.end.row==e&&this.end.column==t){return 1}else if(this.start.row==e&&this.start.column==t){return-1}else{return this.compare(e,t)}};this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};else if(this.end.row<e)var n={row:e,column:0};if(this.start.row>t)var i={row:t+1,column:0};else if(this.start.row<e)var i={row:e,column:0};return o.fromPoints(i||this.start,n||this.end)};this.extend=function(e,t){var n=this.compare(e,t);if(n==0)return this;else if(n==-1)var i={row:e,column:t};else var r={row:e,column:t};return o.fromPoints(i||this.start,r||this.end)};this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column};this.isMultiLine=function(){return this.start.row!==this.end.row};this.clone=function(){return o.fromPoints(this.start,this.end)};this.collapseRows=function(){if(this.end.column==0)return new o(this.start.row,0,Math.max(this.start.row,this.end.row-1),0);else return new o(this.start.row,0,this.end.row,0)};this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start);var n=e.documentToScreenPosition(this.end);return new o(t.row,t.column,n.row,n.column)};this.moveBy=function(e,t){this.start.row+=e;this.start.column+=t;this.end.row+=e;this.end.column+=t}}).call(o.prototype);o.fromPoints=function(e,t){return new o(e.row,e.column,t.row,t.column)};o.comparePoints=i;o.comparePoints=function(e,t){return e.row-t.row||e.column-t.column};t.Range=o});ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var i=e("./lib/oop");var a=e("./lib/lang");var r=e("./lib/event_emitter").EventEmitter;var o=e("./range").Range;var s=function(e){this.session=e;this.doc=e.getDocument();this.clearSelection();this.lead=this.selectionLead=this.doc.createAnchor(0,0);this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var t=this;this.lead.on("change",function(e){t._emit("changeCursor");if(!t.$isEmpty)t._emit("changeSelection");if(!t.$keepDesiredColumnOnChange&&e.old.column!=e.value.column)t.$desiredColumn=null});this.selectionAnchor.on("change",function(){if(!t.$isEmpty)t._emit("changeSelection")})};(function(){i.implement(this,r);this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column};this.isMultiLine=function(){if(this.isEmpty()){return false}return this.getRange().isMultiLine()};this.getCursor=function(){return this.lead.getPosition()};this.setSelectionAnchor=function(e,t){this.anchor.setPosition(e,t);if(this.$isEmpty){this.$isEmpty=false;this._emit("changeSelection")}};this.getSelectionAnchor=function(){if(this.$isEmpty)return this.getSelectionLead();else return this.anchor.getPosition()};this.getSelectionLead=function(){return this.lead.getPosition()};this.shiftSelection=function(e){if(this.$isEmpty){this.moveCursorTo(this.lead.row,this.lead.column+e);return}var t=this.getSelectionAnchor();var n=this.getSelectionLead();var i=this.isBackwards();if(!i||t.column!==0)this.setSelectionAnchor(t.row,t.column+e);if(i||n.column!==0){this.$moveSelection(function(){this.moveCursorTo(n.row,n.column+e)})}};this.isBackwards=function(){var e=this.anchor;var t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column};this.getRange=function(){var e=this.anchor;var t=this.lead;if(this.isEmpty())return o.fromPoints(t,t);if(this.isBackwards()){return o.fromPoints(t,e)}else{return o.fromPoints(e,t)}};this.clearSelection=function(){if(!this.$isEmpty){this.$isEmpty=true;this._emit("changeSelection")}};this.selectAll=function(){var e=this.doc.getLength()-1;this.setSelectionAnchor(0,0);this.moveCursorTo(e,this.doc.getLine(e).length)};this.setRange=this.setSelectionRange=function(e,t){if(t){this.setSelectionAnchor(e.end.row,e.end.column);this.selectTo(e.start.row,e.start.column)}else{this.setSelectionAnchor(e.start.row,e.start.column);this.selectTo(e.end.row,e.end.column)}if(this.getRange().isEmpty())this.$isEmpty=true;this.$desiredColumn=null};this.$moveSelection=function(e){var t=this.lead;if(this.$isEmpty)this.setSelectionAnchor(t.row,t.column);e.call(this)};this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})};this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})};this.moveTo=function(e,t){this.clearSelection();this.moveCursorTo(e,t)};this.moveToPosition=function(e){this.clearSelection();this.moveCursorToPosition(e)};this.selectUp=function(){this.$moveSelection(this.moveCursorUp)};this.selectDown=function(){this.$moveSelection(this.moveCursorDown)};this.selectRight=function(){this.$moveSelection(this.moveCursorRight)};this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)};this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)};this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)};this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)};this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)};this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)};this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)};this.getWordRange=function(e,t){if(typeof t=="undefined"){var n=e||this.lead;e=n.row;t=n.column}return this.session.getWordRange(e,t)};this.selectWord=function(){this.setSelectionRange(this.getWordRange())};this.selectAWord=function(){var e=this.getCursor();var t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)};this.getLineRange=function(e,t){var n=typeof e=="number"?e:this.lead.row;var i;var r=this.session.getFoldLine(n);if(r){n=r.start.row;i=r.end.row}else{i=n}if(t===true)return new o(n,0,i,this.session.getLine(i).length);else return new o(n,0,i+1,0)};this.selectLine=function(){this.setSelectionRange(this.getLineRange())};this.moveCursorUp=function(){this.moveCursorBy(-1,0)};this.moveCursorDown=function(){this.moveCursorBy(1,0)};this.moveCursorLeft=function(){var e=this.lead.getPosition(),t;if(t=this.session.getFoldAt(e.row,e.column,-1)){this.moveCursorTo(t.start.row,t.start.column)}else if(e.column==0){if(e.row>0){this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length)}}else{var n=this.session.getTabSize();if(this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column-n,e.column).split(" ").length-1==n)this.moveCursorBy(0,-n);else this.moveCursorBy(0,-1)}};this.moveCursorRight=function(){var e=this.lead.getPosition(),t;if(t=this.session.getFoldAt(e.row,e.column,1)){this.moveCursorTo(t.end.row,t.end.column)}else if(this.lead.column==this.doc.getLine(this.lead.row).length){if(this.lead.row<this.doc.getLength()-1){this.moveCursorTo(this.lead.row+1,0)}}else{var n=this.session.getTabSize();var e=this.lead;if(this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column,e.column+n).split(" ").length-1==n)this.moveCursorBy(0,n);else this.moveCursorBy(0,1)}};this.moveCursorLineStart=function(){var e=this.lead.row;var t=this.lead.column;var n=this.session.documentToScreenRow(e,t);var i=this.session.screenToDocumentPosition(n,0);var r=this.session.getDisplayLine(e,null,i.row,i.column);var o=r.match(/^\s*/);if(o[0].length!=t&&!this.session.$useEmacsStyleLineStart)i.column+=o[0].length;this.moveCursorToPosition(i)};this.moveCursorLineEnd=function(){var e=this.lead;var t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var i=n.search(/\s+$/);if(i>0)t.column=i}}this.moveCursorTo(t.row,t.column)};this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1;var t=this.doc.getLine(e).length;this.moveCursorTo(e,t)};this.moveCursorFileStart=function(){this.moveCursorTo(0,0)};this.moveCursorLongWordRight=function(){var e=this.lead.row;var t=this.lead.column;var n=this.doc.getLine(e);var i=n.substring(t);var r;this.session.nonTokenRe.lastIndex=0;this.session.tokenRe.lastIndex=0;var o=this.session.getFoldAt(e,t,1);if(o){this.moveCursorTo(o.end.row,o.end.column);return}if(r=this.session.nonTokenRe.exec(i)){t+=this.session.nonTokenRe.lastIndex;this.session.nonTokenRe.lastIndex=0;i=n.substring(t)}if(t>=n.length){this.moveCursorTo(e,n.length);this.moveCursorRight();if(e<this.doc.getLength()-1)this.moveCursorWordRight();return}if(r=this.session.tokenRe.exec(i)){t+=this.session.tokenRe.lastIndex;this.session.tokenRe.lastIndex=0}this.moveCursorTo(e,t)};this.moveCursorLongWordLeft=function(){var e=this.lead.row;var t=this.lead.column;var n;if(n=this.session.getFoldAt(e,t,-1)){this.moveCursorTo(n.start.row,n.start.column);return}var i=this.session.getFoldStringAt(e,t,-1);if(i==null){i=this.doc.getLine(e).substring(0,t)}var r=a.stringReverse(i);var o;this.session.nonTokenRe.lastIndex=0;this.session.tokenRe.lastIndex=0;if(o=this.session.nonTokenRe.exec(r)){t-=this.session.nonTokenRe.lastIndex;r=r.slice(this.session.nonTokenRe.lastIndex);this.session.nonTokenRe.lastIndex=0}if(t<=0){this.moveCursorTo(e,0);this.moveCursorLeft();if(e>0)this.moveCursorWordLeft();return}if(o=this.session.tokenRe.exec(r)){t-=this.session.tokenRe.lastIndex;this.session.tokenRe.lastIndex=0}this.moveCursorTo(e,t)};this.$shortWordEndIndex=function(e){var t,n=0,i;var r=/\s/;var o=this.session.tokenRe;o.lastIndex=0;if(t=this.session.tokenRe.exec(e)){n=this.session.tokenRe.lastIndex}else{while((i=e[n])&&r.test(i))n++;if(n<1){o.lastIndex=0;while((i=e[n])&&!o.test(i)){o.lastIndex=0;n++;if(r.test(i)){if(n>2){n--;break}else{while((i=e[n])&&r.test(i))n++;if(n>2)break}}}}}o.lastIndex=0;return n};this.moveCursorShortWordRight=function(){var e=this.lead.row;var t=this.lead.column;var n=this.doc.getLine(e);var i=n.substring(t);var r=this.session.getFoldAt(e,t,1);if(r)return this.moveCursorTo(r.end.row,r.end.column);if(t==n.length){var o=this.doc.getLength();do{e++;i=this.doc.getLine(e)}while(e<o&&/^\s*$/.test(i));if(!/^\s+/.test(i))i="";t=0}var a=this.$shortWordEndIndex(i);this.moveCursorTo(e,t+a)};this.moveCursorShortWordLeft=function(){var e=this.lead.row;var t=this.lead.column;var n;if(n=this.session.getFoldAt(e,t,-1))return this.moveCursorTo(n.start.row,n.start.column);var i=this.session.getLine(e).substring(0,t);if(t==0){do{e--;i=this.doc.getLine(e)}while(e>0&&/^\s*$/.test(i));t=i.length;if(!/\s+$/.test(i))i=""}var r=a.stringReverse(i);var o=this.$shortWordEndIndex(r);return this.moveCursorTo(e,t-o)};this.moveCursorWordRight=function(){if(this.session.$selectLongWords)this.moveCursorLongWordRight();else this.moveCursorShortWordRight()};this.moveCursorWordLeft=function(){if(this.session.$selectLongWords)this.moveCursorLongWordLeft();else this.moveCursorShortWordLeft()};this.moveCursorBy=function(e,t){var n=this.session.documentToScreenPosition(this.lead.row,this.lead.column);if(t===0){if(this.$desiredColumn)n.column=this.$desiredColumn;else this.$desiredColumn=n.column}var i=this.session.screenToDocumentPosition(n.row+e,n.column);if(e!==0&&t===0&&i.row===this.lead.row&&i.column===this.lead.column){if(this.session.lineWidgets&&this.session.lineWidgets[i.row])i.row++}this.moveCursorTo(i.row,i.column+t,t===0)};this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)};this.moveCursorTo=function(e,t,n){var i=this.session.getFoldAt(e,t,1);if(i){e=i.start.row;t=i.start.column}this.$keepDesiredColumnOnChange=true;this.lead.setPosition(e,t);this.$keepDesiredColumnOnChange=false;if(!n)this.$desiredColumn=null};this.moveCursorToScreen=function(e,t,n){var i=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(i.row,i.column,n)};this.detach=function(){this.lead.detach();this.anchor.detach();this.session=this.doc=null};this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start);this.$desiredColumn=e.desiredColumn||this.$desiredColumn};this.toOrientedRange=function(e){var t=this.getRange();if(e){e.start.column=t.start.column;e.start.row=t.start.row;e.end.column=t.end.column;e.end.row=t.end.row}else{e=t}e.cursor=this.isBackwards()?e.start:e.end;e.desiredColumn=this.$desiredColumn;return e};this.getRangeOfMovements=function(e){var t=this.getCursor();try{e.call(null,this);var n=this.getCursor();return o.fromPoints(t,n)}catch(e){return o.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}};this.toJSON=function(){if(this.rangeCount){var e=this.ranges.map(function(e){var t=e.clone();t.isBackwards=e.cursor==e.start;return t})}else{var e=this.getRange();e.isBackwards=this.isBackwards()}return e};this.fromJSON=function(e){if(e.start==undefined){if(this.rangeList){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=o.fromPoints(e[t].start,e[t].end);if(e.isBackwards)n.cursor=n.start;this.addRange(n,true)}return}else e=e[0]}if(this.rangeList)this.toSingleRange(e);this.setSelectionRange(e,e.isBackwards)};this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return false;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;){if(!this.ranges[t].isEqual(e[t]))return false}return true}}).call(s.prototype);t.Selection=s});ace.define("ace/tokenizer",["require","exports","module"],function(e,t,n){"use strict";var v=1e3;var i=function(e){this.states=e;this.regExps={};this.matchMappings={};for(var t in this.states){var n=this.states[t];var i=[];var r=0;var o=this.matchMappings[t]={defaultToken:"text"};var a="g";var s=[];for(var l=0;l<n.length;l++){var c=n[l];if(c.defaultToken)o.defaultToken=c.defaultToken;if(c.caseInsensitive)a="gi";if(c.regex==null)continue;if(c.regex instanceof RegExp)c.regex=c.regex.toString().slice(1,-1);var u=c.regex;var h=new RegExp("(?:("+u+")|(.))").exec("a").length-2;if(Array.isArray(c.token)){if(c.token.length==1||h==1){c.token=c.token[0]}else if(h-1!=c.token.length){throw new Error("number of classes and regexp groups in '"+c.token+"'\n'"+c.regex+"' doesn't match\n"+(h-1)+"!="+c.token.length)}else{c.tokenArray=c.token;c.token=null;c.onMatch=this.$arrayTokens}}else if(typeof c.token=="function"&&!c.onMatch){if(h>1)c.onMatch=this.$applyToken;else c.onMatch=c.token}if(h>1){if(/\\\d/.test(c.regex)){u=c.regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+r+1)})}else{h=1;u=this.removeCapturingGroups(c.regex)}if(!c.splitRegex&&typeof c.token!="string")s.push(c)}o[r]=l;r+=h;i.push(u);if(!c.onMatch)c.onMatch=null}if(!i.length){o[0]=0;i.push("$")}s.forEach(function(e){e.splitRegex=this.createSplitterRegexp(e.regex,a)},this);this.regExps[t]=new RegExp("("+i.join(")|(")+")|($)",a)}};(function(){this.$setMaxTokenCount=function(e){v=e|0};this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1);var n=this.token.apply(this,t);if(typeof n==="string")return[{type:n,value:e}];var i=[];for(var r=0,o=n.length;r<o;r++){if(t[r])i[i.length]={type:n[r],value:t[r]}}return i},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";var n=[];var i=this.tokenArray;for(var r=0,o=i.length;r<o;r++){if(t[r+1])n[n.length]={type:i[r],value:t[r+1]}}return n};this.removeCapturingGroups=function(e){var t=e.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(e,t){return t?"(?:":e});return t};this.createSplitterRegexp=function(e,t){if(e.indexOf("(?=")!=-1){var a=0;var s=false;var l={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,t,n,i,r,o){if(s){s=r!="]"}else if(r){s=true}else if(i){if(a==l.stack){l.end=o+1;l.stack=-1}a--}else if(n){a++;if(n.length!=1){l.stack=a;l.start=o}}return e});if(l.end!=null&&/^\)*$/.test(e.substr(l.end)))e=e.substring(0,l.start)+e.substr(l.end)}return new RegExp(e,(t||"").replace("g",""))};this.getLineTokens=function(e,t){if(t&&typeof t!="string"){var n=t.slice(0);t=n[0]}else var n=[];var i=t||"start";var r=this.states[i];if(!r){i="start";r=this.states[i]}var o=this.matchMappings[i];var a=this.regExps[i];a.lastIndex=0;var s,l=[];var c=0;var u={type:null,value:""};while(s=a.exec(e)){var h=o.defaultToken;var d=null;var f=s[0];var p=a.lastIndex;if(p-f.length>c){var g=e.substring(c,p-f.length);if(u.type==h){u.value+=g}else{if(u.type)l.push(u);u={type:h,value:g}}}for(var m=0;m<s.length-2;m++){if(s[m+1]===undefined)continue;d=r[o[m]];if(d.onMatch)h=d.onMatch(f,i,n);else h=d.token;if(d.next){if(typeof d.next=="string")i=d.next;else i=d.next(i,n);r=this.states[i];if(!r){window.console&&console.error&&console.error(i,"doesn't exist");i="start";r=this.states[i]}o=this.matchMappings[i];c=p;a=this.regExps[i];a.lastIndex=p}break}if(f){if(typeof h=="string"){if((!d||d.merge!==false)&&u.type===h){u.value+=f}else{if(u.type)l.push(u);u={type:h,value:f}}}else if(h){if(u.type)l.push(u);u={type:null,value:""};for(var m=0;m<h.length;m++)l.push(h[m])}}if(c==e.length)break;c=p;if(l.length>v){while(c<e.length){if(u.type)l.push(u);u={value:e.substring(c,c+=2e3),type:"overflow"}}i="start";n=[];break}}if(u.type)l.push(u);if(n.length>1){if(n[0]!==i)n.unshift(i)}return{tokens:l,state:n.length?n:i}}}).call(i.prototype);t.Tokenizer=i});ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,t,n){"use strict";var c=e("../lib/lang");var i=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(!t){for(var n in e)this.$rules[n]=e[n];return}for(var n in e){var i=e[n];for(var r=0;r<i.length;r++){var o=i[r];if(o.next){if(typeof o.next!="string"){if(o.nextState&&o.nextState.indexOf(t)!==0)o.nextState=t+o.nextState}else{if(o.next.indexOf(t)!==0)o.next=t+o.next}}}this.$rules[t+n]=i}};this.getRules=function(){return this.$rules};this.embedRules=function(e,t,n,i,r){var o=typeof e=="function"?(new e).getRules():e;if(i){for(var a=0;a<i.length;a++)i[a]=t+i[a]}else{i=[];for(var s in o)i.push(t+s)}this.addRules(o,t);if(n){var l=Array.prototype[r?"push":"unshift"];for(var a=0;a<i.length;a++)l.apply(this.$rules[i[a]],c.deepCopy(n))}if(!this.$embeds)this.$embeds=[];this.$embeds.push(t)};this.getEmbeds=function(){return this.$embeds};var f=function(e,t){if(e!="start"||t.length)t.unshift(this.nextState,e);return this.nextState};var p=function(e,t){t.shift();return t.shift()||"start"};this.normalizeRules=function(){var u=0;var h=this.$rules;function d(e){var t=h[e];t.processed=true;for(var n=0;n<t.length;n++){var i=t[n];if(!i.regex&&i.start){i.regex=i.start;if(!i.next)i.next=[];i.next.push({defaultToken:i.token},{token:i.token+".end",regex:i.end||i.start,next:"pop"});i.token=i.token+".start";i.push=true}var r=i.next||i.push;if(r&&Array.isArray(r)){var o=i.stateName;if(!o){o=i.token;if(typeof o!="string")o=o[0]||"";if(h[o])o+=u++}h[o]=r;i.next=o;d(o)}else if(r=="pop"){i.next=p}if(i.push){i.nextState=i.next||i.push;i.next=f;delete i.push}if(i.rules){for(var a in i.rules){if(h[a]){if(h[a].push)h[a].push.apply(h[a],i.rules[a])}else{h[a]=i.rules[a]}}}if(i.include||typeof i=="string"){var s=i.include||i;var l=h[s]}else if(Array.isArray(i))l=i;if(l){var c=[n,1].concat(l);if(i.noEscape)c=c.filter(function(e){return!e.next});t.splice.apply(t,c);n--;l=null}if(i.keywordMap){i.token=this.createKeywordMapper(i.keywordMap,i.defaultToken||"text",i.caseInsensitive);delete i.defaultToken}}}Object.keys(h).forEach(d,this)};this.createKeywordMapper=function(r,t,o,a){var s=Object.create(null);Object.keys(r).forEach(function(e){var t=r[e];if(o)t=t.toLowerCase();var n=t.split(a||"|");for(var i=n.length;i--;)s[n[i]]=e});if(Object.getPrototypeOf(s)){s.__proto__=null}this.$keywordList=Object.keys(s);r=null;return o?function(e){return s[e.toLowerCase()]||t}:function(e){return s[e]||t}};this.getKeywords=function(){return this.$keywords}}).call(i.prototype);t.TextHighlightRules=i});ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";var i=function(){this.$behaviours={}};(function(){this.add=function(e,t,n){switch(undefined){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n};this.addBehaviours=function(e){for(var t in e){for(var n in e[t]){this.add(t,n,e[t][n])}}};this.remove=function(e){if(this.$behaviours&&this.$behaviours[e]){delete this.$behaviours[e]}};this.inherit=function(e,t){if(typeof e==="function"){var n=(new e).getBehaviours(t)}else{var n=e.getBehaviours(t)}this.addBehaviours(n)};this.getBehaviours=function(e){if(!e){return this.$behaviours}else{var t={};for(var n=0;n<e.length;n++){if(this.$behaviours[e[n]]){t[e[n]]=this.$behaviours[e[n]]}}return t}}}).call(i.prototype);t.Behaviour=i});ace.define("ace/unicode",["require","exports","module"],function(e,i,t){"use strict";i.packages={};n({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"});function n(e){var t=/\w{4}/g;for(var n in e)i.packages[n]=e[n].replace(t,"\\u$&")}});ace.define("ace/token_iterator",["require","exports","module"],function(e,t,n){"use strict";var i=function(e,t,n){this.$session=e;this.$row=t;this.$rowTokens=e.getTokens(t);var i=e.getTokenAt(t,n);this.$tokenIndex=i?i.index:-1};(function(){this.stepBackward=function(){this.$tokenIndex-=1;while(this.$tokenIndex<0){this.$row-=1;if(this.$row<0){this.$row=0;return null}this.$rowTokens=this.$session.getTokens(this.$row);this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]};this.stepForward=function(){this.$tokenIndex+=1;var e;while(this.$tokenIndex>=this.$rowTokens.length){this.$row+=1;if(!e)e=this.$session.getLength();if(this.$row>=e){this.$row=e-1;return null}this.$rowTokens=this.$session.getTokens(this.$row);this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]};this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]};this.getCurrentTokenRow=function(){return this.$row};this.getCurrentTokenColumn=function(){var e=this.$rowTokens;var t=this.$tokenIndex;var n=e[t].start;if(n!==undefined)return n;n=0;while(t>0){t-=1;n+=e[t].value.length}return n}}).call(i.prototype);t.TokenIterator=i});ace.define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var i=e("../tokenizer").Tokenizer;var r=e("./text_highlight_rules").TextHighlightRules;var o=e("./behaviour").Behaviour;var a=e("../unicode");var C=e("../lib/lang");var m=e("../token_iterator").TokenIterator;var v=e("../range").Range;var s=function(){this.HighlightRules=r;this.$behaviour=new o};(function(){this.tokenRe=new RegExp("^["+a.packages.L+a.packages.Mn+a.packages.Mc+a.packages.Nd+a.packages.Pc+"\\$_]+","g");this.nonTokenRe=new RegExp("^(?:[^"+a.packages.L+a.packages.Mn+a.packages.Mc+a.packages.Nd+a.packages.Pc+"\\$_]|\\s])+","g");this.getTokenizer=function(){if(!this.$tokenizer){this.$highlightRules=this.$highlightRules||new this.HighlightRules;this.$tokenizer=new i(this.$highlightRules.getRules())}return this.$tokenizer};this.lineCommentStart="";this.blockComment="";this.toggleCommentLines=function(e,r,n,i){var o=r.doc;var a=true;var s=true;var l=Infinity;var c=r.getTabSize();var t=false;if(!this.lineCommentStart){if(!this.blockComment)return false;var u=this.blockComment.start;var h=this.blockComment.end;var d=new RegExp("^(\\s*)(?:"+C.escapeRegExp(u)+")");var f=new RegExp("(?:"+C.escapeRegExp(h)+")\\s*$");var p=function(e,t){if(m(e,t))return;if(!a||/\S/.test(e)){o.insertInLine({row:t,column:e.length},h);o.insertInLine({row:t,column:l},u)}};var g=function(e,t){var n;if(n=e.match(f))o.removeInLine(t,e.length-n[0].length,e.length);if(n=e.match(d))o.removeInLine(t,n[1].length,n[0].length)};var m=function(e,t){if(d.test(e))return true;var n=r.getTokens(t);for(var i=0;i<n.length;i++){if(n[i].type==="comment")return true}}}else{if(Array.isArray(this.lineCommentStart)){var d=this.lineCommentStart.map(C.escapeRegExp).join("|");var u=this.lineCommentStart[0]}else{var d=C.escapeRegExp(this.lineCommentStart);var u=this.lineCommentStart}d=new RegExp("^(\\s*)(?:"+d+") ?");t=r.getUseSoftTabs();var g=function(e,t){var n=e.match(d);if(!n)return;var i=n[1].length,r=n[0].length;if(!b(e,i,r)&&n[0][r-1]==" ")r--;o.removeInLine(t,i,r)};var v=u+" ";var p=function(e,t){if(!a||/\S/.test(e)){if(b(e,l,l))o.insertInLine({row:t,column:l},v);else o.insertInLine({row:t,column:l},u)}};var m=function(e,t){return d.test(e)};var b=function(e,t,n){var i=0;while(t--&&e.charAt(t)==" ")i++;if(i%c!=0)return false;var i=0;while(e.charAt(n++)==" ")i++;if(c>2)return i%c!=c-1;else return i%c==0;return true}}function w(e){for(var t=n;t<=i;t++)e(o.getLine(t),t)}var y=Infinity;w(function(e,t){var n=e.search(/\S/);if(n!==-1){if(n<l)l=n;if(s&&!m(e,t))s=false}else if(y>e.length){y=e.length}});if(l==Infinity){l=y;a=false;s=false}if(t&&l%c!=0)l=Math.floor(l/c)*c;w(s?g:p)};this.toggleBlockComment=function(e,t,n,i){var r=this.blockComment;if(!r)return;if(!r.start&&r[0])r=r[0];var o=new m(t,i.row,i.column);var a=o.getCurrentToken();var s=t.selection;var l=t.selection.toOrientedRange();var c,u;if(a&&/comment/.test(a.type)){var h,d;while(a&&/comment/.test(a.type)){var f=a.value.indexOf(r.start);if(f!=-1){var p=o.getCurrentTokenRow();var g=o.getCurrentTokenColumn()+f;h=new v(p,g,p,g+r.start.length);break}a=o.stepBackward()}var o=new m(t,i.row,i.column);var a=o.getCurrentToken();while(a&&/comment/.test(a.type)){var f=a.value.indexOf(r.end);if(f!=-1){var p=o.getCurrentTokenRow();var g=o.getCurrentTokenColumn()+f;d=new v(p,g,p,g+r.end.length);break}a=o.stepForward()}if(d)t.remove(d);if(h){t.remove(h);c=h.start.row;u=-r.start.length}}else{u=r.start.length;c=n.start.row;t.insert(n.end,r.end);t.insert(n.start,r.start)}if(l.start.row==c)l.start.column+=u;if(l.end.row==c)l.end.column+=u;t.selection.fromOrientedRange(l)};this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)};this.checkOutdent=function(e,t,n){return false};this.autoOutdent=function(e,t,n){};this.$getIndent=function(e){return e.match(/^\s*/)[0]};this.createWorker=function(e){return null};this.createModeDelegates=function(e){this.$embeds=[];this.$modes={};for(var i in e){if(e[i]){this.$embeds.push(i);this.$modes[i]=new e[i]}}var r=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(var i=0;i<r.length;i++){(function(e){var t=r[i];var n=e[t];e[r[i]]=function(){return this.$delegator(t,arguments,n)}})(this)}};this.$delegator=function(e,t,n){var i=t[0];if(typeof i!="string")i=i[0];for(var r=0;r<this.$embeds.length;r++){if(!this.$modes[this.$embeds[r]])continue;var o=i.split(this.$embeds[r]);if(!o[0]&&o[1]){t[0]=o[1];var a=this.$modes[this.$embeds[r]];return a[e].apply(a,t)}}var s=n.apply(this,t);return n?s:undefined};this.transformAction=function(e,t,n,i,r){if(this.$behaviour){var o=this.$behaviour.getBehaviours();for(var a in o){if(o[a][t]){var s=o[a][t].apply(this,arguments);if(s){return s}}}}};this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules;var n=[];for(var i in t){var r=t[i];for(var o=0,a=r.length;o<a;o++){if(typeof r[o].token==="string"){if(/keyword|support|storage/.test(r[o].token))n.push(r[o].regex)}else if(typeof r[o].token==="object"){for(var s=0,l=r[o].token.length;s<l;s++){if(/keyword|support|storage/.test(r[o].token[s])){var i=r[o].regex.match(/\(.+?\)/g)[s];n.push(i.substr(1,i.length-2))}}}}}this.completionKeywords=n}if(!e)return this.$keywordList;return n.concat(this.$keywordList||[])};this.$createKeywordList=function(){if(!this.$highlightRules)this.getTokenizer();return this.$keywordList=this.$highlightRules.$keywordList||[]};this.getCompletions=function(e,t,n,i){var r=this.$keywordList||this.$createKeywordList();return r.map(function(e){return{name:e,value:e,score:0,meta:"keyword"}})};this.$id="ace/mode/text"}).call(s.prototype);t.Mode=s});ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("./lib/oop");var r=e("./lib/event_emitter").EventEmitter;var o=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this);this.attach(e);if(typeof n=="undefined")this.setPosition(t.row,t.column);else this.setPosition(t,n)};(function(){i.implement(this,r);this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)};this.getDocument=function(){return this.document};this.$insertRight=false;this.onChange=function(e){var t=e.data;var n=t.range;if(n.start.row==n.end.row&&n.start.row!=this.row)return;if(n.start.row>this.row)return;if(n.start.row==this.row&&n.start.column>this.column)return;var i=this.row;var r=this.column;var o=n.start;var a=n.end;if(t.action==="insertText"){if(o.row===i&&o.column<=r){if(o.column===r&&this.$insertRight){}else if(o.row===a.row){r+=a.column-o.column}else{r-=o.column;i+=a.row-o.row}}else if(o.row!==a.row&&o.row<i){i+=a.row-o.row}}else if(t.action==="insertLines"){if(o.row===i&&r===0&&this.$insertRight){}else if(o.row<=i){i+=a.row-o.row}}else if(t.action==="removeText"){if(o.row===i&&o.column<r){if(a.column>=r)r=o.column;else r=Math.max(0,r-(a.column-o.column))}else if(o.row!==a.row&&o.row<i){if(a.row===i)r=Math.max(0,r-a.column)+o.column;i-=a.row-o.row}else if(a.row===i){i-=a.row-o.row;r=Math.max(0,r-a.column)+o.column}}else if(t.action=="removeLines"){if(o.row<=i){if(a.row<=i)i-=a.row-o.row;else{i=o.row;r=0}}}this.setPosition(i,r,true)};this.setPosition=function(e,t,n){var i;if(n){i={row:e,column:t}}else{i=this.$clipPositionToDocument(e,t)}if(this.row==i.row&&this.column==i.column)return;var r={row:this.row,column:this.column};this.row=i.row;this.column=i.column;this._signal("change",{old:r,value:i})};this.detach=function(){this.document.removeEventListener("change",this.$onChange)};this.attach=function(e){this.document=e||this.document;this.document.on("change",this.$onChange)};this.$clipPositionToDocument=function(e,t){var n={};if(e>=this.document.getLength()){n.row=Math.max(0,this.document.getLength()-1);n.column=this.document.getLine(n.row).length}else if(e<0){n.row=0;n.column=0}else{n.row=e;n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))}if(t<0)n.column=0;return n}}).call(o.prototype)});ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var i=e("./lib/oop");var r=e("./lib/event_emitter").EventEmitter;var l=e("./range").Range;var o=e("./anchor").Anchor;var a=function(e){this.$lines=[];if(e.length===0){this.$lines=[""]}else if(Array.isArray(e)){this._insertLines(0,e)}else{this.insert({row:0,column:0},e)}};(function(){i.implement(this,r);this.setValue=function(e){var t=this.getLength();this.remove(new l(0,0,t,this.getLine(t-1).length));this.insert({row:0,column:0},e)};this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())};this.createAnchor=function(e,t){return new o(this,e,t)};if("aaa".split(/a/).length===0)this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")};else this.$split=function(e){return e.split(/\r\n|\r|\n/)};this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n";this._signal("changeNewLineMode")};this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}};this.$autoNewLine="";this.$newLineMode="auto";this.setNewLineMode=function(e){if(this.$newLineMode===e)return;this.$newLineMode=e;this._signal("changeNewLineMode")};this.getNewLineMode=function(){return this.$newLineMode};this.isNewLine=function(e){return e=="\r\n"||e=="\r"||e=="\n"};this.getLine=function(e){return this.$lines[e]||""};this.getLines=function(e,t){return this.$lines.slice(e,t+1)};this.getAllLines=function(){return this.getLines(0,this.getLength())};this.getLength=function(){return this.$lines.length};this.getTextRange=function(e){if(e.start.row==e.end.row){return this.getLine(e.start.row).substring(e.start.column,e.end.column)}var t=this.getLines(e.start.row,e.end.row);t[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;if(e.end.row-e.start.row==n)t[n]=t[n].substring(0,e.end.column);return t.join(this.getNewLineCharacter())};this.$clipPosition=function(e){var t=this.getLength();if(e.row>=t){e.row=Math.max(0,t-1);e.column=this.getLine(t-1).length}else if(e.row<0)e.row=0;return e};this.insert=function(e,t){if(!t||t.length===0)return e;e=this.$clipPosition(e);if(this.getLength()<=1)this.$detectNewLine(t);var n=this.$split(t);var i=n.splice(0,1)[0];var r=n.length==0?null:n.splice(n.length-1,1)[0];e=this.insertInLine(e,i);if(r!==null){e=this.insertNewLine(e);e=this._insertLines(e.row,n);e=this.insertInLine(e,r||"")}return e};this.insertLines=function(e,t){if(e>=this.getLength())return this.insert({row:e,column:0},"\n"+t.join("\n"));return this._insertLines(Math.max(e,0),t)};this._insertLines=function(e,t){if(t.length==0)return{row:e,column:0};while(t.length>61440){var n=this._insertLines(e,t.slice(0,61440));t=t.slice(61440);e=n.row}var i=[e,0];i.push.apply(i,t);this.$lines.splice.apply(this.$lines,i);var r=new l(e,0,e+t.length,0);var o={action:"insertLines",range:r,lines:t};this._signal("change",{data:o});return r.end};this.insertNewLine=function(e){e=this.$clipPosition(e);var t=this.$lines[e.row]||"";this.$lines[e.row]=t.substring(0,e.column);this.$lines.splice(e.row+1,0,t.substring(e.column,t.length));var n={row:e.row+1,column:0};var i={action:"insertText",range:l.fromPoints(e,n),text:this.getNewLineCharacter()};this._signal("change",{data:i});return n};this.insertInLine=function(e,t){if(t.length==0)return e;var n=this.$lines[e.row]||"";this.$lines[e.row]=n.substring(0,e.column)+t+n.substring(e.column);var i={row:e.row,column:e.column+t.length};var r={action:"insertText",range:l.fromPoints(e,i),text:t};this._signal("change",{data:r});return i};this.remove=function(e){if(!(e instanceof l))e=l.fromPoints(e.start,e.end);e.start=this.$clipPosition(e.start);e.end=this.$clipPosition(e.end);if(e.isEmpty())return e.start;var t=e.start.row;var n=e.end.row;if(e.isMultiLine()){var i=e.start.column==0?t:t+1;var r=n-1;if(e.end.column>0)this.removeInLine(n,0,e.end.column);if(r>=i)this._removeLines(i,r);if(i!=t){this.removeInLine(t,e.start.column,this.getLine(t).length);this.removeNewLine(e.start.row)}}else{this.removeInLine(t,e.start.column,e.end.column)}return e.start};this.removeInLine=function(e,t,n){if(t==n)return;var i=new l(e,t,e,n);var r=this.getLine(e);var o=r.substring(t,n);var a=r.substring(0,t)+r.substring(n,r.length);this.$lines.splice(e,1,a);var s={action:"removeText",range:i,text:o};this._signal("change",{data:s});return i.start};this.removeLines=function(e,t){if(e<0||t>=this.getLength())return this.remove(new l(e,0,t+1,0));return this._removeLines(e,t)};this._removeLines=function(e,t){var n=new l(e,0,t+1,0);var i=this.$lines.splice(e,t-e+1);var r={action:"removeLines",range:n,nl:this.getNewLineCharacter(),lines:i};this._signal("change",{data:r});return i};this.removeNewLine=function(e){var t=this.getLine(e);var n=this.getLine(e+1);var i=new l(e,t.length,e+1,0);var r=t+n;this.$lines.splice(e,2,r);var o={action:"removeText",range:i,text:this.getNewLineCharacter()};this._signal("change",{data:o})};this.replace=function(e,t){if(!(e instanceof l))e=l.fromPoints(e.start,e.end);if(t.length==0&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;this.remove(e);if(t){var n=this.insert(e.start,t)}else{n=e.start}return n};this.applyDeltas=function(e){for(var t=0;t<e.length;t++){var n=e[t];var i=l.fromPoints(n.range.start,n.range.end);if(n.action=="insertLines")this.insertLines(i.start.row,n.lines);else if(n.action=="insertText")this.insert(i.start,n.text);else if(n.action=="removeLines")this._removeLines(i.start.row,i.end.row-1);else if(n.action=="removeText")this.remove(i)}};this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--){var n=e[t];var i=l.fromPoints(n.range.start,n.range.end);if(n.action=="insertLines")this._removeLines(i.start.row,i.end.row-1);else if(n.action=="insertText")this.remove(i);else if(n.action=="removeLines")this._insertLines(i.start.row,n.lines);else if(n.action=="removeText")this.insert(i.start,n.text)}};this.indexToPosition=function(e,t){var n=this.$lines||this.getAllLines();var i=this.getNewLineCharacter().length;for(var r=t||0,o=n.length;r<o;r++){e-=n[r].length+i;if(e<0)return{row:r,column:e+n[r].length+i}}return{row:o-1,column:n[o-1].length}};this.positionToIndex=function(e,t){var n=this.$lines||this.getAllLines();var i=this.getNewLineCharacter().length;var r=0;var o=Math.min(e.row,n.length);for(var a=t||0;a<o;++a)r+=n[a].length+i;return r+e.column}}).call(a.prototype);t.Document=a});ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("./lib/oop");var r=e("./lib/event_emitter").EventEmitter;var o=function(e,t){this.running=false;this.lines=[];this.states=[];this.currentLine=0;this.tokenizer=e;var s=this;this.$worker=function(){if(!s.running){return}var e=new Date;var t=s.currentLine;var n=-1;var i=s.doc;while(s.lines[t])t++;var r=t;var o=i.getLength();var a=0;s.running=false;while(t<o){s.$tokenizeRow(t);n=t;do{t++}while(s.lines[t]);a++;if(a%5==0&&new Date-e>20){s.running=setTimeout(s.$worker,20);s.currentLine=t;return}}s.currentLine=t;if(r<=n)s.fireUpdateEvent(r,n)}};(function(){i.implement(this,r);this.setTokenizer=function(e){this.tokenizer=e;this.lines=[];this.states=[];this.start(0)};this.setDocument=function(e){this.doc=e;this.lines=[];this.states=[];this.stop()};this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._signal("update",{data:n})};this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength());this.lines.splice(this.currentLine,this.lines.length);this.states.splice(this.currentLine,this.states.length);this.stop();this.running=setTimeout(this.$worker,700)};this.scheduleStart=function(){if(!this.running)this.running=setTimeout(this.$worker,700)};this.$updateOnChange=function(e){var t=e.range;var n=t.start.row;var i=t.end.row-n;if(i===0){this.lines[n]=null}else if(e.action=="removeText"||e.action=="removeLines"){this.lines.splice(n,i+1,null);this.states.splice(n,i+1,null)}else{var r=Array(i+1);r.unshift(n,1);this.lines.splice.apply(this.lines,r);this.states.splice.apply(this.states,r)}this.currentLine=Math.min(n,this.currentLine,this.doc.getLength());this.stop()};this.stop=function(){if(this.running)clearTimeout(this.running);this.running=false};this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)};this.getState=function(e){if(this.currentLine==e)this.$tokenizeRow(e);return this.states[e]||"start"};this.$tokenizeRow=function(e){var t=this.doc.getLine(e);var n=this.states[e-1];var i=this.tokenizer.getLineTokens(t,n,e);if(this.states[e]+""!==i.state+""){this.states[e]=i.state;this.lines[e+1]=null;if(this.currentLine>e+1)this.currentLine=e+1}else if(this.currentLine==e){this.currentLine=e+1}return this.lines[e]=i.tokens}}).call(o.prototype);t.BackgroundTokenizer=o});ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var c=e("./lib/lang");var i=e("./lib/oop");var u=e("./range").Range;var r=function(e,t,n){this.setRegexp(e);this.clazz=t;this.type=n||"text"};(function(){this.MAX_RANGES=500;this.setRegexp=function(e){if(this.regExp+""==e+"")return;this.regExp=e;this.cache=[]};this.update=function(e,t,n,i){if(!this.regExp)return;var r=i.firstRow,o=i.lastRow;for(var a=r;a<=o;a++){var s=this.cache[a];if(s==null){s=c.getMatchOffsets(n.getLine(a),this.regExp);if(s.length>this.MAX_RANGES)s=s.slice(0,this.MAX_RANGES);s=s.map(function(e){return new u(a,e.offset,a,e.offset+e.length)});this.cache[a]=s.length?s:""}for(var l=s.length;l--;){t.drawSingleLineMarker(e,s[l].toScreenRange(n),this.clazz,i)}}}}).call(r.prototype);t.SearchHighlight=r});ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";var i=e("../range").Range;function l(e,t){this.foldData=e;if(Array.isArray(t)){this.folds=t}else{t=this.folds=[t]}var n=t[t.length-1];this.range=new i(t[0].start.row,t[0].start.column,n.end.row,n.end.column);this.start=this.range.start;this.end=this.range.end;this.folds.forEach(function(e){e.setFoldLine(this)},this)}(function(){this.shiftRow=function(t){this.start.row+=t;this.end.row+=t;this.folds.forEach(function(e){e.start.row+=t;e.end.row+=t})};this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow){throw new Error("Can't add a fold to this FoldLine as it has no connection")}this.folds.push(e);this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)});if(this.range.compareEnd(e.start.row,e.start.column)>0){this.end.row=e.end.row;this.end.column=e.end.column}else if(this.range.compareStart(e.end.row,e.end.column)<0){this.start.row=e.start.row;this.start.column=e.start.column}}else if(e.start.row==this.end.row){this.folds.push(e);this.end.row=e.end.row;this.end.column=e.end.column}else if(e.end.row==this.start.row){this.folds.unshift(e);this.start.row=e.start.row;this.start.column=e.start.column}else{throw new Error("Trying to add fold to FoldRow that doesn't have a matching row")}e.foldLine=this};this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row};this.walk=function(e,t,n){var i=0,r=this.folds,o,a,s,l=true;if(t==null){t=this.end.row;n=this.end.column}for(var c=0;c<r.length;c++){o=r[c];a=o.range.compareStart(t,n);if(a==-1){e(null,t,n,i,l);return}s=e(null,o.start.row,o.start.column,i,l);s=!s&&e(o.placeholder,o.start.row,o.start.column,i);if(s||a==0){return}l=!o.sameRow;i=o.end.column}e(null,t,n,i,l)};this.getNextFoldTo=function(e,t){var n,i;for(var r=0;r<this.folds.length;r++){n=this.folds[r];i=n.range.compareEnd(e,t);if(i==-1){return{fold:n,kind:"after"}}else if(i==0){return{fold:n,kind:"inside"}}}return null};this.addRemoveChars=function(e,t,n){var i=this.getNextFoldTo(e,t),r,o;if(i){r=i.fold;if(i.kind=="inside"&&r.start.column!=t&&r.start.row!=e){window.console&&window.console.log(e,t,r)}else if(r.start.row==e){o=this.folds;var a=o.indexOf(r);if(a==0){this.start.column+=n}for(a;a<o.length;a++){r=o[a];r.start.column+=n;if(!r.sameRow){return}r.end.column+=n}this.end.column+=n}}};this.split=function(e,t){var n=this.getNextFoldTo(e,t).fold;var i=this.folds;var r=this.foldData;if(!n)return null;var o=i.indexOf(n);var a=i[o-1];this.end.row=a.end.row;this.end.column=a.end.column;i=i.splice(o,i.length-o);var s=new l(r,i);r.splice(r.indexOf(this)+1,0,s);return s};this.merge=function(e){var t=e.folds;for(var n=0;n<t.length;n++){this.addFold(t[n])}var i=this.foldData;i.splice(i.indexOf(e),1)};this.toString=function(){var t=[this.range.toString()+": ["];this.folds.forEach(function(e){t.push("  "+e.toString())});t.push("]");return t.join("\n")};this.idxToPosition=function(e){var t=0;var n;for(var i=0;i<this.folds.length;i++){var n=this.folds[i];e-=n.start.column-t;if(e<0){return{row:n.start.row,column:n.start.column+e}}e-=n.placeholder.length;if(e<0){return n.start}t=n.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(l.prototype);t.FoldLine=l});ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var i=e("./range").Range;var l=i.comparePoints;var r=function(){this.ranges=[]};(function(){this.comparePoints=l;this.pointIndex=function(e,t,n){var i=this.ranges;for(var r=n||0;r<i.length;r++){var o=i[r];var a=l(e,o.end);if(a>0)continue;var s=l(e,o.start);if(a===0)return t&&s!==0?-r-2:r;if(s>0||s===0&&!t)return r;return-r-1}return-r-1};this.add=function(e){var t=!e.isEmpty();var n=this.pointIndex(e.start,t);if(n<0)n=-n-1;var i=this.pointIndex(e.end,t,n);if(i<0)i=-i-1;else i++;return this.ranges.splice(n,i-n,e)};this.addList=function(e){var t=[];for(var n=e.length;n--;){t.push.call(t,this.add(e[n]))}return t};this.substractPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)};this.merge=function(){var e=[];var t=this.ranges;t=t.sort(function(e,t){return l(e.start,t.start)});var n=t[0],i;for(var r=1;r<t.length;r++){i=n;n=t[r];var o=l(i.end,n.start);if(o<0)continue;if(o==0&&!i.isEmpty()&&!n.isEmpty())continue;if(l(i.end,n.end)<0){i.end.row=n.end.row;i.end.column=n.end.column}t.splice(r,1);e.push(n);n=i;r--}this.ranges=t;return e};this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0};this.containsPoint=function(e){return this.pointIndex(e)>=0};this.rangeAtPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]};this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var i=this.pointIndex({row:e,column:0});if(i<0)i=-i-1;var r=this.pointIndex({row:t,column:0},i);if(r<0)r=-r-1;var o=[];for(var a=i;a<r;a++){o.push(n[a])}return o};this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)};this.attach=function(e){if(this.session)this.detach();this.session=e;this.onChange=this.$onChange.bind(this);this.session.on("change",this.onChange)};this.detach=function(){if(!this.session)return;this.session.removeListener("change",this.onChange);this.session=null};this.$onChange=function(e){var t=e.data.range;if(e.data.action[0]=="i"){var n=t.start;var i=t.end}else{var i=t.start;var n=t.end}var r=n.row;var o=i.row;var a=o-r;var s=-n.column+i.column;var l=this.ranges;for(var c=0,u=l.length;c<u;c++){var h=l[c];if(h.end.row<r)continue;if(h.start.row>r)break;if(h.start.row==r&&h.start.column>=n.column){if(h.start.column==n.column&&this.$insertRight){}else{h.start.column+=s;h.start.row+=a}}if(h.end.row==r&&h.end.column>=n.column){if(h.end.column==n.column&&this.$insertRight){continue}if(h.end.column==n.column&&s>0&&c<u-1){if(h.end.column>h.start.column&&h.end.column==l[c+1].start.column)h.end.column-=s}h.end.column+=s;h.end.row+=a}}if(a!=0&&c<u){for(;c<u;c++){var h=l[c];h.start.row+=a;h.end.row+=a}}}}).call(r.prototype);t.RangeList=r});ace.define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(e,t,n){"use strict";var i=e("../range").Range;var r=e("../range_list").RangeList;var o=e("../lib/oop");var a=t.Fold=function(e,t){this.foldLine=null;this.placeholder=t;this.range=e;this.start=e.start;this.end=e.end;this.sameRow=e.start.row==e.end.row;this.subFolds=this.ranges=[]};o.inherits(a,r);(function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()};this.setFoldLine=function(t){this.foldLine=t;this.subFolds.forEach(function(e){e.setFoldLine(t)})};this.clone=function(){var e=this.range.clone();var t=new a(e,this.placeholder);this.subFolds.forEach(function(e){t.subFolds.push(e.clone())});t.collapseChildren=this.collapseChildren;return t};this.addSubFold=function(e){if(this.range.isEqual(e))return;if(!this.range.containsRange(e))throw new Error("A fold can't intersect already existing fold"+e.range+this.range);c(e,this.start);var t=e.start.row,n=e.start.column;for(var i=0,r=-1;i<this.subFolds.length;i++){r=this.subFolds[i].range.compare(t,n);if(r!=1)break}var o=this.subFolds[i];if(r==0)return o.addSubFold(e);var t=e.range.end.row,n=e.range.end.column;for(var a=i,r=-1;a<this.subFolds.length;a++){r=this.subFolds[a].range.compare(t,n);if(r!=1)break}var s=this.subFolds[a];if(r==0)throw new Error("A fold can't intersect already existing fold"+e.range+this.range);var l=this.subFolds.splice(i,a-i,e);e.setFoldLine(this.foldLine);return e};this.restoreRange=function(e){return u(e,this.start)}}).call(a.prototype);function s(e,t){e.row-=t.row;if(e.row==0)e.column-=t.column}function c(e,t){s(e.start,t);s(e.end,t)}function l(e,t){if(e.row==0)e.column+=t.column;e.row+=t.row}function u(e,t){l(e.start,t);l(e.end,t)}});ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,t,n){"use strict";var s=e("../range").Range;var g=e("./fold_line").FoldLine;var m=e("./fold").Fold;var l=e("../token_iterator").TokenIterator;function i(){this.getFoldAt=function(e,t,n){var i=this.getFoldLine(e);if(!i)return null;var r=i.folds;for(var o=0;o<r.length;o++){var a=r[o];if(a.range.contains(e,t)){if(n==1&&a.range.isEnd(e,t)){continue}else if(n==-1&&a.range.isStart(e,t)){continue}return a}}};this.getFoldsInRange=function(e){var t=e.start;var n=e.end;var i=this.$foldData;var r=[];t.column+=1;n.column-=1;for(var o=0;o<i.length;o++){var a=i[o].range.compareRange(e);if(a==2){continue}else if(a==-2){break}var s=i[o].folds;for(var l=0;l<s.length;l++){var c=s[l];a=c.range.compareRange(e);if(a==-2){break}else if(a==2){continue}else if(a==42){break}r.push(c)}}t.column-=1;n.column+=1;return r};this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach(function(e){t=t.concat(this.getFoldsInRange(e))},this)}else{var t=this.getFoldsInRange(e)}return t};this.getAllFolds=function(){var e=[];var t=this.$foldData;for(var n=0;n<t.length;n++)for(var i=0;i<t[n].folds.length;i++)e.push(t[n].folds[i]);return e};this.getFoldStringAt=function(e,t,n,i){i=i||this.getFoldLine(e);if(!i)return null;var r={end:{column:0}};var o,a;for(var s=0;s<i.folds.length;s++){a=i.folds[s];var l=a.range.compareEnd(e,t);if(l==-1){o=this.getLine(a.start.row).substring(r.end.column,a.start.column);break}else if(l===0){return null}r=a}if(!o)o=this.getLine(a.start.row).substring(r.end.column);if(n==-1)return o.substring(0,t-r.end.column);else if(n==1)return o.substring(t-r.end.column);else return o};this.getFoldLine=function(e,t){var n=this.$foldData;var i=0;if(t)i=n.indexOf(t);if(i==-1)i=0;for(i;i<n.length;i++){var r=n[i];if(r.start.row<=e&&r.end.row>=e){return r}else if(r.end.row>e){return null}}return null};this.getNextFoldLine=function(e,t){var n=this.$foldData;var i=0;if(t)i=n.indexOf(t);if(i==-1)i=0;for(i;i<n.length;i++){var r=n[i];if(r.end.row>=e){return r}}return null};this.getFoldedRowCount=function(e,t){var n=this.$foldData,i=t-e+1;for(var r=0;r<n.length;r++){var o=n[r],a=o.end.row,s=o.start.row;if(a>=t){if(s<t){if(s>=e)i-=t-s;else i=0}break}else if(a>=e){if(s>=e)i-=a-s;else i-=a-e+1}}return i};this.$addFoldLine=function(e){this.$foldData.push(e);this.$foldData.sort(function(e,t){return e.start.row-t.start.row});return e};this.addFold=function(e,t){var n=this.$foldData;var i=false;var r;if(e instanceof m)r=e;else{r=new m(t,e);r.collapseChildren=t.collapseChildren}this.$clipRangeToDocument(r.range);var o=r.start.row;var a=r.start.column;var s=r.end.row;var l=r.end.column;if(!(o<s||o==s&&a<=l-2))throw new Error("The range has to be at least 2 characters width");var c=this.getFoldAt(o,a,1);var u=this.getFoldAt(s,l,-1);if(c&&u==c)return c.addSubFold(r);if(c&&!c.range.isStart(o,a)||u&&!u.range.isEnd(s,l)){throw new Error("A fold can't intersect already existing fold"+r.range+c.range)}var h=this.getFoldsInRange(r.range);if(h.length>0){this.removeFolds(h);h.forEach(function(e){r.addSubFold(e)})}for(var d=0;d<n.length;d++){var f=n[d];if(s==f.start.row){f.addFold(r);i=true;break}else if(o==f.end.row){f.addFold(r);i=true;if(!r.sameRow){var p=n[d+1];if(p&&p.start.row==s){f.merge(p);break}}break}else if(s<=f.start.row){break}}if(!i)f=this.$addFoldLine(new g(this.$foldData,r));if(this.$useWrapMode)this.$updateWrapData(f.start.row,f.start.row);else this.$updateRowLengthCache(f.start.row,f.start.row);this.$modified=true;this._emit("changeFold",{data:r,action:"add"});return r};this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)};this.removeFold=function(e){var t=e.foldLine;var n=t.start.row;var i=t.end.row;var r=this.$foldData;var o=t.folds;if(o.length==1){r.splice(r.indexOf(t),1)}else if(t.range.isEnd(e.end.row,e.end.column)){o.pop();t.end.row=o[o.length-1].end.row;t.end.column=o[o.length-1].end.column}else if(t.range.isStart(e.start.row,e.start.column)){o.shift();t.start.row=o[0].start.row;t.start.column=o[0].start.column}else if(e.sameRow){o.splice(o.indexOf(e),1)}else{var a=t.split(e.start.row,e.start.column);o=a.folds;o.shift();a.start.row=o[0].start.row;a.start.column=o[0].start.column}if(!this.$updating){if(this.$useWrapMode)this.$updateWrapData(n,i);else this.$updateRowLengthCache(n,i)}this.$modified=true;this._emit("changeFold",{data:e,action:"remove"})};this.removeFolds=function(e){var t=[];for(var n=0;n<e.length;n++){t.push(e[n])}t.forEach(function(e){this.removeFold(e)},this);this.$modified=true};this.expandFold=function(t){this.removeFold(t);t.subFolds.forEach(function(e){t.restoreRange(e);this.addFold(e)},this);if(t.collapseChildren>0){this.foldAll(t.start.row+1,t.end.row,t.collapseChildren-1)}t.subFolds=[]};this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)};this.unfold=function(e,t){var n,i;if(e==null){n=new s(0,0,this.getLength(),0);t=true}else if(typeof e=="number")n=new s(e,0,e,this.getLine(e).length);else if("row"in e)n=s.fromPoints(e,e);else n=e;i=this.getFoldsInRangeList(n);if(t){this.removeFolds(i)}else{var r=i;while(r.length){this.expandFolds(r);r=this.getFoldsInRangeList(n)}}if(i.length)return i};this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)};this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e};this.getRowFoldStart=function(e,t){var n=this.getFoldLine(e,t);return n?n.start.row:e};this.getFoldDisplayLine=function(e,t,n,r,o){if(r==null)r=e.start.row;if(o==null)o=0;if(t==null)t=e.end.row;if(n==null)n=this.getLine(t).length;var a=this.doc;var s="";e.walk(function(e,t,n,i){if(t<r)return;if(t==r){if(n<o)return;i=Math.max(o,i)}if(e!=null){s+=e}else{s+=a.getLine(t).substring(i,n)}},t,n);return s};this.getDisplayLine=function(e,t,n,i){var r=this.getFoldLine(e);if(!r){var o;o=this.doc.getLine(e);return o.substring(i||0,t||o.length)}else{return this.getFoldDisplayLine(r,e,t,n,i)}};this.$cloneFoldData=function(){var n=[];n=this.$foldData.map(function(e){var t=e.folds.map(function(e){return e.clone()});return new g(n,t)});return n};this.toggleFold=function(e){var t=this.selection;var n=t.getRange();var i;var r;if(n.isEmpty()){var o=n.start;i=this.getFoldAt(o.row,o.column);if(i){this.expandFold(i);return}else if(r=this.findMatchingBracket(o)){if(n.comparePoint(r)==1){n.end=r}else{n.start=r;n.start.column++;n.end.column--}}else if(r=this.findMatchingBracket({row:o.row,column:o.column+1})){if(n.comparePoint(r)==1)n.end=r;else n.start=r;n.start.column++}else{n=this.getCommentFoldRange(o.row,o.column)||n}}else{var a=this.getFoldsInRange(n);if(e&&a.length){this.expandFolds(a);return}else if(a.length==1){i=a[0]}}if(!i)i=this.getFoldAt(n.start.row,n.start.column);if(i&&i.range.toString()==n.toString()){this.expandFold(i);return}var s="...";if(!n.isMultiLine()){s=this.getTextRange(n);if(s.length<4)return;s=s.trim().substring(0,2)+".."}this.addFold(s,n)};this.getCommentFoldRange=function(e,t,n){var i=new l(this,e,t);var r=i.getCurrentToken();if(r&&/^comment|string/.test(r.type)){var o=new s;var a=new RegExp(r.type.replace(/\..*/,"\\."));if(n!=1){do{r=i.stepBackward()}while(r&&a.test(r.type));i.stepForward()}o.start.row=i.getCurrentTokenRow();o.start.column=i.getCurrentTokenColumn()+2;i=new l(this,e,t);if(n!=-1){do{r=i.stepForward()}while(r&&a.test(r.type));r=i.stepBackward()}else r=i.getCurrentToken();o.end.row=i.getCurrentTokenRow();o.end.column=i.getCurrentTokenColumn()+r.value.length-2;return o}};this.foldAll=function(e,t,n){if(n==undefined)n=1e5;var i=this.foldWidgets;if(!i)return;t=t||this.getLength();e=e||0;for(var r=e;r<t;r++){if(i[r]==null)i[r]=this.getFoldWidget(r);if(i[r]!="start")continue;var o=this.getFoldWidgetRange(r);if(o&&o.isMultiLine()&&o.end.row<=t&&o.start.row>=e){r=o.end.row;try{var a=this.addFold("...",o);if(a)a.collapseChildren=n}catch(e){}}}};this.$foldStyles={manual:1,markbegin:1,markbeginend:1};this.$foldStyle="markbegin";this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle==e)return;this.$foldStyle=e;if(e=="manual")this.unfold();var t=this.$foldMode;this.$setFolding(null);this.$setFolding(t)};this.$setFolding=function(e){if(this.$foldMode==e)return;this.$foldMode=e;this.removeListener("change",this.$updateFoldWidgets);this._emit("changeAnnotation");if(!e||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[];this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle);this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle);this.$updateFoldWidgets=this.updateFoldWidgets.bind(this);this.on("change",this.$updateFoldWidgets)};this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};var i=e-1,r;while(i>=0){var o=n[i];if(o==null)o=n[i]=this.getFoldWidget(i);if(o=="start"){var a=this.getFoldWidgetRange(i);if(!r)r=a;if(a&&a.end.row>=e)break}i--}return{range:i!==-1&&a,firstRange:r}};this.onFoldWidgetClick=function(e,t){t=t.domEvent;var n={children:t.shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey};var i=this.$toggleFoldWidget(e,n);if(!i){var r=t.target||t.srcElement;if(r&&/ace_fold-widget/.test(r.className))r.className+=" ace_invalid"}};this.$toggleFoldWidget=function(e,t){if(!this.getFoldWidget)return;var n=this.getFoldWidget(e);var i=this.getLine(e);var r=n==="end"?-1:1;var o=this.getFoldAt(e,r===-1?0:i.length,r);if(o){if(t.children||t.all)this.removeFold(o);else this.expandFold(o);return}var a=this.getFoldWidgetRange(e,true);if(a&&!a.isMultiLine()){o=this.getFoldAt(a.start.row,a.start.column,1);if(o&&a.isEqual(o.range)){this.removeFold(o);return}}if(t.siblings){var s=this.getParentFoldRangeData(e);if(s.range){var l=s.range.start.row+1;var c=s.range.end.row}this.foldAll(l,c,t.all?1e4:0)}else if(t.children){c=a?a.end.row:this.getLength();this.foldAll(e+1,a.end.row,t.all?1e4:0)}else if(a){if(t.all)a.collapseChildren=1e4;this.addFold("...",a)}return a};this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var n=this.$toggleFoldWidget(t,{});if(n)return;var i=this.getParentFoldRangeData(t,true);n=i.range||i.firstRange;if(n){t=n.start.row;var r=this.getFoldAt(t,this.getLine(t).length,1);if(r){this.removeFold(r)}else{this.addFold("...",n)}}};this.updateFoldWidgets=function(e){var t=e.data;var n=t.range;var i=n.start.row;var r=n.end.row-i;if(r===0){this.foldWidgets[i]=null}else if(t.action=="removeText"||t.action=="removeLines"){this.foldWidgets.splice(i,r+1,null)}else{var o=Array(r+1);o.unshift(i,1);this.foldWidgets.splice.apply(this.foldWidgets,o)}}}t.Folding=i});ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var h=e("../token_iterator").TokenIterator;var s=e("../range").Range;function i(){this.findMatchingBracket=function(e,t){if(e.column==0)return null;var n=t||this.getLine(e.row).charAt(e.column-1);if(n=="")return null;var i=n.match(/([\(\[\{])|([\)\]\}])/);if(!i)return null;if(i[1])return this.$findClosingBracket(i[1],e);else return this.$findOpeningBracket(i[2],e)};this.getBracketRange=function(e){var t=this.getLine(e.row);var n=true,i;var r=t.charAt(e.column-1);var o=r&&r.match(/([\(\[\{])|([\)\]\}])/);if(!o){r=t.charAt(e.column);e={row:e.row,column:e.column+1};o=r&&r.match(/([\(\[\{])|([\)\]\}])/);n=false}if(!o)return null;if(o[1]){var a=this.$findClosingBracket(o[1],e);if(!a)return null;i=s.fromPoints(e,a);if(!n){i.end.column++;i.start.column--}i.cursor=i.end}else{var a=this.$findOpeningBracket(o[2],e);if(!a)return null;i=s.fromPoints(a,e);if(!n){i.start.column++;i.end.column--}i.cursor=i.start}return i};this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"};this.$findOpeningBracket=function(e,t,n){var i=this.$brackets[e];var r=1;var o=new h(this,t.row,t.column);var a=o.getCurrentToken();if(!a)a=o.stepForward();if(!a)return;if(!n){n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("rparen",".paren")+")+")}var s=t.column-o.getCurrentTokenColumn()-2;var l=a.value;while(true){while(s>=0){var c=l.charAt(s);if(c==i){r-=1;if(r==0){return{row:o.getCurrentTokenRow(),column:s+o.getCurrentTokenColumn()}}}else if(c==e){r+=1}s-=1}do{a=o.stepBackward()}while(a&&!n.test(a.type));if(a==null)break;l=a.value;s=l.length-1}return null};this.$findClosingBracket=function(e,t,n){var i=this.$brackets[e];var r=1;var o=new h(this,t.row,t.column);var a=o.getCurrentToken();if(!a)a=o.stepForward();if(!a)return;if(!n){n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("lparen",".paren")+")+")}var s=t.column-o.getCurrentTokenColumn();while(true){var l=a.value;var c=l.length;while(s<c){var u=l.charAt(s);if(u==i){r-=1;if(r==0){return{row:o.getCurrentTokenRow(),column:s+o.getCurrentTokenColumn()}}}else if(u==e){r+=1}s+=1}do{a=o.stepForward()}while(a&&!n.test(a.type));if(a==null)break;s=0}return null}}t.BracketMatch=i});ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var i=e("./lib/oop");var r=e("./lib/lang");var o=e("./config");var a=e("./lib/event_emitter").EventEmitter;var s=e("./selection").Selection;var m=e("./mode/text").Mode;var v=e("./range").Range;var l=e("./document").Document;var b=e("./background_tokenizer").BackgroundTokenizer;var w=e("./search_highlight").SearchHighlight;var c=function(e,t){this.$breakpoints=[];this.$decorations=[];this.$frontMarkers={};this.$backMarkers={};this.$markerId=1;this.$undoSelect=true;this.$foldData=[];this.$foldData.toString=function(){return this.join("\n")};this.on("changeFold",this.onChangeFold.bind(this));this.$onChange=this.onChange.bind(this);if(typeof e!="object"||!e.getLine)e=new l(e);this.setDocument(e);this.selection=new s(this);o.resetOptions(this);this.setMode(t);o._signal("session",this)};(function(){i.implement(this,a);this.setDocument=function(e){if(this.doc)this.doc.removeListener("change",this.$onChange);this.doc=e;e.on("change",this.$onChange);if(this.bgTokenizer)this.bgTokenizer.setDocument(this.getDocument());this.resetCaches()};this.getDocument=function(){return this.doc};this.$resetRowCache=function(e){if(!e){this.$docRowCache=[];this.$screenRowCache=[];return}var t=this.$docRowCache.length;var n=this.$getRowCacheIndex(this.$docRowCache,e)+1;if(t>n){this.$docRowCache.splice(n,t);this.$screenRowCache.splice(n,t)}};this.$getRowCacheIndex=function(e,t){var n=0;var i=e.length-1;while(n<=i){var r=n+i>>1;var o=e[r];if(t>o)n=r+1;else if(t<o)i=r-1;else return r}return n-1};this.resetCaches=function(){this.$modified=true;this.$wrapData=[];this.$rowLengthCache=[];this.$resetRowCache(0);if(this.bgTokenizer)this.bgTokenizer.start(0)};this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)};this.onChange=function(e){var t=e.data;this.$modified=true;this.$resetRowCache(t.range.start.row);var n=this.$updateInternalDataOnChange(e);if(!this.$fromUndo&&this.$undoManager&&!t.ignore){this.$deltasDoc.push(t);if(n&&n.length!=0){this.$deltasFold.push({action:"removeFolds",folds:n})}this.$informUndoManager.schedule()}this.bgTokenizer.$updateOnChange(t);this._signal("change",e)};this.setValue=function(e){this.doc.setValue(e);this.selection.moveTo(0,0);this.$resetRowCache(0);this.$deltas=[];this.$deltasDoc=[];this.$deltasFold=[];this.setUndoManager(this.$undoManager);this.getUndoManager().reset()};this.getValue=this.toString=function(){return this.doc.getValue()};this.getSelection=function(){return this.selection};this.getState=function(e){return this.bgTokenizer.getState(e)};this.getTokens=function(e){return this.bgTokenizer.getTokens(e)};this.getTokenAt=function(e,t){var n=this.bgTokenizer.getTokens(e);var i,r=0;if(t==null){o=n.length-1;r=this.getLine(e).length}else{for(var o=0;o<n.length;o++){r+=n[o].value.length;if(r>=t)break}}i=n[o];if(!i)return null;i.index=o;i.start=r-i.value.length;return i};this.setUndoManager=function(e){this.$undoManager=e;this.$deltas=[];this.$deltasDoc=[];this.$deltasFold=[];if(this.$informUndoManager)this.$informUndoManager.cancel();if(e){var t=this;this.$syncInformUndoManager=function(){t.$informUndoManager.cancel();if(t.$deltasFold.length){t.$deltas.push({group:"fold",deltas:t.$deltasFold});t.$deltasFold=[]}if(t.$deltasDoc.length){t.$deltas.push({group:"doc",deltas:t.$deltasDoc});t.$deltasDoc=[]}if(t.$deltas.length>0){e.execute({action:"aceupdate",args:[t.$deltas,t],merge:t.mergeUndoDeltas})}t.mergeUndoDeltas=false;t.$deltas=[]};this.$informUndoManager=r.delayedCall(this.$syncInformUndoManager)}};this.markUndoGroup=function(){if(this.$syncInformUndoManager)this.$syncInformUndoManager()};this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}};this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager};this.getTabString=function(){if(this.getUseSoftTabs()){return r.stringRepeat(" ",this.getTabSize())}else{return"\t"}};this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)};this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs};this.setTabSize=function(e){this.setOption("tabSize",e)};this.getTabSize=function(){return this.$tabSize};this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize===0};this.$overwrite=false;this.setOverwrite=function(e){this.setOption("overwrite",e)};this.getOverwrite=function(){return this.$overwrite};this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)};this.addGutterDecoration=function(e,t){if(!this.$decorations[e])this.$decorations[e]="";this.$decorations[e]+=" "+t;this._signal("changeBreakpoint",{})};this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,"");this._signal("changeBreakpoint",{})};this.getBreakpoints=function(){return this.$breakpoints};this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++){this.$breakpoints[e[t]]="ace_breakpoint"}this._signal("changeBreakpoint",{})};this.clearBreakpoints=function(){this.$breakpoints=[];this._signal("changeBreakpoint",{})};this.setBreakpoint=function(e,t){if(t===undefined)t="ace_breakpoint";if(t)this.$breakpoints[e]=t;else delete this.$breakpoints[e];this._signal("changeBreakpoint",{})};this.clearBreakpoint=function(e){delete this.$breakpoints[e];this._signal("changeBreakpoint",{})};this.addMarker=function(e,t,n,i){var r=this.$markerId++;var o={range:e,type:n||"line",renderer:typeof n=="function"?n:null,clazz:t,inFront:!!i,id:r};if(i){this.$frontMarkers[r]=o;this._signal("changeFrontMarker")}else{this.$backMarkers[r]=o;this._signal("changeBackMarker")}return r};this.addDynamicMarker=function(e,t){if(!e.update)return;var n=this.$markerId++;e.id=n;e.inFront=!!t;if(t){this.$frontMarkers[n]=e;this._signal("changeFrontMarker")}else{this.$backMarkers[n]=e;this._signal("changeBackMarker")}return e};this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];if(!t)return;var n=t.inFront?this.$frontMarkers:this.$backMarkers;if(t){delete n[e];this._signal(t.inFront?"changeFrontMarker":"changeBackMarker")}};this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers};this.highlight=function(e){if(!this.$searchHighlight){var t=new w(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)};this.highlightLines=function(e,t,n,i){if(typeof t!="number"){n=t;t=e}if(!n)n="ace_step";var r=new v(e,0,t,Infinity);r.id=this.addMarker(r,n,"fullLine",i);return r};this.setAnnotations=function(e){this.$annotations=e;this._signal("changeAnnotation",{})};this.getAnnotations=function(){return this.$annotations||[]};this.clearAnnotations=function(){this.setAnnotations([])};this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);if(t){this.$autoNewLine=t[1]}else{this.$autoNewLine="\n"}};this.getWordRange=function(e,t){var n=this.getLine(e);var i=false;if(t>0)i=!!n.charAt(t-1).match(this.tokenRe);if(!i)i=!!n.charAt(t).match(this.tokenRe);if(i)var r=this.tokenRe;else if(/^\s+$/.test(n.slice(t-1,t+1)))var r=/\s/;else var r=this.nonTokenRe;var o=t;if(o>0){do{o--}while(o>=0&&n.charAt(o).match(r));o++}var a=t;while(a<n.length&&n.charAt(a).match(r)){a++}return new v(e,o,e,a)};this.getAWordRange=function(e,t){var n=this.getWordRange(e,t);var i=this.getLine(n.end.row);while(i.charAt(n.end.column).match(/[ \t]/)){n.end.column+=1}return n};this.setNewLineMode=function(e){this.doc.setNewLineMode(e)};this.getNewLineMode=function(){return this.doc.getNewLineMode()};this.setUseWorker=function(e){this.setOption("useWorker",e)};this.getUseWorker=function(){return this.$useWorker};this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first);this._signal("tokenizerUpdate",e)};this.$modes={};this.$mode=null;this.$modeId=null;this.setMode=function(e,t){if(e&&typeof e==="object"){if(e.getTokenizer)return this.$onChangeMode(e);var n=e;var i=n.path}else{i=e||"ace/mode/text"}if(!this.$modes["ace/mode/text"])this.$modes["ace/mode/text"]=new m;if(this.$modes[i]&&!n){this.$onChangeMode(this.$modes[i]);t&&t();return}this.$modeId=i;o.loadModule(["mode",i],function(e){if(this.$modeId!==i)return t&&t();if(this.$modes[i]&&!n)return this.$onChangeMode(this.$modes[i]);if(e&&e.Mode){e=new e.Mode(n);if(!n){this.$modes[i]=e;e.$id=i}this.$onChangeMode(e);t&&t()}}.bind(this));if(!this.$mode)this.$onChangeMode(this.$modes["ace/mode/text"],true)};this.$onChangeMode=function(e,t){if(!t)this.$modeId=e.$id;if(this.$mode===e)return;this.$mode=e;this.$stopWorker();if(this.$useWorker)this.$startWorker();var n=e.getTokenizer();if(n.addEventListener!==undefined){var i=this.onReloadTokenizer.bind(this);n.addEventListener("update",i)}if(!this.bgTokenizer){this.bgTokenizer=new b(n);var r=this;this.bgTokenizer.addEventListener("update",function(e){r._signal("tokenizerUpdate",e)})}else{this.bgTokenizer.setTokenizer(n)}this.bgTokenizer.setDocument(this.getDocument());this.tokenRe=e.tokenRe;this.nonTokenRe=e.nonTokenRe;if(!t){this.$options.wrapMethod.set.call(this,this.$wrapMethod);this.$setFolding(e.foldingRules);this.bgTokenizer.start(0);this._emit("changeMode")}};this.$stopWorker=function(){if(this.$worker)this.$worker.terminate();this.$worker=null};this.$startWorker=function(){if(typeof Worker!=="undefined"&&!e.noWorker){try{this.$worker=this.$mode.createWorker(this)}catch(e){console.log("Could not load worker");console.log(e);this.$worker=null}}else this.$worker=null};this.getMode=function(){return this.$mode};this.$scrollTop=0;this.setScrollTop=function(e){if(this.$scrollTop===e||isNaN(e))return;this.$scrollTop=e;this._signal("changeScrollTop",e)};this.getScrollTop=function(){return this.$scrollTop};this.$scrollLeft=0;this.setScrollLeft=function(e){if(this.$scrollLeft===e||isNaN(e))return;this.$scrollLeft=e;this._signal("changeScrollLeft",e)};this.getScrollLeft=function(){return this.$scrollLeft};this.getScreenWidth=function(){this.$computeWidth();if(this.lineWidgets)return Math.max(this.getLineWidgetMaxWidth(),this.screenWidth);return this.screenWidth};this.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var t=0;this.lineWidgets.forEach(function(e){if(e&&e.screenWidth>t)t=e.screenWidth});return this.lineWidgetWidth=t};this.$computeWidth=function(e){if(this.$modified||e){this.$modified=false;if(this.$useWrapMode)return this.screenWidth=this.$wrapLimit;var t=this.doc.getAllLines();var n=this.$rowLengthCache;var i=0;var r=0;var o=this.$foldData[r];var a=o?o.start.row:Infinity;var s=t.length;for(var l=0;l<s;l++){if(l>a){l=o.end.row+1;if(l>=s)break;o=this.$foldData[r++];a=o?o.start.row:Infinity}if(n[l]==null)n[l]=this.$getStringScreenWidth(t[l])[0];if(n[l]>i)i=n[l]}this.screenWidth=i}};this.getLine=function(e){return this.doc.getLine(e)};this.getLines=function(e,t){return this.doc.getLines(e,t)};this.getLength=function(){return this.doc.getLength()};this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())};this.insert=function(e,t){return this.doc.insert(e,t)};this.remove=function(e){return this.doc.remove(e)};this.undoChanges=function(e,t){if(!e.length)return;this.$fromUndo=true;var n=null;for(var i=e.length-1;i!=-1;i--){var r=e[i];if(r.group=="doc"){this.doc.revertDeltas(r.deltas);n=this.$getUndoSelection(r.deltas,true,n)}else{r.deltas.forEach(function(e){this.addFolds(e.folds)},this)}}this.$fromUndo=false;n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n);return n};this.redoChanges=function(e,t){if(!e.length)return;this.$fromUndo=true;var n=null;for(var i=0;i<e.length;i++){var r=e[i];if(r.group=="doc"){this.doc.applyDeltas(r.deltas);n=this.$getUndoSelection(r.deltas,false,n)}}this.$fromUndo=false;n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n);return n};this.setUndoSelect=function(e){this.$undoSelect=e};this.$getUndoSelection=function(e,n,t){function i(e){var t=e.action==="insertText"||e.action==="insertLines";return n?!t:t}var r=e[0];var o,a;var s=false;if(i(r)){o=v.fromPoints(r.range.start,r.range.end);s=true}else{o=v.fromPoints(r.range.start,r.range.start);s=false}for(var l=1;l<e.length;l++){r=e[l];if(i(r)){a=r.range.start;if(o.compare(a.row,a.column)==-1){o.setStart(r.range.start)}a=r.range.end;if(o.compare(a.row,a.column)==1){o.setEnd(r.range.end)}s=true}else{a=r.range.start;if(o.compare(a.row,a.column)==-1){o=v.fromPoints(r.range.start,r.range.start)}s=false}}if(t!=null){if(v.comparePoints(t.start,o.start)===0){t.start.column+=o.end.column-o.start.column;t.end.column+=o.end.column-o.start.column}var c=t.compareRange(o);if(c==1){o.setStart(t.start)}else if(c==-1){o.setEnd(t.end)}}return o};this.replace=function(e,t){return this.doc.replace(e,t)};this.moveText=function(e,t,n){var i=this.getTextRange(e);var r=this.getFoldsInRange(e);var o=v.fromPoints(t,t);if(!n){this.remove(e);var a=e.start.row-e.end.row;var s=a?-e.end.column:e.start.column-e.end.column;if(s){if(o.start.row==e.end.row&&o.start.column>e.end.column)o.start.column+=s;if(o.end.row==e.end.row&&o.end.column>e.end.column)o.end.column+=s}if(a&&o.start.row>=e.end.row){o.start.row+=a;o.end.row+=a}}o.end=this.insert(o.start,i);if(r.length){var l=e.start;var c=o.start;var a=c.row-l.row;var s=c.column-l.column;this.addFolds(r.map(function(e){e=e.clone();if(e.start.row==l.row)e.start.column+=s;if(e.end.row==l.row)e.end.column+=s;e.start.row+=a;e.end.row+=a;return e}))}return o};this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var i=e;i<=t;i++)this.insert({row:i,column:0},n)};this.outdentRows=function(e){var t=e.collapseRows();var n=new v(0,0,0,0);var i=this.getTabSize();for(var r=t.start.row;r<=t.end.row;++r){var o=this.getLine(r);n.start.row=r;n.end.row=r;for(var a=0;a<i;++a)if(o.charAt(a)!=" ")break;if(a<i&&o.charAt(a)=="\t"){n.start.column=a;n.end.column=a+1}else{n.start.column=0;n.end.column=a}this.remove(n)}};this.$moveLines=function(e,t,n){e=this.getRowFoldStart(e);t=this.getRowFoldEnd(t);if(n<0){var i=this.getRowFoldStart(e+n);if(i<0)return 0;var r=i-e}else if(n>0){var i=this.getRowFoldEnd(t+n);if(i>this.doc.getLength()-1)return 0;var r=i-t}else{e=this.$clipRowToDocument(e);t=this.$clipRowToDocument(t);var r=t-e+1}var o=new v(e,0,t,Number.MAX_VALUE);var a=this.getFoldsInRange(o).map(function(e){e=e.clone();e.start.row+=r;e.end.row+=r;return e});var s=n==0?this.doc.getLines(e,t):this.doc.removeLines(e,t);this.doc.insertLines(e+r,s);a.length&&this.addFolds(a);return r};this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)};this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)};this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)};this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))};this.$clipColumnToRow=function(e,t){if(t<0)return 0;return Math.min(this.doc.getLine(e).length,t)};this.$clipPositionToDocument=function(e,t){t=Math.max(0,t);if(e<0){e=0;t=0}else{var n=this.doc.getLength();if(e>=n){e=n-1;t=this.doc.getLine(n-1).length}else{t=Math.min(this.doc.getLine(e).length,t)}}return{row:e,column:t}};this.$clipRangeToDocument=function(e){if(e.start.row<0){e.start.row=0;e.start.column=0}else{e.start.column=this.$clipColumnToRow(e.start.row,e.start.column)}var t=this.doc.getLength()-1;if(e.end.row>t){e.end.row=t;e.end.column=this.doc.getLine(t).length}else{e.end.column=this.$clipColumnToRow(e.end.row,e.end.column)}return e};this.$wrapLimit=80;this.$useWrapMode=false;this.$wrapLimitRange={min:null,max:null};this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){this.$useWrapMode=e;this.$modified=true;this.$resetRowCache(0);if(e){var t=this.getLength();this.$wrapData=Array(t);this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}};this.getUseWrapMode=function(){return this.$useWrapMode};this.setWrapLimitRange=function(e,t){if(this.$wrapLimitRange.min!==e||this.$wrapLimitRange.max!==t){this.$wrapLimitRange={min:e,max:t};this.$modified=true;this._signal("changeWrapMode")}};this.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;if(n.max<0)n={min:t,max:t};var i=this.$constrainWrapLimit(e,n.min,n.max);if(i!=this.$wrapLimit&&i>1){this.$wrapLimit=i;this.$modified=true;if(this.$useWrapMode){this.$updateWrapData(0,this.getLength()-1);this.$resetRowCache(0);this._signal("changeWrapLimit")}return true}return false};this.$constrainWrapLimit=function(e,t,n){if(t)e=Math.max(t,e);if(n)e=Math.min(n,e);return e};this.getWrapLimit=function(){return this.$wrapLimit};this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)};this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}};this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode;var n;var i=e.data.action;var r=e.data.range.start.row;var o=e.data.range.end.row;var a=e.data.range.start;var s=e.data.range.end;var l=null;if(i.indexOf("Lines")!=-1){if(i=="insertLines"){o=r+e.data.lines.length}else{o=r}n=e.data.lines?e.data.lines.length:o-r}else{n=o-r}this.$updating=true;if(n!=0){if(i.indexOf("remove")!=-1){this[t?"$wrapData":"$rowLengthCache"].splice(r,n);var c=this.$foldData;l=this.getFoldsInRange(e.data.range);this.removeFolds(l);var u=this.getFoldLine(s.row);var h=0;if(u){u.addRemoveChars(s.row,s.column,a.column-s.column);u.shiftRow(-n);var d=this.getFoldLine(r);if(d&&d!==u){d.merge(u);u=d}h=c.indexOf(u)+1}for(h;h<c.length;h++){var u=c[h];if(u.start.row>=s.row){u.shiftRow(-n)}}o=r}else{var f=Array(n);f.unshift(r,0);var p=t?this.$wrapData:this.$rowLengthCache;p.splice.apply(p,f);var c=this.$foldData;var u=this.getFoldLine(r);var h=0;if(u){var g=u.range.compareInside(a.row,a.column);if(g==0){u=u.split(a.row,a.column);u.shiftRow(n);u.addRemoveChars(o,0,s.column-a.column)}else if(g==-1){u.addRemoveChars(r,0,s.column-a.column);u.shiftRow(n)}h=c.indexOf(u)+1}for(h;h<c.length;h++){var u=c[h];if(u.start.row>=r){u.shiftRow(n)}}}}else{n=Math.abs(e.data.range.start.column-e.data.range.end.column);if(i.indexOf("remove")!=-1){l=this.getFoldsInRange(e.data.range);this.removeFolds(l);n=-n}var u=this.getFoldLine(r);if(u){u.addRemoveChars(r,a.column,n)}}if(t&&this.$wrapData.length!=this.doc.getLength()){console.error("doc.getLength() and $wrapData.length have to be the same!")}this.$updating=false;if(t)this.$updateWrapData(r,o);else this.$updateRowLengthCache(r,o);return l};this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null;this.$rowLengthCache[t]=null};this.$updateWrapData=function(e,t){var a=this.doc.getAllLines();var n=this.getTabSize();var i=this.$wrapData;var r=this.$wrapLimit;var s;var o;var l=e;t=Math.min(t,a.length-1);while(l<=t){o=this.getFoldLine(l,o);if(!o){s=this.$getDisplayTokens(a[l]);i[l]=this.$computeWrapSplits(s,r,n);l++}else{s=[];o.walk(function(e,t,n,i){var r;if(e!=null){r=this.$getDisplayTokens(e,s.length);r[0]=u;for(var o=1;o<r.length;o++){r[o]=h}}else{r=this.$getDisplayTokens(a[t].substring(i,n),s.length)}s=s.concat(r)}.bind(this),o.end.row,a[o.end.row].length+1);i[o.start.row]=this.$computeWrapSplits(s,r,n);l=o.end.row+1}}};var s=1,l=2,u=3,h=4,d=9,f=10,c=11,p=12;this.$computeWrapSplits=function(i,e){if(i.length==0){return[]}var r=[];var t=i.length;var o=0,a=0;var n=this.$wrapAsCode;function s(e){var t=i.slice(o,e);var n=t.length;t.join("").replace(/12/g,function(){n-=1}).replace(/2/g,function(){n-=1});a+=n;r.push(a);o=e}while(t-o>e){var l=o+e;if(i[l-1]>=f&&i[l]>=f){s(l);continue}if(i[l]==u||i[l]==h){for(l;l!=o-1;l--){if(i[l]==u){break}}if(l>o){s(l);continue}l=o+e;for(l;l<i.length;l++){if(i[l]!=h){break}}if(l==i.length){break}s(l);continue}var c=Math.max(l-(n?10:e-(e>>2)),o-1);while(l>c&&i[l]<u){l--}if(n){while(l>c&&i[l]<u){l--}while(l>c&&i[l]==d){l--}}else{while(l>c&&i[l]<f){l--}}if(l>c){s(++l);continue}l=o+e;s(l)}return r};this.$getDisplayTokens=function(e,t){var n=[];var i;t=t||0;for(var r=0;r<e.length;r++){var o=e.charCodeAt(r);if(o==9){i=this.getScreenTabSize(n.length+t);n.push(c);for(var a=1;a<i;a++){n.push(p)}}else if(o==32){n.push(f)}else if(o>39&&o<48||o>57&&o<64){n.push(d)}else if(o>=4352&&g(o)){n.push(s,l)}else{n.push(s)}}return n};this.$getStringScreenWidth=function(e,t,n){if(t==0)return[0,0];if(t==null)t=Infinity;n=n||0;var i,r;for(r=0;r<e.length;r++){i=e.charCodeAt(r);if(i==9){n+=this.getScreenTabSize(n)}else if(i>=4352&&g(i)){n+=2}else{n+=1}if(n>t){break}}return[n,r]};this.lineWidgets=null;this.getRowLength=function(e){if(this.lineWidgets)var t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0;else t=0;if(!this.$useWrapMode||!this.$wrapData[e]){return 1+t}else{return this.$wrapData[e].length+1+t}};this.getRowLineCount=function(e){if(!this.$useWrapMode||!this.$wrapData[e]){return 1}else{return this.$wrapData[e].length+1}};this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)};this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)};this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)};this.getRowSplitData=function(e){if(!this.$useWrapMode){return undefined}else{return this.$wrapData[e]}};this.getScreenTabSize=function(e){return this.$tabSize-e%this.$tabSize};this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row};this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column};this.screenToDocumentPosition=function(e,t){if(e<0)return{row:0,column:0};var n;var i=0;var r=0;var o;var a=0;var s=0;var l=this.$screenRowCache;var c=this.$getRowCacheIndex(l,e);var u=l.length;if(u&&c>=0){var a=l[c];var i=this.$docRowCache[c];var h=e>l[u-1]}else{var h=!u}var d=this.getLength()-1;var f=this.getNextFoldLine(i);var p=f?f.start.row:Infinity;while(a<=e){s=this.getRowLength(i);if(a+s>e||i>=d){break}else{a+=s;i++;if(i>p){i=f.end.row+1;f=this.getNextFoldLine(i,f);p=f?f.start.row:Infinity}}if(h){this.$docRowCache.push(i);this.$screenRowCache.push(a)}}if(f&&f.start.row<=i){n=this.getFoldDisplayLine(f);i=f.start.row}else if(a+s<=e||i>d){return{row:d,column:this.getLine(d).length}}else{n=this.getLine(i);f=null}if(this.$useWrapMode){var g=this.$wrapData[i];if(g){var m=Math.floor(e-a);o=g[m];if(m>0&&g.length){r=g[m-1]||g[g.length-1];n=n.substring(r)}}}r+=this.$getStringScreenWidth(n,t)[1];if(this.$useWrapMode&&r>=o)r=o-1;if(f)return f.idxToPosition(r);return{row:i,column:r}};this.documentToScreenPosition=function(e,t){if(typeof t==="undefined")var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row;t=n.column;var i=0;var r=null;var o=null;o=this.getFoldAt(e,t,1);if(o){e=o.start.row;t=o.start.column}var a,s=0;var l=this.$docRowCache;var c=this.$getRowCacheIndex(l,e);var u=l.length;if(u&&c>=0){var s=l[c];var i=this.$screenRowCache[c];var h=e>l[u-1]}else{var h=!u}var d=this.getNextFoldLine(s);var f=d?d.start.row:Infinity;while(s<e){if(s>=f){a=d.end.row+1;if(a>e)break;d=this.getNextFoldLine(a,d);f=d?d.start.row:Infinity}else{a=s+1}i+=this.getRowLength(s);s=a;if(h){this.$docRowCache.push(s);this.$screenRowCache.push(i)}}var p="";if(d&&s>=f){p=this.getFoldDisplayLine(d,e,t);r=d.start.row}else{p=this.getLine(e).substring(0,t);r=e}if(this.$useWrapMode){var g=this.$wrapData[r];if(g){var m=0;while(p.length>=g[m]){i++;m++}p=p.substring(g[m-1]||0,p.length)}}return{row:i,column:this.$getStringScreenWidth(p)[0]}};this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column};this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row};this.getScreenLength=function(){var e=0;var t=null;if(!this.$useWrapMode){e=this.getLength();var n=this.$foldData;for(var i=0;i<n.length;i++){t=n[i];e-=t.end.row-t.start.row}}else{var r=this.$wrapData.length;var o=0,i=0;var t=this.$foldData[i++];var a=t?t.start.row:Infinity;while(o<r){var s=this.$wrapData[o];e+=s?s.length+1:1;o++;if(o>a){o=t.end.row+1;t=this.$foldData[i++];a=t?t.start.row:Infinity}}}if(this.lineWidgets)e+=this.$getWidgetScreenLength();return e};this.$setFontMetrics=function(e){};function g(e){if(e<4352)return false;return e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510}}).call(c.prototype);e("./edit_session/folding").Folding.call(c.prototype);e("./edit_session/bracket_match").BracketMatch.call(c.prototype);o.defineOptions(c.prototype,"session",{wrap:{set:function(e){if(!e||e=="off")e=false;else if(e=="free")e=true;else if(e=="printMargin")e=-1;else if(typeof e=="string")e=parseInt(e,10)||false;if(this.$wrap==e)return;if(!e){this.setUseWrapMode(false)}else{var t=typeof e=="number"?e:null;this.setWrapLimitRange(t,t);this.setUseWrapMode(true)}this.$wrap=e},get:function(){if(this.getUseWrapMode()){if(this.$wrap==-1)return"printMargin";if(!this.getWrapLimitRange().min)return"free";return this.$wrap}return"off"},handlesSet:true},wrapMethod:{set:function(e){e=e=="auto"?this.$mode.type!="text":e!="text";if(e!=this.$wrapAsCode){this.$wrapAsCode=e;if(this.$useWrapMode){this.$modified=true;this.$resetRowCache(0);this.$updateWrapData(0,this.getLength()-1)}}},initialValue:"auto"},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e;this.$stopWorker();if(e)this.$startWorker()},initialValue:true},useSoftTabs:{initialValue:true},tabSize:{set:function(e){if(isNaN(e)||this.$tabSize===e)return;this.$modified=true;this.$rowLengthCache=[];this.$tabSize=e;this._signal("changeTabSize")},initialValue:4,handlesSet:true},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:false},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:true},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId}}});t.EditSession=c});ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var y=e("./lib/lang");var i=e("./lib/oop");var C=e("./range").Range;var r=function(){this.$options={}};(function(){this.set=function(e){i.mixin(this.$options,e);return this};this.getOptions=function(){return y.copyObject(this.$options)};this.setOptions=function(e){this.$options=e};this.find=function(e){var t=this.$matchIterator(e,this.$options);if(!t)return false;var r=null;t.forEach(function(e,t,n){if(!e.start){var i=e.offset+(n||0);r=new C(t,i,t,i+e.length)}else r=e;return true});return r};this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range;var i=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines();var r=[];var o=t.re;if(t.$isMultiLine){var a=o.length;var s=i.length-a;var l;e:for(var c=o.offset||0;c<=s;c++){for(var u=0;u<a;u++)if(i[c+u].search(o[u])==-1)continue e;var h=i[c];var d=i[c+a-1];var f=h.length-h.match(o[0])[0].length;var p=d.match(o[a-1])[0].length;if(l&&l.end.row===c&&l.end.column>f){continue}r.push(l=new C(c,f,c+a-1,p));if(a>2)c=c+a-2}}else{for(var g=0;g<i.length;g++){var m=y.getMatchOffsets(i[g],o);for(var u=0;u<m.length;u++){var v=m[u];r.push(new C(g,v.offset,g,v.offset+v.length))}}}if(n){var b=n.start.column;var w=n.start.column;var g=0,u=r.length-1;while(g<u&&r[g].start.column<b&&r[g].start.row==n.start.row)g++;while(g<u&&r[u].end.column>w&&r[u].end.row==n.end.row)u--;r=r.slice(g,u+1);for(g=0,u=r.length;g<u;g++){r[g].start.row+=n.start.row;r[g].end.row+=n.start.row}}return r};this.replace=function(e,t){var n=this.$options;var i=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(!i)return;var r=i.exec(e);if(!r||r[0].length!=e.length)return null;t=e.replace(i,t);if(n.preserveCase){t=t.split("");for(var o=Math.min(e.length,e.length);o--;){var a=e[o];if(a&&a.toLowerCase()!=a)t[o]=t[o].toUpperCase();else t[o]=t[o].toLowerCase()}t=t.join("")}return t};this.$matchIterator=function(s,t){var l=this.$assembleRegExp(t);if(!l)return false;var n=this,c,e=t.backwards;if(t.$isMultiLine){var u=l.length;var i=function(e,t,n){var i=e.search(l[0]);if(i==-1)return;for(var r=1;r<u;r++){e=s.getLine(t+r);if(e.search(l[r])==-1)return}var o=e.match(l[u-1])[0].length;var a=new C(t,i,t+u-1,o);if(l.offset==1){a.start.row--;a.start.column=Number.MAX_VALUE}else if(n)a.start.column+=n;if(c(a))return true}}else if(e){var i=function(e,t,n){var i=y.getMatchOffsets(e,l);for(var r=i.length-1;r>=0;r--)if(c(i[r],t,n))return true}}else{var i=function(e,t,n){var i=y.getMatchOffsets(e,l);for(var r=0;r<i.length;r++)if(c(i[r],t,n))return true}}return{forEach:function(e){c=e;n.$lineIterator(s,t).forEach(i)}}};this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=false;if(!e.regExp)n=y.escapeRegExp(n);if(e.wholeWord)n="\\b"+n+"\\b";var i=e.caseSensitive?"g":"gi";e.$isMultiLine=!t&&/[\n\r]/.test(n);if(e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,i);try{var r=new RegExp(n,i)}catch(e){r=false}return e.re=r};this.$assembleMultilineRegExp=function(e,t){var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n");var i=[];for(var r=0;r<n.length;r++)try{i.push(new RegExp(n[r],t))}catch(e){return false}if(n[0]==""){i.shift();i.offset=1}else{i.offset=0}return i};this.$lineIterator=function(i,r){var e=r.backwards==true;var t=r.skipCurrent!=false;var n=r.range;var o=r.start;if(!o)o=n?n[e?"end":"start"]:i.selection.getRange();if(o.start)o=o[t!=e?"end":"start"];var a=n?n.start.row:0;var s=n?n.end.row:i.getLength()-1;var l=e?function(e){var t=o.row;var n=i.getLine(t).substring(0,o.column);if(e(n,t))return;for(t--;t>=a;t--)if(e(i.getLine(t),t))return;if(r.wrap==false)return;for(t=s,a=o.row;t>=a;t--)if(e(i.getLine(t),t))return}:function(e){var t=o.row;var n=i.getLine(t).substr(o.column);if(e(n,t,o.column))return;for(t=t+1;t<=s;t++)if(e(i.getLine(t),t))return;if(r.wrap==false)return;for(t=a,s=o.row;t<=s;t++)if(e(i.getLine(t),t))return};return{forEach:l}}}).call(r.prototype);t.Search=r});ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var s=e("../lib/keys");var r=e("../lib/useragent");function i(e,t){this.platform=t||(r.isMac?"mac":"win");this.commands={};this.commandKeyBinding={};if(this.__defineGetter__&&this.__defineSetter__&&typeof console!="undefined"&&console.error){var n=false;var i=function(){if(!n){n=true;console.error("commmandKeyBinding has too many m's. use commandKeyBinding")}};this.__defineGetter__("commmandKeyBinding",function(){i();return this.commandKeyBinding});this.__defineSetter__("commmandKeyBinding",function(e){i();return this.commandKeyBinding=e})}else{this.commmandKeyBinding=this.commandKeyBinding}this.addCommands(e)}(function(){this.addCommand=function(e){if(this.commands[e.name])this.removeCommand(e);this.commands[e.name]=e;if(e.bindKey)this._buildKeyHash(e)};this.removeCommand=function(e){var t=typeof e==="string"?e:e.name;e=this.commands[t];delete this.commands[t];var n=this.commandKeyBinding;for(var i in n){for(var r in n[i]){if(n[i][r]==e)delete n[i][r]}}};this.bindKey=function(e,i){if(!e)return;if(typeof i=="function"){this.addCommand({exec:i,bindKey:e,name:i.name||e});return}var r=this.commandKeyBinding;e.split("|").forEach(function(e){var t=this.parseKeys(e,i);var n=t.hashId;(r[n]||(r[n]={}))[t.key]=i},this)};this.addCommands=function(n){n&&Object.keys(n).forEach(function(e){var t=n[e];if(!t)return;if(typeof t==="string")return this.bindKey(t,e);if(typeof t==="function")t={exec:t};if(typeof t!=="object")return;if(!t.name)t.name=e;this.addCommand(t)},this)};this.removeCommands=function(t){Object.keys(t).forEach(function(e){this.removeCommand(t[e])},this)};this.bindKeys=function(t){Object.keys(t).forEach(function(e){this.bindKey(e,t[e])},this)};this._buildKeyHash=function(e){var t=e.bindKey;if(!t)return;var n=typeof t=="string"?t:t[this.platform];this.bindKey(n,e)};this.parseKeys=function(e){if(e.indexOf(" ")!=-1)e=e.split(/\s+/).pop();var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e){return e});var n=t.pop();var i=s[n];if(s.FUNCTION_KEYS[i])n=s.FUNCTION_KEYS[i].toLowerCase();else if(!t.length)return{key:n,hashId:-1};else if(t.length==1&&t[0]=="shift")return{key:n.toUpperCase(),hashId:-1};var r=0;for(var o=t.length;o--;){var a=s.KEY_MODS[t[o]];if(a==null){if(typeof console!="undefined")console.error("invalid modifier "+t[o]+" in "+e);return false}r|=a}return{key:n,hashId:r}};this.findKeyCommand=function e(t,n){var i=this.commandKeyBinding;return i[t]&&i[t][n]};this.handleKeyboard=function(e,t,n,i){return{command:this.findKeyCommand(t,n)}}}).call(i.prototype);t.HashHandler=i});ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("../lib/oop");var r=e("../keyboard/hash_handler").HashHandler;var o=e("../lib/event_emitter").EventEmitter;var a=function(e,t){r.call(this,t,e);this.byName=this.commands;this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})};i.inherits(a,r);(function(){i.implement(this,o);this.exec=function(e,t,n){if(typeof e==="string")e=this.commands[e];if(!e)return false;if(t&&t.$readOnly&&!e.readOnly)return false;var i={editor:t,command:e,args:n};var r=this._emit("exec",i);this._signal("afterExec",i);return r===false?false:true};this.toggleRecording=function(e){if(this.$inReplay)return;e&&e._emit("changeStatus");if(this.recording){this.macro.pop();this.removeEventListener("exec",this.$addCommandToMacro);if(!this.macro.length)this.macro=this.oldMacro;return this.recording=false}if(!this.$addCommandToMacro){this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)}this.oldMacro=this.macro;this.macro=[];this.on("exec",this.$addCommandToMacro);return this.recording=true};this.replay=function(t){if(this.$inReplay||!this.macro)return;if(this.recording)return this.toggleRecording(t);try{this.$inReplay=true;this.macro.forEach(function(e){if(typeof e=="string")this.exec(e,t);else this.exec(e[0],t,e[1])},this)}finally{this.$inReplay=false}};this.trimMacro=function(e){return e.map(function(e){if(typeof e[0]!="string")e[0]=e[0].name;if(!e[1])e=e[0];return e})}}).call(a.prototype);t.CommandManager=a});ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";var u=e("../lib/lang");var i=e("../config");var h=e("../range").Range;function r(e,t){return{win:e,mac:t}}t.commands=[{name:"showSettingsMenu",bindKey:r("Ctrl-,","Command-,"),exec:function(t){i.loadModule("ace/ext/settings_menu",function(e){e.init(t);t.showSettingsMenu()})},readOnly:true},{name:"goToNextError",bindKey:r("Alt-E","Ctrl-E"),exec:function(t){i.loadModule("ace/ext/error_marker",function(e){e.showErrorMarker(t,1)})},scrollIntoView:"animate",readOnly:true},{name:"goToPreviousError",bindKey:r("Alt-Shift-E","Ctrl-Shift-E"),exec:function(t){i.loadModule("ace/ext/error_marker",function(e){e.showErrorMarker(t,-1)})},scrollIntoView:"animate",readOnly:true},{name:"selectall",bindKey:r("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:true},{name:"centerselection",bindKey:r(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:true},{name:"gotoline",bindKey:r("Ctrl-L","Command-L"),exec:function(e){var t=parseInt(prompt("Enter line number:"),10);if(!isNaN(t)){e.gotoLine(t)}},readOnly:true},{name:"fold",bindKey:r("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(false)},scrollIntoView:"center",readOnly:true},{name:"unfold",bindKey:r("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(true)},scrollIntoView:"center",readOnly:true},{name:"toggleFoldWidget",bindKey:r("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},scrollIntoView:"center",readOnly:true},{name:"toggleParentFoldWidget",bindKey:r("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(true)},scrollIntoView:"center",readOnly:true},{name:"foldall",bindKey:r("Ctrl-Alt-0","Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:true},{name:"foldOther",bindKey:r("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll();e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:true},{name:"unfoldall",bindKey:r("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:true},{name:"findnext",bindKey:r("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:true},{name:"findprevious",bindKey:r("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:true},{name:"selectOrFindNext",bindKey:r("Alt-K","Ctrl-G"),exec:function(e){if(e.selection.isEmpty())e.selection.selectWord();else e.findNext()},readOnly:true},{name:"selectOrFindPrevious",bindKey:r("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){if(e.selection.isEmpty())e.selection.selectWord();else e.findPrevious()},readOnly:true},{name:"find",bindKey:r("Ctrl-F","Command-F"),exec:function(t){i.loadModule("ace/ext/searchbox",function(e){e.Search(t)})},readOnly:true},{name:"overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:true},{name:"selecttostart",bindKey:r("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:true,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:r("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:true,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:r("Shift-Up","Shift-Up"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",readOnly:true},{name:"golineup",bindKey:r("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",readOnly:true},{name:"selecttoend",bindKey:r("Ctrl-Shift-End","Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:true,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:r("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:true,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:r("Shift-Down","Shift-Down"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"golinedown",bindKey:r("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectwordleft",bindKey:r("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotowordleft",bindKey:r("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selecttolinestart",bindKey:r("Alt-Shift-Left","Command-Shift-Left"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotolinestart",bindKey:r("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectleft",bindKey:r("Shift-Left","Shift-Left"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotoleft",bindKey:r("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectwordright",bindKey:r("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotowordright",bindKey:r("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selecttolineend",bindKey:r("Alt-Shift-Right","Command-Shift-Right"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotolineend",bindKey:r("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectright",bindKey:r("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"gotoright",bindKey:r("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:true},{name:"pagedown",bindKey:r(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:true},{name:"gotopagedown",bindKey:r("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:true},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:true},{name:"pageup",bindKey:r(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:true},{name:"gotopageup",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:true},{name:"scrollup",bindKey:r("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:true},{name:"scrolldown",bindKey:r("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:true},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"selectlineend",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"togglerecording",bindKey:r("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:true},{name:"replaymacro",bindKey:r("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:true},{name:"jumptomatching",bindKey:r("Ctrl-P","Ctrl-P"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",readOnly:true},{name:"selecttomatching",bindKey:r("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(e){e.jumpToMatching(true)},multiSelectAction:"forEach",readOnly:true},{name:"passKeysToBrowser",bindKey:r("null","null"),exec:function(){},passEvent:true,readOnly:true},{name:"cut",exec:function(e){var t=e.getSelectionRange();e._emit("cut",t);if(!e.selection.isEmpty()){e.session.remove(t);e.clearSelection()}},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"removeline",bindKey:r("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:r("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:r("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:r("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:r("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:r("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:r("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},multiSelectAction:"forEach"},{name:"replace",bindKey:r("Ctrl-H","Command-Option-F"),exec:function(t){i.loadModule("ace/ext/searchbox",function(e){e.Search(t,true)})}},{name:"undo",bindKey:r("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",bindKey:r("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",bindKey:r("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:r("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:r("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:r("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:r("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:r("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:r("Shift-Delete",null),exec:function(e){if(e.selection.isEmpty()){e.remove("left")}else{return false}},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:r("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:r("Alt-Delete","Ctrl-K"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:r("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:r("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:r("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:r("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:r("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:r("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(e,t){e.insert(u.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:r(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:r("Ctrl-T","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:r("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:r("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",bindKey:r("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0;t.end.row++;e.selection.setRange(t,false)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:true},{name:"joinlines",bindKey:r(null,null),exec:function(e){var t=e.selection.isBackwards();var n=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor();var i=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead();var r=e.session.doc.getLine(n.row).length;var o=e.session.doc.getTextRange(e.selection.getRange());var a=o.replace(/\n\s*/," ").length;var s=e.session.doc.getLine(n.row);for(var l=n.row+1;l<=i.row+1;l++){var c=u.stringTrimLeft(u.stringTrimRight(e.session.doc.getLine(l)));if(c.length!==0){c=" "+c}s+=c}if(i.row+1<e.session.doc.getLength()-1){s+=e.session.doc.getNewLineCharacter()}e.clearSelection();e.session.doc.replace(new h(n.row,0,i.row+2,0),s);if(a>0){e.selection.moveCursorTo(n.row,n.column);e.selection.selectTo(n.row,n.column+a)}else{r=e.session.doc.getLine(n.row).length>r?r+1:r;e.selection.moveCursorTo(n.row,r)}},multiSelectAction:"forEach",readOnly:true},{name:"invertSelection",bindKey:r(null,null),exec:function(e){var t=e.session.doc.getLength()-1;var n=e.session.doc.getLine(t).length;var i=e.selection.rangeList.ranges;var r=[];if(i.length<1){i=[e.selection.getRange()]}for(var o=0;o<i.length;o++){if(o==i.length-1){if(!(i[o].end.row===t&&i[o].end.column===n)){r.push(new h(i[o].end.row,i[o].end.column,t,n))}}if(o===0){if(!(i[o].start.row===0&&i[o].start.column===0)){r.push(new h(0,0,i[o].start.row,i[o].start.column))}}else{r.push(new h(i[o-1].end.row,i[o-1].end.column,i[o].start.row,i[o].start.column))}}e.exitMultiSelectMode();e.clearSelection();for(var o=0;o<r.length;o++){e.selection.addRange(r[o],false)}},readOnly:true,scrollIntoView:"none"}]});ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var o=e("./lib/oop");var i=e("./lib/dom");var u=e("./lib/lang");var r=e("./lib/useragent");var a=e("./keyboard/textinput").TextInput;var s=e("./mouse/mouse_handler").MouseHandler;var l=e("./mouse/fold_handler").FoldHandler;var c=e("./keyboard/keybinding").KeyBinding;var h=e("./edit_session").EditSession;var d=e("./search").Search;var p=e("./range").Range;var f=e("./lib/event_emitter").EventEmitter;var g=e("./commands/command_manager").CommandManager;var m=e("./commands/default_commands").commands;var v=e("./config");var b=e("./token_iterator").TokenIterator;var w=function(e,t){var n=e.getContainerElement();this.container=n;this.renderer=e;this.commands=new g(r.isMac?"mac":"win",m);this.textInput=new a(e.getTextAreaContainer(),this);this.renderer.textarea=this.textInput.getElement();this.keyBinding=new c(this);this.$mouseHandler=new s(this);new l(this);this.$blockScrolling=0;this.$search=(new d).set({wrap:true});this.$historyTracker=this.$historyTracker.bind(this);this.commands.on("exec",this.$historyTracker);this.$initOperationListeners();this._$emitInputEvent=u.delayedCall(function(){this._signal("input",{});this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this));this.on("change",function(_,e){e._$emitInputEvent.schedule(31)});this.setSession(t||new h(""));v.resetOptions(this);v._signal("editor",this)};(function(){o.implement(this,f);this.$initOperationListeners=function(){function i(e){return e[e.length-1]}this.selections=[];this.commands.on("exec",function(e){this.startOperation(e);var t=e.command;if(t.aceCommandGroup=="fileJump"){var n=this.prevOp;if(!n||n.command.aceCommandGroup!="fileJump"){this.lastFileJumpPos=i(this.selections)}}else{this.lastFileJumpPos=null}}.bind(this),true);this.commands.on("afterExec",function(e){var t=e.command;if(t.aceCommandGroup=="fileJump"){if(this.lastFileJumpPos&&!this.curOp.selectionChanged){this.selection.fromJSON(this.lastFileJumpPos)}}this.endOperation(e)}.bind(this),true);this.$opResetTimer=u.delayedCall(this.endOperation.bind(this));this.on("change",function(){this.curOp||this.startOperation();this.curOp.docChanged=true}.bind(this),true);this.on("changeSelection",function(){this.curOp||this.startOperation();this.curOp.selectionChanged=true}.bind(this),true)};this.curOp=null;this.prevOp={};this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}if(!e){this.previousCommand=null;e={}}this.$opResetTimer.schedule();this.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop};var t=this.curOp.command;if(t&&t.scrollIntoView)this.$blockScrolling++;this.selections.push(this.selection.toJSON())};this.endOperation=function(){if(this.curOp){var e=this.curOp.command;if(e&&e.scrollIntoView){this.$blockScrolling--;switch(e.scrollIntoView){case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var t=this.selection.getRange();var n=this.renderer.layerConfig;if(t.start.row>=n.lastRow||t.end.row<=n.firstRow){this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}break;default:break}if(e.scrollIntoView=="animate")this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp;this.curOp=null}};this.$mergeableCommands=["backspace","del","insertstring"];this.$historyTracker=function(e){if(!this.$mergeUndoDeltas)return;var t=this.prevOp;var n=this.$mergeableCommands;var i=t.command&&e.command.name==t.command.name;if(e.command.name=="insertstring"){var r=e.args;if(this.mergeNextCommand===undefined)this.mergeNextCommand=true;i=i&&this.mergeNextCommand&&(!/\s/.test(r)||/\s/.test(t.args));this.mergeNextCommand=true}else{i=i&&n.indexOf(e.command.name)!==-1}if(this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3){i=false}if(i)this.session.mergeUndoDeltas=true;else if(n.indexOf(e.command.name)!==-1)this.sequenceStartTime=Date.now()};this.setKeyboardHandler=function(t){if(!t){this.keyBinding.setKeyboardHandler(null)}else if(typeof t==="string"){this.$keybindingId=t;var n=this;v.loadModule(["keybinding",t],function(e){if(n.$keybindingId==t)n.keyBinding.setKeyboardHandler(e&&e.handler)})}else{this.$keybindingId=null;this.keyBinding.setKeyboardHandler(t)}};this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()};this.setSession=function(e){if(this.session==e)return;var t=this.session;if(t){this.session.removeEventListener("change",this.$onDocumentChange);this.session.removeEventListener("changeMode",this.$onChangeMode);this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate);this.session.removeEventListener("changeTabSize",this.$onChangeTabSize);this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit);this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode);this.session.removeEventListener("onChangeFold",this.$onChangeFold);this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker);this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker);this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint);this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation);this.session.removeEventListener("changeOverwrite",this.$onCursorChange);this.session.removeEventListener("changeScrollTop",this.$onScrollTopChange);this.session.removeEventListener("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.removeEventListener("changeCursor",this.$onCursorChange);n.removeEventListener("changeSelection",this.$onSelectionChange)}this.session=e;if(e){this.$onDocumentChange=this.onDocumentChange.bind(this);e.addEventListener("change",this.$onDocumentChange);this.renderer.setSession(e);this.$onChangeMode=this.onChangeMode.bind(this);e.addEventListener("changeMode",this.$onChangeMode);this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this);e.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate);this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer);e.addEventListener("changeTabSize",this.$onChangeTabSize);this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this);e.addEventListener("changeWrapLimit",this.$onChangeWrapLimit);this.$onChangeWrapMode=this.onChangeWrapMode.bind(this);e.addEventListener("changeWrapMode",this.$onChangeWrapMode);this.$onChangeFold=this.onChangeFold.bind(this);e.addEventListener("changeFold",this.$onChangeFold);this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this);this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker);this.$onChangeBackMarker=this.onChangeBackMarker.bind(this);this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker);this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this);this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint);this.$onChangeAnnotation=this.onChangeAnnotation.bind(this);this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation);this.$onCursorChange=this.onCursorChange.bind(this);this.session.addEventListener("changeOverwrite",this.$onCursorChange);this.$onScrollTopChange=this.onScrollTopChange.bind(this);this.session.addEventListener("changeScrollTop",this.$onScrollTopChange);this.$onScrollLeftChange=this.onScrollLeftChange.bind(this);this.session.addEventListener("changeScrollLeft",this.$onScrollLeftChange);this.selection=e.getSelection();this.selection.addEventListener("changeCursor",this.$onCursorChange);this.$onSelectionChange=this.onSelectionChange.bind(this);this.selection.addEventListener("changeSelection",this.$onSelectionChange);this.onChangeMode();this.$blockScrolling+=1;this.onCursorChange();this.$blockScrolling-=1;this.onScrollTopChange();this.onScrollLeftChange();this.onSelectionChange();this.onChangeFrontMarker();this.onChangeBackMarker();this.onChangeBreakpoint();this.onChangeAnnotation();this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit();this.renderer.updateFull()}this._signal("changeSession",{session:e,oldSession:t});t&&t._signal("changeEditor",{oldEditor:this});e&&e._signal("changeEditor",{editor:this})};this.getSession=function(){return this.session};this.setValue=function(e,t){this.session.doc.setValue(e);if(!t)this.selectAll();else if(t==1)this.navigateFileEnd();else if(t==-1)this.navigateFileStart();return e};this.getValue=function(){return this.session.getValue()};this.getSelection=function(){return this.selection};this.resize=function(e){this.renderer.onResize(e)};this.setTheme=function(e,t){this.renderer.setTheme(e,t)};this.getTheme=function(){return this.renderer.getTheme()};this.setStyle=function(e){this.renderer.setStyle(e)};this.unsetStyle=function(e){this.renderer.unsetStyle(e)};this.getFontSize=function(){return this.getOption("fontSize")||i.computedStyle(this.container,"fontSize")};this.setFontSize=function(e){this.setOption("fontSize",e)};this.$highlightBrackets=function(){if(this.session.$bracketHighlight){this.session.removeMarker(this.session.$bracketHighlight);this.session.$bracketHighlight=null}if(this.$highlightPending){return}var n=this;this.$highlightPending=true;setTimeout(function(){n.$highlightPending=false;var e=n.session.findMatchingBracket(n.getCursorPosition());if(e){var t=new p(e.row,e.column,e.row,e.column+1)}else if(n.session.$mode.getMatching){var t=n.session.$mode.getMatching(n.session)}if(t)n.session.$bracketHighlight=n.session.addMarker(t,"ace_bracket","text")},50)};this.$highlightTags=function(){var c=this.session;if(this.$highlightTagPending){return}var u=this;this.$highlightTagPending=true;setTimeout(function(){u.$highlightTagPending=false;var e=u.getCursorPosition();var t=new b(u.session,e.row,e.column);var n=t.getCurrentToken();if(!n||n.type.indexOf("tag-name")===-1){c.removeMarker(c.$tagHighlight);c.$tagHighlight=null;return}var i=n.value;var r=0;var o=t.stepBackward();if(o.value=="<"){do{o=n;n=t.stepForward();if(n&&n.value===i&&n.type.indexOf("tag-name")!==-1){if(o.value==="<"){r++}else if(o.value==="</"){r--}}}while(n&&r>=0)}else{do{n=o;o=t.stepBackward();if(n&&n.value===i&&n.type.indexOf("tag-name")!==-1){if(o.value==="<"){r++}else if(o.value==="</"){r--}}}while(o&&r<=0);t.stepForward()}if(!n){c.removeMarker(c.$tagHighlight);c.$tagHighlight=null;return}var a=t.getCurrentTokenRow();var s=t.getCurrentTokenColumn();var l=new p(a,s,a,s+n.value.length);if(c.$tagHighlight&&l.compareRange(c.$backMarkers[c.$tagHighlight].range)!==0){c.removeMarker(c.$tagHighlight);c.$tagHighlight=null}if(l&&!c.$tagHighlight)c.$tagHighlight=c.addMarker(l,"ace_bracket","text")},50)};this.focus=function(){var e=this;setTimeout(function(){e.textInput.focus()});this.textInput.focus()};this.isFocused=function(){return this.textInput.isFocused()};this.blur=function(){this.textInput.blur()};this.onFocus=function(){if(this.$isFocused)return;this.$isFocused=true;this.renderer.showCursor();this.renderer.visualizeFocus();this._emit("focus")};this.onBlur=function(){if(!this.$isFocused)return;this.$isFocused=false;this.renderer.hideCursor();this.renderer.visualizeBlur();this._emit("blur")};this.$cursorChange=function(){this.renderer.updateCursor()};this.onDocumentChange=function(e){var t=e.data;var n=t.range;var i;if(n.start.row==n.end.row&&t.action!="insertLines"&&t.action!="removeLines")i=n.end.row;else i=Infinity;this.renderer.updateLines(n.start.row,i);this._signal("change",e);this.$cursorChange()};this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)};this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())};this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())};this.onCursorChange=function(){this.$cursorChange();if(!this.$blockScrolling){this.renderer.scrollCursorIntoView()}this.$highlightBrackets();this.$highlightTags();this.$updateHighlightActiveLine();this._signal("changeSelection")};this.$updateHighlightActiveLine=function(){var e=this.getSession();var t;if(this.$highlightActiveLine){if(this.$selectionStyle!="line"||!this.selection.isMultiLine())t=this.getCursorPosition();if(this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1))t=false}if(e.$highlightLineMarker&&!t){e.removeMarker(e.$highlightLineMarker.id);e.$highlightLineMarker=null}else if(!e.$highlightLineMarker&&t){var n=new p(t.row,t.column,t.row,Infinity);n.id=e.addMarker(n,"ace_active-line","screenLine");e.$highlightLineMarker=n}else if(t){e.$highlightLineMarker.start.row=t.row;e.$highlightLineMarker.end.row=t.row;e.$highlightLineMarker.start.column=t.column;e._signal("changeBackMarker")}};this.onSelectionChange=function(e){var t=this.session;if(t.$selectionMarker){t.removeMarker(t.$selectionMarker)}t.$selectionMarker=null;if(!this.selection.isEmpty()){var n=this.selection.getRange();var i=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",i)}else{this.$updateHighlightActiveLine()}var r=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(r);this._signal("changeSelection")};this.$getSelectionHighLightRegexp=function(){var e=this.session;var t=this.getSelectionRange();if(t.isEmpty()||t.isMultiLine())return;var n=t.start.column-1;var i=t.end.column+1;var r=e.getLine(t.start.row);var o=r.length;var a=r.substring(Math.max(n,0),Math.min(i,o));if(n>=0&&/^[\w\d]/.test(a)||i<=o&&/[\w\d]$/.test(a))return;a=r.substring(t.start.column,t.end.column);if(!/^[\w\d]+$/.test(a))return;var s=this.$search.$assembleRegExp({wholeWord:true,caseSensitive:true,needle:a});return s};this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()};this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()};this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()};this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())};this.onChangeMode=function(e){this.renderer.updateText();this._emit("changeMode",e)};this.onChangeWrapLimit=function(){this.renderer.updateFull()};this.onChangeWrapMode=function(){this.renderer.onResize(true)};this.onChangeFold=function(){this.$updateHighlightActiveLine();this.renderer.updateFull()};this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())};this.getCopyText=function(){var e=this.getSelectedText();this._signal("copy",e);return e};this.onCopy=function(){this.commands.exec("copy",this)};this.onCut=function(){this.commands.exec("cut",this)};this.onPaste=function(e){if(this.$readOnly)return;var t={text:e};this._signal("paste",t);this.insert(t.text,true)};this.execCommand=function(e,t){this.commands.exec(e,this,t)};this.insert=function(e,t){var n=this.session;var i=n.getMode();var r=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var o=i.transformAction(n.getState(r.row),"insertion",this,n,e);if(o){if(e!==o.text){this.session.mergeUndoDeltas=false;this.$mergeNextCommand=false}e=o.text}}if(e=="\t")e=this.session.getTabString();if(!this.selection.isEmpty()){var a=this.getSelectionRange();r=this.session.remove(a);this.clearSelection()}else if(this.session.getOverwrite()){var a=new p.fromPoints(r,r);a.end.column+=e.length;this.session.remove(a)}if(e=="\n"||e=="\r\n"){var s=n.getLine(r.row);if(r.column>s.search(/\S|$/)){var l=s.substr(r.column).search(/\S|$/);n.doc.removeInLine(r.row,r.column,r.column+l)}}this.clearSelection();var c=r.column;var u=n.getState(r.row);var s=n.getLine(r.row);var h=i.checkOutdent(u,s,e);var d=n.insert(r,e);if(o&&o.selection){if(o.selection.length==2){this.selection.setSelectionRange(new p(r.row,c+o.selection[0],r.row,c+o.selection[1]))}else{this.selection.setSelectionRange(new p(r.row+o.selection[0],o.selection[1],r.row+o.selection[2],o.selection[3]))}}if(n.getDocument().isNewLine(e)){var f=i.getNextLineIndent(u,s.slice(0,r.column),n.getTabString());n.insert({row:r.row+1,column:0},f)}if(h)i.autoOutdent(u,n,r.row)};this.onTextInput=function(e){this.keyBinding.onTextInput(e)};this.onCommandKey=function(e,t,n){this.keyBinding.onCommandKey(e,t,n)};this.setOverwrite=function(e){this.session.setOverwrite(e)};this.getOverwrite=function(){return this.session.getOverwrite()};this.toggleOverwrite=function(){this.session.toggleOverwrite()};this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)};this.getScrollSpeed=function(){return this.getOption("scrollSpeed")};this.setDragDelay=function(e){this.setOption("dragDelay",e)};this.getDragDelay=function(){return this.getOption("dragDelay")};this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)};this.getSelectionStyle=function(){return this.getOption("selectionStyle")};this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)};this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")};this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)};this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")};this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)};this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord};this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)};this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()};this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)};this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()};this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)};this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()};this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)};this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()};this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)};this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()};this.setReadOnly=function(e){this.setOption("readOnly",e)};this.getReadOnly=function(){return this.getOption("readOnly")};this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)};this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")};this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)};this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")};this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)};this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")};this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)};this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")};this.remove=function(e){if(this.selection.isEmpty()){if(e=="left")this.selection.selectLeft();else this.selection.selectRight()}var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session;var i=n.getState(t.start.row);var r=n.getMode().transformAction(i,"deletion",this,n,t);if(t.end.column===0){var o=n.getTextRange(t);if(o[o.length-1]=="\n"){var a=n.getLine(t.end.row);if(/^\s+$/.test(a)){t.end.column=a.length}}}if(r)t=r}this.session.remove(t);this.clearSelection()};this.removeWordRight=function(){if(this.selection.isEmpty())this.selection.selectWordRight();this.session.remove(this.getSelectionRange());this.clearSelection()};this.removeWordLeft=function(){if(this.selection.isEmpty())this.selection.selectWordLeft();this.session.remove(this.getSelectionRange());this.clearSelection()};this.removeToLineStart=function(){if(this.selection.isEmpty())this.selection.selectLineStart();this.session.remove(this.getSelectionRange());this.clearSelection()};this.removeToLineEnd=function(){if(this.selection.isEmpty())this.selection.selectLineEnd();var e=this.getSelectionRange();if(e.start.column==e.end.column&&e.start.row==e.end.row){e.end.column=0;e.end.row++}this.session.remove(e);this.clearSelection()};this.splitLine=function(){if(!this.selection.isEmpty()){this.session.remove(this.getSelectionRange());this.clearSelection()}var e=this.getCursorPosition();this.insert("\n");this.moveCursorToPosition(e)};this.transposeLetters=function(){if(!this.selection.isEmpty()){return}var e=this.getCursorPosition();var t=e.column;if(t===0)return;var n=this.session.getLine(e.row);var i,r;if(t<n.length){i=n.charAt(t)+n.charAt(t-1);r=new p(e.row,t-1,e.row,t+1)}else{i=n.charAt(t-1)+n.charAt(t-2);r=new p(e.row,t-2,e.row,t)}this.session.replace(r,i)};this.toLowerCase=function(){var e=this.getSelectionRange();if(this.selection.isEmpty()){this.selection.selectWord()}var t=this.getSelectionRange();var n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase());this.selection.setSelectionRange(e)};this.toUpperCase=function(){var e=this.getSelectionRange();if(this.selection.isEmpty()){this.selection.selectWord()}var t=this.getSelectionRange();var n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase());this.selection.setSelectionRange(e)};this.indent=function(){var e=this.session;var t=this.getSelectionRange();if(t.start.row<t.end.row){var n=this.$getSelectedRows();e.indentRows(n.first,n.last,"\t");return}else if(t.start.column<t.end.column){var i=e.getTextRange(t);if(!/^\s+$/.test(i)){var n=this.$getSelectedRows();e.indentRows(n.first,n.last,"\t");return}}var r=e.getLine(t.start.row);var o=t.start;var a=e.getTabSize();var s=e.documentToScreenColumn(o.row,o.column);if(this.session.getUseSoftTabs()){var l=a-s%a;var c=u.stringRepeat(" ",l)}else{var l=s%a;while(r[t.start.column]==" "&&l){t.start.column--;l--}this.selection.setSelectionRange(t);c="\t"}return this.insert(c)};this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"\t")};this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())};this.sortLines=function(){var e=this.$getSelectedRows();var t=this.session;var n=[];for(r=e.first;r<=e.last;r++)n.push(t.getLine(r));n.sort(function(e,t){if(e.toLowerCase()<t.toLowerCase())return-1;if(e.toLowerCase()>t.toLowerCase())return 1;return 0});var i=new p(0,0,0,0);for(var r=e.first;r<=e.last;r++){var o=t.getLine(r);i.start.row=r;i.end.row=r;i.end.column=o.length;t.replace(i,n[r-e.first])}};this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row);var t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)};this.toggleBlockComment=function(){var e=this.getCursorPosition();var t=this.session.getState(e.row);var n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)};this.getNumberAt=function(e,t){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;var i=this.session.getLine(e);while(n.lastIndex<t){var r=n.exec(i);if(r.index<=t&&r.index+r[0].length>=t){var o={value:r[0],start:r.index,end:r.index+r[0].length};return o}}return null};this.modifyNumber=function(e){var t=this.selection.getCursor().row;var n=this.selection.getCursor().column;var i=new p(t,n-1,t,n);var r=this.session.getTextRange(i);if(!isNaN(parseFloat(r))&&isFinite(r)){var o=this.getNumberAt(t,n);if(o){var a=o.value.indexOf(".")>=0?o.start+o.value.indexOf(".")+1:o.end;var s=o.start+o.value.length-a;var l=parseFloat(o.value);l*=Math.pow(10,s);if(a!==o.end&&n<a){e*=Math.pow(10,o.end-n-1)}else{e*=Math.pow(10,o.end-n)}l+=e;l/=Math.pow(10,s);var c=l.toFixed(s);var u=new p(t,o.start,t,o.end);this.session.replace(u,c);this.moveCursorTo(t,Math.max(o.start+1,n+c.length-o.value.length))}}};this.removeLines=function(){var e=this.$getSelectedRows();var t;if(e.first===0||e.last+1<this.session.getLength())t=new p(e.first,0,e.last+1,0);else t=new p(e.first-1,this.session.getLine(e.first-1).length,e.last,this.session.getLine(e.last).length);this.session.remove(t);this.clearSelection()};this.duplicateSelection=function(){var e=this.selection;var t=this.session;var n=e.getRange();var i=e.isBackwards();if(n.isEmpty()){var r=n.start.row;t.duplicateLines(r,r)}else{var o=i?n.start:n.end;var a=t.insert(o,t.getTextRange(n),false);n.start=o;n.end=a;e.setSelectionRange(n,i)}};this.moveLinesDown=function(){this.$moveLines(function(e,t){return this.session.moveLinesDown(e,t)})};this.moveLinesUp=function(){this.$moveLines(function(e,t){return this.session.moveLinesUp(e,t)})};this.moveText=function(e,t,n){return this.session.moveText(e,t,n)};this.copyLinesUp=function(){this.$moveLines(function(e,t){this.session.duplicateLines(e,t);return 0})};this.copyLinesDown=function(){this.$moveLines(function(e,t){return this.session.duplicateLines(e,t)})};this.$moveLines=function(e){var t=this.selection;if(!t.inMultiSelectMode||this.inVirtualSelectionMode){var n=t.toOrientedRange();var i=this.$getSelectedRows(n);var r=e.call(this,i.first,i.last);n.moveBy(r,0);t.fromOrientedRange(n)}else{var o=t.rangeList.ranges;t.rangeList.detach(this.session);for(var a=o.length;a--;){var s=a;var i=o[a].collapseRows();var l=i.end.row;var c=i.start.row;while(a--){i=o[a].collapseRows();if(c-i.end.row<=1)c=i.end.row;else break}a++;var r=e.call(this,c,l);while(s>=a){o[s].moveBy(r,0);s--}}t.fromOrientedRange(t.ranges[0]);t.rangeList.attach(this.session)}};this.$getSelectedRows=function(){var e=this.getSelectionRange().collapseRows();return{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}};this.onCompositionStart=function(e){this.renderer.showComposition(this.getCursorPosition())};this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)};this.onCompositionEnd=function(){this.renderer.hideComposition()};this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()};this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()};this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()};this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()};this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1};this.$moveByPage=function(e,t){var n=this.renderer;var i=this.renderer.layerConfig;var r=e*Math.floor(i.height/i.lineHeight);this.$blockScrolling++;if(t===true){this.selection.$moveSelection(function(){this.moveCursorBy(r,0)})}else if(t===false){this.selection.moveCursorBy(r,0);this.selection.clearSelection()}this.$blockScrolling--;var o=n.scrollTop;n.scrollBy(0,r*i.lineHeight);if(t!=null)n.scrollCursorIntoView(null,.5);n.animateScrolling(o)};this.selectPageDown=function(){this.$moveByPage(1,true)};this.selectPageUp=function(){this.$moveByPage(-1,true)};this.gotoPageDown=function(){this.$moveByPage(1,false)};this.gotoPageUp=function(){this.$moveByPage(-1,false)};this.scrollPageDown=function(){this.$moveByPage(1)};this.scrollPageUp=function(){this.$moveByPage(-1)};this.scrollToRow=function(e){this.renderer.scrollToRow(e)};this.scrollToLine=function(e,t,n,i){this.renderer.scrollToLine(e,t,n,i)};this.centerSelection=function(){var e=this.getSelectionRange();var t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)};this.getCursorPosition=function(){return this.selection.getCursor()};this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())};this.getSelectionRange=function(){return this.selection.getRange()};this.selectAll=function(){this.$blockScrolling+=1;this.selection.selectAll();this.$blockScrolling-=1};this.clearSelection=function(){this.selection.clearSelection()};this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)};this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)};this.jumpToMatching=function(e){var t=this.getCursorPosition();var n=new b(this.session,t.row,t.column);var i=n.getCurrentToken();var r=i;if(!r)r=n.stepForward();if(!r)return;var o;var a=false;var s={};var l=t.column-r.start;var c;var u={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(r.value.match(/[{}()\[\]]/g)){for(;l<r.value.length&&!a;l++){if(!u[r.value[l]]){continue}c=u[r.value[l]]+"."+r.type.replace("rparen","lparen");if(isNaN(s[c])){s[c]=0}switch(r.value[l]){case"(":case"[":case"{":s[c]++;break;case")":case"]":case"}":s[c]--;if(s[c]===-1){o="bracket";a=true}break}}}else if(r&&r.type.indexOf("tag-name")!==-1){if(isNaN(s[r.value])){s[r.value]=0}if(i.value==="<"){s[r.value]++}else if(i.value==="</"){s[r.value]--}if(s[r.value]===-1){o="tag";a=true}}if(!a){i=r;r=n.stepForward();l=0}}while(r&&!a);if(!o){return}var h;if(o==="bracket"){h=this.session.getBracketRange(t);if(!h){h=new p(n.getCurrentTokenRow(),n.getCurrentTokenColumn()+l-1,n.getCurrentTokenRow(),n.getCurrentTokenColumn()+l-1);if(!h)return;var d=h.start;if(d.row===t.row&&Math.abs(d.column-t.column)<2)h=this.session.getBracketRange(d)}}else if(o==="tag"){if(r&&r.type.indexOf("tag-name")!==-1)var f=r.value;else return;var h=new p(n.getCurrentTokenRow(),n.getCurrentTokenColumn()-2,n.getCurrentTokenRow(),n.getCurrentTokenColumn()-2);if(h.compare(t.row,t.column)===0){a=false;do{r=i;i=n.stepBackward();if(i){if(i.type.indexOf("tag-close")!==-1){h.setEnd(n.getCurrentTokenRow(),n.getCurrentTokenColumn()+1)}if(r.value===f&&r.type.indexOf("tag-name")!==-1){if(i.value==="<"){s[f]++}else if(i.value==="</"){s[f]--}if(s[f]===0)a=true}}}while(i&&!a)}if(r&&r.type.indexOf("tag-name")){var d=h.start;if(d.row==t.row&&Math.abs(d.column-t.column)<2)d=h.end}}d=h&&h.cursor||d;if(d){if(e){if(h&&h.isEqual(this.getSelectionRange()))this.clearSelection();else this.selection.selectTo(d.row,d.column)}else{this.selection.moveTo(d.row,d.column)}}};this.gotoLine=function(e,t,n){this.selection.clearSelection();this.session.unfold({row:e-1,column:t||0});this.$blockScrolling+=1;this.exitMultiSelectMode&&this.exitMultiSelectMode();this.moveCursorTo(e-1,t||0);this.$blockScrolling-=1;if(!this.isRowFullyVisible(e-1))this.scrollToLine(e-1,true,n)};this.navigateTo=function(e,t){this.selection.moveTo(e,t)};this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection();this.selection.moveCursorBy(-e||-1,0)};this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection();this.selection.moveCursorBy(e||1,0)};this.navigateLeft=function(e){if(!this.selection.isEmpty()){var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}else{e=e||1;while(e--){this.selection.moveCursorLeft()}}this.clearSelection()};this.navigateRight=function(e){if(!this.selection.isEmpty()){var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}else{e=e||1;while(e--){this.selection.moveCursorRight()}}this.clearSelection()};this.navigateLineStart=function(){this.selection.moveCursorLineStart();this.clearSelection()};this.navigateLineEnd=function(){this.selection.moveCursorLineEnd();this.clearSelection()};this.navigateFileEnd=function(){this.selection.moveCursorFileEnd();this.clearSelection()};this.navigateFileStart=function(){this.selection.moveCursorFileStart();this.clearSelection()};this.navigateWordRight=function(){this.selection.moveCursorWordRight();this.clearSelection()};this.navigateWordLeft=function(){this.selection.moveCursorWordLeft();this.clearSelection()};this.replace=function(e,t){if(t)this.$search.set(t);var n=this.$search.find(this.session);var i=0;if(!n)return i;if(this.$tryReplace(n,e)){i=1}if(n!==null){this.selection.setSelectionRange(n);this.renderer.scrollSelectionIntoView(n.start,n.end)}return i};this.replaceAll=function(e,t){if(t){this.$search.set(t)}var n=this.$search.findAll(this.session);var i=0;if(!n.length)return i;this.$blockScrolling+=1;var r=this.getSelectionRange();this.selection.moveTo(0,0);for(var o=n.length-1;o>=0;--o){if(this.$tryReplace(n[o],e)){i++}}this.selection.setSelectionRange(r);this.$blockScrolling-=1;return i};this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);t=this.$search.replace(n,t);if(t!==null){e.end=this.session.replace(e,t);return e}else{return null}};this.getLastSearchOptions=function(){return this.$search.getOptions()};this.find=function(e,t,n){if(!t)t={};if(typeof e=="string"||e instanceof RegExp)t.needle=e;else if(typeof e=="object")o.mixin(t,e);var i=this.selection.getRange();if(t.needle==null){e=this.session.getTextRange(i)||this.$search.$options.needle;if(!e){i=this.session.getWordRange(i.start.row,i.start.column);e=this.session.getTextRange(i)}this.$search.set({needle:e})}this.$search.set(t);if(!t.start)this.$search.set({start:i});var r=this.$search.find(this.session);if(t.preventScroll)return r;if(r){this.revealRange(r,n);return r}if(t.backwards)i.start=i.end;else i.end=i.start;this.selection.setRange(i)};this.findNext=function(e,t){this.find({skipCurrent:true,backwards:false},e,t)};this.findPrevious=function(e,t){this.find(e,{skipCurrent:true,backwards:true},t)};this.revealRange=function(e,t){this.$blockScrolling+=1;this.session.unfold(e);this.selection.setSelectionRange(e);this.$blockScrolling-=1;var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5);if(t!==false)this.renderer.animateScrolling(n)};this.undo=function(){this.$blockScrolling++;this.session.getUndoManager().undo();this.$blockScrolling--;this.renderer.scrollCursorIntoView(null,.5)};this.redo=function(){this.$blockScrolling++;this.session.getUndoManager().redo();this.$blockScrolling--;this.renderer.scrollCursorIntoView(null,.5)};this.destroy=function(){this.renderer.destroy();this._signal("destroy",this)};this.setAutoScrollEditorIntoView=function(e){if(!e)return;var r;var o=this;var a=false;if(!this.$scrollAnchor)this.$scrollAnchor=document.createElement("div");var s=this.$scrollAnchor;s.style.cssText="position:absolute";this.container.insertBefore(s,this.container.firstChild);var t=this.on("changeSelection",function(){a=true});var n=this.renderer.on("beforeRender",function(){if(a)r=o.renderer.container.getBoundingClientRect()});var i=this.renderer.on("afterRender",function(){if(a&&r&&o.isFocused()){var e=o.renderer;var t=e.$cursorLayer.$pixelPos;var n=e.layerConfig;var i=t.top-n.offset;if(t.top>=0&&i+r.top<0){a=true}else if(t.top<n.height&&t.top+r.top+n.lineHeight>window.innerHeight){a=false}else{a=null}if(a!=null){s.style.top=i+"px";s.style.left=t.left+"px";s.style.height=n.lineHeight+"px";s.scrollIntoView(a)}a=r=null}});this.setAutoScrollEditorIntoView=function(e){if(e)return;delete this.setAutoScrollEditorIntoView;this.removeEventListener("changeSelection",t);this.renderer.removeEventListener("afterRender",i);this.renderer.removeEventListener("beforeRender",n)}};this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace";var t=this.renderer.$cursorLayer;if(!t)return;t.setSmoothBlinking(/smooth/.test(e));t.isBlinking=!this.$readOnly&&e!="wide";i.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e))}}).call(w.prototype);v.defineOptions(w.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange();this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:true},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:true},readOnly:{set:function(e){this.$resetCursorStyle()},initialValue:false},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[false,true,"always"],initialValue:true},behavioursEnabled:{initialValue:true},wrapBehavioursEnabled:{initialValue:true},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",foldStyle:"session",mode:"session"});t.Editor=w});ace.define("ace/undomanager",["require","exports","module"],function(e,t,n){"use strict";var i=function(){this.reset()};(function(){this.execute=function(e){var t=e.args[0];this.$doc=e.args[1];if(e.merge&&this.hasUndo()){this.dirtyCounter--;t=this.$undoStack.pop().concat(t)}this.$undoStack.push(t);this.$redoStack=[];if(this.dirtyCounter<0){this.dirtyCounter=NaN}this.dirtyCounter++};this.undo=function(e){var t=this.$undoStack.pop();var n=null;if(t){n=this.$doc.undoChanges(t,e);this.$redoStack.push(t);this.dirtyCounter--}return n};this.redo=function(e){var t=this.$redoStack.pop();var n=null;if(t){n=this.$doc.redoChanges(t,e);this.$undoStack.push(t);this.dirtyCounter++}return n};this.reset=function(){this.$undoStack=[];this.$redoStack=[];this.dirtyCounter=0};this.hasUndo=function(){return this.$undoStack.length>0};this.hasRedo=function(){return this.$redoStack.length>0};this.markClean=function(){this.dirtyCounter=0};this.isClean=function(){return this.dirtyCounter===0}}).call(i.prototype);t.UndoManager=i});ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],function(e,t,n){"use strict";var C=e("../lib/dom");var i=e("../lib/oop");var s=e("../lib/lang");var r=e("../lib/event_emitter").EventEmitter;var o=function(e){this.element=C.createElement("div");this.element.className="ace_layer ace_gutter-layer";e.appendChild(this.element);this.setShowFoldWidgets(this.$showFoldWidgets);this.gutterWidth=0;this.$annotations=[];this.$updateAnnotations=this.$updateAnnotations.bind(this);this.$cells=[]};(function(){i.implement(this,r);this.setSession=function(e){if(this.session)this.session.removeEventListener("change",this.$updateAnnotations);this.session=e;e.on("change",this.$updateAnnotations)};this.addGutterDecoration=function(e,t){if(window.console)console.warn&&console.warn("deprecated use session.addGutterDecoration");this.session.addGutterDecoration(e,t)};this.removeGutterDecoration=function(e,t){if(window.console)console.warn&&console.warn("deprecated use session.removeGutterDecoration");this.session.removeGutterDecoration(e,t)};this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t];var i=n.row;var r=this.$annotations[i];if(!r)r=this.$annotations[i]={text:[]};var o=n.text;o=o?s.escapeHTML(o):n.html||"";if(r.text.indexOf(o)===-1)r.text.push(o);var a=n.type;if(a=="error")r.className=" ace_error";else if(a=="warning"&&r.className!=" ace_error")r.className=" ace_warning";else if(a=="info"&&!r.className)r.className=" ace_info"}};this.$updateAnnotations=function(e){if(!this.$annotations.length)return;var t=e.data;var n=t.range;var i=n.start.row;var r=n.end.row-i;if(r===0){}else if(t.action=="removeText"||t.action=="removeLines"){this.$annotations.splice(i,r+1,null)}else{var o=new Array(r+1);o.unshift(i,1);this.$annotations.splice.apply(this.$annotations,o)}};this.update=function(e){var t=this.session;var n=e.firstRow;var i=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1);var r=t.getNextFoldLine(n);var o=r?r.start.row:Infinity;var a=this.$showFoldWidgets&&t.foldWidgets;var s=t.$breakpoints;var l=t.$decorations;var c=t.$firstLineNumber;var u=0;var h=t.gutterRenderer||this.$renderer;var d=null;var f=-1;var p=n;while(true){if(p>o){p=r.end.row+1;r=t.getNextFoldLine(p,r);o=r?r.start.row:Infinity}if(p>i){while(this.$cells.length>f+1){d=this.$cells.pop();this.element.removeChild(d.element)}break}d=this.$cells[++f];if(!d){d={element:null,textNode:null,foldWidget:null};d.element=C.createElement("div");d.textNode=document.createTextNode("");d.element.appendChild(d.textNode);this.element.appendChild(d.element);this.$cells[f]=d}var g="ace_gutter-cell ";if(s[p])g+=s[p];if(l[p])g+=l[p];if(this.$annotations[p])g+=this.$annotations[p].className;if(d.element.className!=g)d.element.className=g;var m=t.getRowLength(p)*e.lineHeight+"px";if(m!=d.element.style.height)d.element.style.height=m;if(a){var v=a[p];if(v==null)v=a[p]=t.getFoldWidget(p)}if(v){if(!d.foldWidget){d.foldWidget=C.createElement("span");d.element.appendChild(d.foldWidget)}var g="ace_fold-widget ace_"+v;if(v=="start"&&p==o&&p<r.end.row)g+=" ace_closed";else g+=" ace_open";if(d.foldWidget.className!=g)d.foldWidget.className=g;var m=e.lineHeight+"px";if(d.foldWidget.style.height!=m)d.foldWidget.style.height=m}else{if(d.foldWidget){d.element.removeChild(d.foldWidget);d.foldWidget=null}}var b=u=h?h.getText(t,p):p+c;if(b!=d.textNode.data)d.textNode.data=b;p++}this.element.style.height=e.minHeight+"px";if(this.$fixedWidth||t.$useWrapMode)u=t.getLength()+c;var w=h?h.getWidth(t,u,e):u.toString().length*e.characterWidth;var y=this.$padding||this.$computePadding();w+=y.left+y.right;if(w!==this.gutterWidth&&!isNaN(w)){this.gutterWidth=w;this.element.style.width=Math.ceil(this.gutterWidth)+"px";this._emit("changeGutterWidth",w)}};this.$fixedWidth=false;this.$showLineNumbers=true;this.$renderer="";this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return""},getText:function(){return""}}};this.getShowLineNumbers=function(){return this.$showLineNumbers};this.$showFoldWidgets=true;this.setShowFoldWidgets=function(e){if(e)C.addCssClass(this.element,"ace_folding-enabled");else C.removeCssClass(this.element,"ace_folding-enabled");this.$showFoldWidgets=e;this.$padding=null};this.getShowFoldWidgets=function(){return this.$showFoldWidgets};this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=C.computedStyle(this.element.firstChild);this.$padding={};this.$padding.left=parseInt(e.paddingLeft)+1||0;this.$padding.right=parseInt(e.paddingRight)||0;return this.$padding};this.getRegion=function(e){var t=this.$padding||this.$computePadding();var n=this.element.getBoundingClientRect();if(e.x<t.left+n.left)return"markers";if(this.$showFoldWidgets&&e.x>n.right-t.right)return"foldWidgets"}}).call(o.prototype);t.Gutter=o});ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var s=e("../range").Range;var l=e("../lib/dom");var i=function(e){this.element=l.createElement("div");this.element.className="ace_layer ace_marker-layer";e.appendChild(this.element)};(function(){this.$padding=0;this.setPadding=function(e){this.$padding=e};this.setSession=function(e){this.session=e};this.setMarkers=function(e){this.markers=e};this.update=function(e){var e=e||this.config;if(!e)return;this.config=e;var t=[];for(var n in this.markers){var i=this.markers[n];if(!i.range){i.update(t,this,this.session,e);continue}var r=i.range.clipRows(e.firstRow,e.lastRow);if(r.isEmpty())continue;r=r.toScreenRange(this.session);if(i.renderer){var o=this.$getTop(r.start.row,e);var a=this.$padding+r.start.column*e.characterWidth;i.renderer(t,r,a,o,e)}else if(i.type=="fullLine"){this.drawFullLineMarker(t,r,i.clazz,e)}else if(i.type=="screenLine"){this.drawScreenLineMarker(t,r,i.clazz,e)}else if(r.isMultiLine()){if(i.type=="text")this.drawTextMarker(t,r,i.clazz,e);else this.drawMultiLineMarker(t,r,i.clazz,e)}else{this.drawSingleLineMarker(t,r,i.clazz+" ace_start",e)}}this.element=l.setInnerHtml(this.element,t.join(""))};this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight};this.drawTextMarker=function(e,t,n,i,r){var o=t.start.row;var a=new s(o,t.start.column,o,this.session.getScreenLastRowColumn(o));this.drawSingleLineMarker(e,a,n+" ace_start",i,1,r);o=t.end.row;a=new s(o,0,o,t.end.column);this.drawSingleLineMarker(e,a,n,i,0,r);for(o=t.start.row+1;o<t.end.row;o++){a.start.row=o;a.end.row=o;a.end.column=this.session.getScreenLastRowColumn(o);this.drawSingleLineMarker(e,a,n,i,1,r)}};this.drawMultiLineMarker=function(e,t,n,i,r){var o=this.$padding;var a=i.lineHeight;var s=this.$getTop(t.start.row,i);var l=o+t.start.column*i.characterWidth;r=r||"";e.push("<div class='",n," ace_start' style='","height:",a,"px;","right:0;","top:",s,"px;","left:",l,"px;",r,"'></div>");s=this.$getTop(t.end.row,i);var c=t.end.column*i.characterWidth;e.push("<div class='",n,"' style='","height:",a,"px;","width:",c,"px;","top:",s,"px;","left:",o,"px;",r,"'></div>");a=(t.end.row-t.start.row-1)*i.lineHeight;if(a<0)return;s=this.$getTop(t.start.row+1,i);e.push("<div class='",n,"' style='","height:",a,"px;","right:0;","top:",s,"px;","left:",o,"px;",r,"'></div>")};this.drawSingleLineMarker=function(e,t,n,i,r,o){var a=i.lineHeight;var s=(t.end.column+(r||0)-t.start.column)*i.characterWidth;var l=this.$getTop(t.start.row,i);var c=this.$padding+t.start.column*i.characterWidth;e.push("<div class='",n,"' style='","height:",a,"px;","width:",s,"px;","top:",l,"px;","left:",c,"px;",o||"","'></div>")};this.drawFullLineMarker=function(e,t,n,i,r){var o=this.$getTop(t.start.row,i);var a=i.lineHeight;if(t.start.row!=t.end.row)a+=this.$getTop(t.end.row,i)-o;e.push("<div class='",n,"' style='","height:",a,"px;","top:",o,"px;","left:0;right:0;",r||"","'></div>")};this.drawScreenLineMarker=function(e,t,n,i,r){var o=this.$getTop(t.start.row,i);var a=i.lineHeight;e.push("<div class='",n,"' style='","height:",a,"px;","top:",o,"px;","left:0;right:0;",r||"","'></div>")}}).call(i.prototype);t.Marker=i});ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("../lib/oop");var d=e("../lib/dom");var u=e("../lib/lang");var r=e("../lib/useragent");var o=e("../lib/event_emitter").EventEmitter;var a=function(e){this.element=d.createElement("div");this.element.className="ace_layer ace_text-layer";e.appendChild(this.element);this.$updateEolChar=this.$updateEolChar.bind(this)};(function(){i.implement(this,o);this.EOF_CHAR="¶";this.EOL_CHAR_LF="¬";this.EOL_CHAR_CRLF="¤";this.EOL_CHAR=this.EOL_CHAR_LF;this.TAB_CHAR="→";this.SPACE_CHAR="·";this.$padding=0;this.$updateEolChar=function(){var e=this.session.doc.getNewLineCharacter()=="\n"?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=e){this.EOL_CHAR=e;return true}};this.setPadding=function(e){this.$padding=e;this.element.style.padding="0 "+e+"px"};this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0};this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0};this.$setFontMetrics=function(e){this.$fontMetrics=e;this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this));this.$pollSizeChanges()};this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()};this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()};this.setSession=function(e){this.session=e;this.$computeTabString()};this.showInvisibles=false;this.setShowInvisibles=function(e){if(this.showInvisibles==e)return false;this.showInvisibles=e;this.$computeTabString();return true};this.displayIndentGuides=true;this.setDisplayIndentGuides=function(e){if(this.displayIndentGuides==e)return false;this.displayIndentGuides=e;this.$computeTabString();return true};this.$tabStrings=[];this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;var t=this.$tabStrings=[0];for(var n=1;n<e+1;n++){if(this.showInvisibles){t.push("<span class='ace_invisible ace_invisible_tab'>"+this.TAB_CHAR+u.stringRepeat(" ",n-1)+"</span>")}else{t.push(u.stringRepeat(" ",n))}}if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var i="ace_indent-guide";var r="";var o="";if(this.showInvisibles){i+=" ace_invisible";r=" ace_invisible_space";o=" ace_invisible_tab";var a=u.stringRepeat(this.SPACE_CHAR,this.tabSize);var s=this.TAB_CHAR+u.stringRepeat(" ",this.tabSize-1)}else{var a=u.stringRepeat(" ",this.tabSize);var s=a}this.$tabStrings[" "]="<span class='"+i+r+"'>"+a+"</span>";this.$tabStrings["\t"]="<span class='"+i+o+"'>"+s+"</span>"}};this.updateLines=function(e,t,n){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow){this.scrollLines(e)}this.config=e;var i=Math.max(t,e.firstRow);var r=Math.min(n,e.lastRow);var o=this.element.childNodes;var a=0;for(var s=e.firstRow;s<i;s++){var l=this.session.getFoldLine(s);if(l){if(l.containsRow(i)){i=l.start.row;break}else{s=l.end.row}}a++}var s=i;var l=this.session.getNextFoldLine(s);var c=l?l.start.row:Infinity;while(true){if(s>c){s=l.end.row+1;l=this.session.getNextFoldLine(s,l);c=l?l.start.row:Infinity}if(s>r)break;var u=o[a++];if(u){var h=[];this.$renderLine(h,s,!this.$useLineGroups(),s==c?l:false);u.style.height=e.lineHeight*this.session.getRowLength(s)+"px";d.setInnerHtml(u,h.join(""))}s++}};this.scrollLines=function(e){var t=this.config;this.config=e;if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);var n=this.element;if(t.firstRow<e.firstRow)for(var i=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);i>0;i--)n.removeChild(n.firstChild);if(t.lastRow>e.lastRow)for(var i=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);i>0;i--)n.removeChild(n.lastChild);if(e.firstRow<t.firstRow){var r=this.$renderLinesFragment(e,e.firstRow,t.firstRow-1);if(n.firstChild)n.insertBefore(r,n.firstChild);else n.appendChild(r)}if(e.lastRow>t.lastRow){var r=this.$renderLinesFragment(e,t.lastRow+1,e.lastRow);n.appendChild(r)}};this.$renderLinesFragment=function(e,t,n){var i=this.element.ownerDocument.createDocumentFragment();var r=t;var o=this.session.getNextFoldLine(r);var a=o?o.start.row:Infinity;while(true){if(r>a){r=o.end.row+1;o=this.session.getNextFoldLine(r,o);a=o?o.start.row:Infinity}if(r>n)break;var s=d.createElement("div");var l=[];this.$renderLine(l,r,false,r==a?o:false);s.innerHTML=l.join("");if(this.$useLineGroups()){s.className="ace_line_group";i.appendChild(s);s.style.height=e.lineHeight*this.session.getRowLength(r)+"px"}else{while(s.firstChild)i.appendChild(s.firstChild)}r++}return i};this.update=function(e){this.config=e;var t=[];var n=e.firstRow,i=e.lastRow;var r=n;var o=this.session.getNextFoldLine(r);var a=o?o.start.row:Infinity;while(true){if(r>a){r=o.end.row+1;o=this.session.getNextFoldLine(r,o);a=o?o.start.row:Infinity}if(r>i)break;if(this.$useLineGroups())t.push("<div class='ace_line_group' style='height:",e.lineHeight*this.session.getRowLength(r),"px'>");this.$renderLine(t,r,false,r==a?o:false);if(this.$useLineGroups())t.push("</div>");r++}this.element=d.setInnerHtml(this.element,t.join(""))};this.$textToken={text:true,rparen:true,lparen:true};this.$renderToken=function(e,l,t,n){var c=this;var i=/\t|&|<|( +)|([\x00-\x1f\x80-\xa0\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g;var r=function(e,t,n,i,r){if(t){return c.showInvisibles?"<span class='ace_invisible ace_invisible_space'>"+u.stringRepeat(c.SPACE_CHAR,e.length)+"</span>":u.stringRepeat(" ",e.length)}else if(e=="&"){return"&#38;"}else if(e=="<"){return"&#60;"}else if(e=="\t"){var o=c.session.getScreenTabSize(l+i);l+=o-1;return c.$tabStrings[o]}else if(e=="　"){var a=c.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk";var s=c.showInvisibles?c.SPACE_CHAR:"";l+=1;return"<span class='"+a+"' style='width:"+c.config.characterWidth*2+"px'>"+s+"</span>"}else if(n){return"<span class='ace_invisible ace_invisible_space ace_invalid'>"+c.SPACE_CHAR+"</span>"}else{l+=1;return"<span class='ace_cjk' style='width:"+c.config.characterWidth*2+"px'>"+e+"</span>"}};var o=n.replace(i,r);if(!this.$textToken[t.type]){var a="ace_"+t.type.replace(/\./g," ace_");var s="";if(t.type=="fold")s=" style='width:"+t.value.length*this.config.characterWidth+"px;' ";e.push("<span class='",a,"'",s,">",o,"</span>")}else{e.push(o)}return l+n.length};this.renderIndentGuide=function(e,t,n){var i=t.search(this.$indentGuideRe);if(i<=0||i>=n)return t;if(t[0]==" "){i-=i%this.tabSize;e.push(u.stringRepeat(this.$tabStrings[" "],i/this.tabSize));return t.substr(i)}else if(t[0]=="\t"){e.push(u.stringRepeat(this.$tabStrings["\t"],i));return t.substr(i)}return t};this.$renderWrappedLine=function(e,t,n,i){var r=0;var o=0;var a=n[0];var s=0;for(var l=0;l<t.length;l++){var c=t[l];var u=c.value;if(l==0&&this.displayIndentGuides){r=u.length;u=this.renderIndentGuide(e,u,a);if(!u)continue;r-=u.length}if(r+u.length<a){s=this.$renderToken(e,s,c,u);r+=u.length}else{while(r+u.length>=a){s=this.$renderToken(e,s,c,u.substring(0,a-r));u=u.substring(a-r);r=a;if(!i){e.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>")}o++;s=0;a=n[o]||Number.MAX_VALUE}if(u.length!=0){r+=u.length;s=this.$renderToken(e,s,c,u)}}}};this.$renderSimpleLine=function(e,t){var n=0;var i=t[0];var r=i.value;if(this.displayIndentGuides)r=this.renderIndentGuide(e,r);if(r)n=this.$renderToken(e,n,i,r);for(var o=1;o<t.length;o++){i=t[o];r=i.value;n=this.$renderToken(e,n,i,r)}};this.$renderLine=function(e,t,n,i){if(!i&&i!=false)i=this.session.getFoldLine(t);if(i)var r=this.$getFoldLineTokens(t,i);else var r=this.session.getTokens(t);if(!n){e.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(t)),"px'>")}if(r.length){var o=this.session.getRowSplitData(t);if(o&&o.length)this.$renderWrappedLine(e,r,o,n);else this.$renderSimpleLine(e,r)}if(this.showInvisibles){if(i)t=i.end.row;e.push("<span class='ace_invisible ace_invisible_eol'>",t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")}if(!n)e.push("</div>")};this.$getFoldLineTokens=function(e,t){var o=this.session;var a=[];function s(e,t,n){var i=0,r=0;while(r+e[i].value.length<t){r+=e[i].value.length;i++;if(i==e.length)return}if(r!=t){var o=e[i].value.substring(t-r);if(o.length>n-t)o=o.substring(0,n-t);a.push({type:e[i].type,value:o});r=t+o.length;i+=1}while(r<n&&i<e.length){var o=e[i].value;if(o.length+r>n){a.push({type:e[i].type,value:o.substring(0,n-r)})}else a.push(e[i]);r+=o.length;i+=1}}var l=o.getTokens(e);t.walk(function(e,t,n,i,r){if(e!=null){a.push({type:"fold",value:e})}else{if(r)l=o.getTokens(t);if(l.length)s(l,i,n)}},t.end.row,this.session.getLine(t.end.row).length);return a};this.$useLineGroups=function(){return this.session.getUseWrapMode()};this.destroy=function(){clearInterval(this.$pollSizeChangesTimer);if(this.$measureNode)this.$measureNode.parentNode.removeChild(this.$measureNode);delete this.$measureNode}}).call(a.prototype);t.Text=a});ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var i=e("../lib/dom");var r;var o=function(e){this.element=i.createElement("div");this.element.className="ace_layer ace_cursor-layer";e.appendChild(this.element);if(r===undefined)r="opacity"in this.element;this.isVisible=false;this.isBlinking=true;this.blinkInterval=1e3;this.smoothBlinking=false;this.cursors=[];this.cursor=this.addCursor();i.addCssClass(this.element,"ace_hidden-cursors");this.$updateCursors=this.$updateVisibility.bind(this)};(function(){this.$updateVisibility=function(e){var t=this.cursors;for(var n=t.length;n--;)t[n].style.visibility=e?"":"hidden"};this.$updateOpacity=function(e){var t=this.cursors;for(var n=t.length;n--;)t[n].style.opacity=e?"":"0"};this.$padding=0;this.setPadding=function(e){this.$padding=e};this.setSession=function(e){this.session=e};this.setBlinking=function(e){if(e!=this.isBlinking){this.isBlinking=e;this.restartTimer()}};this.setBlinkInterval=function(e){if(e!=this.blinkInterval){this.blinkInterval=e;this.restartTimer()}};this.setSmoothBlinking=function(e){if(e!=this.smoothBlinking&&!r){this.smoothBlinking=e;i.setCssClass(this.element,"ace_smooth-blinking",e);this.$updateCursors(true);this.$updateCursors=(e?this.$updateOpacity:this.$updateVisibility).bind(this);this.restartTimer()}};this.addCursor=function(){var e=i.createElement("div");e.className="ace_cursor";this.element.appendChild(e);this.cursors.push(e);return e};this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();e.parentNode.removeChild(e);return e}};this.hideCursor=function(){this.isVisible=false;i.addCssClass(this.element,"ace_hidden-cursors");this.restartTimer()};this.showCursor=function(){this.isVisible=true;i.removeCssClass(this.element,"ace_hidden-cursors");this.restartTimer()};this.restartTimer=function(){var e=this.$updateCursors;clearInterval(this.intervalId);clearTimeout(this.timeoutId);if(this.smoothBlinking){i.removeCssClass(this.element,"ace_smooth-blinking")}e(true);if(!this.isBlinking||!this.blinkInterval||!this.isVisible)return;if(this.smoothBlinking){setTimeout(function(){i.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))}var t=function(){this.timeoutId=setTimeout(function(){e(false)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){e(true);t()},this.blinkInterval);t()};this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};if(!e)e=this.session.selection.getCursor();var n=this.session.documentToScreenPosition(e);var i=this.$padding+n.column*this.config.characterWidth;var r=(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:i,top:r}};this.update=function(e){this.config=e;var t=this.session.$selectionMarkers;var n=0,i=0;if(t===undefined||t.length===0){t=[{cursor:null}]}for(var n=0,r=t.length;n<r;n++){var o=this.getPixelPosition(t[n].cursor,true);if((o.top>e.height+e.offset||o.top<0)&&n>1){continue}var a=(this.cursors[i++]||this.addCursor()).style;a.left=o.left+"px";a.top=o.top+"px";a.width=e.characterWidth+"px";a.height=e.lineHeight+"px"}while(this.cursors.length>i)this.removeCursor();var s=this.session.getOverwrite();this.$setOverwrite(s);this.$pixelPos=o;this.restartTimer()};this.$setOverwrite=function(e){if(e!=this.overwrite){this.overwrite=e;if(e)i.addCssClass(this.element,"ace_overwrite-cursors");else i.removeCssClass(this.element,"ace_overwrite-cursors")}};this.destroy=function(){clearInterval(this.intervalId);clearTimeout(this.timeoutId)}}).call(o.prototype);t.Cursor=o});ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("./lib/oop");var r=e("./lib/dom");var o=e("./lib/event");var a=e("./lib/event_emitter").EventEmitter;var s=function(e){this.element=r.createElement("div");this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix;this.inner=r.createElement("div");this.inner.className="ace_scrollbar-inner";this.element.appendChild(this.inner);e.appendChild(this.element);this.setVisible(false);this.skipEvent=false;o.addListener(this.element,"scroll",this.onScroll.bind(this));o.addListener(this.element,"mousedown",o.preventDefault)};(function(){i.implement(this,a);this.setVisible=function(e){this.element.style.display=e?"":"none";this.isVisible=e}}).call(s.prototype);var l=function(e,t){s.call(this,e);this.scrollTop=0;t.$scrollbarWidth=this.width=r.scrollbarWidth(e.ownerDocument);this.inner.style.width=this.element.style.width=(this.width||15)+5+"px"};i.inherits(l,s);(function(){this.classSuffix="-v";this.onScroll=function(){if(!this.skipEvent){this.scrollTop=this.element.scrollTop;this._emit("scroll",{data:this.scrollTop})}this.skipEvent=false};this.getWidth=function(){return this.isVisible?this.width:0};this.setHeight=function(e){this.element.style.height=e+"px"};this.setInnerHeight=function(e){this.inner.style.height=e+"px"};this.setScrollHeight=function(e){this.inner.style.height=e+"px"};this.setScrollTop=function(e){if(this.scrollTop!=e){this.skipEvent=true;this.scrollTop=this.element.scrollTop=e}}}).call(l.prototype);var c=function(e,t){s.call(this,e);this.scrollLeft=0;this.height=t.$scrollbarWidth;this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};i.inherits(c,s);(function(){this.classSuffix="-h";this.onScroll=function(){if(!this.skipEvent){this.scrollLeft=this.element.scrollLeft;this._emit("scroll",{data:this.scrollLeft})}this.skipEvent=false};this.getHeight=function(){return this.isVisible?this.height:0};this.setWidth=function(e){this.element.style.width=e+"px"};this.setInnerWidth=function(e){this.inner.style.width=e+"px"};this.setScrollWidth=function(e){this.inner.style.width=e+"px"};this.setScrollLeft=function(e){if(this.scrollLeft!=e){this.skipEvent=true;this.scrollLeft=this.element.scrollLeft=e}}}).call(c.prototype);t.ScrollBar=l;t.ScrollBarV=l;t.ScrollBarH=c;t.VScrollBar=l;t.HScrollBar=c});ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var i=e("./lib/event");var r=function(e,t){this.onRender=e;this.pending=false;this.changes=0;this.window=t||window};(function(){this.schedule=function(e){this.changes=this.changes|e;if(!this.pending&&this.changes){this.pending=true;var t=this;i.nextFrame(function(){t.pending=false;var e;while(e=t.changes){t.changes=0;t.onRender(e)}},this.window)}}}).call(r.prototype);t.RenderLoop=r});ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var i=e("../lib/oop");var r=e("../lib/dom");var o=e("../lib/lang");var a=e("../lib/useragent");var s=e("../lib/event_emitter").EventEmitter;var l=0;var c=t.FontMetrics=function(e,t){this.el=r.createElement("div");this.$setMeasureNodeStyles(this.el.style,true);this.$main=r.createElement("div");this.$setMeasureNodeStyles(this.$main.style);this.$measureNode=r.createElement("div");this.$setMeasureNodeStyles(this.$measureNode.style);this.el.appendChild(this.$main);this.el.appendChild(this.$measureNode);e.appendChild(this.el);if(!l)this.$testFractionalRect();this.$measureNode.innerHTML=o.stringRepeat("X",l);this.$characterSize={width:0,height:0};this.checkForSizeChanges()};(function(){i.implement(this,s);this.$characterSize={width:0,height:0};this.$testFractionalRect=function(){var e=r.createElement("div");this.$setMeasureNodeStyles(e.style);e.style.width="0.2px";document.documentElement.appendChild(e);var t=e.getBoundingClientRect().width;if(t>0&&t<1)l=1;else l=100;e.parentNode.removeChild(e)};this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto";e.left=e.top="-100px";e.visibility="hidden";e.position="fixed";e.whiteSpace="pre";if(a.isIE<8){e["font-family"]="inherit"}else{e.font="inherit"}e.overflow=t?"hidden":"visible"};this.checkForSizeChanges=function(){var e=this.$measureSizes();if(e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="";this.$characterSize=e;this.charSizes=Object.create(null);this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height;this._emit("changeCharacterSize",{data:e})}};this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=setInterval(function(){e.checkForSizeChanges()},500)};this.setPolling=function(e){if(e){this.$pollSizeChanges()}else{if(this.$pollSizeChangesTimer)this.$pollSizeChangesTimer}};this.$measureSizes=function(){if(l===1){var e=this.$measureNode.getBoundingClientRect();var t={height:e.height,width:e.width}}else{var t={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/l}}if(t.width===0||t.height===0)return null;return t};this.$measureCharWidth=function(e){this.$main.innerHTML=o.stringRepeat(e,l);var t=this.$main.getBoundingClientRect();return t.width/l};this.getCharacterWidth=function(e){var t=this.charSizes[e];if(t===undefined){this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width}return t};this.destroy=function(){clearInterval(this.$pollSizeChangesTimer);if(this.el&&this.el.parentNode)this.el.parentNode.removeChild(this.el)}}).call(c.prototype)});ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"],function(e,t,n){"use strict";var i=e("./lib/oop");var o=e("./lib/dom");var a=e("./config");var r=e("./lib/useragent");var s=e("./layer/gutter").Gutter;var l=e("./layer/marker").Marker;var c=e("./layer/text").Text;var u=e("./layer/cursor").Cursor;var h=e("./scrollbar").HScrollBar;var d=e("./scrollbar").VScrollBar;var f=e("./renderloop").RenderLoop;var p=e("./layer/font_metrics").FontMetrics;var g=e("./lib/event_emitter").EventEmitter;var m='.ace_editor {position: relative;overflow: hidden;font-family: \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;font-size: 12px;line-height: normal;direction: ltr;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: text;min-width: 100%;}.ace_dragging, .ace_dragging * {cursor: move !important;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;}.ace_text-input.ace_composition {background: #f8f8f8;color: #111;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0px;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-moz-transition: opacity 0.18s;-webkit-transition: opacity 0.18s;-o-transition: opacity 0.18s;-ms-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;-moz-border-radius: 2px;-webkit-border-radius: 2px;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;display: block;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-moz-transition: opacity 0.4s ease 0.05s;-webkit-transition: opacity 0.4s ease 0.05s;-o-transition: opacity 0.4s ease 0.05s;-ms-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-moz-transition: opacity 0.05s ease 0.05s;-webkit-transition: opacity 0.05s ease 0.05s;-o-transition: opacity 0.05s ease 0.05s;-ms-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}';o.importCssString(m,"ace_editor");var v=function(e,t){var n=this;this.container=e||o.createElement("div");this.$keepTextAreaAtCursor=!r.isOldIE;o.addCssClass(this.container,"ace_editor");this.setTheme(t);this.$gutter=o.createElement("div");this.$gutter.className="ace_gutter";this.container.appendChild(this.$gutter);this.scroller=o.createElement("div");this.scroller.className="ace_scroller";this.container.appendChild(this.scroller);this.content=o.createElement("div");this.content.className="ace_content";this.scroller.appendChild(this.content);this.$gutterLayer=new s(this.$gutter);this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this));this.$markerBack=new l(this.content);var i=this.$textLayer=new c(this.content);this.canvas=i.element;this.$markerFront=new l(this.content);this.$cursorLayer=new u(this.content);this.$horizScroll=false;this.$vScroll=false;this.scrollBar=this.scrollBarV=new d(this.container,this);this.scrollBarH=new h(this.container,this);this.scrollBarV.addEventListener("scroll",function(e){if(!n.$scrollAnimation)n.session.setScrollTop(e.data-n.scrollMargin.top)});this.scrollBarH.addEventListener("scroll",function(e){if(!n.$scrollAnimation)n.session.setScrollLeft(e.data-n.scrollMargin.left)});this.scrollTop=0;this.scrollLeft=0;this.cursorPos={row:0,column:0};this.$fontMetrics=new p(this.container,500);this.$textLayer.$setFontMetrics(this.$fontMetrics);this.$textLayer.addEventListener("changeCharacterSize",function(e){n.updateCharacterSize();n.onResize(true,n.gutterWidth,n.$size.width,n.$size.height);n._signal("changeCharacterSize",e)});this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:true};this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1};this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0};this.$loop=new f(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView);this.$loop.schedule(this.CHANGE_FULL);this.updateCharacterSize();this.setPadding(4);a.resetOptions(this);a._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1;this.CHANGE_MARKER=2;this.CHANGE_GUTTER=4;this.CHANGE_SCROLL=8;this.CHANGE_LINES=16;this.CHANGE_TEXT=32;this.CHANGE_SIZE=64;this.CHANGE_MARKER_BACK=128;this.CHANGE_MARKER_FRONT=256;this.CHANGE_FULL=512;this.CHANGE_H_SCROLL=1024;i.implement(this,g);this.updateCharacterSize=function(){if(this.$textLayer.allowBoldFonts!=this.$allowBoldFonts){this.$allowBoldFonts=this.$textLayer.allowBoldFonts;this.setStyle("ace_nobold",!this.$allowBoldFonts)}this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth();this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight();this.$updatePrintMargin()};this.setSession=function(e){if(this.session)this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode);this.session=e;if(!e)return;if(this.scrollMargin.top&&e.getScrollTop()<=0)e.setScrollTop(-this.scrollMargin.top);this.$cursorLayer.setSession(e);this.$markerBack.setSession(e);this.$markerFront.setSession(e);this.$gutterLayer.setSession(e);this.$textLayer.setSession(e);this.$loop.schedule(this.CHANGE_FULL);this.session.$setFontMetrics(this.$fontMetrics);this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this);this.onChangeNewLineMode();this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode)};this.updateLines=function(e,t){if(t===undefined)t=Infinity;if(!this.$changedLines){this.$changedLines={firstRow:e,lastRow:t}}else{if(this.$changedLines.firstRow>e)this.$changedLines.firstRow=e;if(this.$changedLines.lastRow<t)this.$changedLines.lastRow=t}if(this.$changedLines.firstRow>this.layerConfig.lastRow||this.$changedLines.lastRow<this.layerConfig.firstRow)return;this.$loop.schedule(this.CHANGE_LINES)};this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT);this.$textLayer.$updateEolChar()};this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER);this.$textLayer.onChangeTabSize()};this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)};this.updateFull=function(e){if(e)this.$renderChanges(this.CHANGE_FULL,true);else this.$loop.schedule(this.CHANGE_FULL)};this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()};this.$changes=0;this.$updateSizeAsync=function(){if(this.$loop.pending)this.$size.$dirty=true;else this.onResize()};this.onResize=function(e,t,n,i){if(this.resizing>2)return;else if(this.resizing>0)this.resizing++;else this.resizing=e?1:0;var r=this.container;if(!i)i=r.clientHeight||r.scrollHeight;if(!n)n=r.clientWidth||r.scrollWidth;var o=this.$updateCachedSize(e,t,n,i);if(!this.$size.scrollerHeight||!n&&!i)return this.resizing=0;if(e)this.$gutterLayer.$padding=null;if(e)this.$renderChanges(o|this.$changes,true);else this.$loop.schedule(o|this.$changes);if(this.resizing)this.resizing=0};this.$updateCachedSize=function(e,t,n,i){i-=this.$extraHeight||0;var r=0;var o=this.$size;var a={width:o.width,height:o.height,scrollerHeight:o.scrollerHeight,scrollerWidth:o.scrollerWidth};if(i&&(e||o.height!=i)){o.height=i;r|=this.CHANGE_SIZE;o.scrollerHeight=o.height;if(this.$horizScroll)o.scrollerHeight-=this.scrollBarH.getHeight();this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px";r=r|this.CHANGE_SCROLL}if(n&&(e||o.width!=n)){r|=this.CHANGE_SIZE;o.width=n;if(t==null)t=this.$showGutter?this.$gutter.offsetWidth:0;this.gutterWidth=t;this.scrollBarH.element.style.left=this.scroller.style.left=t+"px";o.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth());this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px";this.scroller.style.bottom=this.scrollBarH.getHeight()+"px";if(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)r|=this.CHANGE_FULL}o.$dirty=!n||!i;if(r)this._signal("resize",a);return r};this.onGutterResize=function(){var e=this.$showGutter?this.$gutter.offsetWidth:0;if(e!=this.gutterWidth)this.$changes|=this.$updateCachedSize(true,e,this.$size.width,this.$size.height);if(this.session.getUseWrapMode()&&this.adjustWrapLimit()){this.$loop.schedule(this.CHANGE_FULL)}else if(this.$size.$dirty){this.$loop.schedule(this.CHANGE_FULL)}else{this.$computeLayerConfig();this.$loop.schedule(this.CHANGE_MARKER)}};this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-this.$padding*2;var t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)};this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)};this.getAnimatedScroll=function(){return this.$animatedScroll};this.setShowInvisibles=function(e){this.setOption("showInvisibles",e)};this.getShowInvisibles=function(){return this.getOption("showInvisibles")};this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")};this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)};this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)};this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")};this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)};this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")};this.getShowGutter=function(){return this.getOption("showGutter")};this.setShowGutter=function(e){return this.setOption("showGutter",e)};this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")};this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)};this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)};this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")};this.$updateGutterLineHighlight=function(){var e=this.$cursorLayer.$pixelPos;var t=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var n=this.session.selection.getCursor();n.column=0;e=this.$cursorLayer.getPixelPosition(n,true);t*=this.session.getRowLength(n.row)}this.$gutterLineHighlight.style.top=e.top-this.layerConfig.offset+"px";this.$gutterLineHighlight.style.height=t+"px"};this.$updatePrintMargin=function(){if(!this.$showPrintMargin&&!this.$printMarginEl)return;if(!this.$printMarginEl){var e=o.createElement("div");e.className="ace_layer ace_print-margin-layer";this.$printMarginEl=o.createElement("div");this.$printMarginEl.className="ace_print-margin";e.appendChild(this.$printMarginEl);this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px";t.visibility=this.$showPrintMargin?"visible":"hidden";if(this.session&&this.session.$wrap==-1)this.adjustWrapLimit()};this.getContainerElement=function(){return this.container};this.getMouseEventTarget=function(){return this.content};this.getTextAreaContainer=function(){return this.container};this.$moveTextAreaToCursor=function(){if(!this.$keepTextAreaAtCursor)return;var e=this.layerConfig;var t=this.$cursorLayer.$pixelPos.top;var n=this.$cursorLayer.$pixelPos.left;t-=e.offset;var i=this.lineHeight;if(t<0||t>e.height-i)return;var r=this.characterWidth;if(this.$composition){var o=this.textarea.value.replace(/^\x01+/,"");r*=this.session.$getStringScreenWidth(o)[0]+2;i+=2;t-=1}n-=this.scrollLeft;if(n>this.$size.scrollerWidth-r)n=this.$size.scrollerWidth-r;n-=this.scrollBar.width;this.textarea.style.height=i+"px";this.textarea.style.width=r+"px";this.textarea.style.right=Math.max(0,this.$size.scrollerWidth-n-r)+"px";this.textarea.style.bottom=Math.max(0,this.$size.height-t-i)+"px"};this.getFirstVisibleRow=function(){return this.layerConfig.firstRow};this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)};this.getLastFullyVisibleRow=function(){var e=Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight);return this.layerConfig.firstRow-1+e};this.getLastVisibleRow=function(){return this.layerConfig.lastRow};this.$padding=null;this.setPadding=function(e){this.$padding=e;this.$textLayer.setPadding(e);this.$cursorLayer.setPadding(e);this.$markerFront.setPadding(e);this.$markerBack.setPadding(e);this.$loop.schedule(this.CHANGE_FULL);this.$updatePrintMargin()};this.setScrollMargin=function(e,t,n,i){var r=this.scrollMargin;r.top=e|0;r.bottom=t|0;r.right=i|0;r.left=n|0;r.v=r.top+r.bottom;r.h=r.left+r.right;if(r.top&&this.scrollTop<=0&&this.session)this.session.setScrollTop(-r.top);this.updateFull()};this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible};this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)};this.getVScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible};this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)};this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight;var t=this.$size.scrollerHeight;if(!this.$maxLines&&this.$scrollPastEnd){e-=(t-this.lineHeight)*this.$scrollPastEnd;if(this.scrollTop>e-t){e=this.scrollTop+t;this.scrollBarV.scrollTop=null}}this.scrollBarV.setScrollHeight(e+this.scrollMargin.v);this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)};this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h);this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)};this.$frozen=false;this.freeze=function(){this.$frozen=true};this.unfreeze=function(){this.$frozen=false};this.$renderChanges=function(e,t){if(this.$changes){e|=this.$changes;this.$changes=0}if(!this.session||!this.container.offsetWidth||this.$frozen||!e&&!t){this.$changes|=e;return}if(this.$size.$dirty){this.$changes|=e;return this.onResize(true)}if(!this.lineHeight){this.$textLayer.checkForSizeChanges()}this._signal("beforeRender");var n=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){e|=this.$computeLayerConfig();n=this.layerConfig;this.$updateScrollBarV();if(e&this.CHANGE_H_SCROLL)this.$updateScrollBarH();this.$gutterLayer.element.style.marginTop=-n.offset+"px";this.content.style.marginTop=-n.offset+"px";this.content.style.width=n.width+2*this.$padding+"px";this.content.style.height=n.minHeight+"px"}if(e&this.CHANGE_H_SCROLL){this.content.style.marginLeft=-this.scrollLeft+"px";this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"}if(e&this.CHANGE_FULL){this.$textLayer.update(n);if(this.$showGutter)this.$gutterLayer.update(n);this.$markerBack.update(n);this.$markerFront.update(n);this.$cursorLayer.update(n);this.$moveTextAreaToCursor();this.$highlightGutterLine&&this.$updateGutterLineHighlight();this._signal("afterRender");return}if(e&this.CHANGE_SCROLL){if(e&this.CHANGE_TEXT||e&this.CHANGE_LINES)this.$textLayer.update(n);else this.$textLayer.scrollLines(n);if(this.$showGutter)this.$gutterLayer.update(n);this.$markerBack.update(n);this.$markerFront.update(n);this.$cursorLayer.update(n);this.$highlightGutterLine&&this.$updateGutterLineHighlight();this.$moveTextAreaToCursor();this._signal("afterRender");return}if(e&this.CHANGE_TEXT){this.$textLayer.update(n);if(this.$showGutter)this.$gutterLayer.update(n)}else if(e&this.CHANGE_LINES){if(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)this.$gutterLayer.update(n)}else if(e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER){if(this.$showGutter)this.$gutterLayer.update(n)}if(e&this.CHANGE_CURSOR){this.$cursorLayer.update(n);this.$moveTextAreaToCursor();this.$highlightGutterLine&&this.$updateGutterLineHighlight()}if(e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)){this.$markerFront.update(n)}if(e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)){this.$markerBack.update(n)}this._signal("afterRender")};this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight;var t=this.$maxLines*this.lineHeight;var n=Math.max((this.$minLines||1)*this.lineHeight,Math.min(t,e))+this.scrollMargin.v+(this.$extraHeight||0);var i=e>t;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||i!=this.$vScroll){if(i!=this.$vScroll){this.$vScroll=i;this.scrollBarV.setVisible(i)}var r=this.container.clientWidth;this.container.style.height=n+"px";this.$updateCachedSize(true,this.$gutterWidth,r,n);this.desiredHeight=n}};this.$computeLayerConfig=function(){if(this.$maxLines&&this.lineHeight>1)this.$autosize();var e=this.session;var t=this.$size;var n=t.height<=2*this.lineHeight;var i=this.session.getScreenLength();var r=i*this.lineHeight;var o=this.scrollTop%this.lineHeight;var a=t.scrollerHeight+this.lineHeight;var s=this.$getLongestLine();var l=!n&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-s-2*this.$padding<0);var c=this.$horizScroll!==l;if(c){this.$horizScroll=l;this.scrollBarH.setVisible(l)}if(!this.$maxLines&&this.$scrollPastEnd){r+=(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd}var u=!n&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-r<0);var h=this.$vScroll!==u;if(h){this.$vScroll=u;this.scrollBarV.setVisible(u)}this.session.setScrollTop(Math.max(-this.scrollMargin.top,Math.min(this.scrollTop,r-t.scrollerHeight+this.scrollMargin.bottom)));this.session.setScrollLeft(Math.max(-this.scrollMargin.left,Math.min(this.scrollLeft,s+2*this.$padding-t.scrollerWidth+this.scrollMargin.right)));var d=Math.ceil(a/this.lineHeight)-1;var f=Math.max(0,Math.round((this.scrollTop-o)/this.lineHeight));var p=f+d;var g,m;var v=this.lineHeight;f=e.screenToDocumentRow(f,0);var b=e.getFoldLine(f);if(b){f=b.start.row}g=e.documentToScreenRow(f,0);m=e.getRowLength(f)*v;p=Math.min(e.screenToDocumentRow(p,0),e.getLength()-1);a=t.scrollerHeight+e.getRowLength(p)*v+m;o=this.scrollTop-g*v;var w=0;if(this.layerConfig.width!=s)w=this.CHANGE_H_SCROLL;if(c||h){w=this.$updateCachedSize(true,this.gutterWidth,t.width,t.height);this._signal("scrollbarVisibilityChanged");if(h)s=this.$getLongestLine()}this.layerConfig={width:s,padding:this.$padding,firstRow:f,firstRowScreen:g,lastRow:p,lineHeight:v,characterWidth:this.characterWidth,minHeight:a,maxHeight:r,offset:o,gutterOffset:Math.max(0,Math.ceil((o+t.height-t.scrollerHeight)/v)),height:this.$size.scrollerHeight};return w};this.$updateLines=function(){var e=this.$changedLines.firstRow;var t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(e>n.lastRow+1){return}if(t<n.firstRow){return}if(t===Infinity){if(this.$showGutter)this.$gutterLayer.update(n);this.$textLayer.update(n);return}this.$textLayer.updateLines(n,e,t);return true};this.$getLongestLine=function(){var e=this.session.getScreenWidth();if(this.showInvisibles&&!this.session.$useWrapMode)e+=1;return Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))};this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(true));this.$loop.schedule(this.CHANGE_MARKER_FRONT)};this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers());this.$loop.schedule(this.CHANGE_MARKER_BACK)};this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)};this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)};this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)};this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e);this.$loop.schedule(this.CHANGE_GUTTER)};this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)};this.hideCursor=function(){this.$cursorLayer.hideCursor()};this.showCursor=function(){this.$cursorLayer.showCursor()};this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n);this.scrollCursorIntoView(t,n)};this.scrollCursorIntoView=function(e,t,n){if(this.$size.scrollerHeight===0)return;var i=this.$cursorLayer.getPixelPosition(e);var r=i.left;var o=i.top;var a=n&&n.top||0;var s=n&&n.bottom||0;var l=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;if(l+a>o){if(t)o-=t*this.$size.scrollerHeight;if(o===0)o=-this.scrollMargin.top;this.session.setScrollTop(o)}else if(l+this.$size.scrollerHeight-s<o+this.lineHeight){if(t)o+=t*this.$size.scrollerHeight;this.session.setScrollTop(o+this.lineHeight-this.$size.scrollerHeight)}var c=this.scrollLeft;if(c>r){if(r<this.$padding+2*this.layerConfig.characterWidth)r=-this.scrollMargin.left;this.session.setScrollLeft(r)}else if(c+this.$size.scrollerWidth<r+this.characterWidth){this.session.setScrollLeft(Math.round(r+this.characterWidth-this.$size.scrollerWidth))}else if(c<=this.$padding&&r-c<this.characterWidth){this.session.setScrollLeft(0)}};this.getScrollTop=function(){return this.session.getScrollTop()};this.getScrollLeft=function(){return this.session.getScrollLeft()};this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight};this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)};this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)};this.alignCursor=function(e,t){if(typeof e=="number")e={row:e,column:0};var n=this.$cursorLayer.getPixelPosition(e);var i=this.$size.scrollerHeight-this.lineHeight;var r=n.top-i*(t||0);this.session.setScrollTop(r);return r};this.STEPS=8;this.$calcSteps=function(e,t){var n=0;var i=this.STEPS;var r=[];var o=function(e,t,n){return n*(Math.pow(e-1,3)+1)+t};for(n=0;n<i;++n)r.push(o(n/this.STEPS,e,t-e));return r};this.scrollToLine=function(e,t,n,i){var r=this.$cursorLayer.getPixelPosition({row:e,column:0});var o=r.top;if(t)o-=this.$size.scrollerHeight/2;var a=this.scrollTop;this.session.setScrollTop(o);if(n!==false)this.animateScrolling(a,i)};this.animateScrolling=function(e,t){var n=this.scrollTop;if(!this.$animatedScroll)return;var i=this;if(e==n)return;if(this.$scrollAnimation){var r=this.$scrollAnimation.steps;if(r.length){e=r[0];if(e==n)return}}var o=i.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:o};clearInterval(this.$timer);i.session.setScrollTop(o.shift());i.session.$scrollTop=n;this.$timer=setInterval(function(){if(o.length){i.session.setScrollTop(o.shift());i.session.$scrollTop=n}else if(n!=null){i.session.$scrollTop=-1;i.session.setScrollTop(n);n=null}else{i.$timer=clearInterval(i.$timer);i.$scrollAnimation=null;t&&t()}},10)};this.scrollToY=function(e){if(this.scrollTop!==e){this.$loop.schedule(this.CHANGE_SCROLL);this.scrollTop=e}};this.scrollToX=function(e){if(this.scrollLeft!==e)this.scrollLeft=e;this.$loop.schedule(this.CHANGE_H_SCROLL)};this.scrollTo=function(e,t){this.session.setScrollTop(t);this.session.setScrollLeft(t)};this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t);e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)};this.isScrollableBy=function(e,t){if(t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top)return true;if(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom)return true;if(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left)return true;if(e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return true};this.pixelToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect();var i=(e+this.scrollLeft-n.left-this.$padding)/this.characterWidth;var r=Math.floor((t+this.scrollTop-n.top)/this.lineHeight);var o=Math.round(i);return{row:r,column:o,side:i-o>0?1:-1}};this.screenToTextCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect();var i=Math.round((e+this.scrollLeft-n.left-this.$padding)/this.characterWidth);var r=(t+this.scrollTop-n.top)/this.lineHeight;return this.session.screenToDocumentPosition(r,Math.max(i,0))};this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect();var i=this.session.documentToScreenPosition(e,t);var r=this.$padding+Math.round(i.column*this.characterWidth);var o=i.row*this.lineHeight;return{pageX:n.left+r-this.scrollLeft,pageY:n.top+o-this.scrollTop}};this.visualizeFocus=function(){o.addCssClass(this.container,"ace_focus")};this.visualizeBlur=function(){o.removeCssClass(this.container,"ace_focus")};this.showComposition=function(e){if(!this.$composition)this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText};this.$keepTextAreaAtCursor=true;o.addCssClass(this.textarea,"ace_composition");this.textarea.style.cssText="";this.$moveTextAreaToCursor()};this.setCompositionText=function(e){this.$moveTextAreaToCursor()};this.hideComposition=function(){if(!this.$composition)return;o.removeCssClass(this.textarea,"ace_composition");this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor;this.textarea.style.cssText=this.$composition.cssText;this.$composition=null};this.setTheme=function(n,i){var r=this;this.$themeId=n;r._dispatchEvent("themeChange",{theme:n});if(!n||typeof n=="string"){var e=n||this.$options.theme.initialValue;a.loadModule(["theme",e],t)}else{t(n)}function t(e){if(r.$themeId!=n)return i&&i();if(!e.cssClass)return;o.importCssString(e.cssText,e.cssClass,r.container.ownerDocument);if(r.theme)o.removeCssClass(r.container,r.theme.cssClass);var t="padding"in e?e.padding:"padding"in(r.theme||{})?4:r.$padding;if(r.$padding&&t!=r.$padding)r.setPadding(t);r.$theme=e.cssClass;r.theme=e;o.addCssClass(r.container,e.cssClass);o.setCssClass(r.container,"ace_dark",e.isDark);if(r.$size){r.$size.width=0;r.$updateSizeAsync()}r._dispatchEvent("themeLoaded",{theme:e});i&&i()}};this.getTheme=function(){return this.$themeId};this.setStyle=function(e,t){o.setCssClass(this.container,e,t!==false)};this.unsetStyle=function(e){o.removeCssClass(this.container,e)};this.setCursorStyle=function(e){if(this.content.style.cursor!=e)this.content.style.cursor=e};this.setMouseCursor=function(e){this.content.style.cursor=e};this.destroy=function(){this.$textLayer.destroy();this.$cursorLayer.destroy()}}).call(v.prototype);a.defineOptions(v.prototype,"renderer",{animatedScroll:{initialValue:false},showInvisibles:{set:function(e){if(this.$textLayer.setShowInvisibles(e))this.$loop.schedule(this.CHANGE_TEXT)},initialValue:false},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:true},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){if(typeof e=="number")this.$printMarginColumn=e;this.$showPrintMargin=!!e;this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none";this.$loop.schedule(this.CHANGE_FULL);this.onGutterResize()},initialValue:true},fadeFoldWidgets:{set:function(e){o.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:false},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e)},initialValue:true},showLineNumbers:{set:function(e){this.$gutterLayer.setShowLineNumbers(e);this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:true},displayIndentGuides:{set:function(e){if(this.$textLayer.setDisplayIndentGuides(e))this.$loop.schedule(this.CHANGE_TEXT)},initialValue:true},highlightGutterLine:{set:function(e){if(!this.$gutterLineHighlight){this.$gutterLineHighlight=o.createElement("div");this.$gutterLineHighlight.className="ace_gutter-active-line";this.$gutter.appendChild(this.$gutterLineHighlight);return}this.$gutterLineHighlight.style.display=e?"":"none";if(this.$cursorLayer.$pixelPos)this.$updateGutterLineHighlight()},initialValue:false,value:true},hScrollBarAlwaysVisible:{set:function(e){if(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:false},vScrollBarAlwaysVisible:{set:function(e){if(!this.$vScrollBarAlwaysVisible||!this.$vScroll)this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:false},fontSize:{set:function(e){if(typeof e=="number")e=e+"px";this.container.style.fontSize=e;this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e;this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.updateFull()}},scrollPastEnd:{set:function(e){e=+e||0;if(this.$scrollPastEnd==e)return;this.$scrollPastEnd=e;this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:0,handlesSet:true},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e;this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:true}});t.VirtualRenderer=v});ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(c,e,t){"use strict";var n=c("../lib/oop");var r=c("../lib/net");var l=c("../lib/event_emitter").EventEmitter;var u=c("../config");var i=function(e,t,n,i){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this);this.changeListener=this.changeListener.bind(this);this.onMessage=this.onMessage.bind(this);if(c.nameToUrl&&!c.toUrl)c.toUrl=c.nameToUrl;if(u.get("packaged")||!c.toUrl){i=i||u.moduleUrl(t,"worker")}else{var r=this.$normalizePath;i=i||r(c.toUrl("ace/worker/worker.js",null,"_"));var o={};e.forEach(function(e){o[e]=r(c.toUrl(e,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}try{this.$worker=new Worker(i)}catch(e){if(e instanceof window.DOMException){var a=this.$workerBlob(i);var s=window.URL||window.webkitURL;var l=s.createObjectURL(a);this.$worker=new Worker(l);s.revokeObjectURL(l)}else{throw e}}this.$worker.postMessage({init:true,tlns:o,module:t,classname:n});this.callbackId=1;this.callbacks={};this.$worker.onmessage=this.onMessage};(function(){n.implement(this,l);this.onMessage=function(e){var t=e.data;switch(t.type){case"log":window.console&&console.log&&console.log.apply(console,t.data);break;case"event":this._signal(t.name,{data:t.data});break;case"call":var n=this.callbacks[t.id];if(n){n(t.data);delete this.callbacks[t.id]}break}};this.$normalizePath=function(e){return r.qualifyURL(e)};this.terminate=function(){this._signal("terminate",{});this.deltaQueue=null;this.$worker.terminate();this.$worker=null;this.$doc.removeEventListener("change",this.changeListener);this.$doc=null};this.send=function(e,t){this.$worker.postMessage({command:e,args:t})};this.call=function(e,t,n){if(n){var i=this.callbackId++;this.callbacks[i]=n;t.push(i)}this.send(e,t)};this.emit=function(e,t){try{this.$worker.postMessage({event:e,data:{data:t.data}})}catch(e){console.error(e.stack)}};this.attachToDocument=function(e){if(this.$doc)this.terminate();this.$doc=e;this.call("setValue",[e.getValue()]);e.on("change",this.changeListener)};this.changeListener=function(e){if(!this.deltaQueue){this.deltaQueue=[e.data];setTimeout(this.$sendDeltaQueue,0)}else this.deltaQueue.push(e.data)};this.$sendDeltaQueue=function(){var e=this.deltaQueue;if(!e)return;this.deltaQueue=null;if(e.length>20&&e.length>this.$doc.getLength()>>1){this.call("setValue",[this.$doc.getValue()])}else this.emit("change",{data:e})};this.$workerBlob=function(e){var t="importScripts('"+r.qualifyURL(e)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(e){var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;var i=new n;i.append(t);return i.getBlob("application/javascript")}}}).call(i.prototype);var o=function(e,t,n){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this);this.changeListener=this.changeListener.bind(this);this.callbackId=1;this.callbacks={};this.messageBuffer=[];var i=null;var r=false;var o=Object.create(l);var a=this;this.$worker={};this.$worker.terminate=function(){};this.$worker.postMessage=function(e){a.messageBuffer.push(e);if(i){if(r)setTimeout(s);else s()}};this.setEmitSync=function(e){r=e};var s=function(){var e=a.messageBuffer.shift();if(e.command)i[e.command].apply(i,e.args);else if(e.event)o._signal(e.event,e.data)};o.postMessage=function(e){a.onMessage({data:e})};o.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})};o.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})};u.loadModule(["worker",t],function(e){i=new e[n](o);while(a.messageBuffer.length)s()})};o.prototype=i.prototype;e.UIWorkerClient=o;e.WorkerClient=i});ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var l=e("./range").Range;var i=e("./lib/event_emitter").EventEmitter;var r=e("./lib/oop");var o=function(e,t,n,i,r,o){var a=this;this.length=t;this.session=e;this.doc=e.getDocument();this.mainClass=r;this.othersClass=o;this.$onUpdate=this.onUpdate.bind(this);this.doc.on("change",this.$onUpdate);this.$others=i;this.$onCursorChange=function(){setTimeout(function(){a.onCursorChange()})};this.$pos=n;var s=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=s.length;this.setup();e.selection.on("changeCursor",this.$onCursorChange)};(function(){r.implement(this,i);this.setup=function(){var n=this;var i=this.doc;var t=this.session;var e=this.$pos;this.pos=i.createAnchor(e.row,e.column);this.markerId=t.addMarker(new l(e.row,e.column,e.row,e.column+this.length),this.mainClass,null,false);this.pos.on("change",function(e){t.removeMarker(n.markerId);n.markerId=t.addMarker(new l(e.value.row,e.value.column,e.value.row,e.value.column+n.length),n.mainClass,null,false)});this.others=[];this.$others.forEach(function(e){var t=i.createAnchor(e.row,e.column);n.others.push(t)});t.setUndoSelect(false)};this.showOtherMarkers=function(){if(this.othersActive)return;var n=this.session;var i=this;this.othersActive=true;this.others.forEach(function(t){t.markerId=n.addMarker(new l(t.row,t.column,t.row,t.column+i.length),i.othersClass,null,false);t.on("change",function(e){n.removeMarker(t.markerId);t.markerId=n.addMarker(new l(e.value.row,e.value.column,e.value.row,e.value.column+i.length),i.othersClass,null,false)})})};this.hideOtherMarkers=function(){if(!this.othersActive)return;this.othersActive=false;for(var e=0;e<this.others.length;e++){this.session.removeMarker(this.others[e].markerId)}};this.onUpdate=function(e){var t=e.data;var i=t.range;if(i.start.row!==i.end.row)return;if(i.start.row!==this.pos.row)return;if(this.$updating)return;this.$updating=true;var r=t.action==="insertText"?i.end.column-i.start.column:i.start.column-i.end.column;if(i.start.column>=this.pos.column&&i.start.column<=this.pos.column+this.length+1){var n=i.start.column-this.pos.column;this.length+=r;if(!this.session.$fromUndo){if(t.action==="insertText"){for(var o=this.others.length-1;o>=0;o--){var a=this.others[o];var s={row:a.row,column:a.column+n};if(a.row===i.start.row&&i.start.column<a.column)s.column+=r;this.doc.insert(s,t.text)}}else if(t.action==="removeText"){for(var o=this.others.length-1;o>=0;o--){var a=this.others[o];var s={row:a.row,column:a.column+n};if(a.row===i.start.row&&i.start.column<a.column)s.column+=r;this.doc.remove(new l(s.row,s.column,s.row,s.column-r))}}if(i.start.column===this.pos.column&&t.action==="insertText"){setTimeout(function(){this.pos.setPosition(this.pos.row,this.pos.column-r);for(var e=0;e<this.others.length;e++){var t=this.others[e];var n={row:t.row,column:t.column-r};if(t.row===i.start.row&&i.start.column<t.column)n.column+=r;t.setPosition(n.row,n.column)}}.bind(this),0)}else if(i.start.column===this.pos.column&&t.action==="removeText"){setTimeout(function(){for(var e=0;e<this.others.length;e++){var t=this.others[e];if(t.row===i.start.row&&i.start.column<t.column){t.setPosition(t.row,t.column-r)}}}.bind(this),0)}}this.pos._emit("change",{value:this.pos});for(var o=0;o<this.others.length;o++){this.others[o]._emit("change",{value:this.others[o]})}}this.$updating=false};this.onCursorChange=function(e){if(this.$updating)return;var t=this.session.selection.getCursor();if(t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length){this.showOtherMarkers();this._emit("cursorEnter",e)}else{this.hideOtherMarkers();this._emit("cursorLeave",e)}};this.detach=function(){this.session.removeMarker(this.markerId);this.hideOtherMarkers();this.doc.removeEventListener("change",this.$onUpdate);this.session.selection.removeEventListener("changeCursor",this.$onCursorChange);this.pos.detach();for(var e=0;e<this.others.length;e++){this.others[e].detach()}this.session.setUndoSelect(true)};this.cancel=function(){if(this.$undoStackDepth===-1)throw Error("Canceling placeholders only supported with undo manager attached to session.");var e=this.session.getUndoManager();var t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth;for(var n=0;n<t;n++){e.undo(true)}}}).call(o.prototype);t.PlaceHolder=o});ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){var T=e("../lib/event");var D=e("../lib/useragent");function R(e,t){return e.row==t.row&&e.column==t.column}function i(e){var t=e.domEvent;var n=t.altKey;var i=t.shiftKey;var r=t.ctrlKey;var o=e.getAccelKey();var a=e.getButton();if(r&&D.isMac)a=t.button;if(e.editor.inMultiSelectMode&&a==2){e.editor.textInput.onContextMenu(e.domEvent);return}if(!r&&!n&&!o){if(a===0&&e.editor.inMultiSelectMode)e.editor.exitMultiSelectMode();return}if(a!==0)return;var s=e.editor;var l=s.selection;var c=s.inMultiSelectMode;var u=e.getDocumentPosition();var h=l.getCursor();var d=e.inSelection()||l.isEmpty()&&R(u,h);var f=e.x,p=e.y;var g=function(e){f=e.clientX;p=e.clientY};var m=s.session;var v=s.renderer.pixelToScreenCoordinates(f,p);var b=v;var w;if(s.$mouseHandler.$enableJumpToDef){if(r&&n||o&&n)w="add";else if(n)w="block"}else{if(o&&!n){w="add";if(!c&&i)return}else if(n){w="block"}}if(w&&D.isMac&&t.ctrlKey){s.$mouseHandler.cancelContextMenu()}if(w=="add"){if(!c&&d)return;if(!c){var y=l.toOrientedRange();s.addSelectionMarker(y)}var C=l.rangeList.rangeAtPoint(u);s.$blockScrolling++;s.inVirtualSelectionMode=true;if(i){C=null;y=l.ranges[0];s.removeSelectionMarker(y)}s.once("mouseup",function(){var e=l.toOrientedRange();if(C&&e.isEmpty()&&R(C.cursor,e.cursor))l.substractPoint(e.cursor);else{if(i){l.substractPoint(y.cursor)}else if(y){s.removeSelectionMarker(y);l.addRange(y)}l.addRange(e)}s.$blockScrolling--;s.inVirtualSelectionMode=false})}else if(w=="block"){e.stop();s.inVirtualSelectionMode=true;var E;var A=[];var x=function(){var e=s.renderer.pixelToScreenCoordinates(f,p);var t=m.screenToDocumentPosition(e.row,e.column);if(R(b,e)&&R(t,l.lead))return;b=e;s.selection.moveToPosition(t);s.renderer.scrollCursorIntoView();s.removeSelectionMarkers(A);A=l.rectangularRangeBlock(b,v);if(s.$mouseHandler.$clickSelection&&A.length==1&&A[0].isEmpty())A[0]=s.$mouseHandler.$clickSelection.clone();A.forEach(s.addSelectionMarker,s);s.updateSelectionMarkers()};if(c&&!o){l.toSingleRange()}else if(!c&&o){E=l.toOrientedRange();s.addSelectionMarker(E)}if(i)v=m.documentToScreenPosition(l.lead);else l.moveToPosition(u);b={row:-1,column:-1};var S=function(e){clearInterval(F);s.removeSelectionMarkers(A);if(!A.length)A=[l.toOrientedRange()];s.$blockScrolling++;if(E){s.removeSelectionMarker(E);l.toSingleRange(E)}for(var t=0;t<A.length;t++)l.addRange(A[t]);s.inVirtualSelectionMode=false;s.$mouseHandler.$clickSelection=null;s.$blockScrolling--};var k=x;T.capture(s.container,g,S);var F=setInterval(function(){k()},20);return e.preventDefault()}}t.onMouseDown=i});ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},readonly:true},{name:"addCursorBelow",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},readonly:true},{name:"addCursorAboveSkipCurrent",exec:function(e){e.selectMoreLines(-1,true)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},readonly:true},{name:"addCursorBelowSkipCurrent",exec:function(e){e.selectMoreLines(1,true)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},readonly:true},{name:"selectMoreBefore",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},readonly:true},{name:"selectMoreAfter",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},readonly:true},{name:"selectNextBefore",exec:function(e){e.selectMore(-1,true)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},readonly:true},{name:"selectNextAfter",exec:function(e){e.selectMore(1,true)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},readonly:true},{name:"splitIntoLines",exec:function(e){e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readonly:true},{name:"alignCursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"}},{name:"findAll",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},readonly:true}];t.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},readonly:true,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var i=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new i(t.multiSelectCommands)});ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){var i=e("./range_list").RangeList;var m=e("./range").Range;var g=e("./selection").Selection;var r=e("./mouse/multi_select_handler").onMouseDown;var o=e("./lib/event");var v=e("./lib/lang");var a=e("./commands/multi_select_commands");t.commands=a.defaultCommands.concat(a.multiSelectCommands);var s=e("./search").Search;var l=new s;function c(e,t,n){l.$options.wrap=true;l.$options.needle=t;l.$options.backwards=n==-1;return l.find(e)}var u=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(u.prototype);(function(){this.ranges=null;this.rangeList=null;this.addRange=function(e,t){if(!e)return;if(!this.inMultiSelectMode&&this.rangeCount===0){var n=this.toOrientedRange();this.rangeList.add(n);this.rangeList.add(e);if(this.rangeList.ranges.length!=2){this.rangeList.removeAll();return t||this.fromOrientedRange(e)}this.rangeList.removeAll();this.rangeList.add(n);this.$onAddRange(n)}if(!e.cursor)e.cursor=e.end;var i=this.rangeList.add(e);this.$onAddRange(e);if(i.length)this.$onRemoveRange(i);if(this.rangeCount>1&&!this.inMultiSelectMode){this._signal("multiSelect");this.inMultiSelectMode=true;this.session.$undoSelect=false;this.rangeList.attach(this.session)}return t||this.fromOrientedRange(e)};this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();if(t.length)this.$onRemoveRange(t);e&&this.fromOrientedRange(e)};this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);if(t){this.$onRemoveRange(t);return t[0]}};this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();if(e.length)this.$onRemoveRange(e);else if(this.ranges[0])this.fromOrientedRange(this.ranges[0])};this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length;this.ranges.unshift(e);this._signal("addRange",{range:e})};this.$onRemoveRange=function(e){this.rangeCount=this.rangeList.ranges.length;if(this.rangeCount==1&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t);this.rangeCount=0}for(var n=e.length;n--;){var i=this.ranges.indexOf(e[n]);this.ranges.splice(i,1)}this._signal("removeRange",{ranges:e});if(this.rangeCount===0&&this.inMultiSelectMode){this.inMultiSelectMode=false;this._signal("singleSelect");this.session.$undoSelect=true;this.rangeList.detach(this.session)}t=t||this.ranges[0];if(t&&!t.isEqual(this.getRange()))this.fromOrientedRange(t)};this.$initRangeList=function(){if(this.rangeList)return;this.rangeList=new i;this.ranges=[];this.rangeCount=0};this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]};this.splitIntoLines=function(){if(this.rangeCount>1){var e=this.rangeList.ranges;var t=e[e.length-1];var n=m.fromPoints(e[0].start,t.end);this.toSingleRange();this.setSelectionRange(n,t.cursor==t.start)}else{var n=this.getRange();var i=this.isBackwards();var r=n.start.row;var o=n.end.row;if(r==o){if(i)var a=n.end,s=n.start;else var a=n.start,s=n.end;this.addRange(m.fromPoints(s,s));this.addRange(m.fromPoints(a,a));return}var l=[];var c=this.getLineRange(r,true);c.start.column=n.start.column;l.push(c);for(var u=r+1;u<o;u++)l.push(this.getLineRange(u,true));c=this.getLineRange(o,true);c.end.column=n.end.column;l.push(c);l.forEach(this.addRange,this)}};this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges;var t=e[e.length-1];var n=m.fromPoints(e[0].start,t.end);this.toSingleRange();this.setSelectionRange(n,t.cursor==t.start)}else{var i=this.session.documentToScreenPosition(this.selectionLead);var r=this.session.documentToScreenPosition(this.selectionAnchor);var o=this.rectangularRangeBlock(i,r);o.forEach(this.addRange,this)}};this.rectangularRangeBlock=function(e,t,n){var i=[];var r=e.column<t.column;if(r){var o=e.column;var a=t.column}else{var o=t.column;var a=e.column}var s=e.row<t.row;if(s){var l=e.row;var c=t.row}else{var l=t.row;var c=e.row}if(o<0)o=0;if(l<0)l=0;if(l==c)n=true;for(var u=l;u<=c;u++){var h=m.fromPoints(this.session.screenToDocumentPosition(u,o),this.session.screenToDocumentPosition(u,a));if(h.isEmpty()){if(d&&b(h.end,d))break;var d=h.end}h.cursor=r?h.start:h.end;i.push(h)}if(s)i.reverse();if(!n){var f=i.length-1;while(i[f].isEmpty()&&f>0)f--;if(f>0){var p=0;while(i[p].isEmpty())p++}for(var g=f;g>=p;g--){if(i[g].isEmpty())i.splice(g,1)}}return i}}).call(g.prototype);var h=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor();this.renderer.updateBackMarkers()};this.addSelectionMarker=function(e){if(!e.cursor)e.cursor=e.end;var t=this.getSelectionStyle();e.marker=this.session.addMarker(e,"ace_selection",t);this.session.$selectionMarkers.push(e);this.session.selectionMarkerCount=this.session.$selectionMarkers.length;return e};this.removeSelectionMarker=function(e){if(!e.marker)return;this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);if(t!=-1)this.session.$selectionMarkers.splice(t,1);this.session.selectionMarkerCount=this.session.$selectionMarkers.length};this.removeSelectionMarkers=function(e){var t=this.session.$selectionMarkers;for(var n=e.length;n--;){var i=e[n];if(!i.marker)continue;this.session.removeMarker(i.marker);var r=t.indexOf(i);if(r!=-1)t.splice(r,1)}this.session.selectionMarkerCount=t.length};this.$onAddRange=function(e){this.addSelectionMarker(e.range);this.renderer.updateCursor();this.renderer.updateBackMarkers()};this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges);this.renderer.updateCursor();this.renderer.updateBackMarkers()};this.$onMultiSelect=function(e){if(this.inMultiSelectMode)return;this.inMultiSelectMode=true;this.setStyle("ace_multiselect");this.keyBinding.addKeyboardHandler(a.keyboardHandler);this.commands.setDefaultHandler("exec",this.$onMultiSelectExec);this.renderer.updateCursor();this.renderer.updateBackMarkers()};this.$onSingleSelect=function(e){if(this.session.multiSelect.inVirtualMode)return;this.inMultiSelectMode=false;this.unsetStyle("ace_multiselect");this.keyBinding.removeKeyboardHandler(a.keyboardHandler);this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec);this.renderer.updateCursor();this.renderer.updateBackMarkers();this._emit("changeSelection")};this.$onMultiSelectExec=function(e){var t=e.command;var n=e.editor;if(!n.multiSelect)return;if(!t.multiSelectAction){var i=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange());n.multiSelect.mergeOverlappingRanges()}else if(t.multiSelectAction=="forEach"){i=n.forEachSelection(t,e.args)}else if(t.multiSelectAction=="forEachLine"){i=n.forEachSelection(t,e.args,true)}else if(t.multiSelectAction=="single"){n.exitMultiSelectMode();i=t.exec(n,e.args||{})}else{i=t.multiSelectAction(n,e.args||{})}return i};this.forEachSelection=function(e,t,n){if(this.inVirtualSelectionMode)return;var i=n&&n.keepOrder;var r=n==true||n&&n.$byLines;var o=this.session;var a=this.selection;var s=a.rangeList;var l=(i?a:s).ranges;var c;if(!l.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var u=a._eventRegistry;a._eventRegistry={};var h=new g(o);this.inVirtualSelectionMode=true;for(var d=l.length;d--;){if(r){while(d>0&&l[d].start.row==l[d-1].end.row)d--}h.fromOrientedRange(l[d]);h.index=d;this.selection=o.selection=h;var f=e.exec?e.exec(this,t||{}):e(this,t||{});if(!c&&f!==undefined)c=f;h.toOrientedRange(l[d])}h.detach();this.selection=o.selection=a;this.inVirtualSelectionMode=false;a._eventRegistry=u;a.mergeOverlappingRanges();var p=this.renderer.$scrollAnimation;this.onCursorChange();this.onSelectionChange();if(p&&p.from==p.to)this.renderer.animateScrolling(p.from);return c};this.exitMultiSelectMode=function(){if(!this.inMultiSelectMode||this.inVirtualSelectionMode)return;this.multiSelect.toSingleRange()};this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var t=this.multiSelect.rangeList.ranges;var n=[];for(var i=0;i<t.length;i++){n.push(this.session.getTextRange(t[i]))}var r=this.session.getDocument().getNewLineCharacter();e=n.join(r);if(e.length==(n.length-1)*r.length)e=""}else if(!this.selection.isEmpty()){e=this.session.getTextRange(this.getSelectionRange())}return e};this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&t==this.multiSelect.anchor)return;var i=t==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;if(!b(i,t))this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange())}};this.onPaste=function(e){if(this.$readOnly)return;var t={text:e};this._signal("paste",t);e=t.text;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)return this.insert(e);var n=e.split(/\r\n|\r|\n/);var i=this.selection.rangeList.ranges;if(n.length>i.length||n.length<2||!n[1])return this.commands.exec("insertstring",this,e);for(var r=i.length;r--;){var o=i[r];if(!o.isEmpty())this.session.remove(o);this.session.insert(o.start,n[r])}};this.findAll=function(e,t,n){t=t||{};t.needle=e||t.needle;if(t.needle==undefined){var i=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();t.needle=this.session.getTextRange(i)}this.$search.set(t);var r=this.$search.findAll(this.session);if(!r.length)return 0;this.$blockScrolling+=1;var o=this.multiSelect;if(!n)o.toSingleRange(r[0]);for(var a=r.length;a--;)o.addRange(r[a],true);if(i&&o.rangeList.rangeAtPoint(i.start))o.addRange(i,true);this.$blockScrolling-=1;return r.length};this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange();var i=n.cursor==n.end;var r=this.session.documentToScreenPosition(n.cursor);if(this.selection.$desiredColumn)r.column=this.selection.$desiredColumn;var o=this.session.screenToDocumentPosition(r.row+e,r.column);if(!n.isEmpty()){var a=this.session.documentToScreenPosition(i?n.end:n.start);var s=this.session.screenToDocumentPosition(a.row+e,a.column)}else{var s=o}if(i){var l=m.fromPoints(o,s);l.cursor=l.start}else{var l=m.fromPoints(s,o);l.cursor=l.end}l.desiredColumn=r.column;if(!this.selection.inMultiSelectMode){this.selection.addRange(n)}else{if(t)var c=n.cursor}this.selection.addRange(l);if(c)this.selection.substractPoint(c)};this.transposeSelections=function(e){var t=this.session;var n=t.multiSelect;var i=n.ranges;for(var r=i.length;r--;){var o=i[r];if(o.isEmpty()){var a=t.getWordRange(o.start.row,o.start.column);o.start.row=a.start.row;o.start.column=a.start.column;o.end.row=a.end.row;o.end.column=a.end.column}}n.mergeOverlappingRanges();var s=[];for(var r=i.length;r--;){var o=i[r];s.unshift(t.getTextRange(o))}if(e<0)s.unshift(s.pop());else s.push(s.shift());for(var r=i.length;r--;){var o=i[r];var a=o.clone();t.replace(o,s[r]);o.start.row=a.start.row;o.start.column=a.start.column}};this.selectMore=function(e,t){var n=this.session;var i=n.multiSelect;var r=i.toOrientedRange();if(r.isEmpty()){r=n.getWordRange(r.start.row,r.start.column);r.cursor=e==-1?r.start:r.end;this.multiSelect.addRange(r)}var o=n.getTextRange(r);var a=c(n,o,e);if(a){a.cursor=e==-1?a.start:a.end;this.$blockScrolling+=1;this.session.unfold(a);this.multiSelect.addRange(a);this.$blockScrolling-=1;this.renderer.scrollCursorIntoView(null,.5)}if(t)this.multiSelect.substractPoint(r.cursor)};this.alignCursors=function(){var o=this.session;var t=o.multiSelect;var e=t.ranges;var n=-1;var i=e.filter(function(e){if(e.cursor.row==n)return true;n=e.cursor.row});if(!e.length||i.length==e.length-1){var r=this.selection.getRange();var a=r.start.row,s=r.end.row;var l=a==s;if(l){var c=this.session.getLength();var u;do{u=this.session.getLine(s)}while(/[=:]/.test(u)&&++s<c);do{u=this.session.getLine(a)}while(/[=:]/.test(u)&&--a>0);if(a<0)a=0;if(s>=c)s=c-1}var h=this.session.doc.removeLines(a,s);h=this.$reAlignText(h,l);this.session.doc.insert({row:a,column:0},h.join("\n")+"\n");if(!l){r.start.column=0;r.end.column=h[h.length-1].length}this.selection.setRange(r)}else{i.forEach(function(e){t.substractPoint(e.cursor)});var d=0;var f=Infinity;var p=e.map(function(e){var t=e.cursor;var n=o.getLine(t.row);var i=n.substr(t.column).search(/\S/g);if(i==-1)i=0;if(t.column>d)d=t.column;if(i<f)f=i;return i});e.forEach(function(e,t){var n=e.cursor;var i=d-n.column;var r=p[t]-f;if(i>r)o.insert(n,v.stringRepeat(" ",i-r));else o.remove(new m(n.row,n.column,n.row,n.column-i+r));e.start.column=e.end.column=d;e.start.row=e.end.row=n.row;e.cursor=e.end});t.fromOrientedRange(e[0]);this.renderer.updateCursor();this.renderer.updateBackMarkers()}};this.$reAlignText=function(e,t){var n=true,i=true;var r,o,a;return e.map(function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);if(!t)return[e];if(r==null){r=t[1].length;o=t[2].length;a=t[3].length;return t}if(r+o+a!=t[1].length+t[2].length+t[3].length)i=false;if(r!=t[1].length)n=false;if(r>t[1].length)r=t[1].length;if(o<t[2].length)o=t[2].length;if(a>t[3].length)a=t[3].length;return t}).map(t?l:n?i?c:l:u);function s(e){return v.stringRepeat(" ",e)}function l(e){return!e[2]?e[0]:s(r)+e[2]+s(o-e[2].length+a)+e[4].replace(/^([=:])\s+/,"$1 ")}function c(e){return!e[2]?e[0]:s(r+o-e[2].length)+e[2]+s(a," ")+e[4].replace(/^([=:])\s+/,"$1 ")}function u(e){return!e[2]?e[0]:s(r)+e[2]+s(a)+e[4].replace(/^([=:])\s+/,"$1 ")}}}).call(h.prototype);function b(e,t){return e.row==t.row&&e.column==t.column}t.onSessionChange=function(e){var t=e.session;if(!t.multiSelect){t.$selectionMarkers=[];t.selection.$initRangeList();t.multiSelect=t.selection}this.multiSelect=t.multiSelect;var n=e.oldSession;if(n){n.multiSelect.off("addRange",this.$onAddRange);n.multiSelect.off("removeRange",this.$onRemoveRange);n.multiSelect.off("multiSelect",this.$onMultiSelect);n.multiSelect.off("singleSelect",this.$onSingleSelect);n.multiSelect.lead.off("change",this.$checkMultiselectChange);n.multiSelect.anchor.off("change",this.$checkMultiselectChange)}t.multiSelect.on("addRange",this.$onAddRange);t.multiSelect.on("removeRange",this.$onRemoveRange);t.multiSelect.on("multiSelect",this.$onMultiSelect);t.multiSelect.on("singleSelect",this.$onSingleSelect);t.multiSelect.lead.on("change",this.$checkMultiselectChange);t.multiSelect.anchor.on("change",this.$checkMultiselectChange);if(this.inMultiSelectMode!=t.selection.inMultiSelectMode){if(t.selection.inMultiSelectMode)this.$onMultiSelect();else this.$onSingleSelect()}};function d(e){if(e.$multiselectOnSessionChange)return;e.$onAddRange=e.$onAddRange.bind(e);e.$onRemoveRange=e.$onRemoveRange.bind(e);e.$onMultiSelect=e.$onMultiSelect.bind(e);e.$onSingleSelect=e.$onSingleSelect.bind(e);e.$multiselectOnSessionChange=t.onSessionChange.bind(e);e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e);e.$multiselectOnSessionChange(e);e.on("changeSession",e.$multiselectOnSessionChange);e.on("mousedown",r);e.commands.addCommands(a.defaultCommands);f(e)}function f(t){var e=t.textInput.getElement();var n=false;o.addListener(e,"keydown",function(e){if(e.keyCode==18&&!(e.ctrlKey||e.shiftKey||e.metaKey)){if(!n){t.renderer.setMouseCursor("crosshair");n=true}}else if(n){i()}});o.addListener(e,"keyup",i);o.addListener(e,"blur",i);function i(e){if(n){t.renderer.setMouseCursor("");n=false}}}t.MultiSelect=d;e("./config").defineOptions(h.prototype,"editor",{enableMultiselect:{set:function(e){d(this);if(e){this.on("changeSession",this.$multiselectOnSessionChange);this.on("mousedown",r)}else{this.off("changeSession",this.$multiselectOnSessionChange);this.off("mousedown",r)}},value:true}})});ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var d=e("../../range").Range;var i=t.FoldMode=function(){};(function(){this.foldingStartMarker=null;this.foldingStopMarker=null;this.getFoldWidget=function(e,t,n){var i=e.getLine(n);if(this.foldingStartMarker.test(i))return"start";if(t=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(i))return"end";return""};this.getFoldWidgetRange=function(e,t,n){return null};this.indentationBlock=function(e,t,n){var i=/\S/;var r=e.getLine(t);var o=r.search(i);if(o==-1)return;var a=n||r.length;var s=e.getLength();var l=t;var c=t;while(++t<s){var u=e.getLine(t).search(i);if(u==-1)continue;if(u<=o)break;c=t}if(c>l){var h=e.getLine(c).length;return new d(l,a,c,h)}};this.openingBracketBlock=function(e,t,n,i,r){var o={row:n,column:i+1};var a=e.$findClosingBracket(t,o,r);if(!a)return;var s=e.foldWidgets[a.row];if(s==null)s=e.getFoldWidget(a.row);if(s=="start"&&a.row>o.row){a.row--;a.column=e.getLine(a.row).length}return d.fromPoints(o,a)};this.closingBracketBlock=function(e,t,n,i,r){var o={row:n,column:i};var a=e.$findOpeningBracket(t,o);if(!a)return;a.column++;o.column--;return d.fromPoints(a,o)}}).call(i.prototype)});ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=false;t.cssClass="ace-tm";t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;border-radius: 2px;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';var i=e("../lib/dom");i.importCssString(t.cssText,t.cssClass)});ace.define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(e,t,n){"use strict";var i=e("./lib/oop");var r=e("./lib/dom");var o=e("./range").Range;function a(e){this.session=e;this.session.widgetManager=this;this.session.getRowLength=this.getRowLength;this.session.$getWidgetScreenLength=this.$getWidgetScreenLength;this.updateOnChange=this.updateOnChange.bind(this);this.renderWidgets=this.renderWidgets.bind(this);this.measureWidgets=this.measureWidgets.bind(this);this.session._changedWidgets=[];this.detach=this.detach.bind(this);this.session.on("change",this.updateOnChange)}(function(){this.getRowLength=function(e){var t;if(this.lineWidgets)t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0;else t=0;if(!this.$useWrapMode||!this.$wrapData[e]){return 1+t}else{return this.$wrapData[e].length+1+t}};this.$getWidgetScreenLength=function(){var t=0;this.lineWidgets.forEach(function(e){if(e&&e.rowCount)t+=e.rowCount});return t};this.attach=function(e){if(e.widgetManager&&e.widgetManager!=this)e.widgetManager.detach();if(this.editor==e)return;this.detach();this.editor=e;this.editor.on("changeSession",this.detach);e.widgetManager=this;e.renderer.on("beforeRender",this.measureWidgets);e.renderer.on("afterRender",this.renderWidgets)};this.detach=function(e){if(e&&e.session==this.session)return;var t=this.editor;if(!t)return;t.off("changeSession",this.detach);this.editor=null;t.widgetManager=null;t.renderer.off("beforeRender",this.measureWidgets);t.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach(function(e){if(e&&e.el&&e.el.parentNode){e._inDocument=false;e.el.parentNode.removeChild(e.el)}})};this.updateOnChange=function(e){var t=this.session.lineWidgets;if(!t)return;var n=e.data;var i=n.range;var r=i.start.row;var o=i.end.row-r;if(o===0){}else if(n.action=="removeText"||n.action=="removeLines"){var a=t.splice(r+1,o);a.forEach(function(e){e&&this.removeLineWidget(e)},this);this.$updateRows()}else{var s=new Array(o);s.unshift(r,0);t.splice.apply(t,s);this.$updateRows()}};this.$updateRows=function(){var e=this.session.lineWidgets;if(!e)return;var n=true;e.forEach(function(e,t){if(e){n=false;e.row=t}});if(n)this.session.lineWidgets=null};this.addLineWidget=function(e){if(!this.session.lineWidgets)this.session.lineWidgets=new Array(this.session.getLength());this.session.lineWidgets[e.row]=e;var t=this.editor.renderer;if(e.html&&!e.el){e.el=r.createElement("div");e.el.innerHTML=e.html}if(e.el){r.addCssClass(e.el,"ace_lineWidgetContainer");e.el.style.position="absolute";e.el.style.zIndex=5;t.container.appendChild(e.el);e._inDocument=true}if(!e.coverGutter){e.el.style.zIndex=3}if(!e.pixelHeight){e.pixelHeight=e.el.offsetHeight}if(e.rowCount==null)e.rowCount=e.pixelHeight/t.layerConfig.lineHeight;this.session._emit("changeFold",{data:{start:{row:e.row}}});this.$updateRows();this.renderWidgets(null,t);return e};this.removeLineWidget=function(e){e._inDocument=false;if(e.el&&e.el.parentNode)e.el.parentNode.removeChild(e.el);if(e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(e){}if(this.session.lineWidgets)this.session.lineWidgets[e.row]=undefined;this.session._emit("changeFold",{data:{start:{row:e.row}}});this.$updateRows()};this.onWidgetChanged=function(e){this.session._changedWidgets.push(e);this.editor&&this.editor.renderer.updateFull()};this.measureWidgets=function(e,t){var n=this.session._changedWidgets;var i=t.layerConfig;if(!n||!n.length)return;var r=Infinity;for(var o=0;o<n.length;o++){var a=n[o];if(!a._inDocument){a._inDocument=true;t.container.appendChild(a.el)}a.h=a.el.offsetHeight;if(!a.fixedWidth){a.w=a.el.offsetWidth;a.screenWidth=Math.ceil(a.w/i.characterWidth)}var s=a.h/i.lineHeight;if(a.coverLine){s-=this.session.getRowLineCount(a.row);if(s<0)s=0}if(a.rowCount!=s){a.rowCount=s;if(a.row<r)r=a.row}}if(r!=Infinity){this.session._emit("changeFold",{data:{start:{row:r}}});this.session.lineWidgetWidth=null}this.session._changedWidgets=[]};this.renderWidgets=function(e,t){var n=t.layerConfig;var i=this.session.lineWidgets;if(!i)return;var r=Math.min(this.firstRow,n.firstRow);var o=Math.max(this.lastRow,n.lastRow,i.length);while(r>0&&!i[r])r--;this.firstRow=n.firstRow;this.lastRow=n.lastRow;t.$cursorLayer.config=n;for(var a=r;a<=o;a++){var s=i[a];if(!s||!s.el)continue;if(!s._inDocument){s._inDocument=true;t.container.appendChild(s.el)}var l=t.$cursorLayer.getPixelPosition({row:a,column:0},true).top;if(!s.coverLine)l+=n.lineHeight*this.session.getRowLineCount(s.row);s.el.style.top=l-n.offset+"px";var c=s.coverGutter?0:t.gutterWidth;if(!s.fixedWidth)c-=t.scrollLeft;s.el.style.left=c+"px";if(s.fixedWidth){s.el.style.right=t.scrollBar.getWidth()+"px"}else{s.el.style.right=""}}}}).call(a.prototype);t.LineWidgets=a});ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(e,t,n){"use strict";var p=e("ace/line_widgets").LineWidgets;var g=e("ace/lib/dom");var s=e("ace/range").Range;function l(e,t,n){var i=0;var r=e.length-1;while(i<=r){var o=i+r>>1;var a=n(t,e[o]);if(a>0)i=o+1;else if(a<0)r=o-1;else return o}return-(i+1)}function m(e,t,n){var i=e.getAnnotations().sort(s.comparePoints);if(!i.length)return;var r=l(i,{row:t,column:-1},s.comparePoints);if(r<0)r=-r-1;if(r>=i.length-1)r=n>0?0:i.length-1;else if(r===0&&n<0)r=i.length-1;var o=i[r];if(!o||!n)return;if(o.row===t){do{o=i[r+=n]}while(o&&o.row===t);if(!o)return i.slice()}var a=[];t=o.row;do{a[n<0?"unshift":"push"](o);o=i[r+=n]}while(o&&o.row==t);return a.length&&a}t.showErrorMarker=function(e,t){var n=e.session;if(!n.widgetManager){n.widgetManager=new p(n);n.widgetManager.attach(e)}var i=e.getCursorPosition();var r=i.row;var o=n.lineWidgets&&n.lineWidgets[r];if(o){o.destroy()}else{r-=t}var a=m(n,r,t);var s;if(a){var l=a[0];i.column=(l.pos&&typeof l.column!="number"?l.pos.sc:l.column)||0;i.row=l.row;s=e.renderer.$gutterLayer.$annotations[i.row]}else if(o){return}else{s={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(i.row);e.selection.moveToPosition(i);var c={row:i.row,fixedWidth:true,coverGutter:true,el:g.createElement("div")};var u=c.el.appendChild(g.createElement("div"));var h=c.el.appendChild(g.createElement("div"));h.className="error_widget_arrow "+s.className;var d=e.renderer.$cursorLayer.getPixelPosition(i).left;h.style.left=d+e.renderer.gutterWidth-5+"px";c.el.className="error_widget_wrapper";u.className="error_widget "+s.className;u.innerHTML=s.text.join("<br>");u.appendChild(g.createElement("div"));var f=function(_,e,t){if(e===0&&(t==="esc"||t==="return")){c.destroy();return{command:"null"}}};c.destroy=function(){if(e.$mouseHandler.isMousePressed)return;e.keyBinding.removeKeyboardHandler(f);n.widgetManager.removeLineWidget(c);e.off("changeSelection",c.destroy);e.off("changeSession",c.destroy);e.off("mouseup",c.destroy);e.off("change",c.destroy)};e.keyBinding.addKeyboardHandler(f);e.on("changeSelection",c.destroy);e.on("changeSession",c.destroy);e.on("mouseup",c.destroy);e.on("change",c.destroy);e.session.widgetManager.addLineWidget(c);c.el.onmousedown=e.focus.bind(e);e.renderer.scrollCursorIntoView(null,.5,{bottom:c.el.offsetHeight})};g.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")});ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(e,o,t){"use strict";e("./lib/fixoldbrowsers");var a=e("./lib/dom");var s=e("./lib/event");var l=e("./editor").Editor;var i=e("./edit_session").EditSession;var r=e("./undomanager").UndoManager;var c=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client");e("./keyboard/hash_handler");e("./placeholder");e("./multi_select");e("./mode/folding/fold_mode");e("./theme/textmate");e("./ext/error_marker");o.config=e("./config");o.require=e;o.edit=function(e){if(typeof e=="string"){var t=e;e=document.getElementById(t);if(!e)throw new Error("ace.edit can't find div #"+t)}if(e.env&&e.env.editor instanceof l)return e.env.editor;var n=o.createEditSession(a.getInnerText(e));e.innerHTML="";var i=new l(new c(e));i.setSession(n);var r={document:n,editor:i,onResize:i.resize.bind(i,null)};s.addListener(window,"resize",r.onResize);i.on("destroy",function(){s.removeListener(window,"resize",r.onResize)});e.env=i.env=r;return i};o.createEditSession=function(e,t){var n=new i(e,t);n.setUndoManager(new r);return n};o.EditSession=i;o.UndoManager=r});(function(){ace.require(["ace/ace"],function(e){e&&e.config.init(true);if(!window.ace)window.ace=e;for(var t in e)if(e.hasOwnProperty(t))window.ace[t]=e[t]})})();ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var i=e("../lib/oop");var r=e("./text_highlight_rules").TextHighlightRules;var o=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},{token:"comment.doc.tag",regex:"\\bTODO\\b"},{defaultToken:"comment.doc"}]}};i.inherits(o,r);o.getStartRule=function(e){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:e}};o.getEndRule=function(e){return{token:"comment.doc",regex:"\\*\\/",next:e}};t.DocCommentHighlightRules=o});ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var i=e("../lib/oop");var r=e("./doc_comment_highlight_rules").DocCommentHighlightRules;var o=e("./text_highlight_rules").TextHighlightRules;var a=function(){var e=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|"+"Namespace|QName|XML|XMLList|"+"ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|"+"Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|"+"Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|"+"SyntaxError|TypeError|URIError|"+"decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|"+"isNaN|parseFloat|parseInt|"+"JSON|Math|"+"this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|"+"break|case|catch|continue|default|delete|do|else|finally|for|function|"+"if|in|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|"+"__parent__|__count__|escape|unescape|with|__proto__|"+"class|enum|extends|super|export|implements|private|public|interface|package|protected|static","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier");var t="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void";var n="[a-zA-Z\\$_¡-￿][a-zA-Z\\d\\$_¡-￿]*\\b";var i="\\\\(?:x[0-9a-fA-F]{2}|"+"u[0-9a-fA-F]{4}|"+"[0-2][0-7]{0,2}|"+"3[0-6][0-7]?|"+"37[0-7]?|"+"[4-7][0-7]?|"+".)";this.$rules={no_regex:[{token:"comment",regex:"\\/\\/",next:"line_comment"},r.getStartRule("doc-start"),{token:"comment",regex:/\/\*/,next:"comment"},{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0[xX][0-9a-fA-F]+\b/},{token:"constant.numeric",regex:/[+-]?\d+(?:(?:\.\d*)?(?:[eE][+-]?\d+)?)?\b/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+n+")(\\.)(prototype)(\\.)("+n+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+n+")(\\.)("+n+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+n+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+n+")(\\.)("+n+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+n+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+n+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:"(?:"+t+")\\b",next:"start"},{token:["punctuation.operator","support.function"],regex:/(\.)(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:["punctuation.operator","support.function.dom"],regex:/(\.)(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:["punctuation.operator","support.constant"],regex:/(\.)(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:["support.constant"],regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:e,regex:n},{token:"keyword.operator",regex:/--|\+\+|[!$%&*+\-~]|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\|\||\?\:|\*=|%=|\+=|\-=|&=|\^=/,next:"start"},{token:"punctuation.operator",regex:/\?|\:|\,|\;|\./,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"keyword.operator",regex:/\/=?/,next:"start"},{token:"comment",regex:/^#!.*$/}],start:[r.getStartRule("doc-start"),{token:"comment",regex:"\\/\\*",next:"comment_regex_allowed"},{token:"comment",regex:"\\/\\/",next:"line_comment_regex_allowed"},{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:n},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],comment_regex_allowed:[{token:"comment",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}],comment:[{token:"comment",regex:"\\*\\/",next:"no_regex"},{defaultToken:"comment"}],line_comment_regex_allowed:[{token:"comment",regex:"$|^",next:"start"},{defaultToken:"comment"}],line_comment:[{token:"comment",regex:"$|^",next:"no_regex"},{defaultToken:"comment"}],qqstring:[{token:"constant.language.escape",regex:i},{token:"string",regex:"\\\\$",next:"qqstring"},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:i},{token:"string",regex:"\\\\$",next:"qstring"},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]};this.embedRules(r,"doc-",[r.getEndRule("no_regex")])};i.inherits(a,o);t.JavaScriptHighlightRules=a});ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(e,t,n){"use strict";var s=e("../range").Range;var i=function(){};(function(){this.checkOutdent=function(e,t){if(!/^\s+$/.test(e))return false;return/^\s*\}/.test(t)};this.autoOutdent=function(e,t){var n=e.getLine(t);var i=n.match(/^(\s*\})/);if(!i)return 0;var r=i[1].length;var o=e.findMatchingBracket({row:t,column:r});if(!o||o.row==t)return 0;var a=this.$getIndent(e.getLine(o.row));e.replace(new s(t,0,t,r-1),a)};this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(i.prototype);t.MatchingBraceOutdent=i});ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var i=e("../../lib/oop");var r=e("../behaviour").Behaviour;var o=e("../../token_iterator").TokenIterator;var g=e("../../lib/lang");var a=["text","paren.rparen","punctuation.operator"];var s=["text","paren.rparen","punctuation.operator","comment"];var m;var l={};var v=function(e){var t=-1;if(e.multiSelect){t=e.selection.id;if(l.rangeCount!=e.multiSelect.rangeCount)l={rangeCount:e.multiSelect.rangeCount}}if(l[t])return m=l[t];m=l[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}};var b=function(){this.add("braces","insertion",function(e,t,n,i,r){var o=n.getCursorPosition();var a=i.doc.getLine(o.row);if(r=="{"){v(n);var s=n.getSelectionRange();var l=i.doc.getTextRange(s);if(l!==""&&l!=="{"&&n.getWrapBehavioursEnabled()){return{text:"{"+l+"}",selection:false}}else if(b.isSaneInsertion(n,i)){if(/[\]\}\)]/.test(a[o.column])||n.inMultiSelectMode){b.recordAutoInsert(n,i,"}");return{text:"{}",selection:[1,1]}}else{b.recordMaybeInsert(n,i,"{");return{text:"{",selection:[1,1]}}}}else if(r=="}"){v(n);var c=a.substring(o.column,o.column+1);if(c=="}"){var u=i.$findOpeningBracket("}",{column:o.column+1,row:o.row});if(u!==null&&b.isAutoInsertedClosing(o,a,r)){b.popAutoInsertedClosing();return{text:"",selection:[1,1]}}}}else if(r=="\n"||r=="\r\n"){v(n);var h="";if(b.isMaybeInsertedClosing(o,a)){h=g.stringRepeat("}",m.maybeInsertedBrackets);b.clearMaybeInsertedClosing()}var c=a.substring(o.column,o.column+1);if(c==="}"){var d=i.findMatchingBracket({row:o.row,column:o.column+1},"}");if(!d)return null;var f=this.$getIndent(i.getLine(d.row))}else if(h){var f=this.$getIndent(a)}else{b.clearMaybeInsertedClosing();return}var p=f+i.getTabString();return{text:"\n"+p+"\n"+f+h,selection:[1,p.length,1,p.length]}}else{b.clearMaybeInsertedClosing()}});this.add("braces","deletion",function(e,t,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&o=="{"){v(n);var a=i.doc.getLine(r.start.row);var s=a.substring(r.end.column,r.end.column+1);if(s=="}"){r.end.column++;return r}else{m.maybeInsertedBrackets--}}});this.add("parens","insertion",function(e,t,n,i,r){if(r=="("){v(n);var o=n.getSelectionRange();var a=i.doc.getTextRange(o);if(a!==""&&n.getWrapBehavioursEnabled()){return{text:"("+a+")",selection:false}}else if(b.isSaneInsertion(n,i)){b.recordAutoInsert(n,i,")");return{text:"()",selection:[1,1]}}}else if(r==")"){v(n);var s=n.getCursorPosition();var l=i.doc.getLine(s.row);var c=l.substring(s.column,s.column+1);if(c==")"){var u=i.$findOpeningBracket(")",{column:s.column+1,row:s.row});if(u!==null&&b.isAutoInsertedClosing(s,l,r)){b.popAutoInsertedClosing();return{text:"",selection:[1,1]}}}}});this.add("parens","deletion",function(e,t,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&o=="("){v(n);var a=i.doc.getLine(r.start.row);var s=a.substring(r.start.column+1,r.start.column+2);if(s==")"){r.end.column++;return r}}});this.add("brackets","insertion",function(e,t,n,i,r){if(r=="["){v(n);var o=n.getSelectionRange();var a=i.doc.getTextRange(o);if(a!==""&&n.getWrapBehavioursEnabled()){return{text:"["+a+"]",selection:false}}else if(b.isSaneInsertion(n,i)){b.recordAutoInsert(n,i,"]");return{text:"[]",selection:[1,1]}}}else if(r=="]"){v(n);var s=n.getCursorPosition();var l=i.doc.getLine(s.row);var c=l.substring(s.column,s.column+1);if(c=="]"){var u=i.$findOpeningBracket("]",{column:s.column+1,row:s.row});if(u!==null&&b.isAutoInsertedClosing(s,l,r)){b.popAutoInsertedClosing();return{text:"",selection:[1,1]}}}}});this.add("brackets","deletion",function(e,t,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&o=="["){v(n);var a=i.doc.getLine(r.start.row);var s=a.substring(r.start.column+1,r.start.column+2);if(s=="]"){r.end.column++;return r}}});this.add("string_dquotes","insertion",function(e,t,n,i,r){if(r=='"'||r=="'"){v(n);var o=r;var a=n.getSelectionRange();var s=i.doc.getTextRange(a);if(s!==""&&s!=="'"&&s!='"'&&n.getWrapBehavioursEnabled()){return{text:o+s+o,selection:false}}else{var l=n.getCursorPosition();var c=i.doc.getLine(l.row);var u=c.substring(l.column-1,l.column);if(u=="\\"){return null}var h=i.getTokens(a.start.row);var d=0,f;var p=-1;for(var g=0;g<h.length;g++){f=h[g];if(f.type=="string"){p=-1}else if(p<0){p=f.value.indexOf(o)}if(f.value.length+d>a.start.column){break}d+=h[g].value.length}if(!f||p<0&&f.type!=="comment"&&(f.type!=="string"||a.start.column!==f.value.length+d-1&&f.value.lastIndexOf(o)===f.value.length-1)){if(!b.isSaneInsertion(n,i))return;return{text:o+o,selection:[1,1]}}else if(f&&f.type==="string"){var m=c.substring(l.column,l.column+1);if(m==o){return{text:"",selection:[1,1]}}}}}});this.add("string_dquotes","deletion",function(e,t,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&(o=='"'||o=="'")){v(n);var a=i.doc.getLine(r.start.row);var s=a.substring(r.start.column+1,r.start.column+2);if(s==o){r.end.column++;return r}}})};b.isSaneInsertion=function(e,t){var n=e.getCursorPosition();var i=new o(t,n.row,n.column);if(!this.$matchTokenType(i.getCurrentToken()||"text",a)){var r=new o(t,n.row,n.column+1);if(!this.$matchTokenType(r.getCurrentToken()||"text",a))return false}i.stepForward();return i.getCurrentTokenRow()!==n.row||this.$matchTokenType(i.getCurrentToken()||"text",s)};b.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1};b.recordAutoInsert=function(e,t,n){var i=e.getCursorPosition();var r=t.doc.getLine(i.row);if(!this.isAutoInsertedClosing(i,r,m.autoInsertedLineEnd[0]))m.autoInsertedBrackets=0;m.autoInsertedRow=i.row;m.autoInsertedLineEnd=n+r.substr(i.column);m.autoInsertedBrackets++};b.recordMaybeInsert=function(e,t,n){var i=e.getCursorPosition();var r=t.doc.getLine(i.row);if(!this.isMaybeInsertedClosing(i,r))m.maybeInsertedBrackets=0;m.maybeInsertedRow=i.row;m.maybeInsertedLineStart=r.substr(0,i.column)+n;m.maybeInsertedLineEnd=r.substr(i.column);m.maybeInsertedBrackets++};b.isAutoInsertedClosing=function(e,t,n){return m.autoInsertedBrackets>0&&e.row===m.autoInsertedRow&&n===m.autoInsertedLineEnd[0]&&t.substr(e.column)===m.autoInsertedLineEnd};b.isMaybeInsertedClosing=function(e,t){return m.maybeInsertedBrackets>0&&e.row===m.maybeInsertedRow&&t.substr(e.column)===m.maybeInsertedLineEnd&&t.substr(0,e.column)==m.maybeInsertedLineStart};b.popAutoInsertedClosing=function(){m.autoInsertedLineEnd=m.autoInsertedLineEnd.substr(1);m.autoInsertedBrackets--};b.clearMaybeInsertedClosing=function(){if(m){m.maybeInsertedBrackets=0;m.maybeInsertedRow=-1}};i.inherits(b,r);t.CstyleBehaviour=b});ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(e,t,n){"use strict";var i=e("../../lib/oop");var u=e("../../range").Range;var r=e("./fold_mode").FoldMode;var o=t.FoldMode=function(e){if(e){this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start));this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end))}};i.inherits(o,r);(function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/;this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/;this.getFoldWidgetRange=function(e,t,n,i){var r=e.getLine(n);var o=r.match(this.foldingStartMarker);if(o){var a=o.index;if(o[1])return this.openingBracketBlock(e,o[1],n,a);var s=e.getCommentFoldRange(n,a+o[0].length,1);if(s&&!s.isMultiLine()){if(i){s=this.getSectionRange(e,n)}else if(t!="all")s=null}return s}if(t==="markbegin")return;var o=r.match(this.foldingStopMarker);if(o){var a=o.index+o[0].length;if(o[1])return this.closingBracketBlock(e,o[1],n,a);return e.getCommentFoldRange(n,a,-1)}};this.getSectionRange=function(e,t){var n=e.getLine(t);var i=n.search(/\S/);var r=t;var o=n.length;t=t+1;var a=t;var s=e.getLength();while(++t<s){n=e.getLine(t);var l=n.search(/\S/);if(l===-1)continue;if(i>l)break;var c=this.getFoldWidgetRange(e,"all",t);if(c){if(c.start.row<=r){break}else if(c.isMultiLine()){t=c.end.row}else if(i==l){break}}a=t}return new u(r,o,a,e.getLine(a).length)}}).call(o.prototype)});ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(e,t,n){"use strict";var i=e("../lib/oop");var r=e("./text").Mode;var o=e("./javascript_highlight_rules").JavaScriptHighlightRules;var a=e("./matching_brace_outdent").MatchingBraceOutdent;var s=e("../range").Range;var l=e("../worker/worker_client").WorkerClient;var c=e("./behaviour/cstyle").CstyleBehaviour;var u=e("./folding/cstyle").FoldMode;var h=function(){this.HighlightRules=o;this.$outdent=new a;this.$behaviour=new c;this.foldingRules=new u};i.inherits(h,r);(function(){this.lineCommentStart="//";this.blockComment={start:"/*",end:"*/"};this.getNextLineIndent=function(e,t,n){var i=this.$getIndent(t);var r=this.getTokenizer().getLineTokens(t,e);var o=r.tokens;var a=r.state;if(o.length&&o[o.length-1].type=="comment"){return i}if(e=="start"||e=="no_regex"){var s=t.match(/^.*(?:\bcase\b.*\:|[\{\(\[])\s*$/);if(s){i+=n}}else if(e=="doc-start"){if(a=="start"||a=="no_regex"){return""}var s=t.match(/^\s*(\/?)\*/);if(s){if(s[1]){i+=" "}i+="* "}}return i};this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)};this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)};this.createWorker=function(t){var e=new l(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");e.attachToDocument(t.getDocument());e.on("jslint",function(e){t.setAnnotations(e.data)});e.on("terminate",function(){t.clearAnnotations()});return e};this.$id="ace/mode/javascript"}).call(h.prototype);t.Mode=h});ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var i=e("../lib/oop");var r=e("./text_highlight_rules").TextHighlightRules;var o=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},{token:"comment.doc.tag",regex:"\\bTODO\\b"},{defaultToken:"comment.doc"}]}};i.inherits(o,r);o.getStartRule=function(e){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:e}};o.getEndRule=function(e){return{token:"comment.doc",regex:"\\*\\/",next:e}};t.DocCommentHighlightRules=o});ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var i=e("../lib/oop");var r=e("./doc_comment_highlight_rules").DocCommentHighlightRules;var o=e("./text_highlight_rules").TextHighlightRules;var a=function(){var e=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|"+"Namespace|QName|XML|XMLList|"+"ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|"+"Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|"+"Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|"+"SyntaxError|TypeError|URIError|"+"decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|"+"isNaN|parseFloat|parseInt|"+"JSON|Math|"+"this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|"+"break|case|catch|continue|default|delete|do|else|finally|for|function|"+"if|in|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|"+"__parent__|__count__|escape|unescape|with|__proto__|"+"class|enum|extends|super|export|implements|private|public|interface|package|protected|static","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier");var t="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void";var n="[a-zA-Z\\$_¡-￿][a-zA-Z\\d\\$_¡-￿]*\\b";var i="\\\\(?:x[0-9a-fA-F]{2}|"+"u[0-9a-fA-F]{4}|"+"[0-2][0-7]{0,2}|"+"3[0-6][0-7]?|"+"37[0-7]?|"+"[4-7][0-7]?|"+".)";this.$rules={no_regex:[{token:"comment",regex:"\\/\\/",next:"line_comment"},r.getStartRule("doc-start"),{token:"comment",regex:/\/\*/,next:"comment"},{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0[xX][0-9a-fA-F]+\b/},{token:"constant.numeric",regex:/[+-]?\d+(?:(?:\.\d*)?(?:[eE][+-]?\d+)?)?\b/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+n+")(\\.)(prototype)(\\.)("+n+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+n+")(\\.)("+n+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+n+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+n+")(\\.)("+n+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+n+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+n+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:"(?:"+t+")\\b",next:"start"},{token:["punctuation.operator","support.function"],regex:/(\.)(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:["punctuation.operator","support.function.dom"],regex:/(\.)(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:["punctuation.operator","support.constant"],regex:/(\.)(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:["support.constant"],regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:e,regex:n},{token:"keyword.operator",regex:/--|\+\+|[!$%&*+\-~]|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\|\||\?\:|\*=|%=|\+=|\-=|&=|\^=/,next:"start"},{token:"punctuation.operator",regex:/\?|\:|\,|\;|\./,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"keyword.operator",regex:/\/=?/,next:"start"},{token:"comment",regex:/^#!.*$/}],start:[r.getStartRule("doc-start"),{token:"comment",regex:"\\/\\*",next:"comment_regex_allowed"},{token:"comment",regex:"\\/\\/",next:"line_comment_regex_allowed"},{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:n},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],comment_regex_allowed:[{token:"comment",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}],comment:[{token:"comment",regex:"\\*\\/",next:"no_regex"},{defaultToken:"comment"}],line_comment_regex_allowed:[{token:"comment",regex:"$|^",next:"start"},{defaultToken:"comment"}],line_comment:[{token:"comment",regex:"$|^",next:"no_regex"},{defaultToken:"comment"}],qqstring:[{token:"constant.language.escape",regex:i},{token:"string",regex:"\\\\$",next:"qqstring"},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:i},{token:"string",regex:"\\\\$",next:"qstring"},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]};this.embedRules(r,"doc-",[r.getEndRule("no_regex")])};i.inherits(a,o);t.JavaScriptHighlightRules=a});ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(e,t,n){"use strict";var s=e("../range").Range;var i=function(){};(function(){this.checkOutdent=function(e,t){if(!/^\s+$/.test(e))return false;return/^\s*\}/.test(t)};this.autoOutdent=function(e,t){var n=e.getLine(t);var i=n.match(/^(\s*\})/);if(!i)return 0;var r=i[1].length;var o=e.findMatchingBracket({row:t,column:r});if(!o||o.row==t)return 0;var a=this.$getIndent(e.getLine(o.row));e.replace(new s(t,0,t,r-1),a)};this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(i.prototype);t.MatchingBraceOutdent=i});ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var i=e("../../lib/oop");var r=e("../behaviour").Behaviour;var o=e("../../token_iterator").TokenIterator;var g=e("../../lib/lang");var a=["text","paren.rparen","punctuation.operator"];var s=["text","paren.rparen","punctuation.operator","comment"];var m;var l={};var v=function(e){var t=-1;if(e.multiSelect){t=e.selection.id;if(l.rangeCount!=e.multiSelect.rangeCount)l={rangeCount:e.multiSelect.rangeCount}}if(l[t])return m=l[t];m=l[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}};var b=function(){this.add("braces","insertion",function(e,t,n,i,r){var o=n.getCursorPosition();var a=i.doc.getLine(o.row);if(r=="{"){v(n);var s=n.getSelectionRange();var l=i.doc.getTextRange(s);if(l!==""&&l!=="{"&&n.getWrapBehavioursEnabled()){return{text:"{"+l+"}",selection:false}}else if(b.isSaneInsertion(n,i)){if(/[\]\}\)]/.test(a[o.column])||n.inMultiSelectMode){b.recordAutoInsert(n,i,"}");return{text:"{}",selection:[1,1]}}else{b.recordMaybeInsert(n,i,"{");return{text:"{",selection:[1,1]}}}}else if(r=="}"){v(n);var c=a.substring(o.column,o.column+1);if(c=="}"){var u=i.$findOpeningBracket("}",{column:o.column+1,row:o.row});if(u!==null&&b.isAutoInsertedClosing(o,a,r)){b.popAutoInsertedClosing();return{text:"",selection:[1,1]}}}}else if(r=="\n"||r=="\r\n"){v(n);var h="";if(b.isMaybeInsertedClosing(o,a)){h=g.stringRepeat("}",m.maybeInsertedBrackets);b.clearMaybeInsertedClosing()}var c=a.substring(o.column,o.column+1);if(c==="}"){var d=i.findMatchingBracket({row:o.row,column:o.column+1},"}");if(!d)return null;var f=this.$getIndent(i.getLine(d.row))}else if(h){var f=this.$getIndent(a)}else{b.clearMaybeInsertedClosing();return}var p=f+i.getTabString();return{text:"\n"+p+"\n"+f+h,selection:[1,p.length,1,p.length]}}else{b.clearMaybeInsertedClosing()}});this.add("braces","deletion",function(e,t,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&o=="{"){v(n);var a=i.doc.getLine(r.start.row);var s=a.substring(r.end.column,r.end.column+1);if(s=="}"){r.end.column++;return r}else{m.maybeInsertedBrackets--}}});this.add("parens","insertion",function(e,t,n,i,r){if(r=="("){v(n);var o=n.getSelectionRange();var a=i.doc.getTextRange(o);if(a!==""&&n.getWrapBehavioursEnabled()){return{text:"("+a+")",selection:false}}else if(b.isSaneInsertion(n,i)){b.recordAutoInsert(n,i,")");return{text:"()",selection:[1,1]}}}else if(r==")"){v(n);var s=n.getCursorPosition();var l=i.doc.getLine(s.row);var c=l.substring(s.column,s.column+1);if(c==")"){var u=i.$findOpeningBracket(")",{column:s.column+1,row:s.row});if(u!==null&&b.isAutoInsertedClosing(s,l,r)){b.popAutoInsertedClosing();return{text:"",selection:[1,1]}}}}});this.add("parens","deletion",function(e,t,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&o=="("){v(n);var a=i.doc.getLine(r.start.row);var s=a.substring(r.start.column+1,r.start.column+2);if(s==")"){r.end.column++;return r}}});this.add("brackets","insertion",function(e,t,n,i,r){if(r=="["){v(n);var o=n.getSelectionRange();var a=i.doc.getTextRange(o);if(a!==""&&n.getWrapBehavioursEnabled()){return{text:"["+a+"]",selection:false}}else if(b.isSaneInsertion(n,i)){b.recordAutoInsert(n,i,"]");return{text:"[]",selection:[1,1]}}}else if(r=="]"){v(n);var s=n.getCursorPosition();var l=i.doc.getLine(s.row);var c=l.substring(s.column,s.column+1);if(c=="]"){var u=i.$findOpeningBracket("]",{column:s.column+1,row:s.row});if(u!==null&&b.isAutoInsertedClosing(s,l,r)){b.popAutoInsertedClosing();return{text:"",selection:[1,1]}}}}});this.add("brackets","deletion",function(e,t,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&o=="["){v(n);var a=i.doc.getLine(r.start.row);var s=a.substring(r.start.column+1,r.start.column+2);if(s=="]"){r.end.column++;return r}}});this.add("string_dquotes","insertion",function(e,t,n,i,r){if(r=='"'||r=="'"){v(n);var o=r;var a=n.getSelectionRange();var s=i.doc.getTextRange(a);if(s!==""&&s!=="'"&&s!='"'&&n.getWrapBehavioursEnabled()){return{text:o+s+o,selection:false}}else{var l=n.getCursorPosition();var c=i.doc.getLine(l.row);var u=c.substring(l.column-1,l.column);if(u=="\\"){return null}var h=i.getTokens(a.start.row);var d=0,f;var p=-1;for(var g=0;g<h.length;g++){f=h[g];if(f.type=="string"){p=-1}else if(p<0){p=f.value.indexOf(o)}if(f.value.length+d>a.start.column){break}d+=h[g].value.length}if(!f||p<0&&f.type!=="comment"&&(f.type!=="string"||a.start.column!==f.value.length+d-1&&f.value.lastIndexOf(o)===f.value.length-1)){if(!b.isSaneInsertion(n,i))return;return{text:o+o,selection:[1,1]}}else if(f&&f.type==="string"){var m=c.substring(l.column,l.column+1);if(m==o){return{text:"",selection:[1,1]}}}}}});this.add("string_dquotes","deletion",function(e,t,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&(o=='"'||o=="'")){v(n);var a=i.doc.getLine(r.start.row);var s=a.substring(r.start.column+1,r.start.column+2);if(s==o){r.end.column++;return r}}})};b.isSaneInsertion=function(e,t){var n=e.getCursorPosition();var i=new o(t,n.row,n.column);if(!this.$matchTokenType(i.getCurrentToken()||"text",a)){var r=new o(t,n.row,n.column+1);if(!this.$matchTokenType(r.getCurrentToken()||"text",a))return false}i.stepForward();return i.getCurrentTokenRow()!==n.row||this.$matchTokenType(i.getCurrentToken()||"text",s)};b.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1};b.recordAutoInsert=function(e,t,n){var i=e.getCursorPosition();var r=t.doc.getLine(i.row);if(!this.isAutoInsertedClosing(i,r,m.autoInsertedLineEnd[0]))m.autoInsertedBrackets=0;m.autoInsertedRow=i.row;m.autoInsertedLineEnd=n+r.substr(i.column);m.autoInsertedBrackets++};b.recordMaybeInsert=function(e,t,n){var i=e.getCursorPosition();var r=t.doc.getLine(i.row);if(!this.isMaybeInsertedClosing(i,r))m.maybeInsertedBrackets=0;m.maybeInsertedRow=i.row;m.maybeInsertedLineStart=r.substr(0,i.column)+n;m.maybeInsertedLineEnd=r.substr(i.column);m.maybeInsertedBrackets++};b.isAutoInsertedClosing=function(e,t,n){return m.autoInsertedBrackets>0&&e.row===m.autoInsertedRow&&n===m.autoInsertedLineEnd[0]&&t.substr(e.column)===m.autoInsertedLineEnd};b.isMaybeInsertedClosing=function(e,t){return m.maybeInsertedBrackets>0&&e.row===m.maybeInsertedRow&&t.substr(e.column)===m.maybeInsertedLineEnd&&t.substr(0,e.column)==m.maybeInsertedLineStart};b.popAutoInsertedClosing=function(){m.autoInsertedLineEnd=m.autoInsertedLineEnd.substr(1);m.autoInsertedBrackets--};b.clearMaybeInsertedClosing=function(){if(m){m.maybeInsertedBrackets=0;m.maybeInsertedRow=-1}};i.inherits(b,r);t.CstyleBehaviour=b});ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(e,t,n){"use strict";var i=e("../../lib/oop");var u=e("../../range").Range;var r=e("./fold_mode").FoldMode;var o=t.FoldMode=function(e){if(e){this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start));this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end))}};i.inherits(o,r);(function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/;this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/;this.getFoldWidgetRange=function(e,t,n,i){var r=e.getLine(n);var o=r.match(this.foldingStartMarker);if(o){var a=o.index;if(o[1])return this.openingBracketBlock(e,o[1],n,a);var s=e.getCommentFoldRange(n,a+o[0].length,1);if(s&&!s.isMultiLine()){if(i){s=this.getSectionRange(e,n)}else if(t!="all")s=null}return s}if(t==="markbegin")return;var o=r.match(this.foldingStopMarker);if(o){var a=o.index+o[0].length;if(o[1])return this.closingBracketBlock(e,o[1],n,a);return e.getCommentFoldRange(n,a,-1)}};this.getSectionRange=function(e,t){var n=e.getLine(t);var i=n.search(/\S/);var r=t;var o=n.length;t=t+1;var a=t;var s=e.getLength();while(++t<s){n=e.getLine(t);var l=n.search(/\S/);if(l===-1)continue;if(i>l)break;var c=this.getFoldWidgetRange(e,"all",t);if(c){if(c.start.row<=r){break}else if(c.isMultiLine()){t=c.end.row}else if(i==l){break}}a=t}return new u(r,o,a,e.getLine(a).length)}}).call(o.prototype)});ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(e,t,n){"use strict";var i=e("../lib/oop");var r=e("./text").Mode;var o=e("./javascript_highlight_rules").JavaScriptHighlightRules;var a=e("./matching_brace_outdent").MatchingBraceOutdent;var s=e("../range").Range;var l=e("../worker/worker_client").WorkerClient;var c=e("./behaviour/cstyle").CstyleBehaviour;var u=e("./folding/cstyle").FoldMode;var h=function(){this.HighlightRules=o;this.$outdent=new a;this.$behaviour=new c;this.foldingRules=new u};i.inherits(h,r);(function(){this.lineCommentStart="//";this.blockComment={start:"/*",end:"*/"};this.getNextLineIndent=function(e,t,n){var i=this.$getIndent(t);var r=this.getTokenizer().getLineTokens(t,e);var o=r.tokens;var a=r.state;if(o.length&&o[o.length-1].type=="comment"){return i}if(e=="start"||e=="no_regex"){var s=t.match(/^.*(?:\bcase\b.*\:|[\{\(\[])\s*$/);if(s){i+=n}}else if(e=="doc-start"){if(a=="start"||a=="no_regex"){return""}var s=t.match(/^\s*(\/?)\*/);if(s){if(s[1]){i+=" "}i+="* "}}return i};this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)};this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)};this.createWorker=function(t){var e=new l(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");e.attachToDocument(t.getDocument());e.on("jslint",function(e){t.setAnnotations(e.data)});e.on("terminate",function(){t.clearAnnotations()});return e};this.$id="ace/mode/javascript"}).call(h.prototype);t.Mode=h});ace.define("ace/mode/css_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var i=e("../lib/oop");var r=e("../lib/lang");var o=e("./text_highlight_rules").TextHighlightRules;var a=t.supportType="animation-fill-mode|alignment-adjust|alignment-baseline|animation-delay|animation-direction|animation-duration|animation-iteration-count|animation-name|animation-play-state|animation-timing-function|animation|appearance|azimuth|backface-visibility|background-attachment|background-break|background-clip|background-color|background-image|background-origin|background-position|background-repeat|background-size|background|baseline-shift|binding|bleed|bookmark-label|bookmark-level|bookmark-state|bookmark-target|border-bottom|border-bottom-color|border-bottom-left-radius|border-bottom-right-radius|border-bottom-style|border-bottom-width|border-collapse|border-color|border-image|border-image-outset|border-image-repeat|border-image-slice|border-image-source|border-image-width|border-left|border-left-color|border-left-style|border-left-width|border-radius|border-right|border-right-color|border-right-style|border-right-width|border-spacing|border-style|border-top|border-top-color|border-top-left-radius|border-top-right-radius|border-top-style|border-top-width|border-width|border|bottom|box-align|box-decoration-break|box-direction|box-flex-group|box-flex|box-lines|box-ordinal-group|box-orient|box-pack|box-shadow|box-sizing|break-after|break-before|break-inside|caption-side|clear|clip|color-profile|color|column-count|column-fill|column-gap|column-rule|column-rule-color|column-rule-style|column-rule-width|column-span|column-width|columns|content|counter-increment|counter-reset|crop|cue-after|cue-before|cue|cursor|direction|display|dominant-baseline|drop-initial-after-adjust|drop-initial-after-align|drop-initial-before-adjust|drop-initial-before-align|drop-initial-size|drop-initial-value|elevation|empty-cells|fit|fit-position|float-offset|float|font-family|font-size|font-size-adjust|font-stretch|font-style|font-variant|font-weight|font|grid-columns|grid-rows|hanging-punctuation|height|hyphenate-after|hyphenate-before|hyphenate-character|hyphenate-lines|hyphenate-resource|hyphens|icon|image-orientation|image-rendering|image-resolution|inline-box-align|left|letter-spacing|line-height|line-stacking-ruby|line-stacking-shift|line-stacking-strategy|line-stacking|list-style-image|list-style-position|list-style-type|list-style|margin-bottom|margin-left|margin-right|margin-top|margin|mark-after|mark-before|mark|marks|marquee-direction|marquee-play-count|marquee-speed|marquee-style|max-height|max-width|min-height|min-width|move-to|nav-down|nav-index|nav-left|nav-right|nav-up|opacity|orphans|outline-color|outline-offset|outline-style|outline-width|outline|overflow-style|overflow-x|overflow-y|overflow|padding-bottom|padding-left|padding-right|padding-top|padding|page-break-after|page-break-before|page-break-inside|page-policy|page|pause-after|pause-before|pause|perspective-origin|perspective|phonemes|pitch-range|pitch|play-during|pointer-events|position|presentation-level|punctuation-trim|quotes|rendering-intent|resize|rest-after|rest-before|rest|richness|right|rotation-point|rotation|ruby-align|ruby-overhang|ruby-position|ruby-span|size|speak-header|speak-numeral|speak-punctuation|speak|speech-rate|stress|string-set|table-layout|target-name|target-new|target-position|target|text-align-last|text-align|text-decoration|text-emphasis|text-height|text-indent|text-justify|text-outline|text-shadow|text-transform|text-wrap|top|transform-origin|transform-style|transform|transition-delay|transition-duration|transition-property|transition-timing-function|transition|unicode-bidi|vertical-align|visibility|voice-balance|voice-duration|voice-family|voice-pitch-range|voice-pitch|voice-rate|voice-stress|voice-volume|volume|white-space-collapse|white-space|widows|width|word-break|word-spacing|word-wrap|z-index";var s=t.supportFunction="rgb|rgba|url|attr|counter|counters";var l=t.supportConstant="absolute|after-edge|after|all-scroll|all|alphabetic|always|antialiased|armenian|auto|avoid-column|avoid-page|avoid|balance|baseline|before-edge|before|below|bidi-override|block-line-height|block|bold|bolder|border-box|both|bottom|box|break-all|break-word|capitalize|caps-height|caption|center|central|char|circle|cjk-ideographic|clone|close-quote|col-resize|collapse|column|consider-shifts|contain|content-box|cover|crosshair|cubic-bezier|dashed|decimal-leading-zero|decimal|default|disabled|disc|disregard-shifts|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ease-in|ease-in-out|ease-out|ease|ellipsis|end|exclude-ruby|fill|fixed|georgian|glyphs|grid-height|groove|hand|hanging|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|icon|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|ideographic|inactive|include-ruby|inherit|initial|inline-block|inline-box|inline-line-height|inline-table|inline|inset|inside|inter-ideograph|inter-word|invert|italic|justify|katakana-iroha|katakana|keep-all|last|left|lighter|line-edge|line-through|line|linear|list-item|local|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|mathematical|max-height|max-size|medium|menu|message-box|middle|move|n-resize|ne-resize|newspaper|no-change|no-close-quote|no-drop|no-open-quote|no-repeat|none|normal|not-allowed|nowrap|nw-resize|oblique|open-quote|outset|outside|overline|padding-box|page|pointer|pre-line|pre-wrap|pre|preserve-3d|progress|relative|repeat-x|repeat-y|repeat|replaced|reset-size|ridge|right|round|row-resize|rtl|s-resize|scroll|se-resize|separate|slice|small-caps|small-caption|solid|space|square|start|static|status-bar|step-end|step-start|steps|stretch|strict|sub|super|sw-resize|table-caption|table-cell|table-column-group|table-column|table-footer-group|table-header-group|table-row-group|table-row|table|tb-rl|text-after-edge|text-before-edge|text-bottom|text-size|text-top|text|thick|thin|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|use-script|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|z-index|zero";var c=t.supportConstantColor="aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow";var u=t.supportConstantFonts="arial|century|comic|courier|garamond|georgia|helvetica|impact|lucida|symbol|system|tahoma|times|trebuchet|utopia|verdana|webdings|sans-serif|serif|monospace";var h=t.numRe="\\-?(?:(?:[0-9]+)|(?:[0-9]*\\.[0-9]+))";var d=t.pseudoElements="(\\:+)\\b(after|before|first-letter|first-line|moz-selection|selection)\\b";var f=t.pseudoClasses="(:)\\b(active|checked|disabled|empty|enabled|first-child|first-of-type|focus|hover|indeterminate|invalid|last-child|last-of-type|link|not|nth-child|nth-last-child|nth-last-of-type|nth-of-type|only-child|only-of-type|required|root|target|valid|visited)\\b";var p=function(){var e=this.createKeywordMapper({"support.function":s,"support.constant":l,"support.type":a,"support.constant.color":c,"support.constant.fonts":u},"text",true);this.$rules={start:[{token:"comment",regex:"\\/\\*",push:"comment"},{token:"paren.lparen",regex:"\\{",push:"ruleset"},{token:"string",regex:"@.*?{",push:"media"},{token:"keyword",regex:"#[a-z0-9-_]+"},{token:"variable",regex:"\\.[a-z0-9-_]+"},{token:"string",regex:":[a-z0-9-_]+"},{token:"constant",regex:"[a-z0-9-_]+"},{caseInsensitive:true}],media:[{token:"comment",regex:"\\/\\*",push:"comment"},{token:"paren.lparen",regex:"\\{",push:"ruleset"},{token:"string",regex:"\\}",next:"pop"},{token:"keyword",regex:"#[a-z0-9-_]+"},{token:"variable",regex:"\\.[a-z0-9-_]+"},{token:"string",regex:":[a-z0-9-_]+"},{token:"constant",regex:"[a-z0-9-_]+"},{caseInsensitive:true}],comment:[{token:"comment",regex:"\\*\\/",next:"pop"},{defaultToken:"comment"}],ruleset:[{token:"paren.rparen",regex:"\\}",next:"pop"},{token:"comment",regex:"\\/\\*",push:"comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:["constant.numeric","keyword"],regex:"("+h+")(ch|cm|deg|em|ex|fr|gd|grad|Hz|in|kHz|mm|ms|pc|pt|px|rad|rem|s|turn|vh|vm|vw|%)"},{token:"constant.numeric",regex:h},{token:"constant.numeric",regex:"#[a-f0-9]{6}"},{token:"constant.numeric",regex:"#[a-f0-9]{3}"},{token:["punctuation","entity.other.attribute-name.pseudo-element.css"],regex:d},{token:["punctuation","entity.other.attribute-name.pseudo-class.css"],regex:f},{token:["support.function","string","support.function"],regex:"(url\\()(.*)(\\))"},{token:e,regex:"\\-?[a-zA-Z_][a-zA-Z0-9_\\-]*"},{caseInsensitive:true}]};this.normalizeRules()};i.inherits(p,o);t.CssHighlightRules=p});ace.define("ace/mode/behaviour/css",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/mode/behaviour/cstyle","ace/token_iterator"],function(e,t,n){"use strict";var i=e("../../lib/oop");var r=e("../behaviour").Behaviour;var o=e("./cstyle").CstyleBehaviour;var h=e("../../token_iterator").TokenIterator;var a=function(){this.inherit(o);this.add("colon","insertion",function(e,t,n,i,r){if(r===":"){var o=n.getCursorPosition();var a=new h(i,o.row,o.column);var s=a.getCurrentToken();if(s&&s.value.match(/\s+/)){s=a.stepBackward()}if(s&&s.type==="support.type"){var l=i.doc.getLine(o.row);var c=l.substring(o.column,o.column+1);if(c===":"){return{text:"",selection:[1,1]}}if(!l.substring(o.column).match(/^\s*;/)){return{text:":;",selection:[1,1]}}}}});this.add("colon","deletion",function(e,t,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&o===":"){var a=n.getCursorPosition();var s=new h(i,a.row,a.column);var l=s.getCurrentToken();if(l&&l.value.match(/\s+/)){l=s.stepBackward()}if(l&&l.type==="support.type"){var c=i.doc.getLine(r.start.row);var u=c.substring(r.end.column,r.end.column+1);if(u===";"){r.end.column++;return r}}}});this.add("semicolon","insertion",function(e,t,n,i,r){if(r===";"){var o=n.getCursorPosition();var a=i.doc.getLine(o.row);var s=a.substring(o.column,o.column+1);if(s===";"){return{text:"",selection:[1,1]}}}})};i.inherits(a,o);t.CssBehaviour=a});ace.define("ace/mode/css",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/css_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/behaviour/css","ace/mode/folding/cstyle"],function(e,t,n){"use strict";var i=e("../lib/oop");var r=e("./text").Mode;var o=e("./css_highlight_rules").CssHighlightRules;var a=e("./matching_brace_outdent").MatchingBraceOutdent;var s=e("../worker/worker_client").WorkerClient;var l=e("./behaviour/css").CssBehaviour;var c=e("./folding/cstyle").FoldMode;var u=function(){this.HighlightRules=o;this.$outdent=new a;this.$behaviour=new l;this.foldingRules=new c};i.inherits(u,r);(function(){this.foldingRules="cStyle";this.blockComment={start:"/*",end:"*/"};this.getNextLineIndent=function(e,t,n){var i=this.$getIndent(t);var r=this.getTokenizer().getLineTokens(t,e).tokens;if(r.length&&r[r.length-1].type=="comment"){return i}var o=t.match(/^.*\{\s*$/);if(o){i+=n}return i};this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)};this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)};this.createWorker=function(t){var e=new s(["ace"],"ace/mode/css_worker","Worker");e.attachToDocument(t.getDocument());e.on("csslint",function(e){t.setAnnotations(e.data)});e.on("terminate",function(){t.clearAnnotations()});return e};this.$id="ace/mode/css"}).call(u.prototype);t.Mode=u});ace.define("ace/mode/xml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var i=e("../lib/oop");var r=e("./text_highlight_rules").TextHighlightRules;var o=function(e){this.$rules={start:[{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:["punctuation.xml-decl.xml","keyword.xml-decl.xml"],regex:"(<\\?)(xml)(?=[\\s])",next:"xml_decl",caseInsensitive:true},{token:["punctuation.instruction.xml","keyword.instruction.xml"],regex:"(<\\?)([-_a-zA-Z0-9]+)",next:"processing_instruction"},{token:"comment.xml",regex:"<\\!--",next:"comment"},{token:["xml-pe.doctype.xml","xml-pe.doctype.xml"],regex:"(<\\!)(DOCTYPE)(?=[\\s])",next:"doctype",caseInsensitive:true},{include:"tag"},{token:"text.end-tag-open.xml",regex:"</"},{token:"text.tag-open.xml",regex:"<"},{include:"reference"},{defaultToken:"text.xml"}],xml_decl:[{token:"entity.other.attribute-name.decl-attribute-name.xml",regex:"(?:[-_a-zA-Z0-9]+:)?[-_a-zA-Z0-9]+"},{token:"keyword.operator.decl-attribute-equals.xml",regex:"="},{include:"whitespace"},{include:"string"},{token:"punctuation.xml-decl.xml",regex:"\\?>",next:"start"}],processing_instruction:[{token:"punctuation.instruction.xml",regex:"\\?>",next:"start"},{defaultToken:"instruction.xml"}],doctype:[{include:"whitespace"},{include:"string"},{token:"xml-pe.doctype.xml",regex:">",next:"start"},{token:"xml-pe.xml",regex:"[-_a-zA-Z0-9:]+"},{token:"punctuation.int-subset",regex:"\\[",push:"int_subset"}],int_subset:[{token:"text.xml",regex:"\\s+"},{token:"punctuation.int-subset.xml",regex:"]",next:"pop"},{token:["punctuation.markup-decl.xml","keyword.markup-decl.xml"],regex:"(<\\!)([-_a-zA-Z0-9]+)",push:[{token:"text",regex:"\\s+"},{token:"punctuation.markup-decl.xml",regex:">",next:"pop"},{include:"string"}]}],cdata:[{token:"string.cdata.xml",regex:"\\]\\]>",next:"start"},{token:"text.xml",regex:"\\s+"},{token:"text.xml",regex:"(?:[^\\]]|\\](?!\\]>))+"}],comment:[{token:"comment.xml",regex:"--\x3e",next:"start"},{defaultToken:"comment.xml"}],reference:[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],attr_reference:[{token:"constant.language.escape.reference.attribute-value.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],tag:[{token:["meta.tag.punctuation.tag-open.xml","meta.tag.punctuation.end-tag-open.xml","meta.tag.tag-name.xml"],regex:"(?:(<)|(</))((?:[-_a-zA-Z0-9]+:)?[-_a-zA-Z0-9]+)",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start"}]}],tag_whitespace:[{token:"text.tag-whitespace.xml",regex:"\\s+"}],whitespace:[{token:"text.whitespace.xml",regex:"\\s+"}],string:[{token:"string.xml",regex:"'",push:[{token:"string.xml",regex:"'",next:"pop"},{defaultToken:"string.xml"}]},{token:"string.xml",regex:'"',push:[{token:"string.xml",regex:'"',next:"pop"},{defaultToken:"string.xml"}]}],attributes:[{token:"entity.other.attribute-name.xml",regex:"(?:[-_a-zA-Z0-9]+:)?[-_a-zA-Z0-9]+"},{token:"keyword.operator.attribute-equals.xml",regex:"="},{include:"tag_whitespace"},{include:"attribute_value"}],attribute_value:[{token:"string.attribute-value.xml",regex:"'",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]}]};if(this.constructor===o)this.normalizeRules()};(function(){this.embedTagRules=function(e,t,n){this.$rules.tag.unshift({token:["meta.tag.punctuation.tag-open.xml","meta.tag."+n+".tag-name.xml"],regex:"(<)("+n+"(?=\\s|>|$))",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:t+"start"}]});this.$rules[n+"-end"]=[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start",onMatch:function(e,t,n){n.splice(0);return this.token}}];this.embedRules(e,t,[{token:["meta.tag.punctuation.end-tag-open.xml","meta.tag."+n+".tag-name.xml"],regex:"(</)("+n+"(?=\\s|>|$))",next:n+"-end"},{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\["},{token:"string.cdata.xml",regex:"\\]\\]>"}])}}).call(r.prototype);i.inherits(o,r);t.XmlHighlightRules=o});ace.define("ace/mode/html_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/css_highlight_rules","ace/mode/javascript_highlight_rules","ace/mode/xml_highlight_rules"],function(e,t,n){"use strict";var i=e("../lib/oop");var r=e("../lib/lang");var o=e("./css_highlight_rules").CssHighlightRules;var a=e("./javascript_highlight_rules").JavaScriptHighlightRules;var s=e("./xml_highlight_rules").XmlHighlightRules;var l=r.createMap({a:"anchor",button:"form",form:"form",img:"image",input:"form",label:"form",option:"form",script:"script",select:"form",textarea:"form",style:"style",table:"table",tbody:"table",td:"table",tfoot:"table",th:"table",tr:"table"});var c=function(){s.call(this);this.addRules({attributes:[{include:"tag_whitespace"},{token:"entity.other.attribute-name.xml",regex:"[-_a-zA-Z0-9:]+"},{token:"keyword.operator.attribute-equals.xml",regex:"=",push:[{include:"tag_whitespace"},{token:"string.unquoted.attribute-value.html",regex:"[^<>='\"`\\s]+",next:"pop"},{token:"empty",regex:"",next:"pop"}]},{include:"attribute_value"}],tag:[{token:function(e,t){var n=l[t];return["meta.tag.punctuation."+(e=="<"?"":"end-")+"tag-open.xml","meta.tag"+(n?"."+n:"")+".tag-name.xml"]},regex:"(</?)([-_a-zA-Z0-9:]+)",next:"tag_stuff"}],tag_stuff:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start"}]});this.embedTagRules(o,"css-","style");this.embedTagRules(a,"js-","script");if(this.constructor===c)this.normalizeRules()};i.inherits(c,s);t.HtmlHighlightRules=c});ace.define("ace/mode/behaviour/xml",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator"],function(e,t,n){"use strict";var i=e("../../lib/oop");var r=e("../behaviour").Behaviour;var p=e("../../token_iterator").TokenIterator;function g(e,t){return e.type.lastIndexOf(t+".xml")>-1}var o=function(){this.add("string_dquotes","insertion",function(e,t,n,i,r){if(r=='"'||r=="'"){var o=r;var a=i.doc.getTextRange(n.getSelectionRange());if(a!==""&&a!=="'"&&a!='"'&&n.getWrapBehavioursEnabled()){return{text:o+a+o,selection:false}}var s=n.getCursorPosition();var l=i.doc.getLine(s.row);var c=l.substring(s.column,s.column+1);var u=new p(i,s.row,s.column);var h=u.getCurrentToken();if(c==o&&(g(h,"attribute-value")||g(h,"string"))){return{text:"",selection:[1,1]}}if(!h)h=u.stepBackward();if(!h)return;while(g(h,"tag-whitespace")||g(h,"whitespace")){h=u.stepBackward()}var d=!c||c.match(/\s/);if(g(h,"attribute-equals")&&(d||c==">")||g(h,"decl-attribute-equals")&&(d||c=="?")){return{text:o+o,selection:[1,1]}}}});this.add("string_dquotes","deletion",function(e,t,n,i,r){var o=i.doc.getTextRange(r);if(!r.isMultiLine()&&(o=='"'||o=="'")){var a=i.doc.getLine(r.start.row);var s=a.substring(r.start.column+1,r.start.column+2);if(s==o){r.end.column++;return r}}});this.add("autoclosing","insertion",function(e,t,n,i,r){if(r==">"){var o=n.getCursorPosition();var a=new p(i,o.row,o.column);var s=a.getCurrentToken()||a.stepBackward();if(!s||!(g(s,"tag-name")||g(s,"tag-whitespace")||g(s,"attribute-name")||g(s,"attribute-equals")||g(s,"attribute-value")))return;if(g(s,"reference.attribute-value"))return;if(g(s,"attribute-value")){var l=s.value.charAt(0);if(l=='"'||l=="'"){var c=s.value.charAt(s.value.length-1);var u=a.getCurrentTokenColumn()+s.value.length;if(u>o.column||u==o.column&&l!=c)return}}while(!g(s,"tag-name")){s=a.stepBackward()}var h=a.getCurrentTokenRow();var d=a.getCurrentTokenColumn();if(g(a.stepBackward(),"end-tag-open"))return;var f=s.value;if(h==o.row)f=f.substring(0,o.column-d);if(this.voidElements.hasOwnProperty(f.toLowerCase()))return;return{text:">"+"</"+f+">",selection:[1,1]}}});this.add("autoindent","insertion",function(e,t,n,i,r){if(r=="\n"){var o=n.getCursorPosition();var a=i.getLine(o.row);var s=a.substring(o.column,o.column+2);if(s=="</"){var l=this.$getIndent(a);var c=l+i.getTabString();return{text:"\n"+c+"\n"+l,selection:[1,c.length,1,c.length]}}}})};i.inherits(o,r);t.XmlBehaviour=o});ace.define("ace/mode/folding/mixed",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode"],function(e,t,n){"use strict";var i=e("../../lib/oop");var r=e("./fold_mode").FoldMode;var o=t.FoldMode=function(e,t){this.defaultMode=e;this.subModes=t};i.inherits(o,r);(function(){this.$getMode=function(e){if(typeof e!="string")e=e[0];for(var t in this.subModes){if(e.indexOf(t)===0)return this.subModes[t]}return null};this.$tryMode=function(e,t,n,i){var r=this.$getMode(e);return r?r.getFoldWidget(t,n,i):""};this.getFoldWidget=function(e,t,n){return this.$tryMode(e.getState(n-1),e,t,n)||this.$tryMode(e.getState(n),e,t,n)||this.defaultMode.getFoldWidget(e,t,n)};this.getFoldWidgetRange=function(e,t,n){var i=this.$getMode(e.getState(n-1));if(!i||!i.getFoldWidget(e,t,n))i=this.$getMode(e.getState(n));if(!i||!i.getFoldWidget(e,t,n))i=this.defaultMode;return i.getFoldWidgetRange(e,t,n)}}).call(o.prototype)});ace.define("ace/mode/folding/xml",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/range","ace/mode/folding/fold_mode","ace/token_iterator"],function(e,t,n){"use strict";var i=e("../../lib/oop");var r=e("../../lib/lang");var u=e("../../range").Range;var o=e("./fold_mode").FoldMode;var h=e("../../token_iterator").TokenIterator;var a=t.FoldMode=function(e,t){o.call(this);this.voidElements=i.mixin(e||{},t||{})};i.inherits(a,o);var s=function(){this.tagName="";this.closing=false;this.selfClosing=false;this.start={row:0,column:0};this.end={row:0,column:0}};function l(e,t){return e.type.lastIndexOf(t+".xml")>-1}(function(){this.getFoldWidget=function(e,t,n){var i=this._getFirstTagInLine(e,n);if(!i)return"";if(i.closing||!i.tagName&&i.selfClosing)return t=="markbeginend"?"end":"";if(!i.tagName||i.selfClosing||this.voidElements.hasOwnProperty(i.tagName.toLowerCase()))return"";if(this._findEndTagInLine(e,n,i.tagName,i.end.column))return"";return"start"};this._getFirstTagInLine=function(e,t){var n=e.getTokens(t);var i=new s;for(var r=0;r<n.length;r++){var o=n[r];if(l(o,"tag-open")){i.end.column=i.start.column+o.value.length;i.closing=l(o,"end-tag-open");o=n[++r];if(!o)return null;i.tagName=o.value;i.end.column+=o.value.length;for(r++;r<n.length;r++){o=n[r];i.end.column+=o.value.length;if(l(o,"tag-close")){i.selfClosing=o.value=="/>";break}}return i}else if(l(o,"tag-close")){i.selfClosing=o.value=="/>";return i}i.start.column+=o.value.length}return null};this._findEndTagInLine=function(e,t,n,i){var r=e.getTokens(t);var o=0;for(var a=0;a<r.length;a++){var s=r[a];o+=s.value.length;if(o<i)continue;if(l(s,"end-tag-open")){s=r[a+1];if(s&&s.value==n)return true}}return false};this._readTagForward=function(e){var t=e.getCurrentToken();if(!t)return null;var n=new s;do{if(l(t,"tag-open")){n.closing=l(t,"end-tag-open");n.start.row=e.getCurrentTokenRow();n.start.column=e.getCurrentTokenColumn()}else if(l(t,"tag-name")){n.tagName=t.value}else if(l(t,"tag-close")){n.selfClosing=t.value=="/>";n.end.row=e.getCurrentTokenRow();n.end.column=e.getCurrentTokenColumn()+t.value.length;e.stepForward();return n}}while(t=e.stepForward());return null};this._readTagBackward=function(e){var t=e.getCurrentToken();if(!t)return null;var n=new s;do{if(l(t,"tag-open")){n.closing=l(t,"end-tag-open");n.start.row=e.getCurrentTokenRow();n.start.column=e.getCurrentTokenColumn();e.stepBackward();return n}else if(l(t,"tag-name")){n.tagName=t.value}else if(l(t,"tag-close")){n.selfClosing=t.value=="/>";n.end.row=e.getCurrentTokenRow();n.end.column=e.getCurrentTokenColumn()+t.value.length}}while(t=e.stepBackward());return null};this._pop=function(e,t){while(e.length){var n=e[e.length-1];if(!t||n.tagName==t.tagName){return e.pop()}else if(this.voidElements.hasOwnProperty(t.tagName)){return}else if(this.voidElements.hasOwnProperty(n.tagName)){e.pop();continue}else{return null}}};this.getFoldWidgetRange=function(e,t,n){var i=this._getFirstTagInLine(e,n);if(!i)return null;var r=i.closing||i.selfClosing;var o=[];var a;if(!r){var s=new h(e,n,i.start.column);var l={row:n,column:i.start.column+i.tagName.length+2};while(a=this._readTagForward(s)){if(a.selfClosing){if(!o.length){a.start.column+=a.tagName.length+2;a.end.column-=2;return u.fromPoints(a.start,a.end)}else continue}if(a.closing){this._pop(o,a);if(o.length==0)return u.fromPoints(l,a.start)}else{o.push(a)}}}else{var s=new h(e,n,i.end.column);var c={row:n,column:i.start.column};while(a=this._readTagBackward(s)){if(a.selfClosing){if(!o.length){a.start.column+=a.tagName.length+2;a.end.column-=2;return u.fromPoints(a.start,a.end)}else continue}if(!a.closing){this._pop(o,a);if(o.length==0){a.start.column+=a.tagName.length+2;return u.fromPoints(a.start,c)}}else{o.push(a)}}}}}).call(a.prototype)});ace.define("ace/mode/folding/html",["require","exports","module","ace/lib/oop","ace/mode/folding/mixed","ace/mode/folding/xml","ace/mode/folding/cstyle"],function(e,t,n){"use strict";var i=e("../../lib/oop");var r=e("./mixed").FoldMode;var o=e("./xml").FoldMode;var a=e("./cstyle").FoldMode;var s=t.FoldMode=function(e,t){r.call(this,new o(e,t),{"js-":new a,"css-":new a})};i.inherits(s,r)});ace.define("ace/mode/html_completions",["require","exports","module","ace/token_iterator"],function(e,t,n){"use strict";var r=e("../token_iterator").TokenIterator;var i=["accesskey","class","contenteditable","contextmenu","dir","draggable","dropzone","hidden","id","inert","itemid","itemprop","itemref","itemscope","itemtype","lang","spellcheck","style","tabindex","title","translate"];var o=["onabort","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextmenu","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onscroll","onseeked","onseeking","onselect","onshow","onstalled","onsubmit","onsuspend","ontimeupdate","onvolumechange","onwaiting"];var a=i.concat(o);var s={html:["manifest"],head:[],title:[],base:["href","target"],link:["href","hreflang","rel","media","type","sizes"],meta:["http-equiv","name","content","charset"],style:["type","media","scoped"],script:["charset","type","src","defer","async"],noscript:["href"],body:["onafterprint","onbeforeprint","onbeforeunload","onhashchange","onmessage","onoffline","onpopstate","onredo","onresize","onstorage","onundo","onunload"],section:[],nav:[],article:["pubdate"],aside:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],footer:[],address:[],main:[],p:[],hr:[],pre:[],blockquote:["cite"],ol:["start","reversed"],ul:[],li:["value"],dl:[],dt:[],dd:[],figure:[],figcaption:[],div:[],a:["href","target","ping","rel","media","hreflang","type"],em:[],strong:[],small:[],s:[],cite:[],q:["cite"],dfn:[],abbr:[],data:[],time:["datetime"],code:[],var:[],samp:[],kbd:[],sub:[],sup:[],i:[],b:[],u:[],mark:[],ruby:[],rt:[],rp:[],bdi:[],bdo:[],span:[],br:[],wbr:[],ins:["cite","datetime"],del:["cite","datetime"],img:["alt","src","height","width","usemap","ismap"],iframe:["name","src","height","width","sandbox","seamless"],embed:["src","height","width","type"],object:["param","data","type","height","width","usemap","name","form","classid"],param:["name","value"],video:["src","autobuffer","autoplay","loop","controls","width","height","poster"],audio:["src","autobuffer","autoplay","loop","controls"],source:["src","type","media"],track:["kind","src","srclang","label","default"],canvas:["width","height"],map:["name"],area:["shape","coords","href","hreflang","alt","target","media","rel","ping","type"],svg:[],math:[],table:["summary"],caption:[],colgroup:["span"],col:["span"],tbody:[],thead:[],tfoot:[],tr:[],td:["headers","rowspan","colspan"],th:["headers","rowspan","colspan","scope"],form:["accept-charset","action","autocomplete","enctype","method","name","novalidate","target"],fieldset:["disabled","form","name"],legend:[],label:["form","for"],input:["type","accept","alt","autocomplete","checked","disabled","form","formaction","formenctype","formmethod","formnovalidate","formtarget","height","list","max","maxlength","min","multiple","pattern","placeholder","readonly","required","size","src","step","width","files","value"],button:["autofocus","disabled","form","formaction","formenctype","formmethod","formnovalidate","formtarget","name","value","type"],select:["autofocus","disabled","form","multiple","name","size"],datalist:[],optgroup:["disabled","label"],option:["disabled","selected","label","value"],textarea:["autofocus","disabled","form","maxlength","name","placeholder","readonly","required","rows","cols","wrap"],keygen:["autofocus","challenge","disabled","form","keytype","name"],output:["for","form","name"],progress:["value","max"],meter:["value","min","max","low","high","optimum"],details:["open"],summary:[],command:["type","label","icon","disabled","checked","radiogroup","command"],menu:["type","label"],dialog:["open"]};var l=Object.keys(s);function c(e,t){return e.type.lastIndexOf(t+".xml")>-1}function u(e,t){var n=new r(e,t.row,t.column);var i=n.getCurrentToken();while(i&&!c(i,"tag-name")){i=n.stepBackward()}if(i)return i.value}var h=function(){};(function(){this.getCompletions=function(e,t,n,i){var r=t.getTokenAt(n.row,n.column);if(!r)return[];if(c(r,"tag-name")||c(r,"tag-open")||c(r,"end-tag-open"))return this.getTagCompletions(e,t,n,i);if(c(r,"tag-whitespace")||c(r,"attribute-name"))return this.getAttributeCompetions(e,t,n,i);return[]};this.getTagCompletions=function(e,t,n,i){return l.map(function(e){return{value:e,meta:"tag",score:Number.MAX_VALUE}})};this.getAttributeCompetions=function(e,t,n,i){var r=u(t,n);if(!r)return[];var o=a;if(r in s){o=o.concat(s[r])}return o.map(function(e){return{caption:e,snippet:e+'="$0"',meta:"attribute",score:Number.MAX_VALUE}})}}).call(h.prototype);t.HtmlCompletions=h});ace.define("ace/mode/html",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text","ace/mode/javascript","ace/mode/css","ace/mode/html_highlight_rules","ace/mode/behaviour/xml","ace/mode/folding/html","ace/mode/html_completions","ace/worker/worker_client"],function(e,t,n){"use strict";var i=e("../lib/oop");var r=e("../lib/lang");var o=e("./text").Mode;var a=e("./javascript").Mode;var s=e("./css").Mode;var l=e("./html_highlight_rules").HtmlHighlightRules;var c=e("./behaviour/xml").XmlBehaviour;var u=e("./folding/html").FoldMode;var h=e("./html_completions").HtmlCompletions;var d=e("../worker/worker_client").WorkerClient;var f=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];var p=["li","dt","dd","p","rt","rp","optgroup","option","colgroup","td","th"];var g=function(e){this.fragmentContext=e&&e.fragmentContext;this.HighlightRules=l;this.$behaviour=new c;this.$completer=new h;this.createModeDelegates({"js-":a,"css-":s});this.foldingRules=new u(this.voidElements,r.arrayToMap(p))};i.inherits(g,o);(function(){this.blockComment={start:"\x3c!--",end:"--\x3e"};this.voidElements=r.arrayToMap(f);this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)};this.checkOutdent=function(e,t,n){return false};this.getCompletions=function(e,t,n,i){return this.$completer.getCompletions(e,t,n,i)};this.createWorker=function(t){if(this.constructor!=g)return;var e=new d(["ace"],"ace/mode/html_worker","Worker");e.attachToDocument(t.getDocument());if(this.fragmentContext)e.call("setOptions",[{context:this.fragmentContext}]);e.on("error",function(e){t.setAnnotations(e.data)});e.on("terminate",function(){t.clearAnnotations()});return e};this.$id="ace/mode/html"}).call(g.prototype);t.Mode=g});ace.define("ace/ext/static_highlight",["require","exports","module","ace/edit_session","ace/layer/text","ace/config","ace/lib/dom"],function(e,t,n){"use strict";var h=e("../edit_session").EditSession;var d=e("../layer/text").Text;var f=".ace_static_highlight {font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', 'Droid Sans Mono', monospace;font-size: 12px;}.ace_static_highlight .ace_gutter {width: 25px !important;display: block;float: left;text-align: right;padding: 0 3px 0 0;margin-right: 3px;position: static !important;}.ace_static_highlight .ace_line { clear: both; }.ace_static_highlight .ace_gutter-cell {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;}.ace_static_highlight .ace_gutter-cell:before {content: counter(ace_line, decimal);counter-increment: ace_line;}.ace_static_highlight {counter-reset: ace_line;}";var u=e("../config");var p=e("../lib/dom");var g=function(a,e,s){var t=a.className.match(/lang-(\w+)/);var n=e.mode||t&&"ace/mode/"+t[1];if(!n)return false;var i=e.theme||"ace/theme/textmate";var r="";var l=[];if(a.firstElementChild){var o=0;for(var c=0;c<a.childNodes.length;c++){var u=a.childNodes[c];if(u.nodeType==3){o+=u.data.length;r+=u.data}else{l.push(o,u)}}}else{r=p.getInnerText(a);if(e.trim)r=r.trim()}g.render(r,n,i,e.firstLineNumber,!e.showGutter,function(e){p.importCssString(e.css,"ace_highlight");a.innerHTML=e.html;var t=a.firstChild.firstChild;for(var n=0;n<l.length;n+=2){var i=e.session.doc.indexToPosition(l[n]);var r=l[n+1];var o=t.children[i.row];o&&o.appendChild(r)}s&&s()})};g.render=function(t,n,i,r,o,a){var s=1;var l=h.prototype.$modes;if(typeof i=="string"){s++;u.loadModule(["theme",i],function(e){i=e;--s||c()})}if(typeof n=="string"){s++;u.loadModule(["mode",n],function(e){if(!l[n])l[n]=new e.Mode;n=l[n];--s||c()})}function c(){var e=g.renderSync(t,n,i,r,o);return a?a(e):e}return--s||c()};g.renderSync=function(e,t,n,i,r){i=parseInt(i||1,10);var o=new h("");o.setUseWorker(false);o.setMode(t);var a=new d(document.createElement("div"));a.setSession(o);a.config={characterWidth:10,lineHeight:20};o.setValue(e);var s=[];var l=o.getLength();for(var c=0;c<l;c++){s.push("<div class='ace_line'>");if(!r)s.push("<span class='ace_gutter ace_gutter-cell' unselectable='on'>"+"</span>");a.$renderLine(s,c,true,false);s.push("\n</div>")}var u="<div class='"+n.cssClass+"'>"+"<div class='ace_static_highlight' style='counter-reset:ace_line "+(i-1)+"'>"+s.join("")+"</div>"+"</div>";a.destroy();return{css:f+n.cssText,html:u,session:o}};n.exports=g;n.exports.highlight=g});(function(){ace.require(["ace/ext/static_highlight"],function(){})})();ace.define("ace/mode/sql_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t,n){"use strict";var i=e("../lib/oop");var r=e("./text_highlight_rules").TextHighlightRules;var o=function(){var e="select|insert|update|delete|from|where|and|or|group|by|order|limit|offset|having|as|case|"+"when|else|end|type|left|right|join|on|outer|desc|asc";var t="true|false|null";var n="count|min|max|avg|sum|rank|now|coalesce";var i=this.createKeywordMapper({"support.function":n,keyword:e,"constant.language":t},"identifier",true);this.$rules={start:[{token:"comment",regex:"--.*$"},{token:"comment",start:"/\\*",end:"\\*/"},{token:"string",regex:'".*?"'},{token:"string",regex:"'.*?'"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:i,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\/|\\/\\/|%|<@>|@>|<@|&|\\^|~|<|>|<=|=>|==|!=|<>|="},{token:"paren.lparen",regex:"[\\(]"},{token:"paren.rparen",regex:"[\\)]"},{token:"text",regex:"\\s+"}]};this.normalizeRules()};i.inherits(o,r);t.SqlHighlightRules=o});ace.define("ace/mode/sql",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/sql_highlight_rules","ace/range"],function(e,t,n){"use strict";var i=e("../lib/oop");var r=e("./text").Mode;var o=e("./sql_highlight_rules").SqlHighlightRules;var a=e("../range").Range;var s=function(){this.HighlightRules=o};i.inherits(s,r);(function(){this.lineCommentStart="--";this.$id="ace/mode/sql"}).call(s.prototype);t.Mode=s});ace.define("ace/ext/searchbox",["require","exports","module","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/keyboard/hash_handler","ace/lib/keys"],function(e,t,n){"use strict";var r=e("../lib/dom");var i=e("../lib/lang");var a=e("../lib/event");var o=".ace_search {background-color: #ddd;border: 1px solid #cbcbcb;border-top: 0 none;max-width: 297px;overflow: hidden;margin: 0;padding: 4px;padding-right: 6px;padding-bottom: 0;position: absolute;top: 0px;z-index: 99;white-space: normal;}.ace_search.left {border-left: 0 none;border-radius: 0px 0px 5px 0px;left: 0;}.ace_search.right {border-radius: 0px 0px 0px 5px;border-right: 0 none;right: 0;}.ace_search_form, .ace_replace_form {border-radius: 3px;border: 1px solid #cbcbcb;float: left;margin-bottom: 4px;overflow: hidden;}.ace_search_form.ace_nomatch {outline: 1px solid red;}.ace_search_field {background-color: white;border-right: 1px solid #cbcbcb;border: 0 none;-webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;display: block;float: left;height: 22px;outline: 0;padding: 0 7px;width: 214px;margin: 0;}.ace_searchbtn,.ace_replacebtn {background: #fff;border: 0 none;border-left: 1px solid #dcdcdc;cursor: pointer;display: block;float: left;height: 22px;margin: 0;padding: 0;position: relative;}.ace_searchbtn:last-child,.ace_replacebtn:last-child {border-top-right-radius: 3px;border-bottom-right-radius: 3px;}.ace_searchbtn:disabled {background: none;cursor: default;}.ace_searchbtn {background-position: 50% 50%;background-repeat: no-repeat;width: 27px;}.ace_searchbtn.prev {background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADFJREFUeNpiSU1NZUAC/6E0I0yACYskCpsJiySKIiY0SUZk40FyTEgCjGgKwTRAgAEAQJUIPCE+qfkAAAAASUVORK5CYII=);    }.ace_searchbtn.next {background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADRJREFUeNpiTE1NZQCC/0DMyIAKwGJMUAYDEo3M/s+EpvM/mkKwCQxYjIeLMaELoLMBAgwAU7UJObTKsvAAAAAASUVORK5CYII=);    }.ace_searchbtn_close {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;border-radius: 50%;border: 0 none;color: #656565;cursor: pointer;display: block;float: right;font-family: Arial;font-size: 16px;height: 14px;line-height: 16px;margin: 5px 1px 9px 5px;padding: 0;text-align: center;width: 14px;}.ace_searchbtn_close:hover {background-color: #656565;background-position: 50% 100%;color: white;}.ace_replacebtn.prev {width: 54px}.ace_replacebtn.next {width: 27px}.ace_button {margin-left: 2px;cursor: pointer;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;overflow: hidden;opacity: 0.7;border: 1px solid rgba(100,100,100,0.23);padding: 1px;-moz-box-sizing: border-box;box-sizing:    border-box;color: black;}.ace_button:hover {background-color: #eee;opacity:1;}.ace_button:active {background-color: #ddd;}.ace_button.checked {border-color: #3399ff;opacity:1;}.ace_search_options{margin-bottom: 3px;text-align: right;-webkit-user-select: none;-moz-user-select: none;-o-user-select: none;-ms-user-select: none;user-select: none;}";var s=e("../keyboard/hash_handler").HashHandler;var l=e("../lib/keys");r.importCssString(o,"ace_searchbox");var c='<div class="ace_search right">    <button type="button" action="hide" class="ace_searchbtn_close"></button>    <div class="ace_search_form">        <input class="ace_search_field" placeholder="Search for" spellcheck="false"></input>        <button type="button" action="findNext" class="ace_searchbtn next"></button>        <button type="button" action="findPrev" class="ace_searchbtn prev"></button>    </div>    <div class="ace_replace_form">        <input class="ace_search_field" placeholder="Replace with" spellcheck="false"></input>        <button type="button" action="replaceAndFindNext" class="ace_replacebtn">Replace</button>        <button type="button" action="replaceAll" class="ace_replacebtn">All</button>    </div>    <div class="ace_search_options">        <span action="toggleRegexpMode" class="ace_button" title="RegExp Search">.*</span>        <span action="toggleCaseSensitive" class="ace_button" title="CaseSensitive Search">Aa</span>        <span action="toggleWholeWords" class="ace_button" title="Whole Word Search">\\b</span>    </div></div>'.replace(/>\s+/g,">");var u=function(e,t,n){var i=r.createElement("div");i.innerHTML=c;this.element=i.firstChild;this.$init();this.setEditor(e)};(function(){this.setEditor=function(e){e.searchBox=this;e.container.appendChild(this.element);this.editor=e};this.$initElements=function(e){this.searchBox=e.querySelector(".ace_search_form");this.replaceBox=e.querySelector(".ace_replace_form");this.searchOptions=e.querySelector(".ace_search_options");this.regExpOption=e.querySelector("[action=toggleRegexpMode]");this.caseSensitiveOption=e.querySelector("[action=toggleCaseSensitive]");this.wholeWordOption=e.querySelector("[action=toggleWholeWords]");this.searchInput=this.searchBox.querySelector(".ace_search_field");this.replaceInput=this.replaceBox.querySelector(".ace_search_field")};this.$init=function(){var e=this.element;this.$initElements(e);var o=this;a.addListener(e,"mousedown",function(e){setTimeout(function(){o.activeInput.focus()},0);a.stopPropagation(e)});a.addListener(e,"click",function(e){var t=e.target||e.srcElement;var n=t.getAttribute("action");if(n&&o[n])o[n]();else if(o.$searchBarKb.commands[n])o.$searchBarKb.commands[n].exec(o);a.stopPropagation(e)});a.addCommandKeyListener(e,function(e,t,n){var i=l.keyCodeToString(n);var r=o.$searchBarKb.findKeyCommand(t,i);if(r&&r.exec){r.exec(o);a.stopEvent(e)}});this.$onChange=i.delayedCall(function(){o.find(false,false)});a.addListener(this.searchInput,"input",function(){o.$onChange.schedule(20)});a.addListener(this.searchInput,"focus",function(){o.activeInput=o.searchInput;o.searchInput.value&&o.highlight()});a.addListener(this.replaceInput,"focus",function(){o.activeInput=o.replaceInput;o.searchInput.value&&o.highlight()})};this.$closeSearchBarKb=new s([{bindKey:"Esc",name:"closeSearchBar",exec:function(e){e.searchBox.hide()}}]);this.$searchBarKb=new s;this.$searchBarKb.bindKeys({"Ctrl-f|Command-f|Ctrl-H|Command-Option-F":function(e){var t=e.isReplace=!e.isReplace;e.replaceBox.style.display=t?"":"none";e[t?"replaceInput":"searchInput"].focus()},"Ctrl-G|Command-G":function(e){e.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(e){e.findPrev()},esc:function(e){setTimeout(function(){e.hide()})},Return:function(e){if(e.activeInput==e.replaceInput)e.replace();e.findNext()},"Shift-Return":function(e){if(e.activeInput==e.replaceInput)e.replace();e.findPrev()},Tab:function(e){(e.activeInput==e.replaceInput?e.searchInput:e.replaceInput).focus()}});this.$searchBarKb.addCommands([{name:"toggleRegexpMode",bindKey:{win:"Alt-R|Alt-/",mac:"Ctrl-Alt-R|Ctrl-Alt-/"},exec:function(e){e.regExpOption.checked=!e.regExpOption.checked;e.$syncOptions()}},{name:"toggleCaseSensitive",bindKey:{win:"Alt-C|Alt-I",mac:"Ctrl-Alt-R|Ctrl-Alt-I"},exec:function(e){e.caseSensitiveOption.checked=!e.caseSensitiveOption.checked;e.$syncOptions()}},{name:"toggleWholeWords",bindKey:{win:"Alt-B|Alt-W",mac:"Ctrl-Alt-B|Ctrl-Alt-W"},exec:function(e){e.wholeWordOption.checked=!e.wholeWordOption.checked;e.$syncOptions()}}]);this.$syncOptions=function(){r.setCssClass(this.regExpOption,"checked",this.regExpOption.checked);r.setCssClass(this.wholeWordOption,"checked",this.wholeWordOption.checked);r.setCssClass(this.caseSensitiveOption,"checked",this.caseSensitiveOption.checked);this.find(false,false)};this.highlight=function(e){this.editor.session.highlight(e||this.editor.$search.$options.re);this.editor.renderer.updateBackMarkers()};this.find=function(e,t){var n=this.editor.find(this.searchInput.value,{skipCurrent:e,backwards:t,wrap:true,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked});var i=!n&&this.searchInput.value;r.setCssClass(this.searchBox,"ace_nomatch",i);this.editor._emit("findSearchBox",{match:!i});this.highlight()};this.findNext=function(){this.find(true,false)};this.findPrev=function(){this.find(true,true)};this.replace=function(){if(!this.editor.getReadOnly())this.editor.replace(this.replaceInput.value)};this.replaceAndFindNext=function(){if(!this.editor.getReadOnly()){this.editor.replace(this.replaceInput.value);this.findNext()}};this.replaceAll=function(){if(!this.editor.getReadOnly())this.editor.replaceAll(this.replaceInput.value)};this.hide=function(){this.element.style.display="none";this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb);this.editor.focus()};this.show=function(e,t){this.element.style.display="";this.replaceBox.style.display=t?"":"none";this.isReplace=t;if(e)this.searchInput.value=e;this.searchInput.focus();this.searchInput.select();this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb)}}).call(u.prototype);t.SearchBox=u;t.Search=function(e,t){var n=e.searchBox||new u(e);n.show(e.session.getTextRange(),t)}});(function(){ace.require(["ace/ext/searchbox"],function(){})})();ace.define("ace/snippets",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/anchor","ace/keyboard/hash_handler","ace/tokenizer","ace/lib/dom","ace/editor"],function(e,a,t){"use strict";var n=e("./lib/oop");var i=e("./lib/event_emitter").EventEmitter;var c=e("./lib/lang");var u=e("./range").Range;var r=e("./anchor").Anchor;var o=e("./keyboard/hash_handler").HashHandler;var s=e("./tokenizer").Tokenizer;var p=u.comparePoints;var l=function(){this.snippetMap={};this.snippetNameMap={}};(function(){n.implement(this,i);this.getTokenizer=function(){function r(e,_,t){e=e.substr(1);if(/^\d+$/.test(e)&&!t.inFormatString)return[{tabstopId:parseInt(e,10)}];return[{text:e}]}function e(e){return"(?:[^\\\\"+e+"]|\\\\.)"}l.$tokenizer=new s({start:[{regex:/:/,onMatch:function(e,t,n){if(n.length&&n[0].expectIf){n[0].expectIf=false;n[0].elseBranch=n[0];return[n[0]]}return":"}},{regex:/\\./,onMatch:function(e,t,n){var i=e[1];if(i=="}"&&n.length){e=i}else if("`$\\".indexOf(i)!=-1){e=i}else if(n.inFormatString){if(i=="n")e="\n";else if(i=="t")e="\n";else if("ulULE".indexOf(i)!=-1){e={changeCase:i,local:i>"a"}}}return[e]}},{regex:/}/,onMatch:function(e,t,n){return[n.length?n.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:r},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(e,t,n){var i=r(e.substr(1),t,n);n.unshift(i[0]);return i},next:"snippetVar"},{regex:/\n/,token:"newline",merge:false}],snippetVar:[{regex:"\\|"+e("\\|")+"*\\|",onMatch:function(e,t,n){n[0].choices=e.slice(1,-1).split(",")},next:"start"},{regex:"/("+e("/")+"+)/(?:("+e("/")+"*)/)(\\w*):?",onMatch:function(e,t,n){var i=n[0];i.fmtString=e;e=this.splitRegex.exec(e);i.guard=e[1];i.fmt=e[2];i.flag=e[3];return""},next:"start"},{regex:"`"+e("`")+"*`",onMatch:function(e,t,n){n[0].code=e.splice(1,-1);return""},next:"start"},{regex:"\\?",onMatch:function(e,t,n){if(n[0])n[0].expectIf=true},next:"start"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:"/("+e("/")+"+)/",token:"regex"},{regex:"",onMatch:function(e,t,n){n.inFormatString=true},next:"start"}]});l.prototype.getTokenizer=function(){return l.$tokenizer};return l.$tokenizer};this.tokenizeTmSnippet=function(e,t){return this.getTokenizer().getLineTokens(e,t).tokens.map(function(e){return e.value||e})};this.$getDefaultValue=function(e,t){if(/^[A-Z]\d+$/.test(t)){var n=t.substr(1);return(this.variables[t[0]+"__"]||{})[n]}if(/^\d+$/.test(t)){return(this.variables.__||{})[t]}t=t.replace(/^TM_/,"");if(!e)return;var i=e.session;switch(t){case"CURRENT_WORD":var r=i.getWordRange();case"SELECTION":case"SELECTED_TEXT":return i.getTextRange(r);case"CURRENT_LINE":return i.getLine(e.getCursorPosition().row);case"PREV_LINE":return i.getLine(e.getCursorPosition().row-1);case"LINE_INDEX":return e.getCursorPosition().column;case"LINE_NUMBER":return e.getCursorPosition().row+1;case"SOFT_TABS":return i.getUseSoftTabs()?"YES":"NO";case"TAB_SIZE":return i.getTabSize();case"FILENAME":case"FILEPATH":return"";case"FULLNAME":return"Ace"}};this.variables={};this.getVariableValue=function(e,t){if(this.variables.hasOwnProperty(t))return this.variables[t](e,t)||"";return this.$getDefaultValue(e,t)||""};this.tmStrFormat=function(e,t,o){var n=t.flag||"";var i=t.guard;i=new RegExp(i,n.replace(/[^gi]/,""));var a=this.tokenizeTmSnippet(t.fmt,"formatString");var s=this;var r=e.replace(i,function(){s.variables.__=arguments;var e=s.resolveVariables(a,o);var t="E";for(var n=0;n<e.length;n++){var i=e[n];if(typeof i=="object"){e[n]="";if(i.changeCase&&i.local){var r=e[n+1];if(r&&typeof r=="string"){if(i.changeCase=="u")e[n]=r[0].toUpperCase();else e[n]=r[0].toLowerCase();e[n+1]=r.substr(1)}}else if(i.changeCase){t=i.changeCase}}else if(t=="U"){e[n]=i.toUpperCase()}else if(t=="L"){e[n]=i.toLowerCase()}}return e.join("")});this.variables.__=null;return r};this.resolveVariables=function(n,e){var t=[];for(var i=0;i<n.length;i++){var r=n[i];if(typeof r=="string"){t.push(r)}else if(typeof r!="object"){continue}else if(r.skip){a(r)}else if(r.processed<i){continue}else if(r.text){var o=this.getVariableValue(e,r.text);if(o&&r.fmtString)o=this.tmStrFormat(o,r);r.processed=i;if(r.expectIf==null){if(o){t.push(o);a(r)}}else{if(o){r.skip=r.elseBranch}else a(r)}}else if(r.tabstopId!=null){t.push(r)}else if(r.changeCase!=null){t.push(r)}}function a(e){var t=n.indexOf(e,i+1);if(t!=-1)i=t}return t};this.insertSnippetForSelection=function(e,t){var n=e.getCursorPosition();var i=e.session.getLine(n.row);var r=e.session.getTabString();var o=i.match(/^\s*/)[0];if(n.column<o.length)o=o.slice(0,n.column);var s=this.tokenizeTmSnippet(t);s=this.resolveVariables(s,e);s=s.map(function(e){if(e=="\n")return e+o;if(typeof e=="string")return e.replace(/\t/g,r);return e});var l=[];s.forEach(function(e,t){if(typeof e!="object")return;var n=e.tabstopId;var i=l[n];if(!i){i=l[n]=[];i.index=n;i.value=""}if(i.indexOf(e)!==-1)return;i.push(e);var r=s.indexOf(e,t+1);if(r===-1)return;var o=s.slice(t+1,r);var a=o.some(function(e){return typeof e==="object"});if(a&&!i.value){i.value=o}else if(o.length&&(!i.value||typeof i.value!=="string")){i.value=o.join("")}});l.forEach(function(e){e.length=0});var a={};function c(e){var t=[];for(var n=0;n<e.length;n++){var i=e[n];if(typeof i=="object"){if(a[i.tabstopId])continue;var r=e.lastIndexOf(i,n-1);i=t[r]||{tabstopId:i.tabstopId}}t[n]=i}return t}for(var u=0;u<s.length;u++){var h=s[u];if(typeof h!="object")continue;var d=h.tabstopId;var f=s.indexOf(h,u+1);if(a[d]){if(a[d]===h)a[d]=null;continue}var p=l[d];var g=typeof p.value=="string"?[p.value]:c(p.value);g.unshift(u+1,Math.max(0,f-u));g.push(h);a[d]=h;s.splice.apply(s,g);if(p.indexOf(h)===-1)p.push(h)}var m=0,v=0;var b="";s.forEach(function(e){if(typeof e==="string"){if(e[0]==="\n"){v=e.length-1;m++}else v+=e.length;b+=e}else{if(!e.start)e.start={row:m,column:v};else e.end={row:m,column:v}}});var w=e.getSelectionRange();var y=e.session.replace(w,b);var C=new A(e);var E=e.inVirtualSelectionMode&&e.selection.index;C.addTabstops(l,w.start,y,E)};this.insertSnippet=function(e,t){var n=this;if(e.inVirtualSelectionMode)return n.insertSnippetForSelection(e,t);e.forEachSelection(function(){n.insertSnippetForSelection(e,t)},null,{keepOrder:true});if(e.tabstopManager)e.tabstopManager.tabNext()};this.$getScope=function(e){var t=e.session.$mode.$id||"";t=t.split("/").pop();if(t==="html"||t==="php"){if(t==="php"&&!e.session.$mode.inlinePhp)t="html";var n=e.getCursorPosition();var i=e.session.getState(n.row);if(typeof i==="object"){i=i[0]}if(i.substring){if(i.substring(0,3)=="js-")t="javascript";else if(i.substring(0,4)=="css-")t="css";else if(i.substring(0,4)=="php-")t="php"}}return t};this.getActiveScopes=function(e){var t=this.$getScope(e);var n=[t];var i=this.snippetMap;if(i[t]&&i[t].includeScopes){n.push.apply(n,i[t].includeScopes)}n.push("_");return n};this.expandWithTab=function(e,t){var n=this;var i=e.forEachSelection(function(){return n.expandSnippetForSelection(e,t)},null,{keepOrder:true});if(i&&e.tabstopManager)e.tabstopManager.tabNext();return i};this.expandSnippetForSelection=function(e,t){var n=e.getCursorPosition();var i=e.session.getLine(n.row);var r=i.substring(0,n.column);var o=i.substr(n.column);var a=this.snippetMap;var s;this.getActiveScopes(e).some(function(e){var t=a[e];if(t)s=this.findMatchingSnippet(t,r,o);return!!s},this);if(!s)return false;if(t&&t.dryRun)return true;e.session.doc.removeInLine(n.row,n.column-s.replaceBefore.length,n.column+s.replaceAfter.length);this.variables.M__=s.matchBefore;this.variables.T__=s.matchAfter;this.insertSnippetForSelection(e,s.content);this.variables.M__=this.variables.T__=null;return true};this.findMatchingSnippet=function(e,t,n){for(var i=e.length;i--;){var r=e[i];if(r.startRe&&!r.startRe.test(t))continue;if(r.endRe&&!r.endRe.test(n))continue;if(!r.startRe&&!r.endRe)continue;r.matchBefore=r.startRe?r.startRe.exec(t):[""];r.matchAfter=r.endRe?r.endRe.exec(n):[""];r.replaceBefore=r.triggerRe?r.triggerRe.exec(t)[0]:"";r.replaceAfter=r.endTriggerRe?r.endTriggerRe.exec(n)[0]:"";return r}};this.snippetMap={};this.snippetNameMap={};this.register=function(e,i){var r=this.snippetMap;var o=this.snippetNameMap;var a=this;function s(e){if(e&&!/^\^?\(.*\)\$?$|^\\b$/.test(e))e="(?:"+e+")";return e||""}function l(e,t,n){e=s(e);t=s(t);if(n){e=t+e;if(e&&e[e.length-1]!="$")e=e+"$"}else{e=e+t;if(e&&e[0]!="^")e="^"+e}return new RegExp(e)}function t(e){if(!e.scope)e.scope=i||"_";i=e.scope;if(!r[i]){r[i]=[];o[i]={}}var t=o[i];if(e.name){var n=t[e.name];if(n)a.unregister(n);t[e.name]=e}r[i].push(e);if(e.tabTrigger&&!e.trigger){if(!e.guard&&/^\w/.test(e.tabTrigger))e.guard="\\b";e.trigger=c.escapeRegExp(e.tabTrigger)}e.startRe=l(e.trigger,e.guard,true);e.triggerRe=new RegExp(e.trigger,"",true);e.endRe=l(e.endTrigger,e.endGuard,true);e.endTriggerRe=new RegExp(e.endTrigger,"",true)}if(e.content)t(e);else if(Array.isArray(e))e.forEach(t);this._signal("registerSnippets",{scope:i})};this.unregister=function(e,r){var o=this.snippetMap;var a=this.snippetNameMap;function t(e){var t=a[e.scope||r];if(t&&t[e.name]){delete t[e.name];var n=o[e.scope||r];var i=n&&n.indexOf(e);if(i>=0)n.splice(i,1)}}if(e.content)t(e);else if(Array.isArray(e))e.forEach(t)};this.parseSnippetFile=function(e){e=e.replace(/\r/g,"");var t=[],n={};var i=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;var r;while(r=i.exec(e)){if(r[1]){try{n=JSON.parse(r[1]);t.push(n)}catch(e){}}if(r[4]){n.content=r[4].replace(/^\t/gm,"");t.push(n);n={}}else{var o=r[2],a=r[3];if(o=="regex"){var s=/\/((?:[^\/\\]|\\.)*)|$/g;n.guard=s.exec(a)[1];n.trigger=s.exec(a)[1];n.endTrigger=s.exec(a)[1];n.endGuard=s.exec(a)[1]}else if(o=="snippet"){n.tabTrigger=a.match(/^\S*/)[0];if(!n.name)n.name=a}else{n[o]=a}}}return t};this.getSnippetByName=function(n,e){var i=this.snippetNameMap;var r;this.getActiveScopes(e).some(function(e){var t=i[e];if(t)r=t[n];return!!r},this);return r}}).call(l.prototype);var A=function(e){if(e.tabstopManager)return e.tabstopManager;e.tabstopManager=this;this.$onChange=this.onChange.bind(this);this.$onChangeSelection=c.delayedCall(this.onChangeSelection.bind(this)).schedule;this.$onChangeSession=this.onChangeSession.bind(this);this.$onAfterExec=this.onAfterExec.bind(this);this.attach(e)};(function(){this.attach=function(e){this.index=0;this.ranges=[];this.tabstops=[];this.$openTabstops=null;this.selectedTabstop=null;this.editor=e;this.editor.on("change",this.$onChange);this.editor.on("changeSelection",this.$onChangeSelection);this.editor.on("changeSession",this.$onChangeSession);this.editor.commands.on("afterExec",this.$onAfterExec);this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)};this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this);this.ranges=null;this.tabstops=null;this.selectedTabstop=null;this.editor.removeListener("change",this.$onChange);this.editor.removeListener("changeSelection",this.$onChangeSelection);this.editor.removeListener("changeSession",this.$onChangeSession);this.editor.commands.removeListener("afterExec",this.$onAfterExec);this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);this.editor.tabstopManager=null;this.editor=null};this.onChange=function(e){var t=e.data.range;var n=e.data.action[0]=="r";var i=t.start;var r=t.end;var o=i.row;var a=r.row;var s=a-o;var l=r.column-i.column;if(n){s=-s;l=-l}if(!this.$inChange&&n){var c=this.selectedTabstop;var u=c&&!c.some(function(e){return p(e.start,i)<=0&&p(e.end,r)>=0});if(u)return this.detach()}var h=this.ranges;for(var d=0;d<h.length;d++){var f=h[d];if(f.end.row<i.row)continue;if(n&&p(i,f.start)<0&&p(r,f.end)>0){this.removeRange(f);d--;continue}if(f.start.row==o&&f.start.column>i.column)f.start.column+=l;if(f.end.row==o&&f.end.column>=i.column)f.end.column+=l;if(f.start.row>=o)f.start.row+=s;if(f.end.row>=o)f.end.row+=s;if(p(f.start,f.end)>0)this.removeRange(f)}if(!h.length)this.detach()};this.updateLinkedFields=function(){var e=this.selectedTabstop;if(!e||!e.hasLinkedRanges)return;this.$inChange=true;var t=this.editor.session;var n=t.getTextRange(e.firstNonLinked);for(var i=e.length;i--;){var r=e[i];if(!r.linked)continue;var o=a.snippetManager.tmStrFormat(n,r.original);t.replace(r,o)}this.$inChange=false};this.onAfterExec=function(e){if(e.command&&!e.command.readOnly)this.updateLinkedFields()};this.onChangeSelection=function(){if(!this.editor)return;var e=this.editor.selection.lead;var t=this.editor.selection.anchor;var n=this.editor.selection.isEmpty();for(var i=this.ranges.length;i--;){if(this.ranges[i].linked)continue;var r=this.ranges[i].contains(e.row,e.column);var o=n||this.ranges[i].contains(t.row,t.column);if(r&&o)return}this.detach()};this.onChangeSession=function(){this.detach()};this.tabNext=function(e){var t=this.tabstops.length;var n=this.index+(e||1);n=Math.min(Math.max(n,1),t);if(n==t)n=0;this.selectTabstop(n);if(n===0)this.detach()};this.selectTabstop=function(e){this.$openTabstops=null;var t=this.tabstops[this.index];if(t)this.addTabstopMarkers(t);this.index=e;t=this.tabstops[this.index];if(!t||!t.length)return;this.selectedTabstop=t;if(!this.editor.inVirtualSelectionMode){var n=this.editor.multiSelect;n.toSingleRange(t.firstNonLinked.clone());for(var i=t.length;i--;){if(t.hasLinkedRanges&&t[i].linked)continue;n.addRange(t[i].clone(),true)}if(n.ranges[0])n.addRange(n.ranges[0].clone())}else{this.editor.selection.setRange(t.firstNonLinked)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)};this.addTabstops=function(e,a,t){if(!this.$openTabstops)this.$openTabstops=[];if(!e[0]){var n=u.fromPoints(t,t);f(n.start,a);f(n.end,a);e[0]=[n];e[0].index=0}var i=this.index;var s=[i+1,0];var l=this.ranges;e.forEach(function(e,t){var n=this.$openTabstops[t]||e;for(var i=e.length;i--;){var r=e[i];var o=u.fromPoints(r.start,r.end||r.start);d(o.start,a);d(o.end,a);o.original=r;o.tabstop=n;l.push(o);if(n!=e)n.unshift(o);else n[i]=o;if(r.fmtString){o.linked=true;n.hasLinkedRanges=true}else if(!n.firstNonLinked)n.firstNonLinked=o}if(!n.firstNonLinked)n.hasLinkedRanges=false;if(n===e){s.push(n);this.$openTabstops[t]=n}this.addTabstopMarkers(n)},this);if(s.length>2){if(this.tabstops.length)s.push(s.splice(2,1)[0]);this.tabstops.splice.apply(this.tabstops,s)}};this.addTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){if(!e.markerId)e.markerId=t.addMarker(e,"ace_snippet-marker","text")})};this.removeTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){t.removeMarker(e.markerId);e.markerId=null})};this.removeRange=function(e){var t=e.tabstop.indexOf(e);e.tabstop.splice(t,1);t=this.ranges.indexOf(e);this.ranges.splice(t,1);this.editor.session.removeMarker(e.markerId);if(!e.tabstop.length){t=this.tabstops.indexOf(e.tabstop);if(t!=-1)this.tabstops.splice(t,1);if(!this.tabstops.length)this.detach()}};this.keyboardHandler=new o;this.keyboardHandler.bindKeys({Tab:function(e){if(a.snippetManager&&a.snippetManager.expandWithTab(e)){return}e.tabstopManager.tabNext(1)},"Shift-Tab":function(e){e.tabstopManager.tabNext(-1)},Esc:function(e){e.tabstopManager.detach()},Return:function(e){return false}})}).call(A.prototype);var h={};h.onChange=r.prototype.onChange;h.setPosition=function(e,t){this.pos.row=e;this.pos.column=t};h.update=function(e,t,n){this.$insertRight=n;this.pos=e;this.onChange(t)};var d=function(e,t){if(e.row==0)e.column+=t.column;e.row+=t.row};var f=function(e,t){if(e.row==t.row)e.column-=t.column;e.row-=t.row};e("./lib/dom").importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}");a.snippetManager=new l;var g=e("./editor").Editor;(function(){this.insertSnippet=function(e,t){return a.snippetManager.insertSnippet(this,e,t)};this.expandSnippet=function(e){return a.snippetManager.expandWithTab(this,e)}}).call(g.prototype)});ace.define("ace/autocomplete/popup",["require","exports","module","ace/edit_session","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(e,t,n){"use strict";var i=e("../edit_session").EditSession;var r=e("../virtual_renderer").VirtualRenderer;var o=e("../editor").Editor;var l=e("../range").Range;var c=e("../lib/event");var d=e("../lib/lang");var f=e("../lib/dom");var p=function(e){var t=new r(e);t.$maxLines=4;var n=new o(t);n.setHighlightActiveLine(false);n.setShowPrintMargin(false);n.renderer.setShowGutter(false);n.renderer.setHighlightGutterLine(false);n.$mouseHandler.$focusWaitTimout=0;return n};var a=function(e){var t=f.createElement("div");var u=new p(t);if(e)e.appendChild(t);t.style.display="none";u.renderer.content.style.cursor="default";u.renderer.setStyle("ace_autocomplete");u.setOption("displayIndentGuides",false);var n=function(){};u.focus=n;u.$isFocused=true;u.renderer.$cursorLayer.restartTimer=n;u.renderer.$cursorLayer.element.style.opacity=0;u.renderer.$maxLines=8;u.renderer.$keepTextAreaAtCursor=false;u.setHighlightActiveLine(false);u.session.highlight("");u.session.$searchHighlight.clazz="ace_highlight-marker";u.on("mousedown",function(e){var t=e.getDocumentPosition();u.selection.moveToPosition(t);r.start.row=r.end.row=t.row;e.stop()});var h;var i=new l(-1,0,-1,Infinity);var r=new l(-1,0,-1,Infinity);r.id=u.session.addMarker(r,"ace_active-line","fullLine");u.setSelectOnHover=function(e){if(!e){i.id=u.session.addMarker(i,"ace_line-hover","fullLine")}else if(i.id){u.session.removeMarker(i.id);i.id=null}};u.setSelectOnHover(false);u.on("mousemove",function(e){if(!h){h=e;return}if(h.x==e.x&&h.y==e.y){return}h=e;h.scrollTop=u.renderer.scrollTop;var t=h.getDocumentPosition().row;if(i.start.row!=t){if(!i.id)u.setRow(t);a(t)}});u.renderer.on("beforeRender",function(){if(h&&i.start.row!=-1){h.$pos=null;var e=h.getDocumentPosition().row;if(!i.id)u.setRow(e);a(e,true)}});u.renderer.on("afterRender",function(){var e=u.getRow();var t=u.renderer.$textLayer;var n=t.element.childNodes[e-t.config.firstRow];if(n==t.selectedNode)return;if(t.selectedNode)f.removeCssClass(t.selectedNode,"ace_selected");t.selectedNode=n;if(n)f.addCssClass(n,"ace_selected")});var o=function(){a(-1)};var a=function(e,t){if(e!==i.start.row){i.start.row=i.end.row=e;if(!t)u.session._emit("changeBackMarker");u._emit("changeHoverMarker")}};u.getHoveredRow=function(){return i.start.row};c.addListener(u.container,"mouseout",o);u.on("hide",o);u.on("changeSelection",o);u.session.doc.getLength=function(){return u.data.length};u.session.doc.getLine=function(e){var t=u.data[e];if(typeof t=="string")return t;return t&&t.value||""};var s=u.session.bgTokenizer;s.$tokenizeRow=function(e){var t=u.data[e];var n=[];if(!t)return n;if(typeof t=="string")t={value:t};if(!t.caption)t.caption=t.value;var i=-1;var r,o;for(var e=0;e<t.caption.length;e++){o=t.caption[e];r=t.matchMask&1<<e?1:0;if(i!==r){n.push({type:t.className||""+(r?"completion-highlight":""),value:o});i=r}else{n[n.length-1].value+=o}}if(t.meta){var a=u.renderer.$size.scrollerWidth/u.renderer.layerConfig.characterWidth;if(t.meta.length+t.caption.length<a-2)n.push({type:"rightAlignedText",value:t.meta})}return n};s.$updateOnChange=n;s.start=n;u.session.$computeWidth=function(){return this.screenWidth=0};u.isOpen=false;u.isTopdown=false;u.data=[];u.setData=function(e){u.data=e||[];u.setValue(d.stringRepeat("\n",e.length),-1);u.setRow(0)};u.getData=function(e){return u.data[e]};u.getRow=function(){return r.start.row};u.setRow=function(e){e=Math.max(-1,Math.min(this.data.length,e));if(r.start.row!=e){u.selection.clearSelection();r.start.row=r.end.row=e||0;u.session._emit("changeBackMarker");u.moveCursorTo(e||0,0);if(u.isOpen)u._signal("select")}};u.on("changeSelection",function(){if(u.isOpen)u.setRow(u.selection.lead.row)});u.hide=function(){this.container.style.display="none";this._signal("hide");u.isOpen=false};u.show=function(e,t,n){var i=this.container;var r=window.innerHeight;var o=window.innerWidth;var a=this.renderer;var s=a.$maxLines*t*1.4;var l=e.top+this.$borderSize;if(l+s>r-t&&!n){i.style.top="";i.style.bottom=r-l+"px";u.isTopdown=false}else{l+=t;i.style.top=l+"px";i.style.bottom="";u.isTopdown=true}i.style.display="";this.renderer.$textLayer.checkForSizeChanges();var c=e.left;if(c+i.offsetWidth>o)c=o-i.offsetWidth;i.style.left=c+"px";this._signal("show");h=null;u.isOpen=true};u.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize};u.$imageSize=0;u.$borderSize=1;return u};f.importCssString(".ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);}.ace_editor.ace_autocomplete .ace_line-hover {    position: absolute;    z-index: 2;}.ace_editor.ace_autocomplete .ace_scroller {   background: none;   border: none;   box-shadow: none;}.ace_rightAlignedText {    color: gray;    display: inline-block;    position: absolute;    right: 4px;    text-align: right;    z-index: -1;}.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #000;    text-shadow: 0 0 0.01em;}.ace_editor.ace_autocomplete {    width: 280px;    z-index: 200000;    background: #fbfbfb;    color: #444;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;}");t.AcePopup=a});ace.define("ace/autocomplete/util",["require","exports","module"],function(e,t,n){"use strict";t.parForEach=function(e,t,n){var i=0;var r=e.length;if(r===0)n();for(var o=0;o<r;o++){t(e[o],function(e,t){i++;if(i===r)n(e,t)})}};var o=/[a-zA-Z_0-9\$\-\u00A2-\uFFFF]/;t.retrievePrecedingIdentifier=function(e,t,n){n=n||o;var i=[];for(var r=t-1;r>=0;r--){if(n.test(e[r]))i.push(e[r]);else break}return i.reverse().join("")};t.retrieveFollowingIdentifier=function(e,t,n){n=n||o;var i=[];for(var r=t;r<e.length;r++){if(n.test(e[r]))i.push(e[r]);else break}return i}});ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/event","ace/lib/lang","ace/snippets"],function(e,t,n){"use strict";var i=e("./keyboard/hash_handler").HashHandler;var r=e("./autocomplete/popup").AcePopup;var c=e("./autocomplete/util");var o=e("./lib/event");var a=e("./lib/lang");var s=e("./snippets").snippetManager;var l=function(){this.autoInsert=true;this.autoSelect=true;this.keyboardHandler=new i;this.keyboardHandler.bindKeys(this.commands);this.blurListener=this.blurListener.bind(this);this.changeListener=this.changeListener.bind(this);this.mousedownListener=this.mousedownListener.bind(this);this.mousewheelListener=this.mousewheelListener.bind(this);this.changeTimer=a.delayedCall(function(){this.updateCompletions(true)}.bind(this))};(function(){this.gatherCompletionsId=0;this.$init=function(){this.popup=new r(document.body||document.documentElement);this.popup.on("click",function(e){this.insertMatch();e.stop()}.bind(this));this.popup.focus=this.editor.focus.bind(this.editor)};this.openPopup=function(e,t,n){if(!this.popup)this.$init();this.popup.setData(this.completions.filtered);var i=e.renderer;this.popup.setRow(this.autoSelect?0:-1);if(!n){this.popup.setTheme(e.getTheme());this.popup.setFontSize(e.getFontSize());var r=i.layerConfig.lineHeight;var o=i.$cursorLayer.getPixelPosition(this.base,true);o.left-=this.popup.getTextLeftOffset();var a=e.container.getBoundingClientRect();o.top+=a.top-i.layerConfig.offset;o.left+=a.left-e.renderer.scrollLeft;o.left+=i.$gutterLayer.gutterWidth;this.popup.show(o,r)}};this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);this.editor.off("changeSelection",this.changeListener);this.editor.off("blur",this.blurListener);this.editor.off("mousedown",this.mousedownListener);this.editor.off("mousewheel",this.mousewheelListener);this.changeTimer.cancel();if(this.popup&&this.popup.isOpen){this.gatherCompletionsId=this.gatherCompletionsId+1}if(this.popup)this.popup.hide();this.activated=false;this.completions=this.base=null};this.changeListener=function(e){var t=this.editor.selection.lead;if(t.row!=this.base.row||t.column<this.base.column){this.detach()}if(this.activated)this.changeTimer.schedule();else this.detach()};this.blurListener=function(){var e=document.activeElement;if(e!=this.editor.textInput.getElement()&&e.parentNode!=this.popup.container)this.detach()};this.mousedownListener=function(e){this.detach()};this.mousewheelListener=function(e){this.detach()};this.goTo=function(e){var t=this.popup.getRow();var n=this.popup.session.getLength()-1;switch(e){case"up":t=t<=0?n:t-1;break;case"down":t=t>=n?-1:t+1;break;case"start":t=0;break;case"end":t=n;break}this.popup.setRow(t)};this.insertMatch=function(e){if(!e)e=this.popup.getData(this.popup.getRow());if(!e)return false;if(e.completer&&e.completer.insertMatch){e.completer.insertMatch(this.editor)}else{if(this.completions.filterText){var t=this.editor.selection.getAllRanges();for(var n=0,i;i=t[n];n++){i.start.column-=this.completions.filterText.length;this.editor.session.remove(i)}}if(e.snippet)s.insertSnippet(this.editor,e.snippet);else this.editor.execCommand("insertstring",e.value||e)}this.detach()};this.commands={Up:function(e){e.completer.goTo("up")},Down:function(e){e.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(e){e.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(e){e.completer.goTo("end")},Esc:function(e){e.completer.detach()},Space:function(e){e.completer.detach();e.insert(" ")},Return:function(e){return e.completer.insertMatch()},"Shift-Return":function(e){e.completer.insertMatch(true)},Tab:function(e){var t=e.completer.insertMatch();if(!t&&!e.tabstopManager)e.completer.goTo("down");else return t},PageUp:function(e){e.completer.popup.gotoPageUp()},PageDown:function(e){e.completer.popup.gotoPageDown()}};this.gatherCompletions=function(r,o){var a=r.getSession();var n=r.getCursorPosition();var e=a.getLine(n.row);var i=c.retrievePrecedingIdentifier(e,n.column);this.base=r.getCursorPosition();this.base.column-=i.length;var s=[];var l=r.completers.length;r.completers.forEach(function(e,t){e.getCompletions(r,a,n,i,function(e,t){if(!e)s=s.concat(t);var n=r.getCursorPosition();var i=a.getLine(n.row);o(null,{prefix:c.retrievePrecedingIdentifier(i,n.column,t[0]&&t[0].identifierRegex),matches:s,finished:--l===0})})});return true};this.showPopup=function(e){if(this.editor)this.detach();this.activated=true;this.editor=e;if(e.completer!=this){if(e.completer)e.completer.detach();e.completer=this}e.keyBinding.addKeyboardHandler(this.keyboardHandler);e.on("changeSelection",this.changeListener);e.on("blur",this.blurListener);e.on("mousedown",this.mousedownListener);e.on("mousewheel",this.mousewheelListener);this.updateCompletions()};this.updateCompletions=function(a){if(a&&this.base&&this.completions){var e=this.editor.getCursorPosition();var t=this.editor.session.getTextRange({start:this.base,end:e});if(t==this.completions.filterText)return;this.completions.setFilter(t);if(!this.completions.filtered.length)return this.detach();if(this.completions.filtered.length==1&&this.completions.filtered[0].value==t&&!this.completions.filtered[0].snippet)return this.detach();this.openPopup(this.editor,t,a);return}var s=this.gatherCompletionsId;this.gatherCompletions(this.editor,function(e,t){var n=function(){if(!t.finished)return;return this.detach()}.bind(this);var i=t.prefix;var r=t&&t.matches;if(!r||!r.length)return n();if(i.indexOf(t.prefix)!==0||s!=this.gatherCompletionsId)return;this.completions=new u(r);this.completions.setFilter(i);var o=this.completions.filtered;if(!o.length)return n();if(o.length==1&&o[0].value==i&&!o[0].snippet)return n();if(this.autoInsert&&o.length==1)return this.insertMatch(o[0]);this.openPopup(this.editor,i,a)}.bind(this))};this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()}}).call(l.prototype);l.startCommand={name:"startAutocomplete",exec:function(e){if(!e.completer)e.completer=new l;e.completer.autoInsert=e.completer.autoSelect=true;e.completer.showPopup(e);e.completer.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var u=function(e,t,n){this.all=e;this.filtered=e;this.filterText=t||""};(function(){this.setFilter=function(e){if(e.length>this.filterText&&e.lastIndexOf(this.filterText,0)===0)var t=this.filtered;else var t=this.all;this.filterText=e;t=this.filterCompletions(t,this.filterText);t=t.sort(function(e,t){return t.exactMatch-e.exactMatch||t.score-e.score});var n=null;t=t.filter(function(e){var t=e.value||e.caption||e.snippet;if(t===n)return false;n=t;return true});this.filtered=t};this.filterCompletions=function(e,t){var n=[];var i=t.toUpperCase();var r=t.toLowerCase();e:for(var o=0,a;a=e[o];o++){var s=a.value||a.caption||a.snippet;if(!s)continue;var l=-1;var c=0;var u=0;var h,d;for(var f=0;f<t.length;f++){var p=s.indexOf(r[f],l+1);var g=s.indexOf(i[f],l+1);h=p>=0?g<0||p<g?p:g:g;if(h<0)continue e;d=h-l-1;if(d>0){if(l===-1)u+=10;u+=d}c=c|1<<h;l=h}a.matchMask=c;a.exactMatch=u?0:1;a.score=(a.score||0)-u;n.push(a)}return n}}).call(u.prototype);t.Autocomplete=l;t.FilteredList=u});ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(e,t,n){var i=e("../range").Range;var l=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function c(e,t){var n=e.getTextRange(i.fromPoints({row:0,column:0},t));return n.split(l).length-1}function s(e,t){var r=c(e,t);var o=e.getValue().split(l);var a=Object.create(null);var s=o[r];o.forEach(function(e,t){if(!e||e===s)return;var n=Math.abs(r-t);var i=o.length-n;if(a[e]){a[e]=Math.max(i,a[e])}else{a[e]=i}});return a}t.getCompletions=function(e,t,n,i,r){var o=s(t,n,i);var a=Object.keys(o);r(null,a.map(function(e){return{name:e,value:e,score:o[e],meta:"local"}}))}});ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(e,t,n){"use strict";var s=e("../snippets").snippetManager;var o=e("../autocomplete").Autocomplete;var i=e("../config");var r=e("../autocomplete/util");var a=e("../autocomplete/text_completer");var l={getCompletions:function(e,t,n,i,r){var o=e.session.getState(n.row);var a=t.$mode.getCompletions(o,t,n,i);r(null,a)}};var c={getCompletions:function(e,t,n,i,r){var o=s.snippetMap;var a=[];s.getActiveScopes(e).forEach(function(e){var t=o[e]||[];for(var n=t.length;n--;){var i=t[n];var r=i.name||i.tabTrigger;if(!r)continue;a.push({caption:r,snippet:i.content,meta:i.tabTrigger&&!i.name?i.tabTrigger+"⇥ ":"snippet"})}},this);r(null,a)}};var u=[c,a,l];t.addCompleter=function(e){u.push(e)};t.textCompleter=a;t.keyWordCompleter=l;t.snippetCompleter=c;var h={name:"expandSnippet",exec:function(e){var t=s.expandWithTab(e);if(!t)e.execCommand("indent")},bindKey:"Tab"};var d=function(e,t){f(t.session.$mode)};var f=function(e){var t=e.$id;if(!s.files)s.files={};p(t);if(e.modes)e.modes.forEach(f)};var p=function(t){if(!t||s.files[t])return;var e=t.replace("mode","snippets");s.files[t]={};i.loadModule(e,function(e){if(e){s.files[t]=e;if(!e.snippets&&e.snippetText)e.snippets=s.parseSnippetFile(e.snippetText);s.register(e.snippets||[],e.scope);if(e.includeScopes){s.snippetMap[e.scope].includeScopes=e.includeScopes;e.includeScopes.forEach(function(e){p("ace/mode/"+e)})}}})};function g(e){var t=e.getCursorPosition();var n=e.session.getLine(t.row);var i=r.retrievePrecedingIdentifier(n,t.column);e.completers.forEach(function(e){if(e.identifierRegexps){e.identifierRegexps.forEach(function(e){if(!i&&e)i=r.retrievePrecedingIdentifier(n,t.column,e)})}});return i}var m=function(e){var t=e.editor;var n=e.args||"";var i=t.completer&&t.completer.activated;if(e.command.name==="backspace"){if(i&&!g(t))t.completer.detach()}else if(e.command.name==="insertstring"){var r=g(t);if(r&&!i){if(!t.completer){t.completer=new o}t.completer.autoSelect=false;t.completer.autoInsert=false;t.completer.showPopup(t)}else if(!r&&i){t.completer.detach()}}};var v=e("../editor").Editor;e("../config").defineOptions(v.prototype,"editor",{enableBasicAutocompletion:{set:function(e){if(e){if(!this.completers)this.completers=Array.isArray(e)?e:u;this.commands.addCommand(o.startCommand)}else{this.commands.removeCommand(o.startCommand)}},value:false},enableLiveAutocompletion:{set:function(e){if(e){if(!this.completers)this.completers=Array.isArray(e)?e:u;this.commands.on("afterExec",m)}else{this.commands.removeListener("afterExec",m)}},value:false},enableSnippets:{set:function(e){if(e){this.commands.addCommand(h);this.on("changeMode",d);d(null,this)}else{this.commands.removeCommand(h);this.off("changeMode",d)}},value:false}})});(function(){ace.require(["ace/ext/language_tools"],function(){})})()},"1mos":function(e,t,n){"use strict";e.exports={envelope:{path:"M91.385 78.841l-82.418 0q-3.675 0-6.321-2.646t-2.646-6.321l0-44.443q2.45 2.744 5.635 4.851 20.237 13.769 25.627 17.738t7.399 5.292 5.292 2.695 6.174 1.323l.098 0q2.793 0 6.125-1.372 3.332-1.421 5.341-2.695t8.379-5.88 24.696-17.101q3.185-2.205 5.586-4.851l0 44.443q0 3.675-2.646 6.321t-6.321 2.646zm-41.16-28.665l-.098 0q-2.695 0-5.194-1.519-2.597-1.568-3.773-2.352t-2.989-2.107-12.446-8.673-15.092-10.437q-4.459-3.136-7.546-7.252-3.087-4.165-3.087-8.085t2.303-6.811 6.664-2.94l82.418 0q3.675 0 6.321 2.646 2.646 2.695 2.646 6.713t-2.744 8.036-6.811 6.909q-21.07 14.602-23.912 16.611t-7.007 4.949q-6.076 4.312-9.653 4.312z",width:100,height:78.564},facebookSign:{path:"M73.758 37.165l0-7.068q0-3.192.969-4.446 1.026-1.254 4.674-1.311l7.182 0l0-14.25l-11.4 0q-9.918 0-14.193 4.674t-4.332 13.908l0 8.493l-8.493 0l0 14.307l8.493 0l0 41.325l17.1 0l0-41.325l11.4 0l1.482-14.307l-12.882 0zm26.277-18.411l0 62.529q-.057 7.752-5.529 13.281t-13.224 5.472l-62.529 0q-7.809 0-13.281-5.472t-5.472-13.281l0-62.529q0-7.752 5.529-13.281t13.224-5.472l62.529 0q7.752 0 13.281 5.472 5.472 5.529 5.472 13.281z",width:99.999,height:100},twitterSign:{path:"M63.042 25.024q-5.814 0-9.804 3.99t-4.047 9.69q0 1.881.342 3.135-8.379-.513-15.789-4.275t-12.483-10.089q-1.881 3.249-1.938 6.897 0 7.41 5.928 11.4-3.078-.057-6.498-1.653l0 .114q0 4.959 3.249 8.721t8.037 4.674q-1.881.513-3.021.513t-2.85-.228q1.368 4.104 4.845 6.783t7.923 2.736q-7.581 5.871-16.986 5.871-1.71 0-3.249-.228 9.633 6.099 20.976 6.156 7.296 0 13.68-2.337 11.742-4.332 18.525-14.706 6.726-10.374 6.726-21.945 0-1.197-.057-1.767 4.104-2.907 6.84-7.068-3.648 1.653-7.866 2.223 4.446-2.622 6.042-7.638-4.218 2.451-8.721 3.306-3.99-4.275-9.804-4.275zm36.993-6.27l0 62.529q-.057 7.752-5.529 13.281t-13.224 5.472l-62.529 0q-7.809 0-13.281-5.472t-5.472-13.281l0-62.529q0-7.752 5.529-13.281t13.224-5.472l62.529 0q7.752 0 13.281 5.472 5.472 5.529 5.472 13.281z",width:99.999,height:100}}},"2Ikf":function(e,t,n){"use strict";n("pNMO");n("4Brf");n("ma9I");n("5DmW");n("NBAS");var a=r(n("q1tI"));var s=i(n("wINb"));function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function c(e,t,n){if(t)o(e.prototype,t);if(n)o(e,n);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return d(e)}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return p(e,t)}function g(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var m=n("17x9");var v=n("mR6N"),b=v.StyleSheet,w=v.css;var y=n("uKIX");var C=n("6OHE"),E=C.colors,A=C.domainColors;var x=n("AHFm"),S=x.formatContent,k=x.stripExtraSpacesFromPre;var i18n=n("HEOz");var F=function e(t){return a.createElement("span",{dangerouslySetInnerHTML:{__html:S(t.markdown)}})};F.propTypes={markdown:m.string.isRequired};var T=function(e){f(r,e);function r(){var e;var o;l(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++){n[i]=arguments[i]}o=u(this,(e=h(r)).call.apply(e,[this].concat(n)));g(d(o),"state",{showHintExplainModal:false});g(d(o),"handleRequestExplanationModal",function(){o.setState({showHintExplainModal:true})});g(d(o),"renderExplainWebpage",function(){return[a.createElement("li",{key:"_"},i18n._('Underscores "_" mean that a HTML tag name, attribute, or CSS selector, property, or value is expected.')),a.createElement("li",{key:"..."},i18n._('Three dots "..." mean that we expect a value such as a number or text like the contents of a paragraph.'))]});g(d(o),"renderExplainPJS",function(){return a.createElement("li",null,i18n._("The empty blanks are parts that you will need to figure out yourself."))});g(d(o),"renderExplainMatchingBlanks",function(){return a.createElement("li",null,i18n._("If you see colored blanks, the values you put in two blanks of the same color must be exactly the same."))});g(d(o),"renderExplainImage",function(){return a.createElement("li",null,i18n._("The image on the right shows what your program should output, if the code is correct. Some things might be different, like the exact colors or position."))});g(d(o),"renderExplainModal",function(){var e=o.props,t=e.isWebpage,n=e.isPJS,i=e.hasMatchingBlanks,r=e.image;return a.createElement(y,{onClose:function e(){return o.setState({showHintExplainModal:false})},shouldHandleClose:false,showCloseButton:true,title:i18n._("What's this?")},a.createElement("ul",null,a.createElement("li",null,i18n._("This hint shows the code you'll need to successfully complete this step, but it is not the complete answer.")),t&&o.renderExplainWebpage(),n&&o.renderExplainPJS(),i&&o.renderExplainMatchingBlanks(),r&&o.renderExplainImage()))});g(d(o),"renderStructure",function(){var e=o.props,t=e.hasHint,n=e.image,i=e.structure;return a.createElement("div",{className:w(D.structure)},t&&a.createElement("h3",{className:w(D.header)},i18n._("Hint"),a.createElement("a",{href:"javascript:void(0)",className:w(D.whatsThisHint),onClick:o.handleRequestExplanationModal},i18n._("What's this?"))),a.createElement("div",null,n&&a.createElement("img",{className:w(D.exampleImage),src:(0,s.default)(n),alt:i18n._("Screenshot of what your code should output"),title:i18n._("Your code in this step should output"+" something that looks like this")}),a.createElement("div",{dangerouslySetInnerHTML:{__html:k(i)}})))});g(d(o),"renderDescription",function(){var e=o.props,t=e.description,n=e.domain,i=e.title;return a.createElement("div",{className:w(D.description)},a.createElement("h3",{className:w(D.header),style:{color:A(n).domain3}},i),a.createElement("p",null,a.createElement(F,{markdown:t})))});g(d(o),"renderAlsoMessage",function(){if(o.props.hasSyntaxErrors||!o.props.alsoMessage){return null}return a.createElement("span",{className:w(D.alsoMessage)},a.createElement(F,{markdown:o.props.alsoMessage}))});g(d(o),"renderAlternateMessage",function(){if(o.props.hasSyntaxErrors||!o.props.alternateMessage||o.props.alsoMessage){return null}return a.createElement("span",{className:w(D.alternateMessage)},a.createElement(F,{markdown:o.props.alternateMessage}))});return o}c(r,[{key:"render",value:function e(){return a.createElement("div",{className:w(D.wrap)},a.createElement("div",{className:w(D.columns)},this.renderDescription(),this.renderStructure()),a.createElement("div",{className:w(D.message)},this.renderAlsoMessage(),this.renderAlternateMessage()),this.state.showHintExplainModal&&this.renderExplainModal())}}]);return r}(a.Component);g(T,"propTypes",{alsoMessage:m.string,alternateMessage:m.string,description:m.node.isRequired,domain:m.string.isRequired,hasHint:m.bool,hasMatchingBlanks:m.bool,hasSyntaxErrors:m.bool,image:m.string,isPJS:m.bool.isRequired,isWebpage:m.bool.isRequired,structure:m.string,title:m.string.isRequired});var D=b.create({alsoMessage:{color:"darkorange"},alternateMessage:{color:"green"},columns:{display:"flex",width:"100%"},description:{flex:1,maxWidth:850},exampleImage:{maxWidth:140},header:{marginBottom:0},message:{fontWeight:700,fontSize:"1em",minHeight:20},structure:{marginLeft:20},whatsThisHint:{color:E.gray68,fontSize:".7em",marginLeft:"0.4em"},wrap:{width:"100%"}});e.exports=T},"3Owj":function(e,t){window.AceEditor=Backbone.View.extend({dom:{TEXT_INPUT:"textarea",CONTENT:"div.ace_content"},tooltips:{ace_pjs:["imagePicker","soundModal","colorPicker","numberScrubberClick","autoSuggest","numberScrubber"],ace_webpage:["imageModal","colorPicker","numberScrubber"],ace_sql:["numberScrubber"]},initialize:function e(t){var n=this;this.defaultCode=t.code;this.autoFocus=t.autoFocus;this.config=t.config;this.record=t.record;this.type=t.type;this.workersDir=t.workersDir;this.editor=ace.edit(this.el);this.textarea=this.$(this.dom.TEXT_INPUT);this.content=this.$(this.dom.CONTENT);this.offset=this.content.offset();if(this.record){this.bindRecord()}this.tooltipEngine=new TooltipEngine({tooltips:this.tooltips[this.type],type:this.type,imagesDir:t.imagesDir,soundsDir:t.soundsDir,editor:this.editor,record:this.record});this.tooltipEngine.on("scrubbingStarted",function(e){this.trigger("scrubbingStarted",e)}.bind(this));this.tooltipEngine.on("scrubbingEnded",function(e){this.trigger("scrubbingEnded",e)}.bind(this));if(this.tooltips[this.type].indexOf("autoSuggest")!==-1){ScratchpadAutosuggest.init(this.editor)}ace.require("ace/tooltip").Tooltip.prototype.setPosition=function(e,t){var n=$(this.$parentNode).offset();var i=n.left-$(window).scrollLeft();var r=n.top-$(window).scrollTop();e-=i;t-=r;this.getElement().style.left=e+"px";this.getElement().style.top=t+"px"};if(this.$el.resizable){this.$el.resizable({handles:"s",resize:function e(){n.editor.resize()}})}var i=$("<iframe>").css({width:"100%",height:0,position:"absolute",visibility:"hidden"}).appendTo(this.el);$(i[0].contentWindow.window).on("resize",function(){this.editor.resize();this.editor.setFontSize(this.$el.width()<400?"12px":"14px")}.bind(this));this.$el.on("mousedown",".tooltip",function(e){e.preventDefault()});this.editor.commands.removeCommand("gotoline");this.editor.commands.bindKey("Alt-0",null);this.editor.selection.addEventListener("changeCursor",function(){n.setErrorHighlight(false)});this.editor.on("change",function(){n.trigger("change");if(this.editor.curOp&&this.editor.curOp.command.name){n.trigger("userChangedCode")}}.bind(this));this.editor.on("click",function(){n.trigger("click")});this.editor.selection.on("changeCursor",function(){n.trigger("changeCursor")});this.editor.selection.on("changeSelection",function(){n.trigger("changeCursor")});this.config.on("versionSwitched",function(e){n.config.runVersion(e,n.type+"_editor",n)});this.config.editor=this;this.reset()},remove:function e(){this.tooltipEngine.remove()},bindRecord:function e(){var r=this;var o=this.editor;var t=this.record;var s=o.session.doc;s.on("change",function(e){var t=e.data.range.start;var n=e.data.range.end;if(e.data.action.indexOf("insert")===0){var i=e.data.lines||e.data.text;r.record.log(e.data.action,t.row,t.column,n.row,n.column,i)}else{r.record.log(e.data.action,t.row,t.column,n.row,n.column)}},true);o.selection.addEventListener("changeCursor",function(){if(o.selection.isEmpty()){r.handleSelect()}},true);o.selection.addEventListener("changeSelection",this.handleSelect.bind(this),true);var n=["insertText","insertLines","removeText","removeLines"];_.each(n,function(a){t.handlers[a]=function(e,t,n,i,r){var o={action:a,range:{start:{row:e,column:t},end:{row:n,column:i}}};if(a==="insertText"){o.text=r}else if(a==="insertLines"){o.lines=r}s.applyDeltas([o])}});$.extend(t.handlers,{select:function e(t,n,i,r){if(i==null){i=t}if(r==null){r=n}o.selection.setSelectionRange({start:{row:t,column:n},end:{row:i,column:r}})}});t.seekCachers.editor={getState:function e(){return{text:r.text(),cursor:r.getCursor()}},restoreState:function e(t){r.text(t.text);r.setCursor(t.cursor)}};t.on("runSeek",function(){r.reset(t.initData.code)})},handleSelect:function e(){if(!this.record.recording){return}var t=this.editor.selection.getRange();var n=t.start;var i=t.end;this.record.log("select",n.row,n.column,i.row,i.column)},reset:function e(t,n){t=t||this.defaultCode;this.config.runCurVersion(this.type+"_editor",this);this.text(t);this.setCursor({row:0,column:0},n)},setErrorHighlight:function e(t){this.editor.setHighlightActiveLine(t)},toggleGutter:function e(t){this.editor.renderer.setShowGutter(t)},getAllFolds:function e(){var t=this.editor.session;return _.map(t.getAllFolds(),function(e){return[e.start.row,e.end.row]})},setFolds:function e(t){_.each(t,function(e){this.editor.session.foldAll(e[0],e[1],0)}.bind(this))},blockPaste:function e(n){var i=this.editor;if(!i.originalCut){i.originalCut=i.onCut;i.originalCopy=i.onCopy;i.originalPaste=i.onPaste}i.onCut=function(e){i.lastCopied=this.getSelectedText();i.originalCut.apply(i)};i.onCopy=function(e){i.lastCopied=this.getSelectedText();i.originalCopy.apply(i)};i.onPaste=function(e){var t=function e(t){return t.match(/\s*https?:\/\/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)\s*/)};if(e===i.lastCopied||e.length<3||t(e)){i.originalPaste.apply(i,[e]);return}else{n()}};var t=false;i.container.addEventListener("dragstart",function(){t=true});i.container.addEventListener("dragend",function(){t=false});i.container.addEventListener("drop",function(e){if(!t){n();e.stopPropagation()}},true)},focus:function e(){if(this.autoFocus!==false){this.editor.focus()}},getCursor:function e(){return this.editor.getCursorPosition()},getSelectionIndices:function e(){var t=this.editor.getSelectionRange();var n=this.editor.getSession().getDocument();return{start:n.positionToIndex(t.start),end:n.positionToIndex(t.end)}},setCursor:function e(t,n){this.editor.moveCursorToPosition(t);this.editor.clearSelection();if(n!==false&&this.autoFocus!==false){this.editor.focus()}},setSelection:function e(t){this.editor.selection.setSelectionRange(t)},setReadOnly:function e(t){this.editor.setReadOnly(t)},text:function e(t){if(t!=null){this.editor.getSession().setValue(t)}else{return this.editor.getSession().getValue().replace(/\r\n/g,"\n")}return this},unfold:function e(){return this.editor.getSession().unfold()},insertNewlineIfCursorAtEnd:function e(){var t=this.editor.getSession().getLength()-1;var n=this.editor.getSession().getLine(t);var i=n.length;var r=this.editor.getCursorPosition();if(r.row===t&&r.column===i){var o=this.text();if(o.length&&o[o.length-1]!=="\n"){this.text(this.text()+"\n");this.setCursor({row:t+1,column:0})}}},undo:function e(){this.editor.undo()}});LiveEditor.registerEditor("ace_pjs",AceEditor);LiveEditor.registerEditor("ace_webpage",AceEditor);LiveEditor.registerEditor("ace_sql",AceEditor)},"4X7z":function(e,t,n){"use strict";n("ma9I");n("5DmW");n("NBAS");n("B6y2");var a=l(n("q1tI"));var s=o(n("wINb"));var i=o(n("wa3X"));var r;function o(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function h(e,t,n){if(t)u(e.prototype,t);if(n)u(e,n);return e}function d(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return p(e)}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return f(e)}function p(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return m(e,t)}function v(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var b=n("17x9");var w=n("mR6N"),y=w.StyleSheet,C=w.css;var i18n=n("HEOz");var E=n("8crR"),A=E.getNextCompletionMessage,x=E.getNextProgressMessage;var S={CHALLENGE_COMPLETE:"challenge_complete",STEPS_COMPLETE:"steps_complete",GO_TO_NEXT_STEP:"go_to_next_step",FIX_PREVIOUS_STEP:"go_back_a_step"};var k=(r={},v(r,S.STEPS_COMPLETE,i18n._("Finish challenge")),v(r,S.GO_TO_NEXT_STEP,i18n._("Next step")),v(r,S.FIX_PREVIOUS_STEP,i18n._("Go back")),r);var F=function e(t){if(t.previousStepFailed()){return S.FIX_PREVIOUS_STEP}else if(t.currentStepComplete()){return S.GO_TO_NEXT_STEP}else if(t.allTestsPass()&&(t.get("complete")||t.get("userScratchpad").get("isComplete"))){return S.CHALLENGE_COMPLETE}else if(t.canBeCompleted()){return S.STEPS_COMPLETE}return false};var T=function(e){g(o,e);function o(){var e;var t;c(this,o);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++){i[r]=arguments[r]}t=d(this,(e=f(o)).call.apply(e,[this].concat(i)));v(p(t),"state",{bubbleClosed:false,completionMessage:A(),progressMessage:x()});v(p(t),"renderCritter",function(){var e=t.props.reason===S.STEPS_COMPLETE?D.jumping:D.happy;return a.createElement("img",{alt:"","aria-hidden":true,className:C(M.critter),src:(0,s.default)(e)})});v(p(t),"renderMessageText",function(){if(t.props.reason===S.STEPS_COMPLETE){return t.state.completionMessage}else if(t.props.reason===S.GO_TO_NEXT_STEP){return t.state.progressMessage}else{return i18n._("Oops, you need to fix a previous step!")}});v(p(t),"renderMessage",function(){return a.createElement("div",{className:C(M.message)},a.createElement("span",null,t.renderMessageText()))});v(p(t),"renderBubble",function(){if(t.state.bubbleClosed){return null}return a.createElement("div",null,a.createElement("div",{className:C(M.bubble),onClick:function e(){t.setState({bubbleClosed:true});t.props.onAcknowledge()}},a.createElement("div",{className:C(M.inner)},t.renderCritter(),t.renderMessage())),a.createElement("div",{className:C(M.triangle)}))});return t}h(o,[{key:"UNSAFE_componentWillUpdate",value:function e(t,n){if(t.reason!==this.props.reason){if(t.reason===S.STEPS_COMPLETE){this.setState({bubbleClosed:false,completionMessage:A()})}else if(t.reason===S.GO_TO_NEXT_STEP){this.setState({bubbleClosed:false,progressMessage:x()})}}}},{key:"render",value:function e(){return a.createElement("div",{className:C(M.wrap)},this.renderBubble(),a.createElement(i.default,{onClick:this.props.onAcknowledge,style:M.toolbarButton},k[this.props.reason]))}}]);return o}(a.Component);v(T,"propTypes",{onAcknowledge:b.func.isRequired,reason:b.oneOf(Object.values(S)).isRequired});v(T,"CritterAppearance",S);v(T,"CritterButtonMessages",k);v(T,"getCritterAppearanceReason",F);var D={happy:"/images/scratchpads/happy-critter.png",jumping:"/images/scratchpads/jumping-critter.png"};var R=31;var $=80;var L=9;var B=2;var O="#f5f5f5";var M=y.create({bubble:{background:O,top:0-R-$-L,color:"black",borderRadius:10,cursor:"pointer",display:"inline-block",maxWidth:250,minWidth:200,padding:10,position:"absolute",right:0,zIndex:B},critter:{height:70,marginRight:10},inner:{display:"flex",flexDirection:"row-reverse",justifyContent:"space-around"},message:{alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center"},toolbarButton:{marginLeft:16},triangle:{borderLeft:"".concat(L,"px solid transparent"),borderRight:"".concat(L,"px solid transparent"),borderTop:"".concat(L,"px solid ").concat(O),height:0,left:"calc(50% - 8px)",position:"absolute",top:0-R,width:0,zIndex:B},wrap:{display:"inline-block",position:"relative"}});e.exports=T},"58T/":function(e,t,n){"use strict";n("ma9I");n("5DmW");n("NBAS");var a=r(n("q1tI"));var s=i(n("j6G6"));function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function c(e,t,n){if(t)o(e.prototype,t);if(n)o(e,n);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return d(e)}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return p(e,t)}function g(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var m=n("17x9");var v=n("mR6N"),b=v.StyleSheet,w=v.css;var y=n("CxBN");var C=n("ZaqX");var i18n=n("HEOz");var E=function(e){f(r,e);function r(){var e;var o;l(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++){n[i]=arguments[i]}o=u(this,(e=h(r)).call.apply(e,[this].concat(n)));g(d(o),"getSpinOffsURL",function(e){var t=o.props,n=t.scratchpadId,i=t.scratchpadKind;var r;if(i){r="".concat(i,":").concat(n)}else{r=n}return"/api/internal/scratchpads/".concat(r,"/")+"".concat(e,"-forks?casing=camel&subject=all")});g(d(o),"renderSpinOffs",function(){var t=a.createElement("p",null,i18n._("Be the first to create a spin-off!"));return a.createElement("div",{className:w(A.spinOffs)},a.createElement(C,{title:i18n._("All Spin-offs"),domain:o.props.topic.domainSlug,url:o.getSpinOffsURL("top"),noResults:function e(){return t}}))});g(d(o),"renderUserSpinOffs",function(){var e=s.default.getUserProfile();var t=a.createElement("p",null,i18n._("Login to view your spin-offs of this project."));if(!s.default.isPhantom()&&e){var n=o.props.topic.domainSlug;var i=e.get("profileRoot")+"projects";t=a.createElement("div",null,a.createElement("p",null,i18n._("If you save a spin-off of this project, you will see it here (as well as in your My Projects list).")),a.createElement("p",null,a.createElement(y,{href:i,domainSlug:n,label:i18n._("Browse My Projects")})))}return a.createElement("div",{className:w(A.userSpinOffs)},a.createElement(C,{title:i18n._("Your Spin-offs"),domain:o.props.topic.domainSlug,url:o.getSpinOffsURL("user"),noResults:function e(){return t},hideNotice:true}))});return o}c(r,[{key:"render",value:function e(){return a.createElement("div",null,this.renderUserSpinOffs(),this.renderSpinOffs())}}]);return r}(a.Component);g(E,"propTypes",{scratchpadId:m.string.isRequired,scratchpadKind:m.string,topic:m.shape({domainSlug:m.string.isRequired}).isRequired});var A=b.create({spinOffs:{marginTop:22}});e.exports=E},"7KWC":function(e,t,n){"use strict";n("ma9I");n("5DmW");n("NBAS");n("07d7");n("JfAA");var r=o(n("q1tI"));var a=i(n("wa3X"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function c(e,t,n){if(t)l(e.prototype,t);if(n)l(e,n);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return d(e)}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return p(e,t)}function g(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var m=n("17x9");var _=n("F/us");var v=n("uFGi");var b=n("+Hxn");var w=n("uKIX");var y=n("ABr6");var C={"":"Regular",documentation:"Documentation",official:"Official (Contests)"};var E=function(e){f(o,e);function o(){var e;var n;s(this,o);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}n=u(this,(e=h(o)).call.apply(e,[this].concat(i)));g(d(n),"handleChange",function(e,t){n.props.scratchpad.set(e,t);n.forceUpdate()});return n}c(o,[{key:"render",value:function e(){var n=this;var t=_.pairs(C);var i=this.props.scratchpad;return r.createElement(w,{backdrop:false},r.createElement("span",{className:"close",onClick:this.props.onCloseModal},"×"),r.createElement("div",{className:"control-group"},r.createElement("div",{className:"kui-labeledfield__title"},"Category"),r.createElement("br",null),r.createElement(y,{value:i.get("category")||"",hideBlank:true,options:t,onChange:function e(t){return n.handleChange("category",t)}})),r.createElement(v,{title:"Canvas Width",type:"text",value:(i.get("width")||"").toString(),onChange:function e(t){return n.handleChange("width",parseInt(t.target.value)||"")},onBlur:function e(t){return n.handleChange("width",parseInt(t.target.value)||400)}}),r.createElement(v,{title:"Canvas Height",type:"text",value:(i.get("height")||"").toString(),onChange:function e(t){return n.handleChange("height",parseInt(t.target.value)||"")},onBlur:function e(t){return n.handleChange("height",parseInt(t.target.value)||400)}}),!i.isProject()&&r.createElement(b,{title:"Description",value:i.get("description"),onChange:function e(t){return n.handleChange("description",t.target.value)}}),r.createElement(a.default,{onClick:this.props.onSaveAndClose,kind:"secondary"},"Save and Close"))}}]);return o}(r.Component);g(E,"propTypes",{onCloseModal:m.func,onSaveAndClose:m.func.isRequired,scratchpad:m.object.isRequired});e.exports=E},"8M3Y":function(e,t,n){"use strict";n("5DmW");n("07d7");n("5s+n");var c=i(n("q1tI"));function i(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}var r=n("17x9");var o=n("fhzG");var u=n("BnuH");var a=o({displayName:"ScratchpadTalkthroughPlaybackBar",propTypes:{liveEditorPromise:r.instanceOf(Promise).isRequired,onSeek:r.func,onSeekEnd:r.func,onSeekStart:r.func,youtubeUrl:r.string},getDefaultProps:function e(){return{onSeek:function e(){},onSeekEnd:function e(){},onSeekStart:function e(){}}},getInitialState:function e(){return{currentTime:0,durationEstimate:0,handlers:null,liveEditor:null,playing:false,readyToPlay:false,record:null,seekTime:null,totalTime:null,wasPlaying:null}},componentDidMount:function e(){this._isMounted=true;this.props.liveEditorPromise.then(this.handleLiveEditorReady)},componentWillUnmount:function e(){var t=this.state,n=t.liveEditor,i=t.record,r=t.handlers,o=t.playing;if(o&&i){i.pausePlayback()}if(!r){return}for(var a in r){if(r.hasOwnProperty(a)){i.off(a,r[a])}}n.off("readyToPlay",this.handleReadyToPlay);this._isMounted=false},_isMounted:false,handleLiveEditorReady:function e(t){var n=t.record;var i={loading:this.handleLoading,playStarted:this.handlePlay,playPaused:this.handlePause,playEnded:this.handlePause,playStopped:this.handlePause,playUpdate:this.handlePlayUpdate,seekDone:this.handlePlayUpdate};for(var r in i){if(i.hasOwnProperty(r)){n.on(r,i[r])}}t.on("readyToPlay",this.handleReadyToPlay);if(!this._isMounted){return}this.setState({handlers:i,liveEditor:t,record:n,readyToPlay:!!t.audioReadyToPlay()})},handlePlay:function e(){this.setState({playing:true})},handlePlayUpdate:function e(){var t=this.state.record;this.setState({currentTime:t.currentTime(),seekTime:null})},handleLoading:function e(){var t=this.state.record;this.setState({durationEstimate:t.durationEstimate})},handlePause:function e(){this.setState({playing:false})},handleReadyToPlay:function e(){this.setState({readyToPlay:true})},handleSeekStart:function e(){var t=this.state.playing;this.props.onSeekStart();this.setState({wasPlaying:t})},handleSeek:function e(t){this.props.onSeek(t);this.setState({seekTime:t})},handleSeekEnd:function e(){this.props.onSeekEnd();this.setState({wasPlaying:null})},render:function e(){var t=this.state,n=t.currentTime,i=t.durationEstimate,r=t.playing,o=t.readyToPlay,a=t.seekTime,s=t.record,l=t.wasPlaying;return s&&c.createElement(u,{currentTime:a!==null?a:n,readyToPlay:o,playing:r||l,playButtonClassName:"scratchpad-playbar-play",onClickPlay:function e(){return r?s.pausePlayback():s.play()},onSeek:this.handleSeek,onSeekStart:this.handleSeekStart,onSeekEnd:this.handleSeekEnd,totalTime:i,youtubeUrl:this.props.youtubeUrl})}});e.exports=a},"8crR":function(e,t,n){"use strict";n("ma9I");n("fbCW");n("yXV3");n("uqXc");n("2B1R");n("+2oP");n("UxlC");var E=i(n("j6G6"));var s=i(n("dzVj"));function i(e){return e&&e.__esModule?e:{default:e}}var l=n("e2gc");var r=n("q1z7");var _=n("F/us");var A=n("Fumg");var i18n=n("HEOz");var o=n("skGw"),x=o.khanFetch;var a=function e(t){return t.length>0&&t[0]==="pass"&&_.contains(t,"fail")&&_.indexOf(t,"fail")>_.lastIndexOf(t,"pass")};var c=r.Model.extend({initialize:function e(t){this.userScratchpad=t.userScratchpad;this.editor=t.editor;this.useBlocks=t.useBlocks;this.contentType=t.contentType;var n=this.userScratchpad.get("points");var i=this.userScratchpad.get("challengeStatus")===1;this.set("complete",i);this.set("lastCompleted",i?Number.POSITIVE_INFINITY:-1);this.set("step",i?Number.POSITIVE_INFINITY:0);this.set("points",n);this.on("change:complete",_.bind(function(e,t){if(t){this.userScratchpad.saveChallengeStatus("complete",{success:_.bind(function(e){this.set("points",e.get("points"))},this)})}},this))},setLiveEditor:function e(t){this.liveEditor=t;this.editor=t.editor},triggerUpdate:function e(){this.trigger("challengeUpdate",this)},completeChallenge:function e(){this.set("complete",true);this.set("step",this.get("tests").length);this.set("lastCompleted",this.get("tests").length);this.triggerUpdate()},onGoalStep:function e(){return this.get("step")>=this.get("tests").length},startOver:function e(){this.set("complete",false);this.userScratchpad.saveChallengeStatus("started");this.moveToStep(0)},moveToStep:function e(t){if(t===-1){this.set("step",this.get("step")+1)}else{this.set("step",t)}this.triggerUpdate();this.editor.focus()},assertionsFail:function e(){return this.get("assertions")&&this.get("assertions").length>0},allTestsPass:function e(){return!!(this.get("tests")&&this.get("tests").every(function(e){return e.state==="pass"}))},firstFailure:function e(){return _.pluck(this.get("tests"),"state").indexOf("fail")},previousStepFailed:function e(){var t=this.firstFailure();return t>=0&&t<this.get("step")},currentStepHasWarning:function e(){var t=this.get("tests")[this.get("step")]["results"];return _.find(t,function(e){return e.meta.alsoMessage})},getDebugInfo:function e(){return["complete: "+this.get("complete"),"lastCompleted: "+this.get("lastCompleted"),"points: "+this.get("points"),"step: "+this.get("step")].join("\n")},processResults:function e(t){if(this.userScratchpad.get("challengeStatus")===-1){this.userScratchpad.saveChallengeStatus("started")}if(_.isEqual(this.get("tests"),t.tests)&&_.isEqual(this.get("assertions"),t.assertions)&&_.isEqual(this.get("errors"),t.errors)){return}var n=t.tests;this.set("errors",t.errors);this.set("assertions",t.assertions);C(n,_.bind(function(){this.set("tests",n);if(!this.get("complete")){var e=_.map(n,function(e){return e.state});if(a(e)&&!this.assertionsFail()){var t=_.indexOf(e,"fail")-1;if(t>this.get("lastCompleted")){this.set("lastCompleted",t);this.set("step",t)}}}this.triggerUpdate()},this),this)},getCurrentTestGroup:function e(){return this.get("tests")[this.get("step")]},canBeCompleted:function e(){return!this.get("complete")&&!this.assertionsFail()&&this.allTestsPass()},currentStepComplete:function e(){return!this.get("complete")&&this.get("lastCompleted")>=this.get("step")&&this.getCurrentTestGroup().state==="pass"},hasSyntaxErrors:function e(){return!this.liveEditor||!!this.liveEditor.hasErrors()}});function u(e,t,n,i,r){n=n||[];i=i||"";var o=n.map(function(e){var t=Object.keys(e)[0];var n=e[t];return"".concat(t,": ").concat(n)}).concat([i]).join("\n");var a=/\)*\s([^|]*)\|/g.exec(document.title)[1];var s=i.substr(0,50).replace(/\n/g," ")+(i.length>50?"...":"");var l=[a,t,s].join(" - ");var c=o+"\n\n"+"{code:JavaScript}"+e.liveEditor.editor.text()+"{code}\n\n"+e.getDebugInfo();var u="https://www.khanacademy.org/devadmin/users?authEmail=&username=&userId="+E.default.userId;var h=E.default.userId+"\n\n"+u;var d=window.location.href.substr(window.location.href.lastIndexOf("/")+1);var f=window.location.href;var p=E.default.getUserProfile();var g=p?p.get("email"):"N/A";var m=p?p.get("kaid"):"N/A";var v=p&&p.get("points")>=5e5;var b=E.default.vipIssueReporter;var w=[];if(v){w.push({value:"500k+ points"})}if(b){w.push({value:"VIP"});if(p){c+="\nVIP issue from "+p.get("nickname")+" ("+p.get("kaid")+")\n\n"}}var y={editor:"The editor is broken",translated:"Not translated",syntax:"Syntax error won't go away",hintcode:"Question or hints confusing",inability:"Videos didn't prepare adequately",grader:"Grader won't accept code",instructions:"Question or hints confusing",other:"Other"}[t];var C={dontSendToContentIssueTracker:r,fields:{project:{key:"CC"},issuetype:{name:"Item issue report"},summary:l,description:c,email:g,kaid:m,readable_id:[d],preview_url:f,item_url:f,framework:{value:"coding-challenges"},debug_info:h,vip_status:w,user_agent:navigator.userAgent,issue_type:{value:y},locale:[A.getLocale()]}};return x("/content-issue-post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})}var h=_.shuffle([i18n._("Way to go!"),i18n._("Awesome!"),i18n._("Good job!"),i18n._("Nice work!"),i18n._("Amazing!"),i18n._("Brilliant!"),i18n._("Incredible!"),i18n._("Making progress!"),i18n._("Getting closer!")]);var d=_.shuffle([i18n._("Moving forward!"),i18n._("Ready for more?"),i18n._("Onto the next step!"),i18n._("Keep it up!"),i18n._("You can do it!"),i18n._("Great things are ahead!"),i18n._("Keep moving on!")]);var f=-1;var p=function e(){f+=1;var t=h[f%h.length];var n=d[f%d.length];return t+" "+n};var g=_.shuffle([i18n._("All steps complete!"),i18n._("Great job!"),i18n._("You did it!"),i18n._("You figured it out!")]);var m=-1;var v=function e(){m+=1;return g[m%g.length]};var b={};var w=0;var y=-1;var C=function e(t,n,i){var r=1;var o=i.contentType;var a=w;w+=1;y=a;for(var s=0;s<t.length;s++){var l=t[s].results;for(var c=0;c<l.length;c++){if(l[c].meta.structure){(function(){var t=l[c].meta.structure;if(!b.hasOwnProperty(JSON.stringify(t))){r+=1;k[o](t,function(e){b[JSON.stringify(t)]=e;r-=1;if(r<=0&&a===y){n()}},i)}})()}}}r-=1;if(r===0){n()}};var S=function e(t){return b[JSON.stringify(t.meta.structure)]||""};var k={pjs:function e(t,n,i){if(i.useBlocks){var r=i.liveEditor.editor.editor.codeToHTML(t);var o=l("<div>").append(l("<div>").addClass("rainbowjs").html(r)).html();n(o);return}var a=t.slice(t.indexOf("{")+1,t.lastIndexOf("}"));(0,s.default)(a,n)},sql:function e(t,n){var i="";if(t){i=l("<div></div>").append(l('<pre class="rainbowjs"></pre>').text(t)).html()}n(i)},webpage:function e(t,n){var i="";if(t){i=l("<div></div>").append(l('<pre class="rainbowjs"></pre>').text(t)).html()}n(i)}};e.exports={sendContentFeedback:u,getNextProgressMessage:p,getNextCompletionMessage:v,getColoredTextForTest:S,ScratchpadChallenge:c}},"8jLB":function(e,t,n){"use strict";n("5DmW");var o=r(n("q1tI"));var a=i(n("j6G6"));function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}var s=n("17x9");var l=n("fhzG");var c=n("2LjZ");var i18n=n("HEOz");var u=n("MhIR"),h=u.Scratchpad;var d=n("CxBN");var f=n("7KWC");var p=n("PMNg");var g=l({displayName:"ScratchpadSettingsButton",propTypes:{onSave:s.func.isRequired,scratchpad:s.instanceOf(h).isRequired,topic:s.shape({domainSlug:s.string.isRequired}).isRequired},mixins:[c],getInitialState:function e(){return{settingsModalOpen:false}},getBackboneModels:function e(){return[this.props.scratchpad]},renderSettingsModal:function e(){var t=this;if(!this.state.settingsModalOpen){return null}var n=a.default.isDeveloper()?f:p;var i=function e(){return t.setState({settingsModalOpen:false})};var r=function e(){i();t.props.onSave()};return o.createElement(n,{scratchpad:this.props.scratchpad,onCloseModal:i,onSaveAndClose:r})},render:function e(){var t=this;return o.createElement("span",null,o.createElement(d,{typeStyle:"primary",domainSlug:this.props.topic.domainSlug,label:i18n._("Settings"),onClick:function e(){return t.setState({settingsModalOpen:true})}}),this.renderSettingsModal())}});e.exports=g},AHFm:function(e,t,n){"use strict";n("TeQF");n("yXV3");n("2B1R");n("+2oP");n("UxlC");n("hByQ");n("EnZy");n("SYor");n("FZtP");var i=function e(t){t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;");var n=/[\n]/g;t=t.replace(n,"<br>");t=t.replace(/(\W|^)_(\S.*?\S)_(\W|$)/g,function(e,t,n,i){return t+"<em>"+n+"</em>"+i});t=t.replace(/(\W|^)\*(\b.*?\b)\*(\W|$)/g,function(e,t,n,i){return t+"<b>"+n+"</b>"+i});[/&#x60;&#x60;&#x60;(.*?)&#x60;&#x60;&#x60;/gm,/```(.*?)```/gm].forEach(function(e){t=t.replace(e,function(e,t){t=t.replace(/^\s*(<br>)+/,"");t=t.replace(/(<br>)+\s*$/,"");return"<pre><code>"+t+"</code></pre>"})});[/&#x60;(.*?)&#x60;/g,/`(.*?)`/g].forEach(function(e){t=t.replace(e,function(e,t){return"<code>"+t+"</code>"})});t=r.autolink(t,true);return t};var r=function(){var i=/\b(?:(?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>&]+|&amp;|\((?:[^\s()<>]|(?:\([^\s()<>]+\)))*\))+(?:\((?:[^\s()<>]|(?:\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’&]))/gi;return{autolink:function e(t,n){return t.replace(i,function(e){if(!/^https?:\/\//.test(e)){e="http://"+e}var t=n?'rel="nofollow"':"";return"<a "+t+' href="'+e+'">'+e+"</a>"})}}}();var o=function e(t){var n=t.split("\n");if(n.length<3||n[0].indexOf("<pre")===-1){return t}var i=n.slice(1,n.length-1);var r=i.filter(function(e){return e.trim().length}).map(function(e){return e.search(/\S|$/)});var o=r.length>0?Math.min.apply(Math,r):0;return[n[0],i.map(function(e){return e.slice(o)}).join("\n"),n[n.length-1]].map(function(e){return e.trim()}).join("\n")};e.exports={formatContent:i,stripExtraSpacesFromPre:o}},BnuH:function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("5DmW");n("NBAS");n("07d7");n("JfAA");n("FZtP");var f=o(n("q1tI"));var p=r(n("wa3X"));var i=r(n("Pwnf"));var g=r(n("+6Ef"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function a(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var i=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}i.forEach(function(e){b(t,e,n[e])})}return t}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function c(e,t,n){if(t)l(e.prototype,t);if(n)l(e,n);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return d(e)}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)v(e,t)}function v(e,t){v=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return v(e,t)}function b(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var w=n("17x9");var y=n("mR6N"),C=y.StyleSheet,E=y.css;var i18n=n("HEOz");var A=n("whzC"),x=A.safeLinkTo;var S=function e(t,n){return!(t||n)?0:Math.min(1,Math.max(0,t/n))};var k=function e(t){return(Math.round(100*100*t)/100).toString()+"%"};var F=function e(t){var n=Math.floor(t/1e3);var i=Math.floor(n/60).toString();var r=(n%60).toString();if(r.length===1){r="0"+r}return i+":"+r};var T=function(e){m(o,e);function o(){var e;var r;s(this,o);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++){n[i]=arguments[i]}r=u(this,(e=h(o)).call.apply(e,[this].concat(n)));b(d(r),"state",{dragging:false,seekPosition:null});b(d(r),"handleSeekDown",function(e){r.setState({dragging:true});document.addEventListener("mousemove",r.handleSeekMove);document.addEventListener("mouseup",r.handleSeekRelease);document.body.classList.add(E(L.seeking));if(r.props.onSeekStart){r.props.onSeekStart()}r.handleSeekMove(e)});b(d(r),"handleSeekMove",function(e){var t=r.refs.seek;var n=t.getBoundingClientRect();var i=Math.max(Math.min(1,(e.clientX-n.left)/n.width),0);r.setState({seekPosition:i});r.props.onSeek(i*r.props.totalTime)});b(d(r),"handleSeekRelease",function(e){document.removeEventListener("mousemove",r.handleSeekMove);document.removeEventListener("mouseup",r.handleSeekRelease);document.body.classList.remove(E(L.seeking));r.setState({dragging:false,seekPosition:null});if(r.props.onSeekEnd){r.props.onSeekEnd()}});return r}c(o,[{key:"render",value:function e(){var t=this.props,n=t.currentTime,i=t.onClickPlay,r=t.playing,o=t.playButtonClassName,a=t.readyToPlay,s=t.totalTime,l=t.youtubeUrl;var c=this.state,u=c.dragging,h=c.seekPosition;var d=k(h!==null?h:S(n,s));return f.createElement("div",{className:E(B.wrap,!a&&B.waiting)},f.createElement("span",{className:o},f.createElement(g.default,{icon:a&&r?D.pause:D.play,"aria-label":a&&r?i18n._("Pause"):i18n._("Play"),onClick:i})),f.createElement("div",{className:E(B.seek),onMouseDown:this.handleSeekDown,ref:"seek"},f.createElement("div",{className:E(B.seekInner)},f.createElement("div",{className:E(B.seekProgress),style:{width:d}})),f.createElement("div",{className:E(B.seekHandle,u&&B.seekHandleActive),style:{left:d}})),!!s&&f.createElement("div",{className:E(B.time)},F(h!==null?h*s:n),"/",F(s)),l&&f.createElement(p.default,{"aria-label":i18n._("Watch this talkthrough on YouTube"),href:x(l),skipClientNav:true,target:"_blank",kind:"tertiary",style:B.linkToYT},i18n._("Watch on YouTube")))}}]);return o}(f.Component);b(T,"propTypes",{currentTime:w.number,durationEstimate:w.number,onClickPlay:w.func.isRequired,onSeek:w.func.isRequired,onSeekEnd:w.func,onSeekStart:w.func,playButtonClassName:w.string,playing:w.bool,readyToPlay:w.bool.isRequired,totalTime:w.number,youtubeUrl:w.string});b(T,"defaultProps",{currentTime:0});var D={play:{medium:"M5.244 1.282l16.477 9.416a1.5 1.5 0 0 1 0 2.604L5.244 22.718A1.5 1.5 0 0 1 3 21.415V2.585a1.5 1.5 0 0 1 2.244-1.303z"},pause:{medium:"M3,1H9a1,1,0,0,1,1,1V22a1,1,0,0,1-1,1H3a1,1,0,0,1-1-1V2A1,1,0,0,1,3,1ZM15,1h6a1,1,0,0,1,1,1V22a1,1,0,0,1-1,1H15a1,1,0,0,1-1-1V2A1,1,0,0,1,15,1Z"}};var R=20;var $={marginLeft:-R/4,width:R/2};var L=C.create({seeking:{cursor:"pointer",userSelect:"none"}});var B=C.create({linkToYT:{marginLeft:4},seek:{alignItems:"center",cursor:"pointer",display:"flex",flex:1,height:R,marginLeft:16,minWidth:400,position:"relative",top:-2},seekInner:{background:i.default.offBlack16,borderRadius:2,height:"25%",width:"100%"},seekProgress:{background:i.default.blue,borderRadius:2,height:"100%"},seekHandle:{background:i.default.blue,borderColor:"transparent",borderRadius:2,borderWidth:R/4,display:"block",height:"100%",marginLeft:-R/8,position:"absolute",top:0,width:R/4,":hover":a({},$)},seekHandleActive:a({},$),time:{fontSize:16,marginLeft:10,textAlign:"center",width:80},waiting:{opacity:.5,pointerEvents:"none"},wrap:{alignItems:"center",display:"flex",justifyContent:"space-between",userSelect:"none"}});e.exports=T},DGfY:function(n,e,t){(function(O,M){(function(e,t){true?n.exports=t():undefined})(this,function(){"use strict";function o(){return typeof O!=="undefined"&&O.versions!=null&&O.versions.node!=null}function e(){return typeof document==="undefined"&&typeof self!=="undefined"}function c(e){var t=e.getAttribute("data-language")||e.parentNode.getAttribute("data-language");if(!t){var n=/\blang(?:uage)?-(\w+)/;var i=e.className.match(n)||e.parentNode.className.match(n);if(i){t=i[1]}}if(t){return t.toLowerCase()}return null}function l(e,t,n,i){if(n===e&&i===t){return false}return n<=e&&i>=t}function u(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&(?![\w\#]+;)/g,"&amp;")}function E(e,t){var n=0;for(var i=1;i<t;++i){if(e[i]){n+=e[i].length}}return n}function h(e,t,n,i){if(n>=e&&n<t){return true}return i>e&&i<t}function A(e){var t=[];for(var n in e){if(e.hasOwnProperty(n)){t.push(n)}}return t.sort(function(e,t){return t-e})}function x(e,t,n,i){var r=i.substr(e);n=n.replace(/\$/g,"$$$$");return i.substr(0,e)+r.replace(t,n)}function t(e,Prism){if(o()){return new Worker(M)}var t=Prism.toString();var n=A.toString();n+=u.toString();n+=l.toString();n+=h.toString();n+=x.toString();n+=E.toString();n+=t;var i=n+"\tthis.onmessage="+e.toString();var r=new Blob([i],{type:"text/javascript"});return new Worker((window.URL||window.webkitURL).createObjectURL(r))}var Prism=function Prism(g){var m={};var v;var b={};function w(e,t){for(var n in b){n=parseInt(n,10);if(l(n,b[n],e,t)){delete b[n];delete m[n]}if(h(n,b[n],e,t)){return true}}return false}function y(e,t){var n=e.replace(/\./g," ");var i=g.globalClass;if(i){n+=" "+i}return'<span class="'+n+'">'+t+"</span>"}function a(e){var t=A(m);for(var n=0,i=t;n<i.length;n+=1){var r=i[n];var o=m[r];e=x(r,o.replace,o.with,e)}return e}function C(e){var t="";if(e.ignoreCase){t+="i"}if(e.multiline){t+="m"}return new RegExp(e.source,t)}function s(l,t,n){if(n===void 0)n=0;var e=l.pattern;if(!e){return false}var i=!e.global;e=C(e);var c=e.exec(t);if(!c){return false}if(!l.name&&l.matches&&typeof l.matches[0]==="string"){l.name=l.matches[0];delete l.matches[0]}var u=c[0];var r=c.index+n;var o=c[0].length+r;if(r===o){return false}if(w(r,o)){return{remaining:t.substr(o-n),offset:o}}function a(e){if(l.name){e=y(l.name,e)}m[r]={replace:c[0],with:e};b[r]=o;if(i){return false}return{remaining:t.substr(o-n),offset:o}}function s(i){var e=c[i];if(!e){return}var t=l.matches[i];var n=t.language;var r=t.name&&t.matches?t.matches:t;var o=function(e,t,n){u=x(E(c,i),e,n?y(n,t):t,u);return};if(typeof t==="string"){o(e,e,t);return}var a;var s=new Prism(g);if(n){a=s.refract(e,n);o(e,a);return}a=s.refract(e,v,r.length?r:[r]);o(e,a,t.matches?t.name:0)}var h=A(l.matches);for(var d=0,f=h;d<f.length;d+=1){var p=f[d];s(p)}return a(u)}function i(e,t){for(var n=0,i=t;n<i.length;n+=1){var r=i[n];var o=s(r,e);while(o){o=s(r,o.remaining,o.offset)}}return a(e)}function r(e){var t=g.patterns[e]||[];while(g.inheritenceMap[e]){e=g.inheritenceMap[e];t=t.concat(g.patterns[e]||[])}return t}function e(e,t,n){v=t;n=n||r(t);return i(u(e),n)}this.refract=e};function n(e){var t=e.data;var n=new Prism(t.options);var i=n.refract(t.code,t.lang);function r(){self.postMessage({id:t.id,lang:t.lang,result:i})}if(t.isNode){r();self.close();return}setTimeout(function(){r()},t.options.delay*1e3)}var i={};var r={};var a={};var s={};var d;var f=0;var p=o();var g=e();var m=null;function v(){if(p||m===null){m=t(n,Prism)}return m}function b(t,n){var i=v();function r(e){if(e.data.id===t.id){n(e.data);i.removeEventListener("message",r)}}i.addEventListener("message",r);i.postMessage(t)}function w(n,i,r){return function e(t){n.innerHTML=t.result;n.classList.remove("loading");n.classList.add("rainbow-show");if(n.parentNode.tagName==="PRE"){n.parentNode.classList.remove("loading");n.parentNode.classList.add("rainbow-show")}if(d){d(n,t.lang)}if(--i.c===0){r()}}}function y(e){return{patterns:i,inheritenceMap:r,aliases:a,globalClass:e.globalClass,delay:!isNaN(e.delay)?e.delay:0}}function C(e,t){var n={};if(typeof t==="object"){n=t;t=n.language}t=a[t]||t;var i={id:f++,code:e,lang:t,options:y(n),isNode:p};return i}function S(e,t){var n={c:0};for(var i=0,r=e;i<r.length;i+=1){var o=r[i];var a=c(o);if(o.classList.contains("rainbow")||!a){continue}o.classList.add("loading");o.classList.add("rainbow");if(o.parentNode.tagName==="PRE"){o.parentNode.classList.add("loading")}var s=o.getAttribute("data-global-class");var l=parseInt(o.getAttribute("data-delay"),10);++n.c;b(C(o.innerHTML,{language:a,globalClass:s,delay:l}),w(o,n,t))}if(n.c===0){t()}}function k(e){var t=document.createElement("div");t.className="preloader";for(var n=0;n<7;n++){t.appendChild(document.createElement("div"))}e.appendChild(t)}function F(e,t){t=t||function(){};e=e&&typeof e.getElementsByTagName==="function"?e:document;var n=e.getElementsByTagName("pre");var i=e.getElementsByTagName("code");var r=[];var o=[];for(var a=0,s=n;a<s.length;a+=1){var l=s[a];k(l);if(l.getElementsByTagName("code").length){if(!l.getAttribute("data-trimmed")){l.setAttribute("data-trimmed",true);l.innerHTML=l.innerHTML.trim()}continue}r.push(l)}for(var c=0,u=i;c<u.length;c+=1){var h=u[c];o.push(h)}S(o.concat(r),t)}function T(e){d=e}function D(e,t,n){if(!r[e]){r[e]=n}i[e]=t.concat(i[e]||[])}function R(e){delete r[e];delete i[e]}function $(){var e=[],t=arguments.length;while(t--)e[t]=arguments[t];if(typeof e[0]==="string"){var n=C(e[0],e[1]);b(n,function(t){return function(e){if(t){t(e.result,e.lang)}}}(e[2]));return}if(typeof e[0]==="function"){F(0,e[0]);return}F(e[0],e[1])}function L(e,t){a[e]=t}s={extend:D,remove:R,onHighlight:T,addAlias:L,color:$};if(p){s.colorSync=function(e,t){var n=C(e,t);var i=new Prism(n.options);return i.refract(n.code,n.lang)}}if(!p&&!g){document.addEventListener("DOMContentLoaded",function(e){if(!s.defer){s.color(e)}},false)}if(g){self.onmessage=n}var B=s;s.extend("generic",[{matches:{1:[{name:"keyword.operator",pattern:/\=|\+/g},{name:"keyword.dot",pattern:/\./g}],2:{name:"string",matches:{name:"constant.character.escape",pattern:/\\('|"){1}/g}}},pattern:/(\(|\s|\[|\=|:|\+|\.|\{|,)(('|")([^\\\1]|\\.)*?(\3))/gm},{name:"comment",pattern:/\/\*[\s\S]*?\*\/|(\/\/|\#)(?!.*('|").*?[^:](\/\/|\#)).*?$/gm},{name:"constant.numeric",pattern:/\b(\d+(\.\d+)?(e(\+|\-)?\d+)?(f|d)?|0x[\da-f]+)\b/gi},{matches:{1:"keyword"},pattern:/\b(and|array|as|b(ool(ean)?|reak)|c(ase|atch|har|lass|on(st|tinue))|d(ef|elete|o(uble)?)|e(cho|lse(if)?|xit|xtends|xcept)|f(inally|loat|or(each)?|unction)|global|if|import|int(eger)?|long|new|object|or|pr(int|ivate|otected)|public|return|self|st(ring|ruct|atic)|switch|th(en|is|row)|try|(un)?signed|var|void|while)(?=\b)/gi},{name:"constant.language",pattern:/true|false|null/g},{name:"keyword.operator",pattern:/\+|\!|\-|&(gt|lt|amp);|\||\*|\=/g},{matches:{1:"function.call"},pattern:/(\w+?)(?=\()/g},{matches:{1:"storage.function",2:"entity.name.function"},pattern:/(function)\s(.*?)(?=\()/g}]),s.extend("javascript",[{name:"selector",pattern:/\$(?=\.|\()/g},{name:"support",pattern:/\b(window|document)\b/g},{name:"keyword",pattern:/\b(export|default|from)\b/g},{name:"function.call",pattern:/\b(then)(?=\()/g},{name:"variable.language.this",pattern:/\bthis\b/g},{name:"variable.language.super",pattern:/super(?=\.|\()/g},{name:"storage.type",pattern:/\b(const|let|var)(?=\s)/g},{matches:{1:"support.property"},pattern:/\.(length|node(Name|Value))\b/g},{matches:{1:"support.function"},pattern:/(setTimeout|setInterval)(?=\()/g},{matches:{1:"support.method"},pattern:/\.(getAttribute|replace|push|getElementById|getElementsByClassName|setTimeout|setInterval)(?=\()/g},{name:"string.regexp",matches:{1:"string.regexp.open",2:{name:"constant.regexp.escape",pattern:/\\(.){1}/g},3:"string.regexp.close",4:"string.regexp.modifier"},pattern:/(\/)((?![*+?])(?:[^\r\n\[\/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*\])+)(\/)(?!\/)([igm]{0,3})/g},{matches:{1:"storage.type",3:"entity.function"},pattern:/(var)?(\s|^)(\S+)(?=\s?=\s?function\()/g},{matches:{1:"keyword",2:"variable.type"},pattern:/(new)\s+(?!Promise)([^\(]*)(?=\()/g},{name:"entity.function",pattern:/(\w+)(?=:\s{0,}function)/g},{name:"constant.other",pattern:/\*(?= as)/g},{matches:{1:"keyword",2:"constant.other"},pattern:/(export)\s+(\*)/g},{matches:{1:"storage.type.accessor",2:"entity.name.function"},pattern:/(get|set)\s+(\w+)(?=\()/g},{matches:{2:"entity.name.function"},pattern:/(^\s*)(\w+)(?=\([^\)]*?\)\s*\{)/gm},{matches:{1:"storage.type.class",2:"entity.name.class",3:"storage.modifier.extends",4:"entity.other.inherited-class"},pattern:/(class)\s+(\w+)(?:\s+(extends)\s+(\w+))?(?=\s*\{)/g},{name:"storage.type.function.arrow",pattern:/=&gt;/g},{name:"support.class.promise",pattern:/\bPromise(?=(\(|\.))/g}],"generic"),s.addAlias("js","javascript");return B})}).call(this,t("8oxB"),"/index.js")},ExyH:function(e,t,n){"use strict";n("ma9I");n("2B1R");n("5DmW");n("NBAS");var a=o(n("q1tI"));var i=r(n("Pwnf"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function c(e,t,n){if(t)l(e.prototype,t);if(n)l(e,n);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return d(e)}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return p(e,t)}function g(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var m=n("17x9");var v=n("mR6N"),b=v.StyleSheet,w=v.css;var i18n=n("HEOz");var y=function e(t,n){if(t){return i.default.green}else{if(n){return i.default.offBlack32}else{return i.default.offBlack16}}};var C=function(e){f(r,e);function r(){var e;var o;s(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++){n[i]=arguments[i]}o=u(this,(e=h(r)).call.apply(e,[this].concat(n)));g(d(o),"renderMessage",function(){var e=o.props,t=e.currentStep,n=e.stepStatus;return i18n.$_("Step %(currentStep)s/%(totalSteps)s",{currentStep:Math.min(t+1,n.length),totalSteps:n.length})});g(d(o),"renderPips",function(){var e=o.props,n=e.currentStep,i=e.onClickStep,r=e.stepStatus;return a.createElement("div",{className:w(A.pipContainer)},r.map(function(e,t){return a.createElement("a",{className:w(A.pip,t===0&&A.pipFirst,t===r.length-1&&A.pipLast),href:"javascript:void(0)",key:t,onClick:function e(){return i(t)},role:"button",style:{backgroundColor:y(e,n===t)}})}))});return o}c(r,[{key:"render",value:function e(){return a.createElement("div",{className:w(A.wrapper)},a.createElement("div",{className:w(A.message)},this.renderMessage()),this.renderPips())}}]);return r}(a.Component);g(C,"propTypes",{currentStep:m.number.isRequired,onClickStep:m.func,stepStatus:m.arrayOf(m.bool).isRequired});var E=5;var A=b.create({message:{fontSize:16,marginBottom:3},pip:{display:"block",height:10,marginRight:3,width:25},pipContainer:{borderRadius:5,display:"flex",overflow:"hidden"},pipFirst:{borderBottomLeftRadius:E,borderTopLeftRadius:E},pipLast:{borderBottomRightRadius:E,borderTopRightRadius:E,marginRight:0},wrapper:{display:"block"}});e.exports=C},FNNV:function(e,t,n){"use strict";n("ma9I");n("5DmW");n("NBAS");var a=o(n("q1tI"));var i=r(n("wINb"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function c(e,t,n){if(t)l(e.prototype,t);if(n)l(e,n);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return d(e)}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return p(e,t)}function g(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var m=n("17x9");var v=n("mR6N"),b=v.StyleSheet,w=v.css;var i18n=n("HEOz");var y=function(e){f(o,e);function o(){var e;var t;s(this,o);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++){i[r]=arguments[r]}t=u(this,(e=h(o)).call.apply(e,[this].concat(i)));g(d(t),"renderPJSGuidelines",function(){if(t.props.userAuthoredContentType!=="pjs"){return null}return a.createElement("div",null,a.createElement("h3",null,i18n._("Using disallowed functionality")),a.createElement("p",null,i18n._("To ensure that the ProcessingJS programs you create on Khan Academy will continue working in the future, they should not use functionalities intentionally disabled for reasons of security, privacy, or user experience. Generally, that means that JS programs should not be accessing `externals` or the `DOM` in some way. Here are specific examples:")),a.createElement("ul",{className:w(C.ul)},a.createElement("li",null,i18n._("LocalStorage: Programs should not attempt to get or set `localStorage`. Doing so will cause projects to run out of quota.")),a.createElement("li",null,i18n._("Links: JS Programs should not automatically open links to other web pages, on Khan Academy or otherwise; if you want to direct learners to a relevant link please use `println()` with the URL instead.")),a.createElement("li",null,i18n._("Sound: Programs should only create sounds using the `playSound/getSound` functions, with the sounds listed in the soundpicker. Programs should only play sounds in response to user interaction - i.e., inside one of the `mouse*` or `key*` event handling functions. Programs should not play sounds immediately upon load, and should not loop sounds endlessly."))))});g(d(t),"renderWebpageGuidelines",function(){if(t.props.userAuthoredContentType!=="webpage"){return null}return a.createElement("div",null,a.createElement("h3",null,i18n._("Using disallowed functionality")),a.createElement("p",null,i18n._("To ensure that the webpages you create on Khan Academy will continue working in the future, they should not use functionalities intentionally disabled for reasons of security, privacy, or user experience.")),a.createElement("ul",{className:w(C.ul)},a.createElement("li",null,i18n._("LocalStorage: Webpages should not attempt to get or set `localStorage`. Doing so will cause projects to run out of quota.")),a.createElement("li",null,i18n._("Sound: Webpages should only create sounds using the files available to ProcessingJS programs. Webpages should also only play sounds in response to user interaction. Webpages should not play sounds immediately upon load."))))});return t}c(o,[{key:"render",value:function e(){return a.createElement("div",null,a.createElement("p",null,i18n._("We love when people create projects that expand their understanding of computer programming -- like drawings and animations, games, scientific visualizations, or entries to contests!")),a.createElement("p",null,i18n.$_('To keep the community focused on learning to code and creating interesting projects that align with Khan Academy’s mission and community guidelines, the following will help you understand what kind of projects are appropriate here on Khan Academy. Projects that don’t meet the guidelines may be hidden from the "hot" list or from public view.')),a.createElement("p",null,i18n._("Please take some time to review the guidelines below as you create your coding masterpieces. Thank you for making our community safe, informative, and appropriate for all coding learners!")),a.createElement("br",null),a.createElement("h3",null,i18n._('About the "Hot" list')),a.createElement("p",null,i18n.$_('The "hot" list is a gallery of projects that have been recently popular with the community, according to votes. You can find that list by clicking "Browse projects" on the Computer Programming homepage.')),a.createElement("p",null,i18n._('The purpose of the "hot" list is to highlight original projects that create something really cool - like a game, graphic, or interactive simulation -- feel free to vote up a project if you’re impressed by its programming, functionality, or code!')),a.createElement("h3",null,i18n._("Project guidelines")),a.createElement("p",null,i18n._("Projects should reflect the strides you’ve made in your coding journey, and beginners are always welcome to flex their creative muscles here! However, there are some basic rules to keep in mind as you do this.")),a.createElement("p",null,i18n._('If a project or discussion post falls into one of the following disallowed criteria, a Guardian may hide it from the "hot" list and/or public view entirely. Learners who persistently break these rules may also get banned from community activity. Projects that spur discussions that distract from learning about computer programming and coding may also get hidden.')),a.createElement("p",null,i18n._("A project is considered inappropriate if it falls into one or more of the following categories:")),a.createElement("h4",null,i18n._("Offensive")),a.createElement("ul",{className:w(C.ul)},a.createElement("li",null,i18n._("Containing discriminatory or offensive language.")),a.createElement("li",null,i18n._("Sexual or violent content, or any other content that could reasonably be deemed inappropriate for an educational setting."))),a.createElement("br",null),a.createElement("h4",null,i18n._("Off-topic")),a.createElement("ul",{className:w(C.ul)},a.createElement("li",null,i18n._("Advertisements or non-helpful links to 3rd party sites.")),a.createElement("li",null,i18n._("Controversial or divisive topics including religion, politics, or personal issues/revealing details that compromise learner privacy.")),a.createElement("li",null,i18n._("Social groups or clubs, or projects that generate social chats, and other posts not related to coding, in the discussion thread.")),a.createElement("li",null,i18n._("Asking others to “vote up” a project.")),a.createElement("li",null,i18n._("Garnering or receiving votes from a voting ring (groups of people who conspire to vote up each others’ projects). People who participate in voting rings will be banned from community activity."))),a.createElement("br",null),a.createElement("h4",null,i18n._("Plagiarism")),a.createElement("p",null,i18n._('You can create spin-offs of projects by clicking the "Spin-off" button under each project. Creating a spin-off gives credit to the original creator and connects the new project to the original. Any learner can create a spin-off of any project.')),a.createElement("p",null,i18n._("It’s considered plagiarism if:")),a.createElement("ul",{className:w(C.ul)},a.createElement("li",null,i18n._("A user pastes someone else's work into a new project, instead of creating a spin-off.")),a.createElement("li",null,i18n._("A user pastes work from multiple projects without giving credit/links to those projects in comments at the top of the project."))),a.createElement("br",null),this.renderPJSGuidelines(),this.renderWebpageGuidelines(),a.createElement("p",null,i18n._("Nice, you read them all! You're winning like a Winston!")),a.createElement("p",null,a.createElement("img",{alt:"","aria-hidden":true,src:(0,i.default)("/images/avatars/cs-winston.png")})))}}]);return o}(a.Component);g(y,"propTypes",{userAuthoredContentType:m.string.isRequired});var C=b.create({ul:{fontSize:14,listStyle:"inherit",paddingLeft:20}});e.exports=y},K91X:function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("2B1R");n("5DmW");n("NBAS");n("FZtP");var r=a(n("q1tI"));var i=o(n("Pwnf"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function s(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var i=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}i.forEach(function(e){m(t,e,n[e])})}return t}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function u(e,t,n){if(t)c(e.prototype,t);if(n)c(e,n);return e}function h(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return f(e)}function d(e){d=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return d(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)g(e,t)}function g(e,t){g=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return g(e,t)}function m(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var v=n("17x9");var b=n("mR6N"),w=b.StyleSheet,y=b.css;var C=n("QCGh");var E=n("x1xB");var A=function(e){p(o,e);function o(){var e;var n;l(this,o);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}n=h(this,(e=d(o)).call.apply(e,[this].concat(i)));m(f(n),"state",{currentTabIndex:0});m(f(n),"onTabChange",function(e,t){e.preventDefault();n.setState({currentTabIndex:t})});return n}u(o,[{key:"render",value:function e(){var i=this;var t=this.props.tabs.filter(function(e){return e.content});if(!t.length){return null}return r.createElement("div",{className:y(x.info)},r.createElement("div",{role:"tablist",className:y(x.tabRow),id:"scratchpad-tabs"},t.map(function(e,n){var t=n===i.state.currentTabIndex;return r.createElement(C,{key:n,href:"javascript:void(0)",role:"tab","aria-selected":t,style:[x.tabTrigger,t?x.activeTab:x.inactiveTab],onClick:function e(t){return i.onTabChange(t,n)}},e.title)})),r.createElement("div",{className:y(x.separator)}),r.createElement("div",{className:y(x.tabContent)},t[this.state.currentTabIndex].content))}}]);return o}(r.Component);m(A,"propTypes",{tabs:v.arrayOf(v.shape({content:v.node,title:v.string.isRequired}))});m(A,"defaultProps",{tabs:[]});var x=w.create({info:{maxWidth:688,margin:"0 auto"},activeTab:{color:i.default.blue,borderBottom:"5px solid ".concat(i.default.blue)},inactiveTab:{":hover":{borderBottom:"5px solid #E3E5E6",transition:"border-width 75ms ease-in-out"},borderBottom:"0px solid #E3E5E6",transition:"border-width 150ms ease-in-out"},tabContent:s({},E.mixins.padding(16,16,16,16),E.typography.bodySmall,{color:E.colors.gray17}),tabRow:{display:"flex",justifyContent:"center"},tabTrigger:s({},E.mixins.padding(14,17,8,17),{display:"block",fontFamily:"inherit",fontSize:17,fontWeight:"bold",lineHeight:"21px",zIndex:1,":hover":{textDecoration:"none"}}),separator:{backgroundColor:E.colors.gray85,height:1,position:"relative",top:-1}});e.exports=A},"KF/j":function(e,t,n){"use strict";n("ma9I");n("5DmW");n("NBAS");var a=r(n("q1tI"));var i;function r(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function l(e,t,n){if(t)o(e.prototype,t);if(n)o(e,n);return e}function c(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return h(e)}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return u(e)}function h(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)f(e,t)}function f(e,t){f=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return f(e,t)}function p(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var g=n("17x9");var i18n=n("HEOz");var m=n("CxBN");var v=n("uKIX");var b={CLOSED:"closed",OPEN:"open",DELETE_IN_PROGRESS:"inprogress",DELETE_ERROR:"error"};var w=(i={},p(i,b.OPEN,{title:i18n._("Delete this project?"),body:i18n._("Are you sure you want to delete this project? "+"This can't be undone.")}),p(i,b.DELETE_IN_PROGRESS,{title:i18n._("Deleting..."),body:i18n._("Deleting project. You'll be redirected "+"when it's done.")}),p(i,b.DELETE_ERROR,{title:i18n._("Deletion Failed."),body:i18n._("Something went wrong and we "+"couldn't delete the project. Please try again!")}),i);var y=function(e){d(o,e);function o(){var e;var i;s(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++){n[r]=arguments[r]}i=c(this,(e=u(o)).call.apply(e,[this].concat(n)));p(h(i),"state",{deleteModalState:b.CLOSED});p(h(i),"renderDeleteModal",function(){var e=i.state.deleteModalState;if(e===b.CLOSED){return null}var t=function e(){i.setState({deleteModalState:b.DELETE_IN_PROGRESS});i.props.deleteScratchpad().then(undefined,function(){return i.setState({deleteModalState:b.DELETE_ERROR})})};var n=e==="open"&&a.createElement("span",null,a.createElement(m,{domainSlug:i.props.topic.domainSlug,label:i18n._("Cancel"),onClick:function e(){return i.setState({deleteModalState:b.CLOSED})}})," ",a.createElement("span",{"data-test-id":"delete-project-dialog-button"},a.createElement(m,{typeStyle:"submit",domainSlug:i.props.topic.domainSlug,label:i18n._("Delete"),onClick:t})));return a.createElement(v,{title:w[e].title,footer:n,backdrop:"static",showCloseButton:e===b.DELETE_ERROR},w[e].body)});return i}l(o,[{key:"render",value:function e(){var t=this;return a.createElement("span",{"data-test-id":"scratchpad-delete-button"},a.createElement(m,{typeStyle:"primary",domainSlug:this.props.topic.domainSlug,label:i18n._("Delete"),onClick:function e(){return t.setState({deleteModalState:b.OPEN})}}),this.renderDeleteModal())}}]);return o}(a.Component);p(y,"propTypes",{deleteScratchpad:g.func.isRequired,topic:g.shape({domainSlug:g.string.isRequired}).isRequired});e.exports=y},Mf8q:function(e,t,a){"use strict";a("pNMO");a("4Brf");a("ma9I");a("4mDm");a("5DmW");a("NBAS");a("07d7");a("5s+n");a("3bBZ");var n=i(a("q1tI"));function i(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function s(e,t){return l(e)||o(e,t)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(e,t){var n=[];var i=true;var r=false;var o=undefined;try{for(var a=e[Symbol.iterator](),s;!(i=(s=a.next()).done);i=true){n.push(s.value);if(t&&n.length===t)break}}catch(e){r=true;o=e}finally{try{if(!i&&a["return"]!=null)a["return"]()}finally{if(r)throw o}}return n}function l(e){if(Array.isArray(e))return e}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function h(e,t,n){if(t)u(e.prototype,t);if(n)u(e,n);return e}function d(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return p(e)}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return f(e)}function p(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return m(e,t)}function v(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var b=a("17x9");var w=function(e){g(o,e);function o(){var e;var r;c(this,o);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++){n[i]=arguments[i]}r=d(this,(e=f(o)).call.apply(e,[this].concat(n)));v(p(r),"loadInteractiveTranscript",function(){Promise.all([a.e("41654d857b95e336c1a9dfa461acd8e1").then(a.t.bind(null,"jPIJ",7)).then(function(e){return e.default}),a.e("6a52e4ec324b6b1796e5f1abca6760e0").then(a.t.bind(null,"z782",7))]).then(function(e){var t=s(e,1),n=t[0].InteractiveTranscriptView;var i=new n({model:r.props.transcript});i.on("subtitleSelection",function(e){r.props.onSeekStart();r.props.onSeek(e*1e3);r.props.onSeekEnd()});r.props.registerPlayUpdate(function(e){return i.onPlayerUpdate(e)});r.refs.transcript.appendChild(i.render().el);i.showWithSlide()})});return r}h(o,[{key:"componentDidMount",value:function e(){this.loadInteractiveTranscript()}},{key:"render",value:function e(){return n.createElement("div",{ref:"transcript"})}}]);return o}(n.Component);v(w,"propTypes",{onSeek:b.func,onSeekEnd:b.func,onSeekStart:b.func,onTranscriptSeek:b.func,registerPlayUpdate:b.func.isRequired,transcript:b.any.isRequired});v(w,"defaultProps",{onTranscriptSeek:function e(){}});e.exports=w},MhIR:function(e,t,n){"use strict";var i=r(n("j6G6"));function r(e){return e&&e.__esModule?e:{default:e}}var o=n("q1z7");var a=n("wd/R");var _=n("F/us");var s=n("whzC");var i18n=n("HEOz");var l=n("E9A0");var c=o.Model.extend({parse:function e(t){t.created=new Date(t.created);if(isNaN(Number(t.created))){t.created=new Date}return t},hasAudio:function e(){return!!this.getMp3Url()},getMp3Url:function e(){var t=this.get("translatedMp3Url")||this.get("mp3Url");return t}});var u=o.Model.extend({url:function e(){return"/api/internal/user_scratchpads/"+(this.id||"")+"?casing=camel&client_dt="+a().format()},defaults:{challengeStatus:-1,stashedCode:""},initialize:function e(){this.inactivitySeconds=0;this.lastActivityTime=null},saveChallengeStatus:function e(t,n){if(!_.contains(["complete","started"],t)){console.error("Invalid status: "+t);return}var i=this.setChallengeTimeTaken();var r=t==="complete"?1:0;i.challengeStatus=r;n=n||{};i["scratchpadId"]=this.get("scratchpadId");i["scratchpadKind"]=this.get("scratchpadKind");n.attrs=i;this.save(i,n)},startInactivityTimer:function e(){var t=(new Date).getTime();var n=this.lastActivityTime&&(t-this.lastActivityTime)/1e3;var i=60*60*5;if(n>i){this.inactivitySeconds=n}this.lastActivityTime=(new Date).getTime()},setChallengeTimeTaken:function e(){var t={};var n=(new Date).getTime();if(this.lastTimeRecorded){var i=Math.round((n-this.lastTimeRecorded)/1e3);i-=Math.round(this.inactivitySeconds);i=i<0?0:i;t={timeTaken:i};this.set(t,{silent:true})}this.lastTimeRecorded=n;return t},saveChallengeTimeTaken:function e(){if(!this.save||!this.setChallengeTimeTaken){return}var t=this.setChallengeTimeTaken();var n={silent:true};t["scratchpadId"]=this.get("scratchpadId");t["scratchpadKind"]=this.get("scratchpadKind");n.attrs=t;this.save(t,n)}});var h=o.Model.extend({urlRoot:"/api/internal/scratchpads",url:function e(){var t=h.__super__.url.apply(this);return t+"?client_dt="+a().format()},pathForShow:function e(){return this.get("relativeUrl")},pathForImage:function e(){return this.get("imagePath")},urlForShow:function e(){return this.get("url")},urlForImage:function e(){return this.get("imageUrl")},getVersion:function e(){if(this.isNew()){var t=l.LegacyRequireIfLoaded["ScratchpadUIModule"];if(t&&t.ScratchpadUI&&t.ScratchpadUI.liveEditor){return t.ScratchpadUI.liveEditor.config.latestVersion()}}return this.currentRevision().get("configVersion")||0},setVersion:function e(t){this.currentRevision().set("configVersion",t)},getCode:function e(){var t=this.get("contentKind");if(t==="Scratchpad"||!t){return this.currentRevision().get("code")}else{return this.get("code")}},getFolds:function e(){if(this.get("contentKind")==="Scratchpad"){return this.currentRevision().get("folds")}else{return this.get("folds")}},getPlayback:function e(){if(this.get("contentKind")==="Scratchpad"){return this.currentRevision().get("playback")}else{return this.get("playback")}},getYoutubeId:function e(t){if(this.get("contentKind")==="Scratchpad"){return this.currentRevision().get("youtubeId")}else{return this.get("youtubeId")}},setYoutubeId:function e(t){this.currentRevision().set("youtubeId",t)},getYoutubeUrl:function e(){return s.safeLinkTo("https://www.youtube.com/embed/".concat(this.getYoutubeId()))},isResizableType:function e(){return this.get("userAuthoredContentType")==="webpage"||this.get("userAuthoredContentType")==="sql"},toJSONForTemplate:function e(){return{id:this.get("id"),imagePath:this.pathForImage(),showPath:this.pathForShow(),title:this.get("title"),translatedTitle:this.get("translatedTitle")}},hasTag:function e(t){return _.include(this.get("tags"),t)},parse:function e(t,n){t.revision=new c(t.revision,{parse:true});t.trustedRevision=new c(t.trustedRevision,{parse:true});if(!t.tags){t.tags=[]}return t},fork:function e(){var t=this.currentRevision();var n=new h({title:this.get("title"),revision:t.clone().unset("id").set({mp3Url:"",playback:"",tests:""}),originScratchpadId:this.get("id"),originScratchpadKind:this.get("contentKind"),originRevisionId:t.get("id")});return n},save:function e(t,n){this.get("revision").unset("created").unset("kind").unset("scratchpadId").unset("id").unset("hasAudio");return h.__super__.save.call(this,t,n)},currentRevision:function e(){var t=l.LegacyRequireIfLoaded["ScratchpadUIModule"];if(t&&!this.isOwner()){var n=t.ScratchpadUI;var i=this.get("trustedRevision");if(n.trusted&&i&&i.get("id")){return this.get("trustedRevision")}}return this.get("revision")},isTalkie:function e(){return this.get("contentKind")==="Talkthrough"||this.currentRevision()&&this.currentRevision().get("hasAudio")},isChallenge:function e(){return this.get("contentKind")==="Challenge"||this.get("category")==="challenge"},isProject:function e(){return this.get("contentKind")==="Project"||this.get("category")==="project"},isOfficial:function e(){return this.get("contentKind")==="Interactive"||this.get("category")==="official"},isCategorySet:function e(){return!!this.get("category")},isProjectOrFork:function e(){return this.isProject()||this.isOriginProject()},hasObjectives:function e(){return this.isChallenge()||this.isProject()},isOwner:function e(){return i.default.getKaid()&&this.get("kaid")===i.default.getKaid()},inTutorial:function e(){return!!this.get("defaultUrlPath")},isOriginProject:function e(){return this.get("originIsProject")},setTitle:function e(t){this.set("title",t);this.set("translatedTitle",t)}},{difficultyMapping:{1:i18n._("Work in Progress"),10:i18n._("Getting Started"),20:i18n._("Easy"),30:i18n._("Intermediate"),40:i18n._("Expert")}});e.exports={Scratchpad:h,ScratchpadRevision:c,UserScratchpad:u}},Myuz:function(e,t,n){"use strict";n("5DmW");var i=a(n("q1tI"));var r=o(n("wINb"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}var s=n("17x9");var l=n("fhzG");var c=n("mR6N"),u=c.StyleSheet,h=c.css;var d=n("2LjZ");var f=n("MhIR"),p=f.UserScratchpad;var g=n("8crR"),m=g.ScratchpadChallenge;var i18n=n("HEOz");var v=l({displayName:"CompletionCritter",propTypes:{challenge:s.instanceOf(m),showAbove:s.bool,userScratchpad:s.instanceOf(p)},mixins:[d],getInitialState:function e(){return{bubbleClosed:false}},getBackboneModels:function e(){var t=[];if(this.props.userScratchpad){t.push(this.props.userScratchpad)}if(this.props.challenge){t.push(this.props.challenge)}return t},renderCritter:function e(){return i.createElement("img",{alt:"","aria-hidden":true,className:h(E.critter),src:(0,r.default)("/images/scratchpads/cool-critter.png")})},renderMessage:function e(){var t=this.props.userScratchpad?this.props.userScratchpad.get("points"):0;return i.createElement("div",{className:h(E.message)},i.createElement("span",{className:h(E.messageHeader)},i18n._("Congratulations!")),t>0&&i.createElement("span",null,i18n.$_("You earned %(points)s points!",{points:t})))},renderBubble:function e(){var t=this;if(this.state.bubbleClosed){return null}return i.createElement("div",{className:h(E.bubble,this.props.showAbove&&E.bubbleAbove),onClick:function e(){return t.setState({bubbleClosed:true})}},i.createElement("div",{className:h(E.inner)},this.renderCritter(),this.renderMessage()))},render:function e(){return i.createElement("div",{className:h(E.wrap)},this.renderBubble())}});var b=17;var w=80;var y=2;var C="#f5f5f5";var E=u.create({bubble:{background:C,bottom:70,color:"black",borderRadius:10,cursor:"pointer",display:"inline-block",maxWidth:250,minWidth:200,padding:10,position:"absolute",right:0,zIndex:y},bubbleAbove:{bottom:"auto",right:0,top:0-b-w-20},critter:{height:70,marginRight:10},inner:{display:"flex",flexDirection:"row-reverse",justifyContent:"space-around"},message:{display:"flex",flexDirection:"column"},messageHeader:{fontWeight:"bold"},toolbarButton:{marginLeft:16},wrap:{display:"inline-block",position:"relative"}});e.exports=v},NqAJ:function(e,t,n){"use strict";n("fbCW");var r=n("e2gc");var _=n("F/us");var o=n("+reu").ScratchpadUI;var a=n("iQJ3");var s=function e(){return o.isAttemptingSomething()&&(o.scratchpad.isProject()||o.isRedirectedProjectFork)};var i=function e(){if(o.isRedirectedProjectFork&&o.isSaveable()){o.triggerSave()}else{o.stashUserCode()}o.userScratchpad.startInactivityTimer()};var l=_.debounce(i,3e3);r.extend(o.dom,{PROJECT_REQ_EVAL_BUTTON:".request-eval-button",PROJECT_EVAL_BUTTON:".eval-button-container .kui-button"});var c=_.once(function(){r(o).on({started:function e(t){if(!s()){return}var n=o.liveEditor.editor;n.on("change",function(){l()});this.$el.on("click",this.dom.PROJECT_REQ_EVAL_BUTTON,function(e){r(o.dom.PROJECT_EVAL_BUTTON)[0].click()});this.$el.on("click",this.dom.PROJECT_EVAL_BUTTON,function(e){o.userScratchpad.saveChallengeTimeTaken()});var i=function e(){if(o.userScratchpad.get("challengeStatus")===5){if(!a.get(o.localStorage.SEEN_COMPLETED_PROJECT)){a.set(o.localStorage.SEEN_COMPLETED_PROJECT,1)}o.$el.find(o.dom.PROJECT_REQ_EVAL_BUTTON).hide()}};o.userScratchpad.on("change:challengeStatus",function(e,t){i()});i();o.userScratchpad.setChallengeTimeTaken();o.userScratchpad.startInactivityTimer();if(o.isRedirectedProjectFork){return}o.loadUserSpinOffs()},initCode:function e(t,n){if(!s()||o.isRedirectedProjectFork){return}n.code=o.userScratchpad.get("stashedCode")},remove:function e(t){if(!s()){return}o.userScratchpad.saveChallengeTimeTaken();i()}})});e.exports={bindEvents:c}},P6H5:function(e,t,n){"use strict";var i=n("e2gc");var _=n("F/us");var r=n("+reu"),o=r.ScratchpadUI;var a=_.once(function(){i(o).bind({beforeunload:function e(t,n){if(n.warnMsg&&o.liveEditor.record.playing){n.warnMsg=undefined}},remove:function e(){if(o.liveEditor.player){o.liveEditor.player.destruct();o.liveEditor.record.stopPlayback()}o.liveEditor.recordHandlersBound=false}})});e.exports={bindEvents:a}},PMNg:function(e,t,n){"use strict";n("ma9I");n("5DmW");n("NBAS");n("07d7");n("JfAA");var a=r(n("q1tI"));var s=i(n("wa3X"));function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function c(e,t,n){if(t)o(e.prototype,t);if(n)o(e,n);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return d(e)}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return p(e,t)}function g(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var m=n("17x9");var v=n("uKIX");var b=n("ABr6");var i18n=n("HEOz");var w=function(e){f(o,e);function o(){var e;var n;l(this,o);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}n=u(this,(e=h(o)).call.apply(e,[this].concat(i)));g(d(n),"handleChange",function(e,t){n.props.scratchpad.set(e,t);n.forceUpdate()});g(d(n),"handleSaveAndClose",function(){n.props.onSaveAndClose()});return n}c(o,[{key:"render",value:function e(){var n=this;var t=this.props.scratchpad;var i=[["400","400 (default)"],["500","500"],["600","600"]];var r=t.get("userAuthoredContentType")==="pjs";return a.createElement(v,{backdrop:false},a.createElement("span",{className:"close",onClick:this.props.onCloseModal},"×"),r&&a.createElement("div",{className:"control-group"},a.createElement("div",{className:"kui-labeledfield__title"},i18n._("Width")),a.createElement("br",null),a.createElement(b,{value:t.get("width").toString(),hideBlank:true,options:i,onChange:function e(t){return n.handleChange("width",parseInt(t))}})),a.createElement("div",{className:"control-group"},a.createElement("div",{className:"kui-labeledfield__title"},i18n._("Height")),a.createElement("br",null),a.createElement(b,{value:t.get("height").toString(),hideBlank:true,options:i,onChange:function e(t){return n.handleChange("height",parseInt(t))}})),a.createElement("p",null,i18n._("To see the full effect of the size on your canvas, reload your program after saving.")),a.createElement(s.default,{onClick:this.props.onSaveAndClose,kind:"secondary"},i18n._("Save and Close")))}}]);return o}(a.Component);g(w,"propTypes",{onCloseModal:m.func,onSaveAndClose:m.func.isRequired,scratchpad:m.objectOf(m.any).isRequired});e.exports=w},Pj0g:function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("5DmW");n("FZtP");var c=u(n("q1tI"));var r=i(n("wa3X"));var o=n("JimW");var a=n("JasB");var s=n("Vxy9");var l=n("DzHr");function i(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function h(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var i=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}i.forEach(function(e){d(t,e,n[e])})}return t}function d(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var f=n("17x9");var p=n("fhzG");var g=n("mR6N"),m=g.StyleSheet,v=g.css;var b=n("2LjZ");var w=n("MhIR"),y=w.Scratchpad,C=w.UserScratchpad;var E=n("KZFn");var A=n("8crR"),x=A.ScratchpadChallenge;var S=n("QilZ");var k=n("6OHE");var i18n=n("HEOz");var F=p({displayName:"EditableTitle",propTypes:{inEditModeAndCanEdit:f.bool,isSaveable:f.bool,onSave:f.func.isRequired,scratchpad:f.instanceOf(y).isRequired,setTitle:f.func.isRequired,topic:f.shape({domainSlug:f.string.isRequired,relativeUrl:f.string.isRequired,translatedTitle:f.string.isRequired}).isRequired,translatedTitle:f.string.isRequired},mixins:[b],getBackboneModels:function e(){return[this.props.scratchpad]},render:function e(){var i=this;var t=this.props.scratchpad.get("translatedTitle");if(!this.props.inEditModeAndCanEdit||!this.props.isSaveable){return c.createElement("span",null,t)}var n=function e(t){var n=t.closeModal;return c.createElement(l.OneColumnModal,{onClickCloseButton:n,content:c.createElement(o.View,null,c.createElement(s.Title,null,i18n._("Edit title")),c.createElement(a.Strut,{size:16}),c.createElement(s.Body,null,c.createElement("input",{type:"text",defaultValue:i.props.scratchpad.get("translatedTitle"),className:v(D.titleInput),onChange:function e(t){return i.setState({newTitle:t.target.value})}}))),footer:c.createElement(o.View,{style:D.modalFooter},c.createElement(r.default,{kind:"tertiary",onClick:n},i18n._("Cancel")),c.createElement(a.Strut,{size:16}),c.createElement(r.default,{onClick:function e(){i.props.setTitle(i.state.newTitle).then(function(){i.props.onSave();n()})}},i18n._("Save")))})};return c.createElement(o.View,{style:D.titleWrap},c.createElement("span",null,t),c.createElement(a.Strut,{size:16}),c.createElement(o.View,{className:v(D.editTitle)},c.createElement(l.ModalLauncher,{modal:n},function(e){var t=e.openModal;return c.createElement(r.default,{kind:"tertiary",onClick:t},i18n._("Edit title"))})))}});var T=p({displayName:"ScratchpadHeader",propTypes:{challenge:f.instanceOf(x),embedded:f.bool,inEditModeAndCanEdit:f.bool,isChallenge:f.bool,isDocumentation:f.bool,isOfficial:f.bool,isOwner:f.bool,isUneditableProjectFork:f.bool,onTriggerSpinoff:f.func.isRequired,originScratchpad:f.instanceOf(y),profileRoot:f.string,scratchpad:f.instanceOf(y).isRequired,showDescription:f.bool,topic:f.shape({domainSlug:f.string.isRequired,relativeUrl:f.string.isRequired,translatedTitle:f.string.isRequired}).isRequired,userScratchpad:f.instanceOf(C),translatedTitle:f.string.isRequired},mixins:[b],getBackboneModels:function e(){var t=[this.props.scratchpad];if(this.props.originScratchpad){t.push(this.props.originScratchpad)}if(this.props.challenge){t.push(this.props.challenge)}return t},renderContentHeader:function e(){var t=this.props,n=t.topic,i=t.scratchpad,r=t.isDocumentation,o=t.isOwner,a=t.isOfficial,s=t.originScratchpad;var l=[{title:n.translatedTitle,href:n.relativeUrl}];if(s&&!a){l.push({title:s.get("translatedTitle"),href:s.get("deleted")?"javascript: void 0":s.get("url"),forceServer:true})}if(r){l.push({title:i18n._("Documentation"),href:i.get("docsUrlPath")})}else if(o){l.push({title:i18n._("My Projects"),href:"".concat(this.props.profileRoot,"projects"),forceServer:true})}return c.createElement(E,{title:c.createElement(F,this.props),breadcrumbs:l,domain:n.domainSlug})},renderChallengePane:function e(){var t=this.props.challenge;if(!t){return null}return c.createElement("div",null,c.createElement(S,{challenge:t,domain:this.props.topic.domainSlug,translatedTitle:this.props.scratchpad.get("translatedTitle")}))},render:function e(){return c.createElement("div",null,this.renderContentHeader(),this.renderChallengePane())}});var D=m.create({modalWrap:h({},k.typography.bodySmall),titleWrap:{flexDirection:"row",position:"relative"},editTitle:{bottom:0,left:"100%",position:"absolute",whiteSpace:"nowrap"},titleInput:h({},k.typography.bodySmall,{width:"100%"}),modalFooter:{flexDirection:"row"}});e.exports=T},QilZ:function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("yq1k");n("yXV3");n("2B1R");n("5DmW");n("FZtP");var c=i(n("q1tI"));function i(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var i=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}i.forEach(function(e){o(t,e,n[e])})}return t}function o(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var a=n("17x9");var s=n("fhzG");var l=n("mR6N"),u=l.StyleSheet,h=l.css;var d=n("Fumg");var f=n("2LjZ");var p=n("x1xB"),g=p.moduleLayout;var m=n("6OHE"),v=m.colors;var b=n("8crR"),w=b.getColoredTextForTest,y=b.sendContentFeedback;var C=n("pthG");var E=n("2Ikf");var A=n("nVHT");var i18n=n("HEOz");var x=s({displayName:"ChallengePane",propTypes:{challenge:a.shape({get:a.func.isRequired,on:a.func.isRequired}).isRequired,domain:a.string.isRequired,translatedTitle:a.string.isRequired},mixins:[f],getInitialState:function e(){return{showFeedbackModal:false}},getTestGroup:function e(){var t=this.props.challenge;var n=t.get("tests");if(t.hasSyntaxErrors()){if(this._testsCache){n=this._testsCache}else{return null}}this._testsCache=n;return n[Math.min(t.get("step"),n.length-1)]},getBackboneModels:function e(){return[this.props.challenge]},renderShowFeedback:function e(){var t=this;return c.createElement("a",{className:h(S.showFeedback),href:"javascript:void(0)",onClick:function e(){return t.setState({showFeedbackModal:true})}},"(",i18n._("Report a problem"),")")},renderFeedbackModal:function e(){var t=this;var r=this.props.challenge;var n=["es-ES","pt-BR"].includes(d.getLocale());return c.createElement(C,{expectPageIsTranslated:n,onClose:function e(){return t.setState({showFeedbackModal:false})},sendFeedback:function e(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++){n[i]=arguments[i]}return y.apply(void 0,[r].concat(n))},stepCodeWarning:r.currentStepHasWarning(),stepGoBackNotice:r.previousStepFailed()})},renderSteps:function e(){var o=this;var a=this.props.challenge;var s=a.editor.type;var l=this.getTestGroup();if(l){return c.createElement("div",null,l.results.map(function(e,t){var n=w(e);var i=n.indexOf("structuredjs_var")>-1;var r=e.meta.alsoMessage||a.assertionsFail()&&i18n._("Hm, do all of your assertions pass?")||null;return c.createElement(E,{key:t,title:l.name,description:e.msg,domain:o.props.domain,hasHint:!!(n||e.meta.image),structure:n,image:e.meta.image,alternateMessage:e.meta.alternateMessage,alsoMessage:r,hasMatchingBlanks:i,isPJS:s==="ace_pjs",isWebpage:s==="ace_webpage",hasSyntaxErrors:a.hasSyntaxErrors()})}))}else{return c.createElement("div",null,c.createElement(E,{description:i18n._("It looks like this code was saved with a syntax "+"error. You'll need to fix any syntax errors or "+"restart the challenge before we can determine "+"which step you're on."),domain:this.props.domain,structure:"",alsoMessage:i18n._("Please take a moment to fix any syntax errors."),isPJS:s==="ace_pjs",isWebpage:s==="ace_webpage",title:i18n._("Whoops!")}))}},renderLoading:function e(){return c.createElement("div",{className:h(S.loading)},c.createElement(A,null),c.createElement("div",null,i18n._("Waiting for code to run...")))},renderContent:function e(){return c.createElement("div",null,this.renderShowFeedback(),this.renderSteps())},render:function e(){var t=this.props.challenge;return c.createElement("div",null,this.state.showFeedbackModal&&this.renderFeedbackModal(),c.createElement("div",{className:h(S.wrap)},t.get("tests")?this.renderContent():this.renderLoading()))}});var S=u.create({loading:{textAlign:"center",padding:20},showFeedback:{color:v.gray76,top:10,fontSize:10,position:"absolute",right:10},wrap:r({},g.defaultAlignment,{color:"black",marginBottom:-20,padding:20,paddingBottom:0,position:"relative"})});e.exports=x},"V2R+":function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("yXV3");n("5DmW");n("NBAS");n("UxlC");n("EnZy");n("FZtP");var r=s(n("q1tI"));var o=i(n("j6G6"));var a=i(n("Q8Wn"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function l(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var i=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}i.forEach(function(e){v(t,e,n[e])})}return t}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function h(e,t,n){if(t)u(e.prototype,t);if(n)u(e,n);return e}function d(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return p(e)}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return f(e)}function p(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return m(e,t)}function v(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var b=n("mR6N"),w=b.StyleSheet,y=b.css;var C=n("17x9");var E=n("TSYQ");var A=n("skGw"),x=A.encodeParams,S=A.formUrlencode,k=A.khanFetch;var F=n("/uDT");var T=n("hDgO");var D=n("Svk7");var R=n("6wxr");var $=n("uKIX");var L=n("CxBN");var B=n("uFGi");var O=n("+Hxn");var M=n("MhIR"),P=M.Scratchpad;var I=n("1mos");var N=n("YXAN");var i18n=n("HEOz");var H=function(e){g(o,e);function o(){var e;var t;c(this,o);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++){i[r]=arguments[r]}t=d(this,(e=f(o)).call.apply(e,[this].concat(i)));v(p(t),"state",{hideAuthorAndPlayback:false,hideButtons:false,hideEditor:false});v(p(t),"toggleEmbedButtons",function(){t.setState({hideButtons:!t.state.hideButtons})});v(p(t),"toggleEmbedEditor",function(){t.setState({hideEditor:!t.state.hideEditor})});v(p(t),"toggleEmbedAuthorAndPlayback",function(){t.setState({hideAuthorAndPlayback:!t.state.hideAuthorAndPlayback})});v(p(t),"handleFacebookClick",function(){q.facebook(t.props.scratchpad);t.props.onComplete()});v(p(t),"handleTwitterClick",function(){q.twitter(t.props.scratchpad);t.props.onComplete()});v(p(t),"handleEmailClick",function(){q.email(t.props.scratchpad);t.props.onComplete()});return t}h(o,[{key:"componentDidMount",value:function e(){if(!a.default.isZeroRated){F.prepFacebook()}}},{key:"render",value:function e(){var t=!a.default.isZeroRated;var n=r.createElement("p",{className:E("alert",y(j.unsavedAlert))},i18n._("Warning: there are un-saved changes in this project."));var i=r.createElement("form",null,this.props.hasUnsavedChanges()&&n,r.createElement(B,{disabled:true,title:i18n._("Share this project by using this link:"),type:"text",value:W(this.props.scratchpad)}),r.createElement("div",{className:y(j.shareButtonGroup)},t&&r.createElement(L,{label:r.createElement("span",{className:y(j.shareButtonInner)},r.createElement("span",{className:y(j.shareIcon)},r.createElement(R,{icon:I.facebookSign})),r.createElement("span",{className:y(j.shareButtonTextLabel)},i18n._("Share"))),"aria-label":i18n._("Share this on Facebook"),onClick:this.handleFacebookClick,typeStyle:L.SECONDARY}),r.createElement(L,{label:r.createElement("span",{className:y(j.shareButtonInner)},r.createElement("span",{className:y(j.shareIcon)},r.createElement(R,{icon:I.twitterSign})),r.createElement("span",{className:y(j.shareButtonTextLabel)},i18n._("Tweet"))),"aria-label":i18n._("Share this on Twitter"),onClick:this.handleTwitterClick,typeStyle:L.SECONDARY}),r.createElement(L,{label:r.createElement("span",{className:y(j.shareButtonInner)},r.createElement("span",{className:y(j.shareIcon)},r.createElement(R,{icon:I.envelope})),r.createElement("span",{className:y(j.shareButtonTextLabel)},i18n._("Email"))),"aria-label":i18n._("Share this via email"),onClick:this.handleEmailClick,typeStyle:L.SECONDARY})),r.createElement(O,{disabled:true,height:"150px",title:i18n._("Have a website? Embed this project on your site."),value:z(this.props.scratchpad,this.state)}),r.createElement("div",{className:y(j.checkboxGroup)},r.createElement("span",null,r.createElement("label",null,r.createElement(D,{name:"hide-editor",checked:this.state.hideEditor,onChange:this.toggleEmbedEditor})," ",i18n._("Hide editor"))),r.createElement("span",null,r.createElement("label",null,r.createElement(D,{name:"hide-buttons",checked:this.state.hideButtons,onChange:this.toggleEmbedButtons})," ",i18n._("Hide buttons"))),r.createElement("span",null,r.createElement("label",null,r.createElement(D,{name:"hide-author-and-playback",checked:this.state.hideAuthorAndPlayback,onChange:this.toggleEmbedAuthorAndPlayback})," ",i18n._("Hide author and playback")))));return r.createElement($,{children:i,onClose:this.props.onComplete,shouldHandleClose:false,showCloseButton:true,title:i18n._("Share this Project"),wide:true})}}]);return o}(r.Component);v(H,"propTypes",{hasUnsavedChanges:C.func.isRequired,onComplete:C.func.isRequired,scratchpad:C.instanceOf(P).isRequired});var j=w.create({checkboxGroup:{color:T.textColor,display:"flex",justifyContent:"space-around",margin:"0 auto",width:"70%"},shareButtonGroup:{display:"flex",justifyContent:"space-between",margin:"0 auto",marginBottom:20,width:"45%"},shareButtonInner:{verticalAlign:"middle"},shareButtonTextLabel:{marginLeft:5,verticalAlign:"text-bottom"},shareIcon:{verticalAlign:"middle"},unsavedAlert:{margin:0,marginBottom:10}});var U=function e(t,n){var i=t.get("translatedTitle");var r;n=n||i18n._("Khan Academy");if(t.isOwner()){r=i18n._('I just created "%(translatedTitle)s" on %(khanAcademy)s!',{translatedTitle:i,khanAcademy:n})}else{r=i18n._('I just explored "%(translatedTitle)s" on %(khanAcademy)s!',{translatedTitle:i,khanAcademy:n})}return{message:r,url:W(t),imageUrl:t.urlForImage()}};var W=function e(t){return t.inTutorial()?window.location.protocol+"//"+window.location.host+t.get("defaultUrlPath"):t.urlForShow()};var z=function e(t,n){var i=W(t);var r=i.indexOf("computer-programming")>=0;var o=t.get("translatedTitle");var a={editor:!n.hideEditor,buttons:!n.hideButtons,author:!n.hideAuthorAndPlayback,embed:true};var s={};for(var l in a){if(a.hasOwnProperty(l)){s[l]=a[l]?"yes":"no"}}var c=t.get("contentKind");var u;if(c==="Scratchpad"){u=t.urlForShow()}else{var h=t.get("defaultUrlPath");var d=h.split("/")[2];u=i.replace(h,"/".concat(d,"/").concat(t.get("slug"))+"/".concat(c,":").concat(t.get("id")))}var f="".concat(u,"/embed.js?").concat(x(s));var p=i18n._('<p>Made using: <a href="%(url)s">%(title)s</a></p>',{url:"http://www.khanacademy.org/computer-programming",title:"Khan Academy Computer Science"});return"<h2>"+'<a href="'.concat(i,'">').concat(o,"</a>")+"</h2>"+'<script src="'.concat(f,'"><\/script>')+(r?p:"")};var V=function e(t){var n="SCRATCHPAD_SHARE";if(o.default.isPhantom()){return}var i=t.get("contentKind");var r="/api/internal/user/badge_action/"+i+":"+t.get("id");k(r,l({method:"POST"},S({action:n,casing:"camel"})))};var q={facebook:function e(t){N.markFacebookShare();V(t);var n=U(t);F.facebookShare(n.message,n.url,n.imageUrl)},twitter:function e(t){N.markTwitterShare();V(t);var n=U(t,"@khanacademy");F.openTwitterPopup(F.formatTwitterShareUrl({url:n.url,text:n.message}))},email:function e(t){N.markEmailShare();V(t);var n=U(t);var i=i18n._("Check it out at %(url)s.",{url:n.url});window.open(F.formatMailtoUrl({subject:n.message,body:i}),"_newtab")}};e.exports=H},VscY:function(e,o,t){(function(n){var i,r;
/** @license
 *
 * SoundManager 2: JavaScript Sound for the Web
 * ----------------------------------------------
 * http://schillmania.com/projects/soundmanager2/
 *
 * Copyright (c) 2007, Scott Schiller. All rights reserved.
 * Code provided under the BSD License:
 * http://schillmania.com/projects/soundmanager2/license.txt
 *
 * V2.97a.20140901
 */
/** @license
 *
 * SoundManager 2: JavaScript Sound for the Web
 * ----------------------------------------------
 * http://schillmania.com/projects/soundmanager2/
 *
 * Copyright (c) 2007, Scott Schiller. All rights reserved.
 * Code provided under the BSD License:
 * http://schillmania.com/projects/soundmanager2/license.txt
 *
 * V2.97a.20140901
 */
(function(dt,ft){"use strict";if(!dt||!dt.document){throw new Error("SoundManager requires a browser with window and document objects.")}var e=null;function t(e,t){this.setupOptions={url:e||null,flashVersion:8,debugMode:true,debugFlash:false,useConsole:true,consoleOnly:true,waitForWindowLoad:false,bgColor:"#ffffff",useHighPerformance:false,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:false,useHTML5Audio:true,html5Test:/^(probably|maybe)$/i,preferFlash:false,noSWFCache:false,idPrefix:"sound"};this.defaultOptions={autoLoad:false,autoPlay:false,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:true,multiShotEvents:false,position:null,pan:0,stream:true,to:null,type:null,usePolicyFile:false,volume:100};this.flash9Options={isMovieStar:null,usePeakData:false,useWaveformData:false,useEQData:false,onbufferchange:null,ondataerror:null};this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null};this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:true},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:false},ogg:{type:["audio/ogg; codecs=vorbis"],required:false},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:false},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:false}};this.movieID="sm2-container";this.id=t||"sm2movie";this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.versionNumber="V2.97a.20140901";this.version=null;this.movieURL=null;this.altURL=null;this.swfLoaded=false;this.enabled=false;this.oMC=null;this.sounds={};this.soundIDs=[];this.muted=false;this.didFlashBlock=false;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i};this.features={buffering:false,peakData:false,waveformData:false,eqData:false,movieStar:false};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};this.html5={usingFlash:null};this.flash={};this.html5Only=false;this.ignoreFlash=false;var s,w=this,v=null,b=null,l="soundManager",r=l+": ",o="HTML5::",y,C=navigator.userAgent,a=dt.location.href.toString(),E=document,n,i,A,x,c=[],u=true,S,k=false,F=false,h=false,d=false,f=false,T,p=0,g,D,m,R,$,L,B,O,M,P,I,N,H,j,U,W,z,V,q,K,G,Y,X,Q=["log","info","warn","error"],J=8,Z,ee,te,ne=null,ie=null,re,oe,ae,se,le,ce,ue,he,de,fe=false,pe=false,ge,me,ve,be=0,we=null,ye,Ce=[],Ee,Ae=null,xe,Se,ke,_e,Fe,Te,De,Re,$e=Array.prototype.slice,Le=false,Be,Oe,Me,Pe,Ie,Ne,He,je,Ue=0,We=C.match(/(ipad|iphone|ipod)/i),ze=C.match(/android/i),Ve=C.match(/msie/i),qe=C.match(/webkit/i),Ke=C.match(/safari/i)&&!C.match(/chrome/i),Ge=C.match(/opera/i),Ye=C.match(/(mobile|pre\/|xoom)/i)||We||ze,Xe=!a.match(/usehtml5audio/i)&&!a.match(/sm2\-ignorebadua/i)&&Ke&&!C.match(/silk/i)&&C.match(/OS X 10_6_([3-7])/i),Qe=dt.console!==ft&&console.log!==ft,Je=E.hasFocus!==ft?E.hasFocus():null,Ze=Ke&&(E.hasFocus===ft||!E.hasFocus()),et=!Ze,tt=/(mp3|mp4|mpa|m4a|m4b)/i,nt=1e3,it="about:blank",rt="data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==",ot=E.location?E.location.protocol.match(/http/i):null,at=!ot?"http:/"+"/":"",st=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,lt=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],ct=new RegExp("\\.("+lt.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.useAltURL=!ot;se={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"};this.hasHTML5=function(){try{return Audio!==ft&&(Ge&&opera!==ft&&opera.version()<10?new Audio(null):new Audio).canPlayType!==ft}catch(e){return false}}();this.setup=function(e){var t=!w.url;if(e!==ft&&h&&Ae&&w.ok()&&(e.flashVersion!==ft||e.url!==ft||e.html5Test!==ft)){he(re("setupLate"))}m(e);if(e){if(t&&V&&e.url!==ft){w.beginDelayedInit()}if(!V&&e.url!==ft&&E.readyState==="complete"){setTimeout(W,1)}}return w};this.ok=function(){return Ae?h&&!d:w.useHTML5Audio&&w.hasHTML5};this.supported=this.ok;this.getMovie=function(e){return y(e)||E[e]||dt[e]};this.createSound=function(e,t){var n,i,r,o=null;n=l+".createSound(): ";i=n+re(!h?"notReady":"notOK");if(!h||!w.ok()){he(i);return false}if(t!==ft){e={id:e,url:t}}r=D(e);r.url=ye(r.url);if(r.id===undefined){r.id=w.setupOptions.idPrefix+Ue++}if(r.id.toString().charAt(0).match(/^[0-9]$/)){w._wD(n+re("badID",r.id),2)}w._wD(n+r.id+(r.url?" ("+r.url+")":""),1);if(de(r.id,true)){w._wD(n+r.id+" exists",1);return w.sounds[r.id]}function a(){r=ce(r);w.sounds[r.id]=new s(r);w.soundIDs.push(r.id);return w.sounds[r.id]}if(Se(r)){o=a();w._wD(r.id+": Using HTML5");o._setup_html5(r)}else{if(w.html5Only){w._wD(r.id+": No HTML5 support for this sound, and no Flash. Exiting.");return a()}if(w.html5.usingFlash&&r.url&&r.url.match(/data\:/i)){w._wD(r.id+": data: URIs not supported via Flash. Exiting.");return a()}if(x>8){if(r.isMovieStar===null){r.isMovieStar=!!(r.serverURL||(r.type?r.type.match(st):false)||r.url&&r.url.match(ct))}if(r.isMovieStar){w._wD(n+"using MovieStar handling");if(r.loops>1){T("noNSLoop")}}}r=ue(r,n);o=a();if(x===8){b._createSound(r.id,r.loops||1,r.usePolicyFile)}else{b._createSound(r.id,r.url,r.usePeakData,r.useWaveformData,r.useEQData,r.isMovieStar,r.isMovieStar?r.bufferTime:false,r.loops||1,r.serverURL,r.duration||null,r.autoPlay,true,r.autoLoad,r.usePolicyFile);if(!r.serverURL){o.connected=true;if(r.onconnect){r.onconnect.apply(o)}}}if(!r.serverURL&&(r.autoLoad||r.autoPlay)){o.load(r)}}if(!r.serverURL&&r.autoPlay){o.play()}return o};this.destroySound=function(e,t){if(!de(e)){return false}var n=w.sounds[e],i;n._iO={};n.stop();n.unload();for(i=0;i<w.soundIDs.length;i++){if(w.soundIDs[i]===e){w.soundIDs.splice(i,1);break}}if(!t){n.destruct(true)}n=null;delete w.sounds[e];return true};this.load=function(e,t){if(!de(e)){return false}return w.sounds[e].load(t)};this.unload=function(e){if(!de(e)){return false}return w.sounds[e].unload()};this.onPosition=function(e,t,n,i){if(!de(e)){return false}return w.sounds[e].onposition(t,n,i)};this.onposition=this.onPosition;this.clearOnPosition=function(e,t,n){if(!de(e)){return false}return w.sounds[e].clearOnPosition(t,n)};this.play=function(e,t){var n=null,i=t&&!(t instanceof Object);if(!h||!w.ok()){he(l+".play(): "+re(!h?"notReady":"notOK"));return false}if(!de(e,i)){if(!i){return false}if(i){t={url:t}}if(t&&t.url){w._wD(l+'.play(): Attempting to create "'+e+'"',1);t.id=e;n=w.createSound(t).play()}}else if(i){t={url:t}}if(n===null){n=w.sounds[e].play(t)}return n};this.start=this.play;this.setPosition=function(e,t){if(!de(e)){return false}return w.sounds[e].setPosition(t)};this.stop=function(e){if(!de(e)){return false}w._wD(l+".stop("+e+")",1);return w.sounds[e].stop()};this.stopAll=function(){var e;w._wD(l+".stopAll()",1);for(e in w.sounds){if(w.sounds.hasOwnProperty(e)){w.sounds[e].stop()}}};this.pause=function(e){if(!de(e)){return false}return w.sounds[e].pause()};this.pauseAll=function(){var e;for(e=w.soundIDs.length-1;e>=0;e--){w.sounds[w.soundIDs[e]].pause()}};this.resume=function(e){if(!de(e)){return false}return w.sounds[e].resume()};this.resumeAll=function(){var e;for(e=w.soundIDs.length-1;e>=0;e--){w.sounds[w.soundIDs[e]].resume()}};this.togglePause=function(e){if(!de(e)){return false}return w.sounds[e].togglePause()};this.setPan=function(e,t){if(!de(e)){return false}return w.sounds[e].setPan(t)};this.setVolume=function(e,t){if(!de(e)){return false}return w.sounds[e].setVolume(t)};this.mute=function(e){var t=0;if(e instanceof String){e=null}if(!e){w._wD(l+".mute(): Muting all sounds");for(t=w.soundIDs.length-1;t>=0;t--){w.sounds[w.soundIDs[t]].mute()}w.muted=true}else{if(!de(e)){return false}w._wD(l+'.mute(): Muting "'+e+'"');return w.sounds[e].mute()}return true};this.muteAll=function(){w.mute()};this.unmute=function(e){var t;if(e instanceof String){e=null}if(!e){w._wD(l+".unmute(): Unmuting all sounds");for(t=w.soundIDs.length-1;t>=0;t--){w.sounds[w.soundIDs[t]].unmute()}w.muted=false}else{if(!de(e)){return false}w._wD(l+'.unmute(): Unmuting "'+e+'"');return w.sounds[e].unmute()}return true};this.unmuteAll=function(){w.unmute()};this.toggleMute=function(e){if(!de(e)){return false}return w.sounds[e].toggleMute()};this.getMemoryUse=function(){var e=0;if(b&&x!==8){e=parseInt(b._getMemoryUse(),10)}return e};this.disable=function(e){var t;if(e===ft){e=false}if(d){return false}d=true;T("shutdown",1);for(t=w.soundIDs.length-1;t>=0;t--){Z(w.sounds[w.soundIDs[t]])}g(e);Re.remove(dt,"load",B);return true};this.canPlayMIME=function(e){var t;if(w.hasHTML5){t=ke({type:e})}if(!t&&Ae){t=e&&w.ok()?!!((x>8?e.match(st):null)||e.match(w.mimePattern)):null}return t};this.canPlayURL=function(e){var t;if(w.hasHTML5){t=ke({url:e})}if(!t&&Ae){t=e&&w.ok()?!!e.match(w.filePattern):null}return t};this.canPlayLink=function(e){if(e.type!==ft&&e.type){if(w.canPlayMIME(e.type)){return true}}return w.canPlayURL(e.href)};this.getSoundById=function(e,t){if(!e){return null}var n=w.sounds[e];if(!n&&!t){w._wD(l+'.getSoundById(): Sound "'+e+'" not found.',2)}return n};this.onready=function(e,t){var n="onready",i=false;if(typeof e==="function"){if(h){w._wD(re("queue",n))}if(!t){t=dt}$(n,e,t);L();i=true}else{throw re("needFunction",n)}return i};this.ontimeout=function(e,t){var n="ontimeout",i=false;if(typeof e==="function"){if(h){w._wD(re("queue",n))}if(!t){t=dt}$(n,e,t);L({type:n});i=true}else{throw re("needFunction",n)}return i};this._writeDebug=function(e,t){var n="soundmanager-debug",i,r;if(!w.debugMode){return false}if(Qe&&w.useConsole){if(t&&typeof t==="object"){console.log(e,t)}else if(Q[t]!==ft){console[Q[t]](e)}else{console.log(e)}if(w.consoleOnly){return true}}i=y(n);if(!i){return false}r=E.createElement("div");if(++p%2===0){r.className="sm2-alt"}if(t===ft){t=0}else{t=parseInt(t,10)}r.appendChild(E.createTextNode(e));if(t){if(t>=2){r.style.fontWeight="bold"}if(t===3){r.style.color="#ff3333"}}i.insertBefore(r,i.firstChild);i=null;return true};if(a.indexOf("sm2-debug=alert")!==-1){this._writeDebug=function(e){dt.alert(e)}}this._wD=this._writeDebug;this._debug=function(){var e,t;T("currentObj",1);for(e=0,t=w.soundIDs.length;e<t;e++){w.sounds[w.soundIDs[e]]._debug()}};this.reboot=function(e,t){if(w.soundIDs.length){w._wD("Destroying "+w.soundIDs.length+" SMSound object"+(w.soundIDs.length!==1?"s":"")+"...")}var n,i,r;for(n=w.soundIDs.length-1;n>=0;n--){w.sounds[w.soundIDs[n]].destruct()}if(b){try{if(Ve){ie=b.innerHTML}ne=b.parentNode.removeChild(b)}catch(e){T("badRemove",2)}}ie=ne=Ae=b=null;w.enabled=V=h=fe=pe=k=F=d=Le=w.swfLoaded=false;w.soundIDs=[];w.sounds={};Ue=0;if(!e){for(n in c){if(c.hasOwnProperty(n)){for(i=0,r=c[n].length;i<r;i++){c[n][i].fired=false}}}}else{c=[]}if(!t){w._wD(l+": Rebooting...")}w.html5={usingFlash:null};w.flash={};w.html5Only=false;w.ignoreFlash=false;dt.setTimeout(function(){U();if(!t){w.beginDelayedInit()}},20);return w};this.reset=function(){T("reset");return w.reboot(true,true)};this.getMoviePercent=function(){return b&&"PercentLoaded"in b?b.PercentLoaded():null};this.beginDelayedInit=function(){f=true;W();setTimeout(function(){if(pe){return false}K();j();pe=true;return true},20);O()};this.destruct=function(){w._wD(l+".destruct()");w.disable(true)};s=function(e){var h=this,o,a,t,i,d,f,p=false,r=[],s=0,l,g,c=null,u,m;u={duration:null,time:null};this.id=e.id;this.sID=this.id;this.url=e.url;this.options=D(e);this.instanceOptions=this.options;this._iO=this.instanceOptions;this.pan=this.options.pan;this.volume=this.options.volume;this.isHTML5=false;this._a=null;m=this.url?false:true;this.id3={};this._debug=function(){w._wD(h.id+": Merged options:",h.options)};this.load=function(e){var t=null,n;if(e!==ft){h._iO=D(e,h.options)}else{e=h.options;h._iO=e;if(c&&c!==h.url){T("manURL");h._iO.url=h.url;h.url=null}}if(!h._iO.url){h._iO.url=h.url}h._iO.url=ye(h._iO.url);h.instanceOptions=h._iO;n=h._iO;w._wD(h.id+": load ("+n.url+")");if(!n.url&&!h.url){w._wD(h.id+": load(): url is unassigned. Exiting.",2);return h}if(!h.isHTML5&&x===8&&!h.url&&!n.autoPlay){w._wD(h.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1)}if(n.url===h.url&&h.readyState!==0&&h.readyState!==2){T("onURL",1);if(h.readyState===3&&n.onload){je(h,function(){n.onload.apply(h,[!!h.duration])})}return h}h.loaded=false;h.readyState=1;h.playState=0;h.id3={};if(Se(n)){t=h._setup_html5(n);if(!t._called_load){h._html5_canplay=false;if(h.url!==n.url){w._wD(T("manURL")+": "+n.url);h._a.src=n.url;h.setPosition(0)}h._a.autobuffer="auto";h._a.preload="auto";h._a._called_load=true}else{w._wD(h.id+": Ignoring request to load again")}}else{if(w.html5Only){w._wD(h.id+": No flash support. Exiting.");return h}if(h._iO.url&&h._iO.url.match(/data\:/i)){w._wD(h.id+": data: URIs not supported via Flash. Exiting.");return h}try{h.isHTML5=false;h._iO=ue(ce(n));if(h._iO.autoPlay&&(h._iO.position||h._iO.from)){w._wD(h.id+": Disabling autoPlay because of non-zero offset case");h._iO.autoPlay=false}n=h._iO;if(x===8){b._load(h.id,n.url,n.stream,n.autoPlay,n.usePolicyFile)}else{b._load(h.id,n.url,!!n.stream,!!n.autoPlay,n.loops||1,!!n.autoLoad,n.usePolicyFile)}}catch(e){T("smError",2);S("onload",false);G({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:true})}}h.url=n.url;return h};this.unload=function(){if(h.readyState!==0){w._wD(h.id+": unload()");if(!h.isHTML5){if(x===8){b._unload(h.id,it)}else{b._unload(h.id)}}else{i();if(h._a){h._a.pause();c=Fe(h._a)}}o()}return h};this.destruct=function(e){w._wD(h.id+": Destruct");if(!h.isHTML5){h._iO.onfailure=null;b._destroySound(h.id)}else{i();if(h._a){h._a.pause();Fe(h._a);if(!Le){t()}h._a._s=null;h._a=null}}if(!e){w.destroySound(h.id,true)}};this.play=function(e,t){var n,i,r,o,a,s,l,c=true,u=null;n=h.id+": play(): ";t=t===ft?true:t;if(!e){e={}}if(h.url){h._iO.url=h.url}h._iO=D(h._iO,h.options);h._iO=D(e,h._iO);h._iO.url=ye(h._iO.url);h.instanceOptions=h._iO;if(!h.isHTML5&&h._iO.serverURL&&!h.connected){if(!h.getAutoPlay()){w._wD(n+" Netstream not connected yet - setting autoPlay");h.setAutoPlay(true)}return h}if(Se(h._iO)){h._setup_html5(h._iO);d()}if(h.playState===1&&!h.paused){i=h._iO.multiShot;if(!i){w._wD(n+"Already playing (one-shot)",1);if(h.isHTML5){h.setPosition(h._iO.position)}u=h}else{w._wD(n+"Already playing (multi-shot)",1)}}if(u!==null){return u}if(e.url&&e.url!==h.url){if(!h.readyState&&!h.isHTML5&&x===8&&m){m=false}else{h.load(h._iO)}}if(!h.loaded){if(h.readyState===0){w._wD(n+"Attempting to load");if(!h.isHTML5&&!w.html5Only){h._iO.autoPlay=true;h.load(h._iO)}else if(h.isHTML5){h.load(h._iO)}else{w._wD(n+"Unsupported type. Exiting.");u=h}h.instanceOptions=h._iO}else if(h.readyState===2){w._wD(n+"Could not load - exiting",2);u=h}else{w._wD(n+"Loading - attempting to play...")}}else{w._wD(n.substr(0,n.lastIndexOf(":")))}if(u!==null){return u}if(!h.isHTML5&&x===9&&h.position>0&&h.position===h.duration){w._wD(n+"Sound at end, resetting to position:0");e.position=0}if(h.paused&&h.position>=0&&(!h._iO.serverURL||h.position>0)){w._wD(n+"Resuming from paused state",1);h.resume()}else{h._iO=D(e,h._iO);if((!h.isHTML5&&h._iO.position!==null&&h._iO.position>0||h._iO.from!==null&&h._iO.from>0||h._iO.to!==null)&&h.instanceCount===0&&h.playState===0&&!h._iO.serverURL){o=function(){h._iO=D(e,h._iO);h.play(h._iO)};if(h.isHTML5&&!h._html5_canplay){w._wD(n+"Beginning load for non-zero offset case");h.load({_oncanplay:o});u=false}else if(!h.isHTML5&&!h.loaded&&(!h.readyState||h.readyState!==2)){w._wD(n+"Preloading for non-zero offset case");h.load({onload:o});u=false}if(u!==null){return u}h._iO=g()}if(!h.instanceCount||h._iO.multiShotEvents||h.isHTML5&&h._iO.multiShot&&!Le||!h.isHTML5&&x>8&&!h.getAutoPlay()){h.instanceCount++}if(h._iO.onposition&&h.playState===0){f(h)}h.playState=1;h.paused=false;h.position=h._iO.position!==ft&&!isNaN(h._iO.position)?h._iO.position:0;if(!h.isHTML5){h._iO=ue(ce(h._iO))}if(h._iO.onplay&&t){h._iO.onplay.apply(h);p=true}h.setVolume(h._iO.volume,true);h.setPan(h._iO.pan,true);if(!h.isHTML5){c=b._start(h.id,h._iO.loops||1,x===9?h.position:h.position/nt,h._iO.multiShot||false);if(x===9&&!c){w._wD(n+"No sound hardware, or 32-sound ceiling hit",2);if(h._iO.onplayerror){h._iO.onplayerror.apply(h)}}}else{if(h.instanceCount<2){d();r=h._setup_html5();h.setPosition(h._iO.position);r.play()}else{w._wD(h.id+": Cloning Audio() for instance #"+h.instanceCount+"...");a=new Audio(h._iO.url);s=function(){Re.remove(a,"ended",s);h._onfinish(h);Fe(a);a=null};l=function(){Re.remove(a,"canplay",l);try{a.currentTime=h._iO.position/nt}catch(e){he(h.id+": multiShot play() failed to apply position of "+h._iO.position/nt)}a.play()};Re.add(a,"ended",s);if(h._iO.volume!==undefined){a.volume=Math.max(0,Math.min(1,h._iO.volume/100))}if(h.muted){a.muted=true}if(h._iO.position){Re.add(a,"canplay",l)}else{a.play()}}}}return h};this.start=this.play;this.stop=function(e){var t=h._iO,n;if(h.playState===1){w._wD(h.id+": stop()");h._onbufferchange(0);h._resetOnPosition(0);h.paused=false;if(!h.isHTML5){h.playState=0}l();if(t.to){h.clearOnPosition(t.to)}if(!h.isHTML5){b._stop(h.id,e);if(t.serverURL){h.unload()}}else{if(h._a){n=h.position;h.setPosition(0);h.position=n;h._a.pause();h.playState=0;h._onTimer();i()}}h.instanceCount=0;h._iO={};if(t.onstop){t.onstop.apply(h)}}return h};this.setAutoPlay=function(e){w._wD(h.id+": Autoplay turned "+(e?"on":"off"));h._iO.autoPlay=e;if(!h.isHTML5){b._setAutoPlay(h.id,e);if(e){if(!h.instanceCount&&h.readyState===1){h.instanceCount++;w._wD(h.id+": Incremented instance count to "+h.instanceCount)}}}};this.getAutoPlay=function(){return h._iO.autoPlay};this.setPosition=function(e){if(e===ft){e=0}var t,n,i=h.isHTML5?Math.max(e,0):Math.min(h.duration||h._iO.duration,Math.max(e,0));h.position=i;n=h.position/nt;h._resetOnPosition(h.position);h._iO.position=i;if(!h.isHTML5){t=x===9?h.position:n;if(h.readyState&&h.readyState!==2){b._setPosition(h.id,t,h.paused||!h.playState,h._iO.multiShot)}}else if(h._a){if(h._html5_canplay){if(h._a.currentTime!==n){w._wD(h.id+": setPosition("+n+")");try{h._a.currentTime=n;if(h.playState===0||h.paused){h._a.pause()}}catch(e){w._wD(h.id+": setPosition("+n+") failed: "+e.message,2)}}}else if(n){w._wD(h.id+": setPosition("+n+"): Cannot seek yet, sound not ready",2);return h}if(h.paused){h._onTimer(true)}}return h};this.pause=function(e){if(h.paused||h.playState===0&&h.readyState!==1){return h}w._wD(h.id+": pause()");h.paused=true;if(!h.isHTML5){if(e||e===ft){b._pause(h.id,h._iO.multiShot)}}else{h._setup_html5().pause();i()}if(h._iO.onpause){h._iO.onpause.apply(h)}return h};this.resume=function(){var e=h._iO;if(!h.paused){return h}w._wD(h.id+": resume()");h.paused=false;h.playState=1;if(!h.isHTML5){if(e.isMovieStar&&!e.serverURL){h.setPosition(h.position)}b._pause(h.id,e.multiShot)}else{h._setup_html5().play();d()}if(!p&&e.onplay){e.onplay.apply(h);p=true}else if(e.onresume){e.onresume.apply(h)}return h};this.togglePause=function(){w._wD(h.id+": togglePause()");if(h.playState===0){h.play({position:x===9&&!h.isHTML5?h.position:h.position/nt});return h}if(h.paused){h.resume()}else{h.pause()}return h};this.setPan=function(e,t){if(e===ft){e=0}if(t===ft){t=false}if(!h.isHTML5){b._setPan(h.id,e)}h._iO.pan=e;if(!t){h.pan=e;h.options.pan=e}return h};this.setVolume=function(e,t){if(e===ft){e=100}if(t===ft){t=false}if(!h.isHTML5){b._setVolume(h.id,w.muted&&!h.muted||h.muted?0:e)}else if(h._a){if(w.muted&&!h.muted){h.muted=true;h._a.muted=true}h._a.volume=Math.max(0,Math.min(1,e/100))}h._iO.volume=e;if(!t){h.volume=e;h.options.volume=e}return h};this.mute=function(){h.muted=true;if(!h.isHTML5){b._setVolume(h.id,0)}else if(h._a){h._a.muted=true}return h};this.unmute=function(){h.muted=false;var e=h._iO.volume!==ft;if(!h.isHTML5){b._setVolume(h.id,e?h._iO.volume:h.options.volume)}else if(h._a){h._a.muted=false}return h};this.toggleMute=function(){return h.muted?h.unmute():h.mute()};this.onPosition=function(e,t,n){r.push({position:parseInt(e,10),method:t,scope:n!==ft?n:h,fired:false});return h};this.onposition=this.onPosition;this.clearOnPosition=function(e,t){var n;e=parseInt(e,10);if(isNaN(e)){return false}for(n=0;n<r.length;n++){if(e===r[n].position){if(!t||t===r[n].method){if(r[n].fired){s--}r.splice(n,1)}}}};this._processOnPosition=function(){var e,t,n=r.length;if(!n||!h.playState||s>=n){return false}for(e=n-1;e>=0;e--){t=r[e];if(!t.fired&&h.position>=t.position){t.fired=true;s++;t.method.apply(t.scope,[t.position]);n=r.length}}return true};this._resetOnPosition=function(e){var t,n,i=r.length;if(!i){return false}for(t=i-1;t>=0;t--){n=r[t];if(n.fired&&e<=n.position){n.fired=false;s--}}return true};g=function(){var e=h._iO,t=e.from,n=e.to,i,r;r=function(){w._wD(h.id+': "To" time of '+n+" reached.");h.clearOnPosition(n,r);h.stop()};i=function(){w._wD(h.id+': Playing "from" '+t);if(n!==null&&!isNaN(n)){h.onPosition(n,r)}};if(t!==null&&!isNaN(t)){e.position=t;e.multiShot=false;i()}return e};f=function(){var e,t=h._iO.onposition;if(t){for(e in t){if(t.hasOwnProperty(e)){h.onPosition(parseInt(e,10),t[e])}}}};l=function(){var e,t=h._iO.onposition;if(t){for(e in t){if(t.hasOwnProperty(e)){h.clearOnPosition(parseInt(e,10))}}}};d=function(){if(h.isHTML5){ge(h)}};i=function(){if(h.isHTML5){me(h)}};o=function(e){if(!e){r=[];s=0}p=false;h._hasTimer=null;h._a=null;h._html5_canplay=false;h.bytesLoaded=null;h.bytesTotal=null;h.duration=h._iO&&h._iO.duration?h._iO.duration:null;h.durationEstimate=null;h.buffered=[];h.eqData=[];h.eqData.left=[];h.eqData.right=[];h.failures=0;h.isBuffering=false;h.instanceOptions={};h.instanceCount=0;h.loaded=false;h.metadata={};h.readyState=0;h.muted=false;h.paused=false;h.peakData={left:0,right:0};h.waveformData={left:[],right:[]};h.playState=0;h.position=null;h.id3={}};o();this._onTimer=function(e){var t,n=false,i,r={};if(h._hasTimer||e){if(h._a&&(e||(h.playState>0||h.readyState===1)&&!h.paused)){t=h._get_html5_duration();if(t!==u.duration){u.duration=t;h.duration=t;n=true}h.durationEstimate=h.duration;i=h._a.currentTime*nt||0;if(i!==u.time){u.time=i;n=true}if(n||e){h._whileplaying(i,r,r,r,r)}}return n}};this._get_html5_duration=function(){var e=h._iO,t=h._a&&h._a.duration?h._a.duration*nt:e&&e.duration?e.duration:null,n=t&&!isNaN(t)&&t!==Infinity?t:null;return n};this._apply_loop=function(e,t){if(!e.loop&&t>1){w._wD("Note: Native HTML5 looping is infinite.",1)}e.loop=t>1?"loop":""};this._setup_html5=function(e){var t=D(h._iO,e),n=Le?v:h._a,i=decodeURI(t.url),r;if(Le){if(i===decodeURI(Be)){r=true}}else if(i===decodeURI(c)){r=true}if(n){if(n._s){if(Le){if(n._s&&n._s.playState&&!r){n._s.stop()}}else if(!Le&&i===decodeURI(c)){h._apply_loop(n,t.loops);return n}}if(!r){if(c){o(false)}n.src=t.url;h.url=t.url;c=t.url;Be=t.url;n._called_load=false}}else{if(t.autoLoad||t.autoPlay){h._a=new Audio(t.url);h._a.load()}else{h._a=Ge&&opera.version()<10?new Audio(null):new Audio}n=h._a;n._called_load=false;if(Le){v=n}}h.isHTML5=true;h._a=n;n._s=h;a();h._apply_loop(n,t.loops);if(t.autoLoad||t.autoPlay){h.load()}else{n.autobuffer=false;n.preload="auto"}return n};a=function(){if(h._a._added_events){return false}var e;function t(e,t,n){return h._a?h._a.addEventListener(e,t,n||false):null}h._a._added_events=true;for(e in Ie){if(Ie.hasOwnProperty(e)){t(e,Ie[e])}}return true};t=function(){var e;function t(e,t,n){return h._a?h._a.removeEventListener(e,t,n||false):null}w._wD(h.id+": Removing event listeners");h._a._added_events=false;for(e in Ie){if(Ie.hasOwnProperty(e)){t(e,Ie[e])}}};this._onload=function(e){var t,n=!!e||!h.isHTML5&&x===8&&h.duration;t=h.id+": ";w._wD(t+(n?"onload()":"Failed to load / invalid sound?"+(!h.duration?" Zero-length duration reported.":" -")+" ("+h.url+")"),n?1:2);if(!n&&!h.isHTML5){if(w.sandbox.noRemote===true){w._wD(t+re("noNet"),1)}if(w.sandbox.noLocal===true){w._wD(t+re("noLocal"),1)}}h.loaded=n;h.readyState=n?3:2;h._onbufferchange(0);if(h._iO.onload){je(h,function(){h._iO.onload.apply(h,[n])})}return true};this._onbufferchange=function(e){if(h.playState===0){return false}if(e&&h.isBuffering||!e&&!h.isBuffering){return false}h.isBuffering=e===1;if(h._iO.onbufferchange){w._wD(h.id+": Buffer state change: "+e);h._iO.onbufferchange.apply(h,[e])}return true};this._onsuspend=function(){if(h._iO.onsuspend){w._wD(h.id+": Playback suspended");h._iO.onsuspend.apply(h)}return true};this._onfailure=function(e,t,n){h.failures++;w._wD(h.id+": Failure ("+h.failures+"): "+e);if(h._iO.onfailure&&h.failures===1){h._iO.onfailure(e,t,n)}else{w._wD(h.id+": Ignoring failure")}};this._onwarning=function(e,t,n){if(h._iO.onwarning){h._iO.onwarning(e,t,n)}};this._onfinish=function(){var e=h._iO.onfinish;h._onbufferchange(0);h._resetOnPosition(0);if(h.instanceCount){h.instanceCount--;if(!h.instanceCount){l();h.playState=0;h.paused=false;h.instanceCount=0;h.instanceOptions={};h._iO={};i();if(h.isHTML5){h.position=0}}if(!h.instanceCount||h._iO.multiShotEvents){if(e){w._wD(h.id+": onfinish()");je(h,function(){e.apply(h)})}}}};this._whileloading=function(e,t,n,i){var r=h._iO;h.bytesLoaded=e;h.bytesTotal=t;h.duration=Math.floor(n);h.bufferLength=i;if(!h.isHTML5&&!r.isMovieStar){if(r.duration){h.durationEstimate=h.duration>r.duration?h.duration:r.duration}else{h.durationEstimate=parseInt(h.bytesTotal/h.bytesLoaded*h.duration,10)}}else{h.durationEstimate=h.duration}if(!h.isHTML5){h.buffered=[{start:0,end:h.duration}]}if((h.readyState!==3||h.isHTML5)&&r.whileloading){r.whileloading.apply(h)}};this._whileplaying=function(e,t,n,i,r){var o=h._iO,a;if(isNaN(e)||e===null){return false}h.position=Math.max(0,e);h._processOnPosition();if(!h.isHTML5&&x>8){if(o.usePeakData&&t!==ft&&t){h.peakData={left:t.leftPeak,right:t.rightPeak}}if(o.useWaveformData&&n!==ft&&n){h.waveformData={left:n.split(","),right:i.split(",")}}if(o.useEQData){if(r!==ft&&r&&r.leftEQ){a=r.leftEQ.split(",");h.eqData=a;h.eqData.left=a;if(r.rightEQ!==ft&&r.rightEQ){h.eqData.right=r.rightEQ.split(",")}}}}if(h.playState===1){if(!h.isHTML5&&x===8&&!h.position&&h.isBuffering){h._onbufferchange(0)}if(o.whileplaying){o.whileplaying.apply(h)}}return true};this._oncaptiondata=function(e){w._wD(h.id+": Caption data received.");h.captiondata=e;if(h._iO.oncaptiondata){h._iO.oncaptiondata.apply(h,[e])}};this._onmetadata=function(e,t){w._wD(h.id+": Metadata received.");var n={},i,r;for(i=0,r=e.length;i<r;i++){n[e[i]]=t[i]}h.metadata=n;console.log("updated metadata",h.metadata);if(h._iO.onmetadata){h._iO.onmetadata.call(h,h.metadata)}};this._onid3=function(e,t){w._wD(h.id+": ID3 data received.");var n=[],i,r;for(i=0,r=e.length;i<r;i++){n[e[i]]=t[i]}h.id3=D(h.id3,n);if(h._iO.onid3){h._iO.onid3.apply(h)}};this._onconnect=function(e){e=e===1;w._wD(h.id+": "+(e?"Connected.":"Failed to connect? - "+h.url),e?1:2);h.connected=e;if(e){h.failures=0;if(de(h.id)){if(h.getAutoPlay()){h.play(ft,h.getAutoPlay())}else if(h._iO.autoLoad){h.load()}}if(h._iO.onconnect){h._iO.onconnect.apply(h,[e])}}};this._ondataerror=function(e){if(h.playState>0){w._wD(h.id+": Data error: "+e);if(h._iO.ondataerror){h._iO.ondataerror.apply(h)}}};this._debug()};q=function(){return E.body||E.getElementsByTagName("div")[0]};y=function(e){return E.getElementById(e)};D=function(e,t){var n=e||{},i,r;i=t===ft?w.defaultOptions:t;for(r in i){if(i.hasOwnProperty(r)&&n[r]===ft){if(typeof i[r]!=="object"||i[r]===null){n[r]=i[r]}else{n[r]=D(n[r],i[r])}}}return n};je=function(e,t){if(!e.isHTML5&&x===8){dt.setTimeout(t,0)}else{t()}};R={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1};m=function(e,t){var n,i=true,r=t!==ft,o=w.setupOptions,a=R;if(e===ft){i=[];for(n in o){if(o.hasOwnProperty(n)){i.push(n)}}for(n in a){if(a.hasOwnProperty(n)){if(typeof w[n]==="object"){i.push(n+": {...}")}else if(w[n]instanceof Function){i.push(n+": function() {...}")}else{i.push(n)}}}w._wD(re("setup",i.join(", ")));return false}for(n in e){if(e.hasOwnProperty(n)){if(typeof e[n]!=="object"||e[n]===null||e[n]instanceof Array||e[n]instanceof RegExp){if(r&&a[t]!==ft){w[t][n]=e[n]}else if(o[n]!==ft){w.setupOptions[n]=e[n];w[n]=e[n]}else if(a[n]===ft){he(re(w[n]===ft?"setupUndef":"setupError",n),2);i=false}else{if(w[n]instanceof Function){w[n].apply(w,e[n]instanceof Array?e[n]:[e[n]])}else{w[n]=e[n]}}}else{if(a[n]===ft){he(re(w[n]===ft?"setupUndef":"setupError",n),2);i=false}else{return m(e[n],n)}}}}return i};function ut(e){return w.preferFlash&&Oe&&!w.ignoreFlash&&(w.flash[e]!==ft&&w.flash[e])}Re=function(){var r=dt.attachEvent,o={add:r?"attachEvent":"addEventListener",remove:r?"detachEvent":"removeEventListener"};function e(e){var t=$e.call(e),n=t.length;if(r){t[1]="on"+t[1];if(n>3){t.pop()}}else if(n===3){t.push(false)}return t}function t(e,t){var n=e.shift(),i=[o[t]];if(r){n[i](e[0],e[1])}else{n[i].apply(n,e)}}function n(){t(e(arguments),"add")}function i(){t(e(arguments),"remove")}return{add:n,remove:i}}();function ht(i){return function(e){var t=this._s,n;if(!t||!t._a){if(t&&t.id){w._wD(t.id+": Ignoring "+e.type)}else{w._wD(o+"Ignoring "+e.type)}n=null}else{n=i.call(this,e)}return n}}Ie={abort:ht(function(){w._wD(this._s.id+": abort")}),canplay:ht(function(){var t=this._s,n;if(t._html5_canplay){return true}t._html5_canplay=true;w._wD(t.id+": canplay");t._onbufferchange(0);n=t._iO.position!==ft&&!isNaN(t._iO.position)?t._iO.position/nt:null;if(this.currentTime!==n){w._wD(t.id+": canplay: Setting position to "+n);try{this.currentTime=n}catch(e){w._wD(t.id+": canplay: Setting position of "+n+" failed: "+e.message,2)}}if(t._iO._oncanplay){t._iO._oncanplay()}}),canplaythrough:ht(function(){var e=this._s;if(!e.loaded){e._onbufferchange(0);e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration());e._onload(true)}}),durationchange:ht(function(){var e=this._s,t;t=e._get_html5_duration();if(!isNaN(t)&&t!==e.duration){w._wD(this._s.id+": durationchange ("+t+")"+(e.duration?", previously "+e.duration:""));e.durationEstimate=e.duration=t}}),ended:ht(function(){var e=this._s;w._wD(e.id+": ended");e._onfinish()}),error:ht(function(){w._wD(this._s.id+": HTML5 error, code "+this.error.code);this._s._onload(false)}),loadeddata:ht(function(){var e=this._s;w._wD(e.id+": loadeddata");if(!e._loaded&&!Ke){e.duration=e._get_html5_duration()}}),loadedmetadata:ht(function(){w._wD(this._s.id+": loadedmetadata")}),loadstart:ht(function(){w._wD(this._s.id+": loadstart");this._s._onbufferchange(1)}),play:ht(function(){this._s._onbufferchange(0)}),playing:ht(function(){w._wD(this._s.id+": playing "+String.fromCharCode(9835));this._s._onbufferchange(0)}),progress:ht(function(e){var t=this._s,n,i,r,o=0,a=e.type==="progress",s=e.target.buffered,l=e.loaded||0,c=e.total||1;t.buffered=[];if(s&&s.length){for(n=0,i=s.length;n<i;n++){t.buffered.push({start:s.start(n)*nt,end:s.end(n)*nt})}o=(s.end(0)-s.start(0))*nt;l=Math.min(1,o/(e.target.duration*nt));if(a&&s.length>1){r=[];i=s.length;for(n=0;n<i;n++){r.push(e.target.buffered.start(n)*nt+"-"+e.target.buffered.end(n)*nt)}w._wD(this._s.id+": progress, timeRanges: "+r.join(", "))}if(a&&!isNaN(l)){w._wD(this._s.id+": progress, "+Math.floor(l*100)+"% loaded")}}if(!isNaN(l)){t._whileloading(l,c,t._get_html5_duration());if(l&&c&&l===c){Ie.canplaythrough.call(this,e)}}}),ratechange:ht(function(){w._wD(this._s.id+": ratechange")}),suspend:ht(function(e){var t=this._s;w._wD(this._s.id+": suspend");Ie.progress.call(this,e);t._onsuspend()}),stalled:ht(function(){w._wD(this._s.id+": stalled")}),timeupdate:ht(function(){this._s._onTimer()}),waiting:ht(function(){var e=this._s;w._wD(this._s.id+": waiting");e._onbufferchange(1)})};Se=function(e){var t;if(!e||!e.type&&!e.url&&!e.serverURL){t=false}else if(e.serverURL||e.type&&ut(e.type)){t=false}else{t=e.type?ke({type:e.type}):ke({url:e.url})||w.html5Only||e.url.match(/data\:/i)}return t};Fe=function(e){var t;if(e){t=Ke?it:w.html5.canPlayType("audio/wav")?rt:it;e.src=t;if(e._called_unload!==undefined){e._called_load=false}}if(Le){Be=null}return t};ke=function(e){if(!w.useHTML5Audio||!w.hasHTML5){return false}var t=e.url||null,n=e.type||null,i=w.audioFormats,r,o,a,s;if(n&&w.html5[n]!==ft){return w.html5[n]&&!ut(n)}if(!_e){_e=[];for(s in i){if(i.hasOwnProperty(s)){_e.push(s);if(i[s].related){_e=_e.concat(i[s].related)}}}_e=new RegExp("\\.("+_e.join("|")+")(\\?.*)?$","i")}a=t?t.toLowerCase().match(_e):null;if(!a||!a.length){if(!n){r=false}else{o=n.indexOf(";");a=(o!==-1?n.substr(0,o):n).substr(6)}}else{a=a[1]}if(a&&w.html5[a]!==ft){r=w.html5[a]&&!ut(a)}else{n="audio/"+a;r=w.html5.canPlayType({type:n});w.html5[a]=r;r=r&&w.html5[n]&&!ut(n)}return r};De=function(){if(!w.useHTML5Audio||!w.hasHTML5){w.html5.usingFlash=true;Ae=true;return false}var o=Audio!==ft?Ge&&opera.version()<10?new Audio(null):new Audio:null,e,t,n={},i,a;function r(e){var t,n,i=false,r=false;if(!o||typeof o.canPlayType!=="function"){return i}if(e instanceof Array){for(a=0,n=e.length;a<n;a++){if(w.html5[e[a]]||o.canPlayType(e[a]).match(w.html5Test)){r=true;w.html5[e[a]]=true;w.flash[e[a]]=!!e[a].match(tt)}}i=r}else{t=o&&typeof o.canPlayType==="function"?o.canPlayType(e):false;i=!!(t&&t.match(w.html5Test))}return i}i=w.audioFormats;for(e in i){if(i.hasOwnProperty(e)){t="audio/"+e;n[e]=r(i[e].type);n[t]=n[e];if(e.match(tt)){w.flash[e]=true;w.flash[t]=true}else{w.flash[e]=false;w.flash[t]=false}if(i[e]&&i[e].related){for(a=i[e].related.length-1;a>=0;a--){n["audio/"+i[e].related[a]]=n[e];w.html5[i[e].related[a]]=n[e];w.flash[i[e].related[a]]=n[e]}}}}n.canPlayType=o?r:null;w.html5=D(w.html5,n);w.html5.usingFlash=xe();Ae=w.html5.usingFlash;return true};H={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:l+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:r+"Verify that %s is a valid path.",tryDebug:"Try "+l+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:r+"Non-HTTP page ("+E.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:r+"Special case: Waiting for SWF to load with window focus...",waitForever:r+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:r+"Waiting for 100% SWF load...",needFunction:r+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:r+"_debug(): Current sound objects",waitOnload:r+"Waiting for window.onload()",docLoaded:r+"Document already loaded",onload:r+"initComplete(): calling soundManager.onload()",onloadOK:l+".onload() complete",didInit:r+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:r+"Failed to remove Flash node.",shutdown:l+".disable(): Shutting down",queue:r+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+se.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:r+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:l+".load(): current URL already assigned.",badFV:l+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:r+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:r+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:l+".setup(): allowed parameters: %s",setupError:l+'.setup(): "%s" cannot be assigned with this method.',setupUndef:l+'.setup(): Could not find option "%s"',setupLate:l+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:r+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:l+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device."};re=function(){var e,t,n,i,r;e=$e.call(arguments);i=e.shift();r=H&&H[i]?H[i]:"";if(r&&e&&e.length){for(t=0,n=e.length;t<n;t++){r=r.replace("%s",e[t])}}return r};ce=function(e){if(x===8&&e.loops>1&&e.stream){T("as2loop");e.stream=false}return e};ue=function(e,t){if(e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)){w._wD((t||"")+re("policy"));e.usePolicyFile=true}return e};he=function(e){if(Qe&&console.warn!==ft){console.warn(e)}else{w._wD(e)}};n=function(){return false};Z=function(e){var t;for(t in e){if(e.hasOwnProperty(t)&&typeof e[t]==="function"){e[t]=n}}t=null};ee=function(e){if(e===ft){e=false}if(d||e){w.disable(e)}};te=function(e){var t=null,n;if(e){if(e.match(/\.swf(\?.*)?$/i)){t=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4);if(t){return e}}else if(e.lastIndexOf("/")!==e.length-1){e+="/"}}n=(e&&e.lastIndexOf("/")!==-1?e.substr(0,e.lastIndexOf("/")+1):"./")+w.movieURL;if(w.noSWFCache){n+="?ts="+(new Date).getTime()}return n};I=function(){x=parseInt(w.flashVersion,10);if(x!==8&&x!==9){w._wD(re("badFV",x,J));w.flashVersion=x=J}var e=w.debugMode||w.debugFlash?"_debug.swf":".swf";if(w.useHTML5Audio&&!w.html5Only&&w.audioFormats.mp4.required&&x<9){w._wD(re("needfl9"));w.flashVersion=x=9}w.version=w.versionNumber+(w.html5Only?" (HTML5-only mode)":x===9?" (AS3/Flash 9)":" (AS2/Flash 8)");if(x>8){w.defaultOptions=D(w.defaultOptions,w.flash9Options);w.features.buffering=true;w.defaultOptions=D(w.defaultOptions,w.movieStarOptions);w.filePatterns.flash9=new RegExp("\\.(mp3|"+lt.join("|")+")(\\?.*)?$","i");w.features.movieStar=true}else{w.features.movieStar=false}w.filePattern=w.filePatterns[x!==8?"flash9":"flash8"];w.movieURL=(x===8?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e);w.features.peakData=w.features.waveformData=w.features.eqData=x>8};Y=function(e,t){if(!b){return false}b._setPolling(e,t)};X=function(){if(w.debugURLParam.test(a)){w.debugMode=true}if(y(w.debugID)){return false}var e,t,n,i,r;if(w.debugMode&&!y(w.debugID)&&(!Qe||!w.useConsole||!w.consoleOnly)){e=E.createElement("div");e.id=w.debugID+"-toggle";i={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001};e.appendChild(E.createTextNode("-"));e.onclick=le;e.title="Toggle SM2 debug console";if(C.match(/msie 6/i)){e.style.position="absolute";e.style.cursor="hand"}for(r in i){if(i.hasOwnProperty(r)){e.style[r]=i[r]}}t=E.createElement("div");t.id=w.debugID;t.style.display=w.debugMode?"block":"none";if(w.debugMode&&!y(e.id)){try{n=q();n.appendChild(e)}catch(e){throw new Error(re("domError")+" \n"+e.toString())}n.appendChild(t)}}n=null};de=this.getSoundById;T=function(e,t){return!e?"":w._wD(re(e),t)};le=function(){var e=y(w.debugID),t=y(w.debugID+"-toggle");if(!e){return false}if(u){t.innerHTML="+";e.style.display="none"}else{t.innerHTML="-";e.style.display="block"}u=!u};S=function(e,t,n){if(dt.sm2Debugger!==ft){try{sm2Debugger.handleEvent(e,t,n)}catch(e){return false}}return true};ae=function(){var e=[];if(w.debugMode){e.push(se.sm2Debug)}if(w.debugFlash){e.push(se.flashDebug)}if(w.useHighPerformance){e.push(se.highPerf)}return e.join(" ")};oe=function(){var e=re("fbHandler"),t=w.getMoviePercent(),n=se,i={type:"FLASHBLOCK"};if(w.html5Only){return false}if(!w.ok()){if(Ae){w.oMC.className=ae()+" "+n.swfDefault+" "+(t===null?n.swfTimedout:n.swfError);w._wD(e+": "+re("fbTimeout")+(t?" ("+re("fbLoaded")+")":""))}w.didFlashBlock=true;L({type:"ontimeout",ignoreInit:true,error:i});G(i)}else{if(w.didFlashBlock){w._wD(e+": Unblocked")}if(w.oMC){w.oMC.className=[ae(),n.swfDefault,n.swfLoaded+(w.didFlashBlock?" "+n.swfUnblocked:"")].join(" ")}}};$=function(e,t,n){if(c[e]===ft){c[e]=[]}c[e].push({method:t,scope:n||null,fired:false})};L=function(e){if(!e){e={type:w.ok()?"onready":"ontimeout"}}if(!h&&e&&!e.ignoreInit){return false}if(e.type==="ontimeout"&&(w.ok()||d&&!e.ignoreInit)){return false}var t={success:e&&e.ignoreInit?w.ok():!d},n=e&&e.type?c[e.type]||[]:[],i=[],r,o,a=[t],s=Ae&&!w.ok();if(e.error){a[0].error=e.error}for(r=0,o=n.length;r<o;r++){if(n[r].fired!==true){i.push(n[r])}}if(i.length){for(r=0,o=i.length;r<o;r++){if(i[r].scope){i[r].method.apply(i[r].scope,a)}else{i[r].method.apply(this,a)}if(!s){i[r].fired=true}}}return true};B=function(){dt.setTimeout(function(){if(w.useFlashBlock){oe()}L();if(typeof w.onload==="function"){T("onload",1);w.onload.apply(dt);T("onloadOK",1)}if(w.waitForWindowLoad){Re.add(dt,"load",B)}},1)};Me=function(){if(Oe!==ft){return Oe}var e=false,t=navigator,n=t.plugins,i,r,o,a=dt.ActiveXObject;if(n&&n.length){r="application/x-shockwave-flash";o=t.mimeTypes;if(o&&o[r]&&o[r].enabledPlugin&&o[r].enabledPlugin.description){e=true}}else if(a!==ft&&!C.match(/MSAppHost/i)){try{i=new a("ShockwaveFlash.ShockwaveFlash")}catch(e){i=null}e=!!i;i=null}Oe=e;return e};xe=function(){var e,t,n=w.audioFormats,i=We&&!!C.match(/os (1|2|3_0|3_1)\s/i);if(i){w.hasHTML5=false;w.html5Only=true;if(w.oMC){w.oMC.style.display="none"}}else{if(w.useHTML5Audio){if(!w.html5||!w.html5.canPlayType){w._wD("SoundManager: No HTML5 Audio() support detected.");w.hasHTML5=false}if(Xe){w._wD(r+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(!Oe?" would use flash fallback for MP3/MP4, but none detected.":"will use flash fallback for MP3/MP4, if available"),1)}}}if(w.useHTML5Audio&&w.hasHTML5){Ee=true;for(t in n){if(n.hasOwnProperty(t)){if(n[t].required){if(!w.html5.canPlayType(n[t].type)){Ee=false;e=true}else if(w.preferFlash&&(w.flash[t]||w.flash[n[t].type])){e=true}}}}}if(w.ignoreFlash){e=false;Ee=true}w.html5Only=w.hasHTML5&&w.useHTML5Audio&&!e;return!w.html5Only};ye=function(e){var t,n,i=0,r;if(e instanceof Array){for(t=0,n=e.length;t<n;t++){if(e[t]instanceof Object){if(w.canPlayMIME(e[t].type)){i=t;break}}else if(w.canPlayURL(e[t])){i=t;break}}if(e[i].url){e[i]=e[i].url}r=e[i]}else{r=e}return r};ge=function(e){if(!e._hasTimer){e._hasTimer=true;if(!Ye&&w.html5PollingInterval){if(we===null&&be===0){we=setInterval(ve,w.html5PollingInterval)}be++}}};me=function(e){if(e._hasTimer){e._hasTimer=false;if(!Ye&&w.html5PollingInterval){be--}}};ve=function(){var e;if(we!==null&&!be){clearInterval(we);we=null;return false}for(e=w.soundIDs.length-1;e>=0;e--){if(w.sounds[w.soundIDs[e]].isHTML5&&w.sounds[w.soundIDs[e]]._hasTimer){w.sounds[w.soundIDs[e]]._onTimer()}}};G=function(e){e=e!==ft?e:{};if(typeof w.onerror==="function"){w.onerror.apply(dt,[{type:e.type!==ft?e.type:null}])}if(e.fatal!==ft&&e.fatal){w.disable()}};Pe=function(){if(!Xe||!Me()){return false}var e=w.audioFormats,t,n;for(n in e){if(e.hasOwnProperty(n)){if(n==="mp3"||n==="mp4"){w._wD(l+": Using flash fallback for "+n+" format");w.html5[n]=false;if(e[n]&&e[n].related){for(t=e[n].related.length-1;t>=0;t--){w.html5[e[n].related[t]]=false}}}}}};this._setSandboxType=function(e){var t=w.sandbox;t.type=e;t.description=t.types[t.types[e]!==ft?e:"unknown"];if(t.type==="localWithFile"){t.noRemote=true;t.noLocal=false;T("secNote",2)}else if(t.type==="localWithNetwork"){t.noRemote=false;t.noLocal=true}else if(t.type==="localTrusted"){t.noRemote=false;t.noLocal=false}};this._externalInterfaceOK=function(e){if(w.swfLoaded){return false}var t;S("swf",true);S("flashtojs",true);w.swfLoaded=true;Ze=false;if(Xe){Pe()}if(!e||e.replace(/\+dev/i,"")!==w.versionNumber.replace(/\+dev/i,"")){t=l+': Fatal: JavaScript file build "'+w.versionNumber+'" does not match Flash SWF build "'+e+'" at '+w.url+". Ensure both are up-to-date.";setTimeout(function e(){throw new Error(t)},0);return false}setTimeout(A,Ve?100:1)};K=function(e,t){if(k&&F){return false}function n(){var e=[],t,n=[],i=" + ";t="SoundManager "+w.version+(!w.html5Only&&w.useHTML5Audio?w.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"");if(!w.html5Only){if(w.preferFlash){e.push("preferFlash")}if(w.useHighPerformance){e.push("useHighPerformance")}if(w.flashPollingInterval){e.push("flashPollingInterval ("+w.flashPollingInterval+"ms)")}if(w.html5PollingInterval){e.push("html5PollingInterval ("+w.html5PollingInterval+"ms)")}if(w.wmode){e.push("wmode ("+w.wmode+")")}if(w.debugFlash){e.push("debugFlash")}if(w.useFlashBlock){e.push("flashBlock")}}else{if(w.html5PollingInterval){e.push("html5PollingInterval ("+w.html5PollingInterval+"ms)")}}if(e.length){n=n.concat([e.join(i)])}w._wD(t+(n.length?i+n.join(", "):""),1);Ne()}if(w.html5Only){I();n();w.oMC=y(w.movieID);A();k=true;F=true;return false}var i=t||w.url,r=w.altURL||i,o="JS/Flash audio component (SoundManager 2)",a=q(),s=ae(),l=null,c=E.getElementsByTagName("html")[0],u,h,d,f,p,g,m,v;l=c&&c.dir&&c.dir.match(/rtl/i);e=e===ft?w.id:e;function b(e,t){return'<param name="'+e+'" value="'+t+'" />'}I();w.url=te(ot?i:r);t=w.url;w.wmode=!w.wmode&&w.useHighPerformance?"transparent":w.wmode;if(w.wmode!==null&&(C.match(/msie 8/i)||!Ve&&!w.useHighPerformance)&&navigator.platform.match(/win32|win64/i)){Ce.push(H.spcWmode);w.wmode=null}u={name:e,id:e,src:t,quality:"high",allowScriptAccess:w.allowScriptAccess,bgcolor:w.bgColor,pluginspage:at+"www.macromedia.com/go/getflashplayer",title:o,type:"application/x-shockwave-flash",wmode:w.wmode,hasPriority:"true"};if(w.debugFlash){u.FlashVars="debug=1"}if(!w.wmode){delete u.wmode}if(Ve){h=E.createElement("div");f=['<object id="'+e+'" data="'+t+'" type="'+u.type+'" title="'+u.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+at+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',b("movie",t),b("AllowScriptAccess",w.allowScriptAccess),b("quality",u.quality),w.wmode?b("wmode",w.wmode):"",b("bgcolor",w.bgColor),b("hasPriority","true"),w.debugFlash?b("FlashVars",u.FlashVars):"","</object>"].join("")}else{h=E.createElement("embed");for(d in u){if(u.hasOwnProperty(d)){h.setAttribute(d,u[d])}}}X();s=ae();a=q();if(a){w.oMC=y(w.movieID)||E.createElement("div");if(!w.oMC.id){w.oMC.id=w.movieID;w.oMC.className=se.swfDefault+" "+s;g=null;p=null;if(!w.useFlashBlock){if(w.useHighPerformance){g={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}}else{g={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"};if(l){g.left=Math.abs(parseInt(g.left,10))+"px"}}}if(qe){w.oMC.style.zIndex=1e4}if(!w.debugFlash){for(m in g){if(g.hasOwnProperty(m)){w.oMC.style[m]=g[m]}}}try{if(!Ve){w.oMC.appendChild(h)}a.appendChild(w.oMC);if(Ve){p=w.oMC.appendChild(E.createElement("div"));p.className=se.swfBox;p.innerHTML=f}F=true}catch(e){throw new Error(re("domError")+" \n"+e.toString())}}else{v=w.oMC.className;w.oMC.className=(v?v+" ":se.swfDefault)+(s?" "+s:"");w.oMC.appendChild(h);if(Ve){p=w.oMC.appendChild(E.createElement("div"));p.className=se.swfBox;p.innerHTML=f}F=true}}k=true;n();return true};j=function(){if(w.html5Only){K();return false}if(b){return false}if(!w.url){T("noURL");return false}b=w.getMovie(w.id);if(!b){if(!ne){K(w.id,w.url)}else{if(!Ve){w.oMC.appendChild(ne)}else{w.oMC.innerHTML=ie}ne=null;k=true}b=w.getMovie(w.id)}if(typeof w.oninitmovie==="function"){setTimeout(w.oninitmovie,1)}He();return true};O=function(){setTimeout(M,1e3)};P=function(){dt.setTimeout(function(){he(r+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false...");w.setup({preferFlash:false}).reboot();w.didFlashBlock=true;w.beginDelayedInit()},1)};M=function(){var e,t=false;if(!w.url){return false}if(fe){return false}fe=true;Re.remove(dt,"load",O);if(Oe&&Ze&&!Je){T("waitFocus");return false}if(!h){e=w.getMoviePercent();if(e>0&&e<100){t=true}}setTimeout(function(){e=w.getMoviePercent();if(t){fe=false;w._wD(re("waitSWF"));dt.setTimeout(O,1);return false}if(!h){w._wD(l+": No Flash response within expected time. Likely causes: "+(e===0?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(w.debugFlash?" "+re("checkSWF"):""),2);if(!ot&&e){T("localFail",2);if(!w.debugFlash){T("tryDebug",2)}}if(e===0){w._wD(re("swf404",w.url),1)}S("flashtojs",false,true?" (Check flash security or flash blockers)":undefined)}if(!h&&et){if(e===null){if(w.useFlashBlock||w.flashLoadTimeout===0){if(w.useFlashBlock){oe()}T("waitForever")}else{if(!w.useFlashBlock&&Ee){P()}else{T("waitForever");L({type:"ontimeout",ignoreInit:true,error:{type:"INIT_FLASHBLOCK"}})}}}else{if(w.flashLoadTimeout===0){T("waitForever")}else{if(!w.useFlashBlock&&Ee){P()}else{ee(true)}}}}},w.flashLoadTimeout)};N=function(){function e(){Re.remove(dt,"focus",N)}if(Je||!Ze){e();return true}et=true;Je=true;T("gotFocus");fe=false;O();e();return true};He=function(){if(Ce.length){w._wD("SoundManager 2: "+Ce.join(" "),1);Ce=[]}};Ne=function(){He();var e,t=[];if(w.useHTML5Audio&&w.hasHTML5){for(e in w.audioFormats){if(w.audioFormats.hasOwnProperty(e)){t.push(e+" = "+w.html5[e]+(!w.html5[e]&&Ae&&w.flash[e]?" (using flash)":w.preferFlash&&w.flash[e]&&Ae?" (preferring flash)":!w.html5[e]?" ("+(w.audioFormats[e].required?"required, ":"")+"and no flash support)":""))}}w._wD("SoundManager 2 HTML5 support: "+t.join(", "),1)}};g=function(e){if(h){return false}if(w.html5Only){T("sm2Loaded",1);h=true;B();S("onload",true);return true}var t=w.useFlashBlock&&w.flashLoadTimeout&&!w.getMoviePercent(),n=true,i;if(!t){h=true}i={type:!Oe&&Ae?"NO_FLASH":"INIT_TIMEOUT"};w._wD("SoundManager 2 "+(d?"failed to load":"loaded")+" ("+(d?"Flash security/load error":"OK")+") "+String.fromCharCode(d?10006:10003),d?2:1);if(d||e){if(w.useFlashBlock&&w.oMC){w.oMC.className=ae()+" "+(w.getMoviePercent()===null?se.swfTimedout:se.swfError)}L({type:"ontimeout",error:i,ignoreInit:true});S("onload",false);G(i);n=false}else{S("onload",true)}if(!d){if(w.waitForWindowLoad&&!f){T("waitOnload");Re.add(dt,"load",B)}else{if(w.waitForWindowLoad&&f){T("docLoaded")}B()}}return n};i=function(){var e,t=w.setupOptions;for(e in t){if(t.hasOwnProperty(e)){if(w[e]===ft){w[e]=t[e]}else if(w[e]!==t[e]){w.setupOptions[e]=w[e]}}}};A=function(){if(h){T("didInit");return false}function e(){Re.remove(dt,"load",w.beginDelayedInit)}if(w.html5Only){if(!h){e();w.enabled=true;g()}return true}j();try{b._externalInterfaceTest(false);Y(true,w.flashPollingInterval||(w.useHighPerformance?10:50));if(!w.debugMode){b._disableDebug()}w.enabled=true;S("jstoflash",true);if(!w.html5Only){Re.add(dt,"unload",n)}}catch(e){w._wD("js/flash exception: "+e.toString());S("jstoflash",false);G({type:"JS_TO_FLASH_EXCEPTION",fatal:true});ee(true);g();return false}g();e();return true};W=function(){if(V){return false}V=true;i();X();(function(){var e="sm2-usehtml5audio=",t="sm2-preferflash=",n=null,i=null,r=a.toLowerCase();if(r.indexOf(e)!==-1){n=r.charAt(r.indexOf(e)+e.length)==="1";if(Qe){console.log((n?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter")}w.setup({useHTML5Audio:n})}if(r.indexOf(t)!==-1){i=r.charAt(r.indexOf(t)+t.length)==="1";if(Qe){console.log((i?"Enabling ":"Disabling ")+"preferFlash via URL parameter")}w.setup({preferFlash:i})}})();if(!Oe&&w.hasHTML5){w._wD("SoundManager 2: No Flash detected"+(!w.useHTML5Audio?", enabling HTML5.":". Trying HTML5-only mode."),1);w.setup({useHTML5Audio:true,preferFlash:false})}De();if(!Oe&&Ae){Ce.push(H.needFlash);w.setup({flashLoadTimeout:1})}if(E.removeEventListener){E.removeEventListener("DOMContentLoaded",W,false)}j();return true};Te=function(){if(E.readyState==="complete"){W();E.detachEvent("onreadystatechange",Te)}return true};z=function(){f=true;W();Re.remove(dt,"load",z)};U=function(){if(Ye){if(!w.setupOptions.useHTML5Audio||w.setupOptions.preferFlash){Ce.push(H.mobileUA)}w.setupOptions.useHTML5Audio=true;w.setupOptions.preferFlash=false;if(We||ze&&!C.match(/android\s2\.3/i)){Ce.push(H.globalHTML5);if(We){w.ignoreFlash=true}Le=true}}};U();Me();Re.add(dt,"focus",N);Re.add(dt,"load",O);Re.add(dt,"load",z);if(E.addEventListener){E.addEventListener("DOMContentLoaded",W,false)}else if(E.attachEvent){E.attachEvent("onreadystatechange",Te)}else{S("onload",false);G({type:"NO_DOM2_EVENTS",fatal:true})}}if(dt.SM2_DEFER===undefined||!SM2_DEFER){e=new t}if(true&&n&&typeof n.exports==="object"){dt.soundManager=e;n.exports.SoundManager=t;n.exports.soundManager=e}else if(true){!(i=[],r=function(){return{SoundManager:t,soundManager:e}}.apply(o,i),r!==undefined&&(n.exports=r))}else{}})(window);(function(l){var c="./multirecorder-worker.js";var u=function(e,t){var n=t||{};var i=n.bufferLen||4096;this.context=e.context;this.pausePoints=[];this.node=this.context.createScriptProcessor(i,2,2);var r=new Worker(n.workerPath||c);r.postMessage({command:"init",config:{sampleRate:this.context.sampleRate}});var o=false;function a(t){if(!t){throw new Error("Callback not set")}var n="RecorderCallback"+Math.round(Math.random()*1000001);l[n]=function(e){t(e);delete l[n]};return n}function s(e,t){if(t){e.callbackId=a(t)}r.postMessage(e)}this.node.onaudioprocess=function(e){if(!o){return}s({command:"record",buffer:[e.inputBuffer.getChannelData(0),e.inputBuffer.getChannelData(1)]})};this.configure=function(e){for(var t in e){if(e.hasOwnProperty(t)){n[t]=e[t]}}};this.record=function(){o=true};this.stop=function(){o=false};this.isRecording=function(){return o};this.clear=function(){s({command:"clear"})};this.finishRecording=function(t){var n=this;var e=function(e){n.wav=e.wav;n.samples=e.samples;t(n)};s({command:"finishRecording"},e)};this.combineRecordings=function(t,e){var n=this;var i=[];for(var r=0;r<e.length;r++){i.push(e[r].samples)}var o=function(e){n.wav=e.wav;n.samples=e.samples;t(n)};s({command:"combineRecordings",samples:i},o)};this.createAudioPlayer=function(){var e=URL.createObjectURL(this.wav);var t=document.createElement("audio");t.controls=true;t.src=e;return t};this.createDownloadLink=function(){var e=URL.createObjectURL(this.wav);var t=document.createElement("a");t.href=e;t.download=(new Date).toISOString()+".wav";t.innerHTML=t.download;return t};r.onmessage=function(e){var t=e.data.callbackId;if(t){l[t](e.data.result)}};e.connect(this.node);this.node.connect(this.context.destination)};function e(r){var o;var a;var s;r=r||{};l.AudioContext=l.AudioContext||l.webkitAudioContext;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia;l.URL=l.URL||l.webkitURL;this.isRecording=function(){return s&&s.isRecording()};this.startRecording=function(t){var n=jQuery.Deferred();if(!l.AudioContext||!navigator.getUserMedia){n.reject("Audio recording does not work in this browser")}function i(){s=new u(a,{workerPath:r.workerPath||c});if(t){var e=l.setInterval(function(){if(t===0){n.resolve(s);s.record();l.clearInterval(e)}else{n.notify(t);t--}},1e3)}else{s.record()}}if(!o){o=new AudioContext;navigator.getUserMedia({audio:true},function(e){a=o.createMediaStreamSource(e);a.connect(o.destination);i()},function(){n.reject("Error getting mic input")})}else{i()}return n};this.stopRecording=function(){var e=jQuery.Deferred();s.stop();s.finishRecording(function(){e.resolve(s)});return e};this.combineRecordings=function(e){var t=jQuery.Deferred();var n=new u(a,{workerPath:r.workerPath||c});n.combineRecordings(function(){t.resolve(n)},e);return t}}l.MultiRecorder=e})(window);(function(e){function t(e){this.authKey=e.authKey;this.templateId=e.templateId;this.successCb=e.successCb||null;this.errorCb=e.errorCb||null;this.steps=e.steps||{}}t.prototype.checkAssemblyStatus=function(n){var i=this;n=n.replace(/^http:/,"https:");n=n.replace(/api2.[^.]*.transloadit/,"api2.transloadit");$.ajax({url:n,type:"GET",dataType:"json",success:function(e,t){if(e.ok&&e.ok=="ASSEMBLY_COMPLETED"){if(typeof i.successCb==="function"){i.successCb(e.results)}return}if(e.error||e.ok!="ASSEMBLY_EXECUTING"&&e.ok!="ASSEMBLY_UPLOADING"){if(typeof i.errorCb==="function"){i.errorCb("Failed to check assembly ("+t+")")}return}setTimeout(function(){i.checkAssemblyStatus(n)},1e3)},error:function(e,t){if(typeof i.errorCb==="function"){i.errorCb("Failed to check assembly ("+t+")")}}})};t.prototype.uploadFile=function(e){var t={auth:{key:this.authKey},template_id:this.templateId,steps:this.steps};var i=this;var n=new FormData;n.append("params",JSON.stringify(t));n.append("file",e);var r=new XMLHttpRequest;r.open("POST","https://api2.transloadit.com/assemblies",true);r.onreadystatechange=function(e){var t=e.target;if(t.readyState===4){if(t.status===200){var n=jQuery.parseJSON(t.responseText);i.checkAssemblyStatus(n.assembly_url)}else if(typeof i.errorCb==="function"){i.errorCb("Failed to upload file")}}};r.send(n)};e.TransloaditXhr=t})(window);window["Handlebars"]=window["Handlebars"]||{};window["Handlebars"]["templates"]=window["Handlebars"]["templates"]||{};window["Handlebars"]["templates"]["dev-record"]=Handlebars.template({1:function(e,t,n,i,r){return"Start New Chunk"},3:function(e,t,n,i,r){return"Discard Recorded Chunk"},5:function(e,t,n,i,r){return"Save Recorded Chunk"},7:function(e,t,n,i,r){return"Refresh Editor State"},9:function(e,t,n,i,r){return"Last audio chunk recorded: "},11:function(e,t,n,i,r){return"Empty"},13:function(e,t,n,i,r){return"All saved audio chunks: "},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){var o,a,s,l=t!=null?t:e.nullContext||{},c=n.helperMissing,u="function",h=n.blockHelperMissing,d='<div class="scratchpad-dev-record">\n    <div class="scratchpad-dev-record-buttons">\n        <button class="scratchpad-dev-new-chunk simple-button">';o=(a=(a=n._||(t!=null?t._:t))!=null?a:c,s={name:"_",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r},typeof a===u?a.call(l,s):a);if(!n._){o=h.call(t,o,s)}if(o!=null){d+=o}d+='</button>\n        <button class="scratchpad-dev-discard-chunk simple-button">';o=(a=(a=n._||(t!=null?t._:t))!=null?a:c,s={name:"_",hash:{},fn:e.program(3,r,0),inverse:e.noop,data:r},typeof a===u?a.call(l,s):a);if(!n._){o=h.call(t,o,s)}if(o!=null){d+=o}d+='</button>\n        <button class="scratchpad-dev-save-chunk simple-button">';o=(a=(a=n._||(t!=null?t._:t))!=null?a:c,s={name:"_",hash:{},fn:e.program(5,r,0),inverse:e.noop,data:r},typeof a===u?a.call(l,s):a);if(!n._){o=h.call(t,o,s)}if(o!=null){d+=o}d+='</button>\n        <button class="scratchpad-dev-refresh-editor-state simple-button">';o=(a=(a=n._||(t!=null?t._:t))!=null?a:c,s={name:"_",hash:{},fn:e.program(7,r,0),inverse:e.noop,data:r},typeof a===u?a.call(l,s):a);if(!n._){o=h.call(t,o,s)}if(o!=null){d+=o}d+='</button>\n    </div>\n    <div class="show-audio-chunks-wrapper">\n        <p>';o=(a=(a=n._||(t!=null?t._:t))!=null?a:c,s={name:"_",hash:{},fn:e.program(9,r,0),inverse:e.noop,data:r},typeof a===u?a.call(l,s):a);if(!n._){o=h.call(t,o,s)}if(o!=null){d+=o}d+='<span class="last-audio-chunk">';o=(a=(a=n._||(t!=null?t._:t))!=null?a:c,s={name:"_",hash:{},fn:e.program(11,r,0),inverse:e.noop,data:r},typeof a===u?a.call(l,s):a);if(!n._){o=h.call(t,o,s)}if(o!=null){d+=o}d+="</span></p>\n        <p>";o=(a=(a=n._||(t!=null?t._:t))!=null?a:c,s={name:"_",hash:{},fn:e.program(13,r,0),inverse:e.noop,data:r},typeof a===u?a.call(l,s):a);if(!n._){o=h.call(t,o,s)}if(o!=null){d+=o}d+='<span class="saved-audio-chunks">';o=(a=(a=n._||(t!=null?t._:t))!=null?a:c,s={name:"_",hash:{},fn:e.program(11,r,0),inverse:e.noop,data:r},typeof a===u?a.call(l,s):a);if(!n._){o=h.call(t,o,s)}if(o!=null){d+=o}return d+"</span></p>\n    </div>\n</div>"},useData:true});$(document).delegate("a.ui-button",{mouseenter:function e(){if(!$(this).hasClass("ui-state-disabled")){$(this).addClass("ui-state-hover")}},mouseleave:function e(){$(this).removeClass("ui-state-hover")},click:function e(t){t.preventDefault();if(!$(this).hasClass("ui-state-disabled")){$(this).trigger("buttonClick")}}});$.fn.buttonize=function(){return this.find(".ui-button").addClass("ui-widget ui-state-default ui-corner-all").find("span:first").addClass("ui-button-icon-primary ui-icon").end().filter(":has(.ui-button-text)").addClass("ui-button-text-icon-primary").end().not(":has(.ui-button-text)").addClass("ui-button-icon-only").append("<span class='ui-button-text'>&nbsp;</span>").end().end()}}).call(this,t("YuTi")(e))},VszD:function(e,t,n){"use strict";n("fbCW");var o=n("e2gc");var _=n("F/us");var i18n=n("HEOz");var i=n("+reu"),a=i.ScratchpadUI;var r=_.once(function(){o(a).bind({started:function e(t){if(!s()){return}var n=a.liveEditor;var i=n.editor;if(a.shouldDisableChallengePaste()&&i.blockPaste){var r=false;i.blockPaste(function(){if(!r){var e=i18n._("To make sure you get the most out of "+"these challenges, we've disabled pasting "+"code from outside. Studies show that typing "+"code helps our brain solidify the concepts more.");r=o("<div>").addClass("modal generic-dialog").css("top","50%").html("<span class='close' data-dismiss='modal'>"+"&#215;"+"</span><div>"+e+"</div>").appendTo("body")}r.modal({show:true,backdrop:false})})}a.userScratchpad.setChallengeTimeTaken();a.userScratchpad.startInactivityTimer();a.loadUserSpinOffs();i.on("change",function(){o("#save-progress-text").stop(true).show().text(i18n._("Saving progress..."));h()});o("#edit-title").hide();o(".title-box").css("cursor","auto");a.liveEditor.markDirty()},startCodeOver:function e(t){if(l()&&a.challenge){window.setTimeout(function(){a.challenge.startOver()},100)}},initCode:function e(t,n){if(l()){n.code=a.userScratchpad.get("stashedCode")}},runCode:function e(t,n){if(n.validate){n.validate=a.scratchpad.get("translatedTests")}},update:function e(t,n){if(n.results&&n.results.tests&&s()&&a.challenge){a.challenge.processResults(n.results)}},remove:function e(){var t={};if(l()){t=a.userScratchpad.setChallengeTimeTaken()}u(t)},beforeunload:function e(t,n){if(l()){var i=a.liveEditor.editor.text();if(i!==a.userScratchpad.get("stashedCode")){n.warnMsg=n.defaultMsg}}}})});var s=function e(){return a.scratchpad.isChallenge()};var l=function e(){return a.isAttemptingSomething()&&s()};var c=function e(t){if(l()){a.$el.find("#save-progress-text").text(t)}};var u=function e(t){if(!l()){return}var n={success:function e(){c(i18n._("All changes saved."))},error:function e(){c(i18n._("Failed to save changes."))},attrs:t||{}};a.stashUserCode(n);a.userScratchpad.startInactivityTimer()};var h=_.debounce(u,3e3);e.exports={bindEvents:r}},XkaS:function(e,t){(function(q){var K=/(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent);var e=function(){var e={},t,i=65,n,r='<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>',o={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:true,flat:false},a={start:K?"touchstart":"mousedown",end:K?"touchend":"mouseup",move:K?"touchmove":"mousemove"},s=function(e,t){var n=U(e);q(t).data("colorpicker").fields.eq(1).val(n.r).end().eq(2).val(n.g).end().eq(3).val(n.b).end()},l=function(e,t){q(t).data("colorpicker").fields.eq(4).val(e.h).end().eq(5).val(e.s).end().eq(6).val(e.b).end()},c=function(e,t){q(t).data("colorpicker").fields.eq(0).val(z(e)).end()},u=function(e,t){q(t).data("colorpicker").selector.css("backgroundColor","#"+z({h:e.h,s:100,b:100}));q(t).data("colorpicker").selectorIndic.css({left:parseInt(150*e.s/100,10),top:parseInt(150*(100-e.b)/100,10)})},h=function(e,t){q(t).data("colorpicker").hue.css("top",parseInt(150-150*e.h/360,10))},d=function(e,t){q(t).data("colorpicker").currentColor.css("backgroundColor","#"+z(e))},f=function(e,t){q(t).data("colorpicker").newColor.css("backgroundColor","#"+z(e))},p=function(e){var t=e.charCode||e.keyCode||-1;if(t>i&&t<=90||t==32){return false}var n=q(this).parent().parent();if(n.data("colorpicker").livePreview===true){g.apply(this)}},g=function(e,t){var n=q(this).parent().parent(),i;if(this.parentNode.className.indexOf("_hex")>0){n.data("colorpicker").color=i=H(I(this.value))}else if(this.parentNode.className.indexOf("_hsb")>0){n.data("colorpicker").color=i=M({h:parseInt(n.data("colorpicker").fields.eq(4).val(),10),s:parseInt(n.data("colorpicker").fields.eq(5).val(),10),b:parseInt(n.data("colorpicker").fields.eq(6).val(),10)})}else{n.data("colorpicker").color=i=j(P({r:parseInt(n.data("colorpicker").fields.eq(1).val(),10),g:parseInt(n.data("colorpicker").fields.eq(2).val(),10),b:parseInt(n.data("colorpicker").fields.eq(3).val(),10)}))}if(e){s(i,n.get(0));c(i,n.get(0));l(i,n.get(0))}u(i,n.get(0));h(i,n.get(0));f(i,n.get(0));n.data("colorpicker").onChange.apply(n,[i,z(i),U(i),t])},m=function(e){var t=q(this).parent().parent();t.data("colorpicker").fields.parent().removeClass("colorpicker_focus")},v=function(){i=this.parentNode.className.indexOf("_hex")>0?70:65;q(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus");q(this).parent().addClass("colorpicker_focus")},b=function(e){var t=e.pageX;var n=e.pageY;if(!t&&!n){var i=e.originalEvent.targetTouches;if(i&&i[0]){t=i[0].pageX;n=i[0].pageY}}return{pageX:t,pageY:n}},w=function(e){var t=q(this).parent().find("input").focus();var n={el:q(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:e.pageY,field:t,val:parseInt(t.val(),10),preview:q(this).parent().parent().data("colorpicker").livePreview};q(document).bind(a.end,n,C);q(document).bind(a.move,n,y)},y=function(e){e.data.field.val(Math.max(0,Math.min(e.data.max,parseInt(e.data.val+e.pageY-e.data.y,10))));if(e.data.preview){g.apply(e.data.field.get(0),[true])}return false},C=function(e){g.apply(e.data.field.get(0),[true]);e.data.el.removeClass("colorpicker_slider").find("input").focus();q(document).unbind(a.end,C);q(document).unbind(a.move,y);return false},E=function(e){e.preventDefault();var t={cal:q(this).parent(),y:q(this).offset().top};e.data=t;A(e,"startScrub");t.preview=t.cal.data("colorpicker").livePreview;q(document).bind(a.end,t,x);q(document).bind(a.move,t,A)},A=function(e,t){var n=b(e);if(!n.pageX&&!n.pageY){return false}g.apply(e.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,n.pageY-e.data.y)))/150,10)).get(0),[e.data.preview,t||"midScrub"]);return false},x=function(e){A(e,"stopScrub");s(e.data.cal.data("colorpicker").color,e.data.cal.get(0));c(e.data.cal.data("colorpicker").color,e.data.cal.get(0));q(document).unbind(a.end,x);q(document).unbind(a.move,A);return false},S=function(e){e.preventDefault();var t={cal:q(this).parent(),pos:q(this).offset()};e.data=t;k(e,"startScrub");t.preview=t.cal.data("colorpicker").livePreview;q(document).bind(a.end,t,F);q(document).bind(a.move,t,k)},k=function(e,t){var n=b(e);if(!n.pageX&&!n.pageY){return false}g.apply(e.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,n.pageY-e.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,n.pageX-e.data.pos.left))/150,10)).get(0),[e.data.preview,t||"midScrub"]);return false},F=function(e){k(e,"stopScrub");s(e.data.cal.data("colorpicker").color,e.data.cal.get(0));c(e.data.cal.data("colorpicker").color,e.data.cal.get(0));q(document).unbind(a.end,F);q(document).unbind(a.move,k);return false},T=function(e){q(this).addClass("colorpicker_focus")},D=function(e){q(this).removeClass("colorpicker_focus")},R=function(e){var t=q(this).parent();var n=t.data("colorpicker").color;t.data("colorpicker").origColor=n;d(n,t.get(0));t.data("colorpicker").onSubmit(n,z(n),U(n),t.data("colorpicker").el,t.data("colorpicker").parent)},$=function(e){var t=q("#"+q(this).data("colorpickerId"));t.data("colorpicker").onBeforeShow.apply(this,[t.get(0)]);var n=q(this).offset();var i=O();var r=n.top+this.offsetHeight;var o=n.left;if(r+176>i.t+i.h){r-=this.offsetHeight+176}if(o+356>i.l+i.w){o-=356}t.css({left:o+"px",top:r+"px"});if(t.data("colorpicker").onShow.apply(this,[t.get(0)])!=false){t.show()}q(document).bind(a.start,{cal:t},L);return false},L=function(e){if(!B(e.data.cal.get(0),e.target,e.data.cal.get(0))){if(e.data.cal.data("colorpicker").onHide.apply(this,[e.data.cal.get(0)])!=false){e.data.cal.hide()}q(document).unbind(a.start,L)}},B=function(e,t,n){if(e==t){return true}if(e.contains){return e.contains(t)}if(e.compareDocumentPosition){return!!(e.compareDocumentPosition(t)&16)}var i=t.parentNode;while(i&&i!=n){if(i==e)return true;i=i.parentNode}return false},O=function(){var e=document.compatMode=="CSS1Compat";return{l:window.pageXOffset||(e?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(e?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(e?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(e?document.documentElement.clientHeight:document.body.clientHeight)}},M=function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},P=function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}},I=function(e){var t=6-e.length;if(t>0){var n=[];for(var i=0;i<t;i++){n.push("0")}n.push(e);e=n.join("")}return e},N=function(e){var e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:e>>16,g:(e&65280)>>8,b:e&255}},H=function(e){return j(N(e))},j=function(e){var t={h:0,s:0,b:0};var n=Math.min(e.r,e.g,e.b);var i=Math.max(e.r,e.g,e.b);var r=i-n;t.b=i;if(i!=0){}t.s=i!=0?255*r/i:0;if(t.s!=0){if(e.r==i){t.h=(e.g-e.b)/r}else if(e.g==i){t.h=2+(e.b-e.r)/r}else{t.h=4+(e.r-e.g)/r}}else{t.h=-1}t.h*=60;if(t.h<0){t.h+=360}t.s*=100/255;t.b*=100/255;return t},U=function(e){var t={};var n=Math.round(e.h);var i=Math.round(e.s*255/100);var r=Math.round(e.b*255/100);if(i==0){t.r=t.g=t.b=r}else{var o=r;var a=(255-i)*r/255;var s=(o-a)*(n%60)/60;if(n==360)n=0;if(n<60){t.r=o;t.b=a;t.g=a+s}else if(n<120){t.g=o;t.b=a;t.r=o-s}else if(n<180){t.g=o;t.r=a;t.b=a+s}else if(n<240){t.b=o;t.r=a;t.g=o-s}else if(n<300){t.b=o;t.g=a;t.r=a+s}else if(n<360){t.r=o;t.g=a;t.b=o-s}else{t.r=0;t.g=0;t.b=0}}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},W=function(e){var n=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];q.each(n,function(e,t){if(t.length==1){n[e]="0"+t}});return n.join("")},z=function(e){return W(U(e))},V=function(){var e=q(this).parent();var t=e.data("colorpicker").origColor;e.data("colorpicker").color=t;s(t,e.get(0));c(t,e.get(0));l(t,e.get(0));u(t,e.get(0));h(t,e.get(0));f(t,e.get(0))};return{init:function(i){i=q.extend({},o,i||{});if(typeof i.color=="string"){i.color=H(i.color)}else if(i.color.r!=undefined&&i.color.g!=undefined&&i.color.b!=undefined){i.color=j(i.color)}else if(i.color.h!=undefined&&i.color.s!=undefined&&i.color.b!=undefined){i.color=M(i.color)}else{return this}return this.each(function(){if(!q(this).data("colorpickerId")){var e=q.extend({},i);e.origColor=i.color;var t="collorpicker_"+parseInt(Math.random()*1e3);q(this).data("colorpickerId",t);e.parent=q(this);var n=q(r).attr("id",t).attr("data-parent",q(this).attr("id"));if(e.flat){n.appendTo(this).show()}else{n.appendTo(document.body)}e.fields=n.find("input").bind("keyup",p).bind("change",g).bind("blur",m).bind("focus",v);n.find("span").bind(a.start,w).end().find(">div.colorpicker_current_color").bind("click",V);n.bind(a.move,function(e){e.preventDefault()});e.selector=n.find("div.colorpicker_color").bind(a.start,S);e.selectorIndic=e.selector.find("div div");e.el=this;e.hue=n.find("div.colorpicker_hue div");n.find("div.colorpicker_hue").bind(a.start,E);e.newColor=n.find("div.colorpicker_new_color");e.currentColor=n.find("div.colorpicker_current_color");n.data("colorpicker",e);n.find("div.colorpicker_submit").bind("mouseenter",T).bind("mouseleave",D).bind("click",R);s(e.color,n.get(0));l(e.color,n.get(0));c(e.color,n.get(0));h(e.color,n.get(0));u(e.color,n.get(0));d(e.color,n.get(0));f(e.color,n.get(0));if(e.flat){n.css({position:"relative",display:"block"})}else{q(this).bind(e.eventName,$)}}})},showPicker:function(){return this.each(function(){if(q(this).data("colorpickerId")){$.apply(this)}})},hidePicker:function(){return this.each(function(){if(q(this).data("colorpickerId")){q("#"+q(this).data("colorpickerId")).hide()}})},setColor:function(t){if(typeof t=="string"){t=H(t)}else if(t.r!=undefined&&t.g!=undefined&&t.b!=undefined){t=j(t)}else if(t.h!=undefined&&t.s!=undefined&&t.b!=undefined){t=M(t)}else{return this}return this.each(function(){if(q(this).data("colorpickerId")){var e=q("#"+q(this).data("colorpickerId"));e.data("colorpicker").color=t;e.data("colorpicker").origColor=t;s(t,e.get(0));l(t,e.get(0));c(t,e.get(0));h(t,e.get(0));u(t,e.get(0));d(t,e.get(0));f(t,e.get(0))}})}}}();q.fn.extend({ColorPicker:e.init,ColorPickerHide:e.hidePicker,ColorPickerShow:e.showPicker,ColorPickerSetColor:e.setColor})})(jQuery);window.ScratchpadAutosuggest={init:function e(t){this.initialized=true;this.editor=t;this.enableLiveCompletion(window.localStorage["autosuggest"]||true);var n=ace.require("ace/ext/language_tools");var s=[ScratchpadAutosuggestData._keywords,ScratchpadAutosuggestData._pjsFunctions,ScratchpadAutosuggestData._pjsVariables,ScratchpadAutosuggestData._pjsCallbacks,ScratchpadAutosuggestData._pjsObjectConstructors,ScratchpadAutosuggestData._pjsObjects];for(var i=t.completers.length-1;i>=0;i--){if(t.completers[i]===n.keyWordCompleter){t.completers.splice(i,1)}else if(t.completers[i]===n.textCompleter){this.internalTextCompleter=t.completers[i];t.completers.splice(i,1)}}this.customCompleter={getCompletions:function e(t,n,i,r,o){if(r.length===0){o(null,[]);return}var a=[];s.forEach(function(i){i.whitelist.forEach(function(e){var t=e;if(_.isObject(e)){t=e.name}var n=t.split("(")[0];if(n.indexOf(r)===-1){return}a.push({name:t+"-name",value:n,score:299,meta:i.type})}.bind(this))}.bind(this));o(null,a)}};n.addCompleter(this.customCompleter)},enableLiveCompletion:function e(t){if(!this.initialized){return}this.editor.setOptions({enableLiveAutocompletion:t})},lookupParams:function e(n){if(!this.initialized){return}var t=_.find(ScratchpadAutosuggestData._pjsFunctions.whitelist,function(e){var t=e;if(_.isObject(e)){t=e.name}return t.split("(")[0]===n});if(!t){t=_.find(ScratchpadAutosuggestData._keywords.whitelist,function(e){if(_.isObject(e)){var t=e.name;return t===n}return false})}if(!t){return}return t},lookupParamsSafeHTML:function e(t,n){var i=n.split(",").length-1;var r=this.lookupParams(t);if(!r){return}var t=r;var o,a,s=true,l;var c=$("<div class='autosuggest-info'/>").hide();if(_.isObject(r)){t=r.name;o=r.description;l=r.exampleURL;a=r.params;if(!_.isUndefined(r.isFunction)){s=r.isFunction}}var u=function e(t){if(!a||t>=a.length){return""}return a[t]};var h=t.split("(");var d=$("<span class='autosuggest-function'/>").text(h[0]);var f=$();if(o){f=f.add(d.data("param-info",o).data("exampleURL",l))}var p=h.length>1?h[1].substring(0,h[1].length-1):"";if(_.isUndefined(p)){return}var g=p.split(",");var m=$("<span/>");var v;if(i>=g.length&&d!=="debug"){i=g.length-1;v=$("  <span class='autosuggest-error'/>").text(" Too many arguments passed!")}for(var b=0;b<i;b++){if(m.children().length){m.append($("<span/>").text(", "))}m.append($("<span class='autosuggest-param-info'/>").text(g[b]).data("param-info",u(b)))}if(m.children().length){m.append($("<span>").text(", "))}m.append($("<span class='current-param autosuggest-param-info'/>").text(g[i]).data("param-info",u(b)));for(var b=i+1;b<g.length;b++){if(m.children().length){m.append($("<span/>").text(", "))}m.append($("<span class='autosuggest-param-info'/>").text(g[b]).data("param-info",u(b)))}m.find(".autosuggest-param-info").each(function(){if($(this).data("param-info")){f=f.add($(this))}});f.mouseenter(function(e){var t=$(e.target).addClass("autosuggest-highlight").data("param-info");c.text("  "+t).show();$(".arrow").hide()}).mouseleave(function(e){$(e.target).removeClass("autosuggest-highlight");c.hide();$(".arrow").show()}).mousedown(function(e){var t=$(e.target).addClass("autosuggest-highlight").data("exampleURL");if(t){window.open(t,"_blank")}});return $("<span/>").append(d).append(s?$("<span/>").text("("):null).append(m).append(s?$("<span/>").text(")"):null).append(v).append(c)}};window.ScratchpadAutosuggestData={_keywords:{type:i18n._("keyword"),whitelist:["break","case","catch","continue","default","delete","do","else","finally","for","function","if","in","instanceof","new","return","switch","this","throw","try","typeof","var","void","while","with"]},_pjsFunctions:{type:i18n._("function"),whitelist:[{name:"rect(x, y, width, height, radius*)",exampleURL:"/cs/rectx-y-w-h/839496660",description:i18n._("Draws a rectangle, using the first two coordinates as the top left corner and the last two as the width/height. For alternate ways to position, see rectMode."),params:[i18n._("x: the x-coordinate of the top left corner"),i18n._("y: the y-coordinate of the top left corner"),i18n._("width: the width of the rectangle"),i18n._("height: the height of the rectangle"),i18n._("radius:(Optional) the radius of the corners, to round the rectangle")]},{name:"ellipse(x, y, w, h)",exampleURL:"/cs/ellipsex-y-w-h/839435680",description:i18n._("Draws an ellipse, using the first two parameters as the center coordinates and the last two as the width/height. For alternate ways to position, see ellipseMode."),params:[i18n._("x: the x-coordinate of the center"),i18n._("y: the y-coordinate of the center"),i18n._("width: the width of the ellipse"),i18n._("height: the height of the ellipse")]},{name:"triangle(x1, y1, x2, y2, x3, y3)",exampleURL:"/cs/trianglex1-y1-x2-y2-x3-y3/839546599",description:i18n._("Draws a triangle"),params:[i18n._("x1: the x-coordinate of the first vertex"),i18n._("y1: the y-coordinate of the first vertex"),i18n._("x2: the x-coordinate of the second vertex"),i18n._("y2: the y-coordinate of the second vertex"),i18n._("x3: the x-coordinate of the third vertex"),i18n._("y3: the y-coordinate of the third vertex")]},{name:"line(x1, y1, x2, y2)",exampleURL:"/cs/linex1-y1-x2-y2/827916099",description:i18n._("Draws a line from one point to another. The color of the line is determined by the most recent stroke() call. The thickness of the line is determined by the most recent strokeWeight() call. The line ending style can be changed using strokeCap()."),params:[i18n._("x1: the x-coordinate of the first point"),i18n._("y1: the y-coordinate of the first point"),i18n._("x2: the x-coordinate of the second point"),i18n._("y2: the y-coordinate of the second point")]},{name:"point(x, y)",exampleURL:"/cs/pointx-y/827809834",description:i18n._("Draws a point. The color is determined by the most recent stroke() call and the thickness is determined by the most recent strokeWeight() call."),params:[i18n._("x: the x-coordinate of the point"),i18n._("y: the y-coordinate of the point")]},{name:"arc(x, y, w, h, start, stop)",exampleURL:"/cs/arcx-y-w-h-start-stop/1903619297",description:i18n._("Draws an arc.   It is very similar to an ellipse(), except that the final two parameters, start and stop, decide how much of the ellipse to draw."),params:[i18n._("x: The x-coordinate of the center of the complete ellipse derived from the arc"),i18n._("y: The y-coordinate of the center of the complete ellipse derived from the arc"),i18n._("width: The width of the complete ellipse formed by the partial arc"),i18n._("height: The height of the complete ellipse formed by the partial arc"),i18n._("start: The angle to start the arc at"),i18n._("stop: The angle to stop the arc at")]},{name:"bezier(x1, y1, cx1, cy1, cx2, cy2, x2, y2)",exampleURL:"/cs/bezierx1-y1-cx1-cy1-cx2-cy2-x2-y2/956920482",description:i18n._("Draws a bezier curve. To extract points and tangents after drawing the curve, use bezierPoint() and bezierTangent()."),params:[i18n._("x1: the x-coordinate of the first endpoint"),i18n._("y1: the y-coordinate of the first endpoint"),i18n._("cx1: the x-coordinate of the first control point"),i18n._("cy1: the y-coordinate of the first control point"),i18n._("cx2: the x-coordinate of the second control point"),i18n._("cy2: the y-coordinate of the second control point"),i18n._("x2: the x-coordinate of the second endpoint"),i18n._("y2: the y-coordinate of the second endpoint")]},{name:"quad(x1, y1, x2, y2, x3, y3, x4, y4)",exampleURL:"/cs/quadx1-y1-x2-y2-x3-y3-x4-y4/1907244018",description:i18n._("Draws any quadrilateral, with the points listed as parameters in a clockwise or counter-clockwise direction."),params:[i18n._("x1: the x-coordinate of the first vertex"),i18n._("y1: the y-coordinate of the first vertex"),i18n._("x2: the x-coordinate of the second vertex"),i18n._("y2: the y-coordinate of the second vertex"),i18n._("x3: the x-coordinate of the third vertex"),i18n._("y3: the y-coordinate of the third vertex"),i18n._("x4: the x-coordinate of the fourth vertex"),i18n._("y4: the y-coordinate of the fourth vertex")]},{name:"image(image, x, y, width*, height*)",exampleURL:"/cs/imageimage-x-y/937672662",description:i18n._("Draw an image on the canvas. The only allowed images are those that popup in the image picker when you use the getImage() method. The image is positioned using the x/y as the upper left corner. For alternate ways to position images, see imageMode."),params:[i18n._("image: an image returned by getImage()"),i18n._("x: the x-coordinate of the top left corner"),i18n._("y: the y-coordinate of the top left corner"),i18n._("width: (Optional) the width of the drawn image"),i18n._("height: (Optional) the height of the drawn image")]},{name:"playSound(sound)",exampleURL:"/cs/playsoundsound/6655307787534336",description:i18n._("Plays a short sound. The only allowed sounds are those that popup in the picker when you use the getSound() method."),params:[i18n._("sound: a sound returned by getSound()")]},{name:"rectMode(MODE)",exampleURL:"/cs/rectmodemode/4556457341091840",description:i18n._("Modifies the location from which rectangles draw."),params:[i18n._("MODE: The mode, either CORNER, CORNERS, CENTER, or RADIUS. The default is CORNER.")]},{name:"ellipseMode(MODE)",exampleURL:"cs/ellipsemodemode/6709863212122112",description:i18n._("Changes how ellipses are drawn."),params:[i18n._("MODE: The mode, either CORNER, CORNERS, CENTER, or RADIUS. The default is CENTER.")]},{name:"imageMode(MODE)",exampleURL:"/cs/imagemodemode/5295050787389440",description:i18n._("Modifies the location from which images are drawn."),params:[i18n._("MODE: Either CENTER, CORNERS, or CORNER. The default is CORNER.")]},{name:"bezierPoint(a, b, c, d, t)",exampleURL:"/cs/bezierpointa-b-c-d-t/4551007698681856",description:i18n._("Evaluates the bezier curve at point t for points a, b, c, d. The parameter t varies between 0 and 1, a and d are points on the curve, and b and c are the control points. This can be done once with the x coordinates and a second time with the y coordinates to get the location of a bezier curve at t."),params:[i18n._("a: coordinate of first point on the curve"),i18n._("b: coordinate of first control point"),i18n._("c: coordinate of second control point"),i18n._("d: coordinate of second point on the curve"),i18n._("t: value between 0 and 1")]},{name:"bezierTangent(a, b, c, d, t)",exampleURL:"/cs/beziertangenta-b-c-d-t/4736929853603840",description:i18n._("Calculates the tangent of a point on a bezier curve. The parameter t varies between 0 and 1, a and d are points on the curve, and b and c are the control points. This can be done once with the x coordinates and a second time with the y coordinates to get the tangent of a bezier curve at t."),params:[i18n._("a: coordinate of first point on the curve"),i18n._("b: coordinate of first control point"),i18n._("c: coordinate of second control point"),i18n._("d: coordinate of second point on the curve"),i18n._("t: value between 0 and 1")]},{name:"bezierVertex(cx1, cy1, cx2, cy2, x, y)",exampleURL:"/cs/beziervertexcx1-cy1-cx2-cy2-x-y/5085481683386368",description:i18n._("Used in conjunction with beginShape() and endShape() to draw shapes with bezier curves for sides. Each call to bezierVertex() defines the position of two control points and one anchor point of a Bezier curve, adding a new segment to a line or shape. The first time bezierVertex() is used within a beginShape() call, it must be prefaced with a call to vertex() to set the first anchor point. When using this function, do *not* specify a mode in beginShape()."),params:[i18n._("cx1: The x-coordinate of 1st control point"),i18n._("cy1: The y-coordinate of 1st control point"),i18n._("cx2: The x-coordinate of 2nd control point"),i18n._("cy2: The y-coordinate of 2nd control point"),i18n._("x: The x-coordinate of anchor point"),i18n._("y: The y-coordinate of anchor point")]},{name:"curve(x1, y1, x2, y2, x3, y3, x4, y4)",exampleURL:"/cs/curve/5105742184972288",description:i18n._("Draws a curved line on the screen. The first and second parameters specify the first anchor point and the last two parameters specify the second anchor. The middle parameters specify the points for defining the shape of the curve. Longer curves can be created by putting a series of curve() functions together. An additional function called curveTightness() provides control for the visual quality of the curve. The curve() function is an implementation of Catmull-Rom splines."),params:[i18n._("x1: the x coordinate of first anchor point"),i18n._("y1: the y coordinate of first anchor point"),i18n._("x2: the x coordinate of first point"),i18n._("y2: the y coordinate of first point"),i18n._("x3: the x coordinate of second point"),i18n._("y3: the y coordinate of second point"),i18n._("x4: the x coordinate of second anchor point"),i18n._("y4: the y coordinate of second anchor point")]},{name:"curvePoint(a, b, c, d, t)",exampleURL:"/cs/curvepointa-b-c-d-t/5879387094253568",description:i18n._("Evaluates the curve at point t for points a, b, c, d. The parameter t varies between 0 and 1, a and d are points on the curve, and b and c are the control points. This can be done once with the x coordinates and a second time with the y coordinates to get the location of a curve at t."),params:[i18n._("a: the coordinate of the first point"),i18n._("b: the coordinate of the first control point"),i18n._("c: the coordinate of the second control point"),i18n._("d: the coordinate of the second point"),i18n._("t: the a value between 0 and 1")]},{name:"curveTangent(a, b, c, d, t)",exampleURL:"/cs/curvetangenta-b-c-d-t/4708940860358656",description:i18n._("Calculates the tangent of a point on a curve. The parameter t varies between 0 and 1, a and d are points on the curve, and b and c are the control points. This can be done once with the x coordinates and a second time with the y coordinates to get the tangent of a curve at t."),params:[i18n._("a: the coordinate of the first point"),i18n._("b: the coordinate of the first control point"),i18n._("c: the coordinate of the second control point"),i18n._("d: the coordinate of the second point"),i18n._("t: the a value between 0 and 1")]},{name:"curveTightness(tightness)",exampleURL:"/cs/curvetightnesssquishy/4792873740402688",description:i18n._("Modifies the quality of forms created with curve() and curveVertex(). The tightness parameter determines how the curve fits to the vertex points."),params:[i18n._("tightness: amount of deformation from the original vertices")]},{name:"curveVertex(x,y)",exampleURL:"/cs/curvevertexx-y/6499542019080192",description:i18n._("Used in conjunction with beginShape() and endShape() to draw shapes with bezier curves for sides. The first and last points in a series of curveVertex() lines will be used to guide the beginning and end of the curve."),params:[i18n._("x: the x-coordinate of the vertex"),i18n._("y: the y-coordinate of the vertex")]},{name:"beginShape(MODE*)",exampleURL:"/cs/beginshapeendshape/5462945756610560",description:i18n._("Using the beginShape() and endShape() functions allow creating more complex forms. To start a form, call beginShape(), then use the vertex() command, then call endShape() to stop. By default, it creates an irregular polygon, but you can control that by sending a mode to beginShape().  Transformations such as translate(), rotate(), and scale() do not work within beginShape(). It is also not possible to use other shapes, such as ellipse() or rect() within beginShape()."),params:[i18n._("MODE: (Optional) Shape mode. Either POINTS, LINES, TRIANGLES, TRIANGLE_FAN, TRIANGLE_STRIP, QUADS, and QUAD_STRIP")]},{name:"endShape(MODE*)",exampleURL:"/cs/beginshapeendshape/5462945756610560",description:i18n._("Using the beginShape() and endShape() functions allow creating more complex forms. To start a form, call beginShape(), then use the vertex() command, then call endShape() to stop. By default, it creates an irregular polygon, but you can control that by sending a mode to beginShape().  Transformations such as translate(), rotate(), and scale() do not work within beginShape(). It is also not possible to use other shapes, such as ellipse() or rect() within beginShape()."),params:[i18n._("MODE: (Optional) Specify CLOSE to close the shape.")]},{name:"vertex(x, y)",exampleURL:"/cs/beginshapeendshape/5462945756610560",description:i18n._("Using the beginShape() and endShape() functions allow creating more complex forms. To start a form, call beginShape(), then use the vertex() command, then call endShape() to stop. By default, it creates an irregular polygon, but you can control that by sending a mode to beginShape().  Transformations such as translate(), rotate(), and scale() do not work within beginShape(). It is also not possible to use other shapes, such as ellipse() or rect() within beginShape()."),params:[i18n._("x: the x-coordinate of the vertex"),i18n._("y: the y-coordinate of the vertex")]},{name:"background(r, g, b, a*)",exampleURL:"/cs/backgroundr-g-b/839653892",description:i18n._("Sets the background color of the canvas. Note that calling this will color over anything drawn before the command."),params:[i18n._("r: amount of red, ranges from 0 to 255"),i18n._("g: amount of green, ranges from 0 to 255"),i18n._("b: amount of blue, ranges from 0 to 255"),i18n._("a: (Optional) transparency, ranges from 0 to 255")]},{name:"fill(r, g, b, a*)",exampleURL:"/cs/fillr-g-b/839774957",description:i18n._("Sets the fill color for all shapes drawn after the function call."),params:[i18n._("r: amount of red, ranges from 0 to 255"),i18n._("g: amount of green, ranges from 0 to 255"),i18n._("b: amount of blue, ranges from 0 to 255"),i18n._("a: (Optional) transparency, ranges from 0 to 255")]},{name:"stroke(r, g, b, a*)",exampleURL:"/cs/stroker-g-b/839545910",description:i18n._("Sets the outline color for all shapes drawn after the function call."),params:[i18n._("r: amount of red, ranges from 0 to 255"),i18n._("g: amount of green, ranges from 0 to 255"),i18n._("b: amount of blue, ranges from 0 to 255"),i18n._("a: (Optional) transparency, ranges from 0 to 255")]},{name:"color(r, g, b, a*)",exampleURL:"/cs/colorr-g-b/957020020",description:i18n._("This function lets you store all three color components in a single variable. You can then pass that one variable to functions like background(), stroke(), and fill()."),params:[i18n._("r: amount of red, ranges from 0 to 255"),i18n._("g: amount of green, ranges from 0 to 255"),i18n._("b: amount of blue, ranges from 0 to 255"),i18n._("a: (Optional) transparency, ranges from 0 to 255")]},{name:"noFill()",exampleURL:"/cs/nofill/877946290",description:i18n._("Makes all shapes drawn after this function call transparent.")},{name:"noStroke()",exampleURL:"/cs/nostroke/839859412",description:i18n._("Disables outlines for all shapes drawn after the function call.")},{name:"strokeWeight(thickness)",exampleURL:"/cs/strokeweightthickness/877859744",description:i18n._("Sets the thickness of all lines and outlines drawn after the function call."),params:[i18n._("thickness: a number specifying the thickness")]},{name:"strokeJoin(MODE)",exampleURL:"/cs/strokejoinmode/5662070842327040",description:i18n._("Sets the style of the joints which connect line segments drawn with vertex(). These joints are either mitered, beveled, or rounded and specified with the corresponding parameters MITER, BEVEL, and ROUND."),params:[i18n._("MODE: Either MITER, BEVEL, or ROUND. The default is MITER.")]},{name:"strokeCap(MODE)",exampleURL:"/cs/strokecapmode/5288182060941312",description:i18n._("Sets the style for rendering line endings. These ends are either squared, extended, or rounded and specified with the corresponding parameters SQUARE, PROJECT, and ROUND."),params:[i18n._("MODE: Either SQUARE, PROJECT, or ROUND. The default is ROUND")]},{name:"blendColor(c1, c2, MODE)",exampleURL:"/cs/blendcolorc1-c2-mode/4530750216994816",description:i18n._("Blends two color values together based on the blending mode given as the MODE parameter."),params:[i18n._("c1: The first color to blend"),i18n._("c2: The second color to blend"),i18n._("MODE: Either BLEND, ADD, SUBTRACT, DARKEST, LIGHTEST, DIFFERENCE, EXCLUSION, MULTIPLY, SCREEN, OVERLAY, HARD_LIGHT, SOFT_LIGHT, DODGE, or BURN.")]},{name:"lerpColor(c1, c2, amount)",exampleURL:"/cs/lerpcolorc1-c2-amount/4759935778816000",description:i18n._("Calculates a color between two colors at a specific increment. The amount parameter is the amount to interpolate between the two values where 0.0 equal to the first color, 0.1 is very near the first color, 0.5 is half-way in between, etc."),params:[i18n._("c1: Interpolate from this color"),i18n._("c2: Interpolate to this color")]},{name:"colorMode(MODE)",exampleURL:"/cs/colormode/5833774306689024",description:i18n._("Changes the way that color values are interpreted when set by fill()/stroke()/background()."),params:[i18n._("MODE: Either RGB or HSB. The default is RGB.")]},{name:"red(color)",exampleURL:"/cs/redcolor/5102159326609408",description:i18n._("Extracts the red value from a color, scaled to match current colorMode()."),params:[i18n._("color: Any color data type")]},{name:"green(color)",exampleURL:"/cs/greencolor/5877638103040000",description:i18n._("Extracts the green value from a color, scaled to match current colorMode()."),params:[i18n._("color: Any color data type")]},{name:"blue(color)",exampleURL:"/cs/bluecolor/5177743654256640",description:i18n._("Extracts the blue value from a color, scaled to match current colorMode()."),params:[i18n._("color: Any color data type")]},{name:"alpha(color)",exampleURL:"/cs/alphacolor/6687311345483776",description:i18n._("Extracts the alpha value from a color."),params:[i18n._("color: Any color data type")]},{name:"hue(color)",exampleURL:"/cs/huecolor/6620387366404096",description:i18n._("Extracts the hue value from a color."),params:[i18n._("color: Any color data type")]},{name:"saturation(color)",exampleURL:"/cs/saturationcolor/6358678768713728",description:i18n._("Extracts the saturation value from a color."),params:[i18n._("color: Any color data type")]},{name:"brightness(color)",exampleURL:"/cs/brightnesscolor/5888575639912448",description:i18n._("Extracts the brightness value from a color."),params:[i18n._("color: Any color data type")]},{name:"text(message, x, y, width*, height*)",exampleURL:"/cs/texttext-x-y/937624625",description:i18n._("Draws a string of text at the specified location"),params:[i18n._("message: the string of text to display"),i18n._("x: the x-coordinate of the bottom left corner"),i18n._("y: the y-coordinate of the bottom left corner"),i18n._("width: (Optional) the width of the box for text to auto wrap inside"),i18n._("height: (Optional) the height of the box for text to auto wrap inside")]},{name:"textFont(font, size*)",exampleURL:"/cs/textfontfont-size/940030209",description:i18n._("Using textFont() with createFont(), it's possible to change the font of text drawn."),params:[i18n._("font: A font returned by the createFont function"),i18n._("size: (Optional) The size of the font, in pixels")]},{name:"createFont(name, size*)",exampleURL:"/cs/textfontfont-size/940030209",description:i18n._("Using textFont() with createFont(), it's possible to change the font of text drawn."),params:[i18n._('name: A font name, either "sans-serif", "serif", "monospace", "fantasy", or "cursive"'),i18n._("size: (Optional) The size of the font, in pixels")]},{name:"textSize(size)",exampleURL:"/cs/textsizesize/937728198",description:i18n._("Changes the size of text being drawn."),params:[i18n._("size: The size of the text, in pixels")]},{name:"textWidth(str)",exampleURL:"/cs/textwidthstr/4799257177489408",description:i18n._("Calculates and returns the width of any string."),params:[i18n._("str: The string to calculate the width of")]},{name:"textAscent()",exampleURL:"/cs/textascent/5975406490419200",description:i18n._("Returns the ascent of the current font at its current size. The ascent is the height of the font above the baseline.")},{name:"textDescent()",exampleURL:"/cs/textdescent/5638769772331008",description:i18n._("Returns descent of the current font at its current size. The descent is the distance of the font below the baseline.")},{name:"textLeading(dist)",exampleURL:"/cs/textleadingdist/6369013500215296",description:i18n._("Sets the spacing between lines of text in units of pixels. This setting will be used in all subsequent calls to the text() function."),params:[i18n._("dist: The size in pixels for spacing between lines")]},{name:"textAlign(ALIGN, YALIGN)",exampleURL:"/cs/textalignalign-yalign/4508437190803456",description:i18n._("Sets the current alignment for drawing text. The first parameter is used to set the display characteristics of the letters in relation to the values for the x and y parameters of the text() function.  The second parameter is used to vertically align the text. BASELINE is the default setting, if textAlign is not used. The TOP and CENTER parameters are straightforward. The BOTTOM parameter offsets the line based on the current textDescent(). For multiple lines, the final line will be aligned to the bottom, with the previous lines appearing above it."),params:[i18n._("ALIGN: Horizontal alignment, either LEFT, CENTER, or RIGHT"),i18n._("YALIGN: Vertical alignment, either TOP, BOTTOM, CENTER, or BASELINE")]},{name:"rotate(angle)",exampleURL:"/cs/rotateangle/6386091934351360",description:i18n._("Sets the rotation angle for any shapes drawn after the command. If called multiple times, the angle will be added to the previous angle (accumulative effect). To stop rotation, use pushMatrix()/popMatrix()."),params:[i18n._("angle: The number of degrees to rotate by. To specify in radians, use the angleMode() function.")]},{name:"scale(amount, amountY*)",exampleURL:"/cs/scalex-y/6712922034143232",description:i18n._("Increases the size of shapes drawn after the command, by expanding and contracting vertices. For example, scale(2) makes it increase in size by 200%. If called multiple times, the sizes will multiply (accumulative effect). It can be called with one parameter to resize the same in both dimensions, or with two parameters to size differently in each dimension.  To stop resizing shapes, use pushMatrix()/popMatrix()."),params:[i18n._('amount: The amount to scale object in "x" and "y" axis'),i18n._('amountY: (Optional) The amount to scale object in "y" axis')]},{name:"translate(x, y)",exampleURL:"/cs/translatex-y/6505693083336704",description:i18n._("Displaces the drawn shapes by a given amount in the x/y directions. If called multiple times, the offsets will be added to each other (accumulative effect). To stop translating shapes, use pushMatrix()/popMatrix()."),params:[i18n._("x: The amount to translate left/right."),i18n._("y: The amount to translate up/down.")]},{name:"pushMatrix()",exampleURL:"/cs/pushmatrixpopmatrix/5505194477486080",description:i18n._('Remembers the current coordinate system (in the "matrix stack").')},{name:"popMatrix()",exampleURL:"/cs/pushmatrixpopmatrix/5505194477486080",description:i18n._('Restores the previous coordinate system (from the "matrix stack") - whatever was most recently pushed.')},{name:"resetMatrix()",exampleURL:"/cs/resetmatrix/4597705468805120",description:i18n._("Replaces the current transformation matrix with the identity matrix. This effectively clears all transformation functions set before it.")},{name:"printMatrix()",exampleURL:"/cs/printmatrix/5934612152844288",description:i18n._("Prints the current transformation matrix to the console.")},{name:"frameRate(fps)",exampleURL:"/cs/frameratefps/6427359154536448",description:i18n._("Specifies the number of frames to be displayed every second. If the processor is not fast enough to maintain the specified rate, it will not be achieved. For fluid animation, at least 24 frames per second is recommended."),params:[i18n._("fps: A whole number, number of frames per second")]},{name:"loop()",exampleURL:"/cs/loop/5519218351013888",description:i18n._("Causes the program to continuously execute the code within draw(). If noLoop() is called, the code in draw() stops executing.")},{name:"noLoop()",exampleURL:"/cs/noloop/6342789906300928",description:i18n._("Stops the program from continuously executing the code within draw(). If loop() is called, the code in draw() begin to run continuously again.")},{name:"random(low, high)",exampleURL:"/cs/randomlow-high/827911487",description:i18n._("Returns a random number between low and high."),params:[i18n._("low: the lowest possible number returned"),i18n._("high: the highest possible number returned")]},{name:"dist(x1, y1, x2, y2)",exampleURL:"/cs/distx1-y1-x2-y2/1917352082",description:i18n._("Calculates the distance between two points, (x1, y1) and (x2, y2)."),params:[i18n._("x1: the x-coordinate of the first point"),i18n._("y1: the y-coordinate of the first point"),i18n._("x2: the x-coordinate of the second point"),i18n._("y2: the y-coordinate of the second point")]},{name:"constrain(value, min, max)",exampleURL:"/cs/constrainvalue-min-max/5870136103796736",description:i18n._("Constrains a value to not exceed a maximum and minimum value."),params:[i18n._("value: The value to constrain"),i18n._("min: The minimum limit"),i18n._("max: The maximum limit")]},{name:"min(num1, num2)",exampleURL:"/cs/minnum1-num2/4693347713155072",description:i18n._("Returns the smallest value of all values passed in."),params:[i18n._("num1: The first value to compare, any number."),i18n._("num2: The second value to compare, any number.")]},{name:"max(num1, num2)",exampleURL:"/cs/maxnum1-num2/4755409722146816",description:i18n._("Returns the greatest value of all values passed in."),params:[i18n._("num1: The first value to compare, any number."),i18n._("num2: The second value to compare, any number.")]},{name:"abs(num)",exampleURL:"/cs/absnum/877930637",description:i18n._("Returns the absolute value of a number"),params:[i18n._("num: The number to take the absolute value of")]},{name:"log(num)",exampleURL:"/cs/lognum/877921884",description:i18n._("Returns the the natural logarithm (base-e) of a number."),params:[i18n._("num: The number to take the log of")]},{name:"pow(num, exponent)",exampleURL:"/cs/pownum-exponent/877858853",description:i18n._("Returns a number raised to an exponential power."),params:[i18n._("num: The base of the exponential expression"),i18n._("exponent: The power to which the num is raised")]},{name:"sq(num)",exampleURL:"/cs/sqnum/6588187426160640",description:i18n._("Squares a number (multiplies a number by itself). The result is always a positive number, as multiplying two negative numbers always yields a positive result. For example, -1 * -1 = 1"),params:[i18n._("num: Any numeric value")]},{name:"sqrt(num)",exampleURL:"/cs/sqrtnum/6473360267542528",description:i18n._("Calculates the square root of a number. The square root of a number is always positive, even though there may be a valid negative root. The square root s of number a is such that s*s = a. It is the opposite of squaring."),params:[i18n._("num: Any numeric value")]},{name:"round(num)",exampleURL:"/cs/roundnum/5907281296228352",description:i18n._("Calculates the closest whole number that is closest to the value of the parameter."),params:[i18n._("num: Any numeric value")]},{name:"ceil(num)",exampleURL:"/cs/ceil/5491781646942208",description:i18n._("Calculates the closest whole number that is greater than or equal to the value of the parameter."),params:[i18n._("num: Any numeric value")]},{name:"floor(num)",exampleURL:"/cs/floornum/5703004061696000",description:i18n._("Calculates the closest whole number that is less than or equal to the value of the parameter."),params:[i18n._("num: Any numeric value")]},{name:"mag(x1, y1)",exampleURL:"/cs/magx1-y1-not-working-yet/5983219002376192",description:i18n._('Calculates the magnitude (or length) of a vector. A vector is a direction in space commonly used in computer graphics and linear algebra. Because it has no "start" position, the magnitude of a vector can be thought of as the distance from coordinate (0,0) to its (x,y) value. Therefore, mag() is a shortcut for writing dist(0, 0, x, y).'),params:[i18n._("x: the x component"),i18n._("y: the y component")]},{name:"exp(num)",exampleURL:"/cs/expvalue/5228990398726144",description:i18n._("Returns Euler's number e (2.71828...) raised to the power of the value parameter."),params:[i18n._("num: Any numeric value")]},{name:"map(num, low1, high1, low2, high2)",exampleURL:"/cs/mapvalue-low1-high1-low2-high2/4587974079545344",description:i18n._("Re-maps a number from one range to another. Numbers outside the range are not clamped to 0 and 1, because out-of-range values are often intentional and useful."),params:[i18n._("num: The incoming value to be converted"),i18n._("low1: Lower bound of the value's current range"),i18n._("high1: Upper bound of the value's current range"),i18n._("low2: Lower bound of the value's target range"),i18n._("high2: Upper bound of the value's target range")]},{name:"norm(num, low, high)",exampleURL:"/cs/normvalue-low-high/6581050767572992",description:i18n._("Normalizes a number from another range into a value between 0 and 1. This is the same as using the map function with the last two parameters set to 0 and 1, i.e: map(value, low, high, 0, 1); Numbers outside the range are not clamped to 0 and 1, because out-of-range values are often intentional and useful."),params:[i18n._("num: The incoming value to be converted"),i18n._("low1: Lower bound of the value's current range"),i18n._("high1: Upper bound of the value's current range")]},{name:"lerp(num1, num2, amount)",exampleURL:"/cs/lerpvalue1-value2-amount/6456916012171264",description:i18n._("Calculates a number between two numbers at a specific increment."),params:[i18n._("num1: The first number"),i18n._("num2: The second number"),i18n._("amount: A value between 0.0 and 1.0")]},{name:"noise(x, y)",exampleURL:"/cs/noise/5618485581316096",description:i18n._("Returns the Perlin noise value at specified coordinates. The resulting value will always be between 0.0 and 1.0"),params:[i18n._("x: the x-coordinate in noise space"),i18n._("y: the y-coordinate in noise space (optional)")]},{name:"noiseDetail(octaves, falloff)",exampleURL:"/cs/noisedetailoctaves-falloff/6549875814563840",description:i18n._("Adjusts the character and level of detail produced by the Perlin noise function."),params:[i18n._("octaves: The number of octaves to be used by the noise() function"),i18n._("falloff: The falloff factor for each octave")]},{name:"sin(degrees)",exampleURL:"/cs/sindeg/948255306",description:i18n._("Return the sine of an angle."),params:[i18n._("deg: The angle, in degrees")]},{name:"cos(degrees)",exampleURL:"/cs/cosdeg/948226821",description:i18n._("Return the cosine of an angle."),params:[i18n._("deg: The angle, in degrees")]},{name:"tan(degrees)",exampleURL:"/cs/tandeg/948018680",description:i18n._("Return the tangent of an angle"),params:[i18n._("deg: The angle, in degrees")]},{name:"acos(val)",exampleURL:"/cs/acosval/4542953527705600",description:i18n._("Returns the arc cosine (inverse cosine) of a value. Depending on the angle mode, it returns values from 0-180 or 0-PI."),params:[i18n._("val: The value whose arc cosine is to be returned.")]},{name:"asin(val)",exampleURL:"/cs/asinval/5061655520083968",description:i18n._("Returns the arc sine (inverse sine) of a value. Depending on the angle mode, it returns values from -90 to 90 or -PI/2 to PI/2."),params:[i18n._("val: The value whose arc sine is to be returned.")]},{name:"atan(val)",exampleURL:"/cs/atanval/4869834059808768",description:i18n._("Returns the arc tangent (inverse tangent) of a value. Depending on the angle mode, it returns values from -90 to 90 or -PI/2 to PI/2."),params:[i18n._("val: The value whose arc tangent is to be returned")]},{name:"radians(angle)",exampleURL:"/cs/radiansangle/6628151023108096",description:i18n._("Converts a degree measurement to its corresponding value in radians."),params:[i18n._("angle: The angle in degrees")]},{name:"degrees(angle)",exampleURL:"/cs/degreesangle/6674991668002816",description:i18n._("Converts a radians measurement to its corresponding value in degrees."),params:[i18n._("angle: The angle in radians")]},{name:"day()",exampleURL:"/cs/day/4526347808407552",description:i18n._("Returns the current day of the month, between 1 and 31, according to the clock on the user's computer.")},{name:"month()",exampleURL:"/cs/month/5388987023753216",description:i18n._("Returns the current month of the year, between 1-12, according to the clock on the user's computer.")},{name:"year()",exampleURL:"/cs/year/6216887939629056",description:i18n._("Returns the current year according to the clock on the user's computer.")},{name:"hour()",exampleURL:"/cs/hour/5806957302644736",description:i18n._("Returns the current hour as a value from 0 - 23, based on the user's computer clock.")},{name:"minute()",exampleURL:"/cs/minute/6638408210317312",description:i18n._("Returns the current minute as a value from 0 - 59, based on the user's computer clock.")},{name:"second()",exampleURL:"/cs/second/5743886110556160",description:i18n._("Returns the current second as a value from 0 - 59, based on the user's computer clock.")},{name:"millis()",exampleURL:"/cs/millis/5970545493409792",description:i18n._("Returns the number of milliseconds (thousandths of a second) since starting the program. Useful for cyclic animations.")},{name:"debug(arg1, ...",exampleURL:"/cs/debugarg1-arg2/939146973",description:i18n._("Log out any number of values to the browser console."),params:[i18n._("arg: The first value to log"),i18n._("...: (Optional)* any amount of extra arguments")]},{name:"println(data)",exampleURL:"/cs/printlndata/6120466259378176",description:i18n._("Prints a line of data to the console that pops up over the canvas. Click the X to close the console."),params:[i18n._("data: The data to print")]},{name:"print(data)",exampleURL:"/cs/printdata/5110798099677184",description:i18n._("Prints data to the console that pops up over the canvas, without creating a new line (like println does)."),params:[i18n._("data: The data to print")]}]},_pjsObjectConstructors:{type:i18n._("object constructor"),whitelist:["PVector(x,y)"]},_pjsObjects:{type:i18n._("object"),whitelist:["Random"]},_pjsVariables:{type:i18n._("variable"),whitelist:["width","height","mouseIsPressed","keyIsPressed","frameCount","key","keyCode","mouseButton","mouseX","mouseY","pmouseX","pmouseY","angleMode"]},_pjsCallbacks:{type:i18n._("callback"),whitelist:["draw","mouseClicked","mousePressed","mouseReleased","mouseMoved","mouseDragged","mouseOver","mouseOut","keyPressed","keyReleased","keyTyped"]}};window.TooltipEngine=Backbone.View.extend({initialize:function e(t){this.options=t;this.editor=t.editor;this.enabled=true;var n=this.options.record;this.tooltips={};var i=_.defaults({parent:this},t);_.each(t.tooltips,function(e){this.tooltips[e]=new TooltipEngine.classes[e](i);this.tooltips[e].on("scrubbingStarted",function(){this.trigger("scrubbingStarted",e)}.bind(this));this.tooltips[e].on("scrubbingEnded",function(){this.trigger("scrubbingEnded",e)}.bind(this))}.bind(this));if(n&&!n.handlers.hot){n.handlers.hot=function(e){if(this.currentTooltip){TooltipBase.prototype.updateText.call(this.currentTooltip,e.hot)}}.bind(this);["playStarted","runSeek"].forEach(function(e){n.on(e,function(){_.values(this.tooltips).forEach(function(e){e.autofill=false})}.bind(this))},this);["playPaused","playStopped","seekDone"].forEach(function(e){n.on(e,function(){_.values(this.tooltips).forEach(function(e){e.autofill=true})}.bind(this))},this)}this.currentTooltip=undefined;this.ignore=false;this.bind()},bind:function e(){if(this.callbacks){return}var t=function(e){var t=$.contains(this.editor.container,e.target);var n=this.currentTooltip&&$.contains(this.currentTooltip.$el[0],e.target);var i=this.currentTooltip&&this.currentTooltip.modal&&this.currentTooltip.modal.$el.is(":visible");if(this.currentTooltip&&!(t||n||i)){this.currentTooltip.$el.hide();this.currentTooltip=undefined}}.bind(this);this.callbacks=[{target:this.editor.selection,event:"changeCursor",fn:this.doRequestTooltip.bind(this)},{target:this.editor.session.getDocument(),event:"change",fn:function(e){if(this.enabled){this.doRequestTooltip(e.data)}}.bind(this)},{target:this.editor.session,event:"changeScrollTop",fn:function(){if(this.currentTooltip){this.currentTooltip.placeOnScreen()}}.bind(this)},{target:$(document),event:"mousedown",fn:t},{target:$(document),event:"contextmenu",fn:t},{target:$(this.editor.container),event:"mousedown",fn:function(){this.doRequestTooltip({action:"click"})}.bind(this)}];_.each(this.callbacks,function(e){e.target.on(e.event,e.fn)});this.requestTooltipDefaultCallback=function(){ScratchpadAutosuggest.enableLiveCompletion(false);if(this.currentTooltip&&this.currentTooltip.$el){this.currentTooltip.$el.hide();this.currentTooltip=undefined}}.bind(this);this.setEnabledStatus=function(e){this.enabled=e}.bind(this);this.editor.on("requestTooltip",this.requestTooltipDefaultCallback)},remove:function e(){_.each(this.callbacks,function(e){e.target.off(e.event,e.fn)});_.each(this.tooltips,function(e){e.remove()});this.editor.off("requestTooltip",this.requestTooltipDefaultCallback)},doRequestTooltip:function e(t){if(this.ignore){return}this.last=this.last||{};var n=this.editor.selection;var i=n.getCursor();var r={col:i.column,row:i.row,line:this.editor.session.getDocument().getLine(i.row),selections:n.getAllRanges(),source:t};r.pre=r.line.slice(0,r.col);r.post=r.line.slice(r.col);var o=r.col===this.last.col&&r.row===this.last.row&&r.line===this.last.line;if(o&&!t){return false}if(this.isWithinComment(r.pre)){if(this.currentTooltip){this.currentTooltip.$el.hide();this.currentTooltip=undefined}return false}this.last=r;this.editor._emit("requestTooltip",r)},isWithinComment:function e(t){return t.length&&(t[0]==="/"||t[0]==="*")}});TooltipEngine.classes={};window.TooltipBase=Backbone.View.extend({bindToRequestTooltip:function e(){if(this.parent){this.callback=this.detector.bind(this);this.parent.editor.on("requestTooltip",this.callback)}},unbindFromRequestTooltip:function e(){if(this.parent){this.parent.editor.off("requestTooltip",this.callback)}},placeOnScreen:function e(){if(this.parent.editor.getReadOnly()){return}var t=this.parent;if(t.currentTooltip&&t.currentTooltip!==this){t.currentTooltip.$el.hide()}t.currentTooltip=this;var n=t.editor;var i=this.aceLocation;var r=n.renderer.scroller.getBoundingClientRect();var o=r.height;if(typeof i.tooltipCursor!=="number"){i.tooltipCursor=i.start+i.length}var a=n.renderer.textToScreenCoordinates(i.row,i.tooltipCursor);var s=a.pageY-r.top;this.$el.css({top:$(window).scrollTop()+a.pageY,left:a.pageX}).toggle(!(s<0||s>=o))},updateText:function e(t,n,i){if(!this.parent||this.parent.options.record.playing){return}var r=this.parent;var o=r.editor;r.ignore=true;t=t.toString();var a=ace.require("ace/range").Range;var s=this.aceLocation;var l=new a(s.row,s.start,s.row,s.start+s.length);var c;if(i){c=o.session.$fromUndo;o.session.$fromUndo=true}o.session.replace(l,t);if(i){o.session.$fromUndo=c}l.end.column=l.start.column+t.length;if(n){l.start.column=s.start+n.offset;l.end.column=s.start+n.offset+n.length}o.selection.setSelectionRange(l);r.ignore=false;this.aceLocation.length=t.length},insert:function e(){if(this.parent.options.record.playing){return}this.parent.editor.session.insert.apply(this.parent.editor.session,arguments)},parens:{"(":")","{":"}","[":"]"},isInParenthesis:function e(t){var n=[];for(var i=0;i<t.length;i++){if(t[i]in this.parens){n.unshift(t[i])}else if(n&&t[i]===this.parens[n[0]]){n.shift()}}return n.length>0},isAfterAssignment:function e(t){return/(?:^|[^!=])=\s*$/.test(t)},isWithinString:function e(t){var n=false;var i;for(var r=0;r<t.length;r++){if(n&&t[r]===i){n=false}else if(!n&&t[r]==="'"||t[r]==='"'){i=t[r];n=true}}return n}});TooltipEngine.classes.autoSuggest=TooltipBase.extend({initialize:function e(t){var n=this;this.options=t;this.parent=t.parent;this.render();this.bind();this.mouse=false;document.addEventListener("mousedown",function(){n.mouse=true});document.addEventListener("mouseup",function(){n.mouse=false})},detector:function e(t){if(!/(\b[^\d\W][\w]*)\s*(\({1}\s*\){1})*\s*([^\]]*)$/.test(t.pre)||this.parent.options.record.playing){return}if(!this.isInParenthesis(RegExp.$3)){return}if(t.source&&t.source.type==="changeCursor"&&this.mouse){return}var n=RegExp.$1;var i=RegExp.$3;var r=ScratchpadAutosuggest.lookupParamsSafeHTML(n,i);if(r){this.aceLocation={start:t.col,length:0,row:t.row};this.updateTooltip(r);this.placeOnScreen();t.stopPropagation();ScratchpadAutosuggest.enableLiveCompletion(false)}},render:function e(){this.$el=$("<div class='tooltip autosuggest hide-while-playing'><div class='hotsuggest'></div><div class='arrow'></div></div>").appendTo("body").hide()},bind:function e(){this.$el.on("mousedown",function(){this.$el.hide();this.options.editor.focus()}.bind(this));this.checkForEscape=function(e){if(e.which===27&&this.$el){this.$el.hide()}}.bind(this);$(document).on("keyup",this.checkForEscape);this.bindToRequestTooltip()},remove:function e(){this.$el.remove();$(document).off("keyup",this.checkForEscape);this.unbindFromRequestTooltip()},updateTooltip:function e(t){this.$el.find(".hotsuggest").empty().append(t)}});TooltipEngine.classes.colorPicker=TooltipBase.extend({initialize:function e(t){this.options=t;this.parent=t.parent;var n=this.parent.options.type==="ace_webpage"?"rgb|rgba":"background|fill|stroke|color";this.regex=RegExp("(\\b(?:"+n+")\\s*\\()[^\\)]*$");this.autofill=true;this.render();this.bind()},render:function e(){this.$el=$("<div class='tooltip picker'><div class='picker'>"+"</div><div class='arrow'></div></div>").appendTo("body").find(".picker").ColorPicker({flat:true,onChange:function(e,t,n,i){this.updateText(n,i)}.bind(this)}).end().hide()},bind:function e(){var t=false;var n=false;var i=this;this.$el.on("mouseenter",function(){t=true}).on("mouseleave",function(){t=false;if(!n){i.placeOnScreen()}i.options.editor.focus()}).on("mousedown",function(){var e=$(this);e.addClass("active");n=true;i.trigger("scrubbingStarted");$(document).one("mouseup",function(){e.removeClass("active");n=false;if(!t){i.placeOnScreen()}i.trigger("scrubbingEnded")})});this.bindToRequestTooltip()},remove:function e(){this.$el.remove();this.unbindFromRequestTooltip()},detector:function e(t){if(!this.regex.test(t.pre)){return}var n=t.col-RegExp.lastMatch.length;var i=n+RegExp.$1.length;var r=/^(.*?)(\);?|$)/.exec(t.line.slice(i));var o=r[1];this.closing=r[2];var a=i+o.length;var s=i+r[0].length;var l=_.map(o.split(","),parseFloat);if(l.length===4&&!isNaN(l[3])){o=o.slice(0,o.lastIndexOf(","));a=i+o.length;this.closing=t.line.slice(a,s)}var c=_.map(o.split(","),function(e){e=parseFloat(e);return isNaN(e)?0:e});var u={r:Math.min(c[0]||0,255),g:Math.min(c[1]||0,255),b:Math.min(c[2]||0,255)};this.aceLocation={start:i,length:a-i,row:t.row};this.aceLocation.tooltipCursor=this.aceLocation.start+this.aceLocation.length+this.closing.length;var h=t.line.substring(n,i-1);var d=this.isAfterAssignment(t.pre.slice(0,n));if(["fill","stroke","background"].includes(h)){d=true}if(t.source&&t.source.action==="insertText"&&t.source.text.length===1&&this.parent.options.type==="ace_pjs"&&this.autofill){if(o.length===0&&this.closing.length===0){this.closing=")"+(d?";":"");this.insert({row:t.row,column:s},this.closing)}if(o.trim().length===0){var u={r:255,g:0,b:0};this.updateText(u)}}this.updateTooltip(u);this.placeOnScreen();t.stopPropagation();ScratchpadAutosuggest.enableLiveCompletion(false)},updateTooltip:function e(t){this.$el.find(".picker").ColorPickerSetColor(t)},updateText:function e(t,n){var i=false;if(n==="startScrub"){var r=ace.require("ace/range").Range;var o=this.aceLocation;var a=new r(o.row,o.start,o.row,o.start+o.length);this.originalText=this.parent.editor.getSession().getTextRange(a);this.wasReadOnly=this.parent.editor.getReadOnly();this.parent.editor.setReadOnly(true);i=true}else if(n==="midScrub"){i=true}else if(n==="stopScrub"){TooltipBase.prototype.updateText.call(this,this.originalText,undefined,true);this.parent.editor.setReadOnly(this.wasReadOnly)}TooltipBase.prototype.updateText.call(this,t.r+", "+t.g+", "+t.b,undefined,i);this.aceLocation.tooltipCursor=this.aceLocation.start+this.aceLocation.length+this.closing.length}});(function(){var n=Backbone.View.extend({initialize:function e(t){this.options=t;this.parent=t.parent;this.render();this.bind();TooltipUtils.setupScrollSpy(this.$(".mediapicker-modal-content"),function(e){return $(e).closest(".tab-pane").find(".nav-pills")})},bind:function e(){this.$(".mediapicker-modal-content").scroll(_.throttle(function(e){var t=$(e.currentTarget);if(t.scrollTop()>0){t.addClass("top-shadow")}else{t.removeClass("top-shadow")}},100));this.$(".mediapicker-modal-content").scroll(_.throttle(function(e){TooltipUtils.lazyLoadMedia(e.currentTarget)},200));this.$(".mediapicker-modal-file audio").on("play",function(e){this.handleFileSelect(e)}.bind(this))},events:{"click .mediapicker-modal-file":"handleFileSelect","click .nav-tabs a":function e(t){$(t.currentTarget).tab("show");t.preventDefault()},shown:function e(){TooltipUtils.lazyLoadMedia(this.$(".tab-pane.active .mediapicker-modal-content"))},"hide.bs.modal":function e(){this.scrollStart=undefined;$("body").css("overflow","auto");this.logForRecording("hide")},"click .mediapicker-modal-submit":function e(t){var n=this.$(".mediapicker-modal-file.active");if(n.length!==1){return}this.parent.updateText(n.attr("data-update-path"));this.parent.updateTooltip(n.attr("data-preview-path"))}},show:function e(){this.$el.modal();$("body").css("overflow","hidden");this.$(".mediapicker-modal-file.active").removeClass("active");this.logForRecording("show")},handleFileSelect:function e(t){this.$(".mediapicker-modal-file.active").removeClass("active");var n=$(t.currentTarget).closest(".mediapicker-modal-file");n.addClass("active");this.logForRecording("selectImg",n.attr("data-path"))},selectFile:function e(t){var n=this.$(".mediapicker-modal-file[data-path='"+t+"']");var i=n.closest(".tab-pane");var r=this.$("a[href='#"+i.attr("id")+"']");r.tab("show");i.find(".mediapicker-modal-content").scrollTop(n.position().top-100);return n},selectImg:function e(t){var n=this.selectFile(t);n.find("img").click()},logForRecording:function e(t,n){var i=this.options.logPrefix||"mediamodal";var r=i+"."+t;this.options.record.log(r,n)},render:function e(){Handlebars.registerHelper("hasMultipleItems",this.hasMultipleItems);Handlebars.registerHelper("slugify",this.slugify);Handlebars.registerHelper("patchedEach",this.handlebarsPatchedEach);this.$el=$(Handlebars.templates["mediapicker-modal"]({imagesDir:this.options.imagesDir,soundsDir:this.options.soundsDir,classes:this.options.files,closeMsg:i18n._("Close"),okMsg:i18n._("Ok")}));this.$el.appendTo("body").hide()},hasMultipleItems:function e(t,n){if(t&&t.length>1){return n.fn(this)}return n.inverse(this)},slugify:function e(t){return t.toLowerCase().match(/[a-z0-9_]+/g).join("-")},handlebarsPatchedEach:function e(n,i){return _.map(n,function(e,t){e.$index=t;e.$first=t===0;e.$last=t===n.length-1;return i.fn(e)}).join("")}});TooltipEngine.classes.imageModal=TooltipBase.extend({initialize:function e(t){this.options=t;this.options.files=ExtendedOutputImages;this.parent=t.parent;this.autofill=true;this.render();this.bindToRequestTooltip();_.extend(this.options.record.handlers,{"imagemodal.show":this.modal.show.bind(this.modal),"imagemodal.hide":function(){this.modal.$el.modal("hide")}.bind(this),"imagemodal.selectImg":this.modal.selectImg.bind(this.modal)})},detector:function e(t){if(!/<img\s+[^>]*?\s*src\s*=\s*["']([^"']*)$/.test(t.pre)){return}var n=t.col-RegExp.$1.length;var i=t.line.slice(n).match(/^[^"']*/)[0];this.aceLocation={start:n,length:i.length,row:t.row};this.aceLocation.tooltipCursor=this.aceLocation.start+this.aceLocation.length+1;this.updateTooltip(i);this.placeOnScreen();t.stopPropagation();ScratchpadAutosuggest.enableLiveCompletion(false)},updateTooltip:function e(t){if(t!==this.currentUrl){this.currentUrl=t.trim();if(t===""){this.$(".thumb").hide();this.$(".thumb-throbber").hide();this.$(".thumb-error").text(i18n._("Enter an image URL.")).show();return}var n=/(\.|^)?(khanacademy\.org|kastatic\.org|kasandbox\.org|ka-perseus-images\.s3\.amazonaws\.com|wikimedia\.org|localhost:\d+)$/i;var i=/\/\/([^\/]*)(?:\/|\?|#|$)/.exec(t);var r=i?i[1]:"";if(!r||n.test(r)){if(t!==this.$(".thumb").attr("src")){this.$(".thumb").attr("src",t);this.$(".thumb-throbber").show()}if(this.$(".thumb-error").hasClass("domainError")){this.$(".thumb-error").removeClass("domainError").hide();this.$(".thumb").show()}}else{this.$(".thumb").hide();this.$(".thumb-error").text(i18n._("Sorry! That server is not permitted.")).addClass("domainError").show();this.$(".thumb-throbber").hide()}}},render:function e(){var t=this;this.$el=$(Handlebars.templates["mediapicker-preview"]({isAudio:false,pickMsg:i18n._("Pick file:")})).appendTo("body").hide();this.$(".thumb").on("load",function(){$(this).closest(".thumb-shell").find(".thumb-error").hide();$(this).show();t.$(".thumb-throbber").hide()}).on("error",function(){if(t.currentUrl!==$(this).attr("src")){return}$(this).closest(".thumb-shell").find(".thumb-error").text(i18n._("That is not a valid image URL.")).show();$(this).hide();t.$(".thumb-throbber").hide()});this.$("button").on("click",function(){t.modal.show()});this.modal=new n(_.defaults({parent:this,logPrefix:"imagemodal"},this.options))},remove:function e(){this.$el.remove();this.modal.remove();this.unbindFromRequestTooltip()}});TooltipEngine.classes.soundModal=TooltipBase.extend({defaultFile:'"rpg/metal-clink"',initialize:function e(t){this.options=t;this.options.files=OutputSounds;this.parent=t.parent;this.autofill=true;this.render();this.bindToRequestTooltip()},detector:function e(t){if(!/(\bgetSound\s*\()[^\)]*$/.test(t.pre)){return}var n=t.col-RegExp.lastMatch.length;var i=n+RegExp.$1.length;var r=/^(\s*)(["']?[^\)]*?["']?)\s*(\);?|$)/.exec(t.line.slice(i));var o=r[1];var a=i+o.length;var s=r[2];var l=r[3];if(o.length===0&&s.length===0&&l.length===0&&t.source&&t.source.action==="insertText"&&t.source.text.length===1&&this.autofill){l=")"+(this.isInParenthesis(t.pre.slice(0,n))?"":";");this.insert({row:t.row,column:a},l);s=this.defaultFile;this.updateText(s)}this.aceLocation={start:a,length:s.length,row:t.row};this.aceLocation.tooltipCursor=this.aceLocation.start+this.aceLocation.length+l.length;this.updateTooltip(s);this.placeOnScreen();t.stopPropagation();ScratchpadAutosuggest.enableLiveCompletion(false)},updateTooltip:function e(t){if(t!==this.currentUrl){t=t.replace(/\"/g,"");this.currentUrl=this.options.soundsDir+t+".mp3";if(t===""){this.$(".thumb-error").text(i18n._("Invalid sound file.")).show();return}else{this.$(".thumb-error").hide()}}this.$(".mediapicker-preview-file").attr("src",this.currentUrl)},render:function e(){var t=this;this.$el=$(Handlebars.templates["mediapicker-preview"]({isAudio:true,pickMsg:i18n._("Pick file:")})).appendTo("body").hide();this.$("button").on("click",function(){t.modal.show()});this.modal=new n(_.defaults({parent:this},this.options))},remove:function e(){this.$el.remove();this.modal.remove();this.unbindFromRequestTooltip()}})})();TooltipEngine.classes.imagePicker=TooltipBase.extend({defaultImage:"cute/None",initialize:function e(t){this.options=t;this.parent=t.parent;this.autofill=true;this.render();this.bindToRequestTooltip()},detector:function e(t){if(!/(\bgetImage\s*\()[^\)]*$/.test(t.pre)){return}var n=t.col-RegExp.lastMatch.length;var i=n+RegExp.$1.length;var r=/^(\s*)(["']?[^\)]*?["']?)\s*(\);?|$)/.exec(t.line.slice(i));var o=r[1];var a=i+o.length;var s=r[2];this.closing=r[3];this.aceLocation={start:a,length:s.length,row:t.row};this.aceLocation.tooltipCursor=this.aceLocation.start+this.aceLocation.length+this.closing.length;if(o.length===0&&s.length===0&&this.closing.length===0&&t.source&&t.source.action==="insertText"&&t.source.text.length===1&&this.autofill){this.closing=")"+(this.isAfterAssignment(t.pre.slice(0,n))?";":"");this.insert({row:t.row,column:a},this.closing);s=this.defaultImage;this.updateText(s)}this.updateTooltip(s);this.placeOnScreen();t.stopPropagation();ScratchpadAutosuggest.enableLiveCompletion(false)},render:function e(){var t=this.options.imagesDir;var n=Handlebars.templates["image-picker"]({imagesDir:t,groups:_.map(OutputImages,function(e){e.imagesDir=t;return e})});this.$el=$("<div class='tooltip mediapicker'>"+n+"<div class='arrow'></div></div>").appendTo("body").hide();this.bind()},bind:function e(){var t=this;this.$(".media-groups").scroll(_.throttle(function(){TooltipUtils.lazyLoadMedia(this)},200,{leading:false}));this.$el.on("mouseenter",function(){TooltipUtils.lazyLoadMedia($(this))}).on("click",".image",function(){$(this).parents(".mediapicker").find(".active").removeClass("active");$(this).addClass("active");var e=$(this).attr("data-path");t.updateText(e);t.updateTooltip('"'+e+'"')}).on("mouseleave",function(){t.options.editor.clearSelection();t.options.editor.focus()})},remove:function e(){this.$el.remove();this.unbindFromRequestTooltip()},updateTooltip:function e(t){var n=this.defaultImage;var i=/^["']?(.*?)["']?$/.exec(t)[1];var r=i.split("/");var o=r[0];var a=r[1];_.each(OutputImages,function(e){if(e.groupName===o){_.each(e.images,function(e){if(e===a){n=o+"/"+a}})}});var s=this.parent.options.imagesDir+n+".png";this.$el.find(".current-media img").attr("src",s);this.value=i},updateText:function e(t){var n='"'+t+'"';TooltipBase.prototype.updateText.call(this,n);this.aceLocation.tooltipCursor=this.aceLocation.start+this.aceLocation.length+this.closing.length}});TooltipEngine.classes.numberScrubberClick=TooltipBase.extend({initialize:function e(t){this.options=t;this.parent=t.parent;this.bindToRequestTooltip()},remove:function e(){this.unbindFromRequestTooltip()},detector:function e(t){if(t.source&&t.source.action==="click"){if(this.parent.tooltips.numberScrubber){this.parent.tooltips.numberScrubber.detector(t)}else{console.warn("FAIL: You loaded the numberScrubberClick tooltip, without the numberScrubber tooltip.")}}}});TooltipEngine.classes.numberScrubber=TooltipBase.extend({initialize:function e(t){this.options=t;this.parent=t.parent;this.render();this.bind()},render:function e(){var s=this;var t=s.options.clickOnly;function l(e){var t=-s.decimals;if(e.shiftKey&&e.altKey){t=0}else if(e.shiftKey){t=1}else if(e.altKey){t=-1}return t}var n="<svg width='12px' height='12px' viewBox='-25, -25, 150, 150'>";var i=t?"-":n+"<polygon points='0,50 100,0 100, 100' fill='white'/></svg>";var r=t?"+":n+"<polygon points='0,50 100,0 100, 100' fill='white'/></svg>";var o=t?"":n+"<polygon points='50,0 100,50 50,100 0,50' fill='white'/></svg>";var a=$("<span role='button'>"+i+"</span>");var c=$("<span role='button' class='flipped-arrow'>"+r+"</span>");var u=$("<span>"+o+"</span>");var h=function e(t,n){var i=n?l(n):-s.decimals;s.decimals=Math.max(0,-i);s.intermediateValue=s.value+t*Math.pow(10,i);s.updateText(s.intermediateValue.toFixed(s.decimals));s.updateTooltip(s.intermediateValue,s.decimals)};a.on("click touchend",function(e){if(s.noClick){s.noClick=false;return}if(!s.dragged){h(-1,e)}});c.on("click touchend",function(e){if(s.noClick){s.noClick=false;return}if(!s.dragged){h(1,e)}});var d=$("<div class='scrubber-handle'/>").append(a).append(u).append(c);var f=function e(){var t=ace.require("ace/range").Range;var n=s.aceLocation;var i=new t(n.row,n.start,n.row,n.start+n.length);return s.parent.editor.getSession().getTextRange(i)};if(!t){d.draggable({axis:"x",appendTo:"body",helper:function e(){return $(this).clone().css($(this).offset())},start:function e(t,n){s.$el.addClass("dragging");$(this).css("visibility","hidden");s.trigger("scrubbingStarted");s.originalString=f();s.wasReadOnly=s.parent.editor.getReadOnly();s.parent.editor.setReadOnly(true)},drag:function e(t,n){var i=n.helper.offset();var r=$(this).parent().offset();var o=i.left-r.left;var a=l(t);s.decimals=Math.max(0,-a);s.intermediateValue=s.value+Math.round(o/2)*Math.pow(10,a);s.updateText(s.intermediateValue.toFixed(s.decimals),undefined,true);s.dragged=true},stop:function e(t,n){s.$el.removeClass("dragging");$(this).css("visibility","visible");var i=l(t);s.decimals=Math.max(0,-i);s.updateText(s.originalString,undefined,true);s.updateText(s.intermediateValue.toFixed(s.decimals));s.updateTooltip(s.intermediateValue,s.decimals);s.trigger("scrubbingEnded");setTimeout(function(){s.dragged=false;s.parent.editor.setReadOnly(s.wasReadOnly)},0)}})}else{var p;var g=function e(n,i){var r=300;var o=(new Date).getTime();if(s.setCurValue){s.setCurValue()}var t=function t(){s.noClick=false;p=setTimeout(function(){s.noClick=true;h(i,n);var e=(new Date).getTime()-o;if(e>=5e3){i=(i<1?-1:1)*3}else if(e>2e3){i=(i<1?-1:1)*2}r=16;t()},r)};t()};a.on("touchstart mousedown",function(e){g(e,-1);$(this).addClass("active");e.preventDefault()});a.on("touchend touchleave mouseup mouseleave",function(){$(this).removeClass("active");clearInterval(p)});c.on("touchstart mousedown",function(e){g(e,1);$(this).addClass("active");e.preventDefault()});c.on("touchend touchleave mouseup mouseleave",function(){$(this).removeClass("active");clearInterval(p)})}this.$el=$("<div class='tooltip'><div class='scrubber'></div><div class='arrow'></div></div>").appendTo("body").find(".scrubber").append(d).end().hide();if(t){this.$el.addClass("click-only")}},bind:function e(){this.bindToRequestTooltip()},remove:function e(){this.$el.remove();this.unbindFromRequestTooltip()},detector:function e(t){if(/[a-zA-Z]\d+$/.test(t.pre)||/[a-zA-Z]$/.test(t.pre)&&/^\d/.test(t.post)||!(/\d$/.test(t.pre)||/^-?\d/.test(t.post))){return}var n=t.pre.split("").reverse().join("");var i=t.col-/^[\d.]*(-(?!\s*\w))?/.exec(n)[0].length;var r=/^-?[\d.]+/.exec(t.line.slice(i))[0];this.aceLocation={start:i,length:r.length,row:t.row};this.aceLocation.tooltipCursor=t.col;this.updateTooltip(parseFloat(r),this.decimalCount(r));this.placeOnScreen();t.stopPropagation();ScratchpadAutosuggest.enableLiveCompletion(false)},updateTooltip:function e(t,n){this.value=t;this.decimals=n<=5?n:5},decimalCount:function e(t){var n=t.indexOf(".");return n===-1?0:t.length-(n+1)}});window.TooltipUtils={lazyLoadMedia:function e(t,n){n=n||250;var o=this;$(t).each(function(e,t){var i=$(t).scrollTop();var r=i+$(t).height();i-=n;r+=n;$(t).find("[data-lazy-src]").each(function(e,t){var n=$(t).position().top;if(n<i){return true}else if(n<r){o.loadNow(t)}else{return false}})})},loadNow:function e(t){$.each($(t),function(e,t){$(t).attr("src",$(t).attr("data-lazy-src"));$(t).removeAttr("data-lazy-src")})},setupScrollSpy:function e(t,i){$.each($(t),function(e,o){if(i==="refresh"){var t=$(o).data("scrollspy.navUl");if(!t){console.warn("tried to refresh scrollspy without first initializing it");return}var n=t.find("li a");var a=[];$.each(n,function(e,t){var n=$(t).attr("href");var i=$(o).find(n).first();if(i.length){var r=i.position().top;a.push([r,t])}});a.sort(function(e,t){return e[0]-t[0]});$(o).data("scrollspy.pointers",a)}else{var t=i(o);$(o).data("scrollspy.navUl",t);$(o).on("scroll",_.throttle(this.doScrollSpy,60));$(t).find("li a").on("click",function(e){var t=$(o).find($(this).attr("href")).position().top;$(o).scrollTop(t);e.preventDefault()})}}.bind(this))},doScrollSpy:function e(){var t=$(this);var n=t.data("scrollspy.pointers");if(n===undefined){t.data("scrollspy.pointers","working");setTimeout(function(){TooltipUtils.setupScrollSpy(t,"refresh")},0);return}else if(n==="working"){return}var i=t.scrollTop();var r;$.each(n,function(e,t){if(t[0]<i+150){r=t[1]}else{return false}});t.data("scrollspy.navUl").find(".active").removeClass("active");$(r).closest("li").addClass("active")}};window["Handlebars"]=window["Handlebars"]||{};window["Handlebars"]["templates"]=window["Handlebars"]["templates"]||{};window["Handlebars"]["templates"]["image-picker"]=Handlebars.template({1:function(e,t,n,i,r,o,a){var s,l,c=t!=null?t:e.nullContext||{};return'        <div class="media-group">\n            <h3>'+e.escapeExpression((l=(l=n.groupName||(t!=null?t.groupName:t))!=null?l:n.helperMissing,typeof l==="function"?l.call(c,{name:"groupName",hash:{},data:r}):l))+"</h3>\n"+((s=n["if"].call(c,t!=null?t.cite:t,{name:"if",hash:{},fn:e.program(2,r,0,o,a),inverse:e.noop,data:r}))!=null?s:"")+((s=n.each.call(c,t!=null?t.images:t,{name:"each",hash:{},fn:e.program(4,r,0,o,a),inverse:e.noop,data:r}))!=null?s:"")+"        </div>\n"},2:function(e,t,n,i,r){var o,a=t!=null?t:e.nullContext||{},s=n.helperMissing,l="function",c=e.escapeExpression;return'                <p><a href="'+c((o=(o=n.citeLink||(t!=null?t.citeLink:t))!=null?o:s,typeof o===l?o.call(a,{name:"citeLink",hash:{},data:r}):o))+'" target="_blank">'+c((o=(o=n.cite||(t!=null?t.cite:t))!=null?o:s,typeof o===l?o.call(a,{name:"cite",hash:{},data:r}):o))+"</a></p>\n"},4:function(e,t,n,i,r,o,a){var s=e.lambda,l=e.escapeExpression;return'            <div class="image" data-path="'+l(s(a[1]!=null?a[1].groupName:a[1],t))+"/"+l(s(t,t))+'">\n                <img src="'+l(s(a[1]!=null?a[1].imagesDir:a[1],t))+'spinner.gif" data-lazy-src="'+l(s(a[1]!=null?a[1].imagesDir:a[1],t))+l(s(a[1]!=null?a[1].groupName:a[1],t))+"/"+l(s(t,t))+'.png"/>\n                <span class="name">'+l(s(t,t))+"</span>\n            </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r,o,a){var s,l,c=t!=null?t:e.nullContext||{};return'<div class="current-media"><img src="'+e.escapeExpression((l=(l=n.imagesDir||(t!=null?t.imagesDir:t))!=null?l:n.helperMissing,typeof l==="function"?l.call(c,{name:"imagesDir",hash:{},data:r}):l))+'cute/Blank.png"/></div>\n<div class="media-groups">\n    <div style="position: relative;">\n'+((s=n.each.call(c,t!=null?t.groups:t,{name:"each",hash:{},fn:e.program(1,r,0,o,a),inverse:e.noop,data:r}))!=null?s:"")+"    </div>\n</div>"},useData:true,useDepths:true});window["Handlebars"]=window["Handlebars"]||{};window["Handlebars"]["templates"]=window["Handlebars"]["templates"]||{};window["Handlebars"]["templates"]["mediapicker-preview"]=Handlebars.template({1:function(e,t,n,i,r){return"mediapicker__sound"},3:function(e,t,n,i,r){return"mediapicker__image"},5:function(e,t,n,i,r){return'\t\t<audio controls class="mediapicker-preview-file"></audio>\n\t\t<div class="thumb-error"></div>\n'},7:function(e,t,n,i,r){return'\t\t<img src="/images/spinner.gif" class="thumb-throbber" />\n\t\t<div class="thumb-shell">\n\t\t\t<img class="thumb" />\n\t\t\t<div class="thumb-error"></div>\n\t\t</div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){var o,a,s=t!=null?t:e.nullContext||{};return'<div class="tooltip mediapicker-preview '+((o=n["if"].call(s,t!=null?t.isAudio:t,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.program(3,r,0),data:r}))!=null?o:"")+'">\n\t<div class="mediapicker-preview-content">\n\n'+((o=n["if"].call(s,t!=null?t.isAudio:t,{name:"if",hash:{},fn:e.program(5,r,0),inverse:e.program(7,r,0),data:r}))!=null?o:"")+'\n\t\t<button class="kui-button kui-button-submit kui-button-primary" style="padding: 5px; width: 100%; margin: 0 auto;" >\n\t\t\t'+e.escapeExpression((a=(a=n.pickMsg||(t!=null?t.pickMsg:t))!=null?a:n.helperMissing,typeof a==="function"?a.call(s,{name:"pickMsg",hash:{},data:r}):a))+'\n\t\t</button>\n\t</div>\n\t<div class="arrow"></div>\n</div>'},useData:true});window["Handlebars"]=window["Handlebars"]||{};window["Handlebars"]["templates"]=window["Handlebars"]["templates"]||{};window["Handlebars"]["templates"]["mediapicker-modal"]=Handlebars.template({1:function(e,t,n,i,r){var o,a,s=t!=null?t:e.nullContext||{},l=n.helperMissing,c=e.escapeExpression;return"      <li "+((o=n["if"].call(s,t!=null?t.$first:t,{name:"if",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r}))!=null?o:"")+'><a href="#im-class-'+c((n.slugify||t&&t.slugify||l).call(s,t!=null?t.className:t,{name:"slugify",hash:{},data:r}))+'">'+c((a=(a=n.className||(t!=null?t.className:t))!=null?a:l,typeof a==="function"?a.call(s,{name:"className",hash:{},data:r}):a))+"</a></li>\n"},2:function(e,t,n,i,r){return'class="active"'},4:function(e,t,n,i,r,o,a){var s,l=t!=null?t:e.nullContext||{},c=n.helperMissing;return'      <div class="tab-pane '+((s=n["if"].call(l,t!=null?t.$first:t,{name:"if",hash:{},fn:e.program(5,r,0,o,a),inverse:e.noop,data:r}))!=null?s:"")+'" id="im-class-'+e.escapeExpression((n.slugify||t&&t.slugify||c).call(l,t!=null?t.className:t,{name:"slugify",hash:{},data:r}))+'">\n        <div class="mediapicker-modal-content">\n        <div style="position: relative;">\n'+((s=n.each.call(l,t!=null?t.groups:t,{name:"each",hash:{},fn:e.program(7,r,0,o,a),inverse:e.noop,data:r}))!=null?s:"")+'        </div>\n        </div>\n\n        <div class="right">\n'+((s=(n.hasMultipleItems||t&&t.hasMultipleItems||c).call(l,t!=null?t.groups:t,{name:"hasMultipleItems",hash:{},fn:e.program(16,r,0,o,a),inverse:e.noop,data:r}))!=null?s:"")+'        </div>\n\n        <div style="clear: both;"></div>\n      </div>\n'},5:function(e,t,n,i,r){return"active"},7:function(e,t,n,i,r,o,a){var s,l=t!=null?t:e.nullContext||{};return'            <div class="mediapicker-modal-group">\n'+((s=(n.hasMultipleItems||t&&t.hasMultipleItems||n.helperMissing).call(l,a[1]!=null?a[1].groups:a[1],{name:"hasMultipleItems",hash:{},fn:e.program(8,r,0,o,a),inverse:e.noop,data:r}))!=null?s:"")+((s=n["if"].call(l,t!=null?t.cite:t,{name:"if",hash:{},fn:e.program(10,r,0,o,a),inverse:e.noop,data:r}))!=null?s:"")+((s=n.each.call(l,t!=null?t.images:t,{name:"each",hash:{},fn:e.program(12,r,0,o,a),inverse:e.noop,data:r}))!=null?s:"")+((s=n.each.call(l,t!=null?t.sounds:t,{name:"each",hash:{},fn:e.program(14,r,0,o,a),inverse:e.noop,data:r}))!=null?s:"")+"            </div>\n"},8:function(e,t,n,i,r){var o,a=t!=null?t:e.nullContext||{},s=n.helperMissing,l=e.escapeExpression;return'                <h3 id="im-group-'+l((n.slugify||t&&t.slugify||s).call(a,t!=null?t.groupName:t,{name:"slugify",hash:{},data:r}))+'">'+l((o=(o=n.groupName||(t!=null?t.groupName:t))!=null?o:s,typeof o==="function"?o.call(a,{name:"groupName",hash:{},data:r}):o))+"</h3>\n"},10:function(e,t,n,i,r){var o,a=t!=null?t:e.nullContext||{},s=n.helperMissing,l="function",c=e.escapeExpression;return'                    <p><a href="'+c((o=(o=n.citeLink||(t!=null?t.citeLink:t))!=null?o:s,typeof o===l?o.call(a,{name:"citeLink",hash:{},data:r}):o))+'" target="_blank">'+c((o=(o=n.cite||(t!=null?t.cite:t))!=null?o:s,typeof o===l?o.call(a,{name:"cite",hash:{},data:r}):o))+"</a></p>\n"},12:function(e,t,n,i,r,o,a){var s=e.lambda,l=e.escapeExpression;return'                <div class="image mediapicker-modal-file"\n                    data-update-path="'+l(s(a[3]!=null?a[3].imagesDir:a[3],t))+l(s(a[1]!=null?a[1].groupName:a[1],t))+"/"+l(s(t,t))+'.png"\n                    data-preview-path="'+l(s(a[3]!=null?a[3].imagesDir:a[3],t))+l(s(a[1]!=null?a[1].groupName:a[1],t))+l(s(a[1]!=null?a[1].thumbsDir:a[1],t))+"/"+l(s(t,t))+'.png"\n                    data-path="'+l(s(a[1]!=null?a[1].groupName:a[1],t))+"/"+l(s(t,t))+'">\n                    <div class="thumb-shell"><img src="'+l(s(a[3]!=null?a[3].imagesDir:a[3],t))+'spinner.gif" data-lazy-src="'+l(s(a[3]!=null?a[3].imagesDir:a[3],t))+l(s(a[1]!=null?a[1].groupName:a[1],t))+l(s(a[1]!=null?a[1].thumbsDir:a[1],t))+"/"+l(s(t,t))+'.png"/></div>\n                    <span>'+l(s(t,t))+"</span>\n                </div>\n"},14:function(e,t,n,i,r,o,a){var s=e.lambda,l=e.escapeExpression;return'                <div class="sound mediapicker-modal-file"\n                    data-update-path=\'"'+l(s(a[1]!=null?a[1].groupName:a[1],t))+"/"+l(s(t,t))+'"\'\n                    data-preview-path="'+l(s(a[1]!=null?a[1].groupName:a[1],t))+"/"+l(s(t,t))+'"\n                    data-path="'+l(s(a[1]!=null?a[1].groupName:a[1],t))+"/"+l(s(t,t))+'">\n                    <audio data-lazy-src="'+l(s(a[3]!=null?a[3].soundsDir:a[3],t))+l(s(a[1]!=null?a[1].groupName:a[1],t))+"/"+l(s(t,t))+'.mp3" controls/>\n                    <span>'+l(s(t,t))+"</span>\n                </div>\n"},16:function(e,t,n,i,r){var o;return'        <ul class="nav nav-pills nav-stackable">\n'+((o=(n.patchedEach||t&&t.patchedEach||n.helperMissing).call(t!=null?t:e.nullContext||{},t!=null?t.groups:t,{name:"patchedEach",hash:{},fn:e.program(17,r,0),inverse:e.noop,data:r}))!=null?o:"")+"        </ul>\n"},17:function(e,t,n,i,r){var o,a,s=t!=null?t:e.nullContext||{},l=n.helperMissing,c=e.escapeExpression;return"            <li "+((o=n["if"].call(s,t!=null?t.$first:t,{name:"if",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r}))!=null?o:"")+'><a href="#im-group-'+c((n.slugify||t&&t.slugify||l).call(s,t!=null?t.groupName:t,{name:"slugify",hash:{},data:r}))+'">'+c((a=(a=n.groupName||(t!=null?t.groupName:t))!=null?a:l,typeof a==="function"?a.call(s,{name:"groupName",hash:{},data:r}):a))+"</a></li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r,o,a){var s,l,c=t!=null?t:e.nullContext||{},u=n.helperMissing,h="function",d=e.escapeExpression;return'<div class="modal mediapicker-modal">\n    <ul class="nav nav-tabs" role="tablist">\n'+((s=(n.patchedEach||t&&t.patchedEach||u).call(c,t!=null?t.classes:t,{name:"patchedEach",hash:{},fn:e.program(1,r,0,o,a),inverse:e.noop,data:r}))!=null?s:"")+'    </ul>\n\n    <div class="tab-content">\n'+((s=(n.patchedEach||t&&t.patchedEach||u).call(c,t!=null?t.classes:t,{name:"patchedEach",hash:{},fn:e.program(4,r,0,o,a),inverse:e.noop,data:r}))!=null?s:"")+'    </div>\n\n    <div class="mediapicker-modal-footer">\n      <button type="button" class="simple-button" data-dismiss="modal">'+d((l=(l=n.closeMsg||(t!=null?t.closeMsg:t))!=null?l:u,typeof l===h?l.call(c,{name:"closeMsg",hash:{},data:r}):l))+'</button>\n      <button type="button" class="simple-button green mediapicker-modal-submit" data-dismiss="modal">'+d((l=(l=n.okMsg||(t!=null?t.okMsg:t))!=null?l:u,typeof l===h?l.call(c,{name:"okMsg",hash:{},data:r}):l))+"</button>\n    </div>\n</div>"},useData:true,useDepths:true});(function(){var t=27;window.StructuredBlocksTooltips=Backbone.View.extend({events:{"mousedown .block-rgb.block-name-r":"showColorPicker","touchstart .block-rgb.block-name-r":"showColorPicker","focusin .block-rgb.block-name-r":"showColorPicker","mousedown .block-number .input":"showNumberScrubber","touchstart .block-number .input":"showNumberScrubber","focusin .block-number .input":"showNumberScrubber"},initialize:function e(){this.render();this.bind()},render:function e(){this.$colorPicker=$("<div class='tooltip picker active'>"+"<div class='picker'></div>"+"<div class='arrow'></div></div>").on("mousedown",function(){return false}).find(".picker").ColorPicker({flat:true}).end().hide();this.colorPicker=this.$colorPicker.find(".colorpicker").data("colorpicker");this.numberScrubber=new TooltipEngine.classes.numberScrubber({clickOnly:true})},bind:function e(){$(window).on("mousedown touchstart",function(e){var t=e.target;var n=$(t);var i=this.$colorPicker[0];var r=this.numberScrubber.$el[0];if(n.hasClass("input")){t=t.parentNode}else if(n.hasClass("block-name-r")){t=n.closest(".block-statement")[0]}else{if(!$.contains(i,t)){this.hideColorPicker()}if(!$.contains(r,t)){this.hideNumberScrubber()}return}if(!$.contains(t,i)){this.hideColorPicker()}if(!$.contains(t,r)){this.hideNumberScrubber()}}.bind(this));$(window).on("keydown",function(e){if(e.which===t){this.hideColorPicker();this.hideNumberScrubber()}}.bind(this))},showColorPicker:function e(t){var n=$(t.currentTarget);var i=n.closest(".block-statement");var r=n.position();var o=n.offsetParent();this.colorPicker.onChange=function(e,t,n){i.trigger("updateColor",n)};this.$colorPicker.appendTo(i).css({top:r.top+5+o[0].scrollTop,left:r.left+n.width()+5+o[0].scrollLeft}).find(".picker").ColorPickerSetColor(i.data("color")).end().show()},hideColorPicker:function e(){this.colorPicker.onChange=function(){};this.$colorPicker.appendTo("body").hide()},showNumberScrubber:function e(t){var n=$(t.target);var i=n.closest(".block-number");var r=n.position();var o=n.offsetParent();this.numberScrubber.updateText=function(e){i.trigger("updateValue",e);a()}.bind(this);this.numberScrubber.setCurValue=function(e){this.numberScrubber.updateTooltip(parseFloat(i.data("value")),0)}.bind(this);var a=function(){this.numberScrubber.$el.css({top:r.top+n.outerHeight()+o[0].scrollTop,left:r.left+Math.round(n.width()/2)+o[0].scrollLeft})}.bind(this);this.numberScrubber.updateTooltip(parseFloat(i.data("value")),0);this.numberScrubber.$el.appendTo(i).show();a()},hideNumberScrubber:function e(){this.numberScrubber.updateText=function(){};this.numberScrubber.$el.appendTo("body").hide()}})})()},YXAN:function(e,t,r){"use strict";var l=n(r("j6G6"));function n(e){return e&&e.__esModule?e:{default:e}}var o=r("e2gc");var _=r("F/us");var c={_alreadyBingod:{},_bingoOnce:function e(t){var n=r("+reu").ScratchpadUI;var i=[];_.each(t,function(e){if(c._alreadyBingod[e]){return}c._alreadyBingod[e]=true;i.push(e)});if(i.length>0){o.post("/api/internal/_mt/bigbingo/mark_conversions_with_product",{conversion_ids:i.join(","),topic_slug:n.topicSlug})}},markFacebookShare:function e(){c._bingoOnce(["scratchpad_shared_facebook"])},markTwitterShare:function e(){c._bingoOnce(["scratchpad_shared_twitter"])},markEmailShare:function e(){c._bingoOnce(["scratchpad_shared_email"])},init:function e(){var a=r("+reu").ScratchpadUI;var s=function e(t,n){var i={drawing:1968258156,moredraw:1977309939};for(var r in i){if(a.scratchpad.get("id")===i[r]){t.push(r+n)}}};o(a).bind({started:function e(){var t=a.scratchpad;var n=t.get("kaid");var i=l.default.getKaid();var r=[];s(r,"_talkthrough_viewed");if(t.isNew()){r.push("scratchpad_new_visited")}else{r.push("scratchpad_viewed");var o=t.get("category");if(o==="tutorial"){r.push("scratchpad_tutorial_viewed")}else if(o==="official"){r.push("scratchpad_official_viewed")}else if(o==="documentation"){r.push("scratchpad_documentation_viewed")}else if(o==="challenge"){r.push("scratchpad_challenge_viewed")}else if(n!==i){r.push("scratchpad_other_viewed")}}c._bingoOnce(r)},readyToPlay:function e(){},clickedSpinoff:function e(){c._bingoOnce(["scratchpad_clicked_spinoff","scratchpad_clicked_program"])},clickedSpinoffAuthor:function e(){c._bingoOnce(["scratchpad_clicked_spinoff_author","scratchpad_clicked_program_author"])}});a.liveEditor.record.bind({playStarted:function e(){var t=["scratchpad_playback_started"];s(t,"_talkthrough_started");c._bingoOnce(t)},playEnded:function e(){var t=["scratchpad_playback_completed"];s(t,"_talkthrough_completed");c._bingoOnce(t)},playPaused:function e(){c._bingoOnce(["scratchpad_playback_paused"])}});a.liveEditor.on({userChangedCode:function e(){c._bingoOnce(["scratchpad_user_edited"])}})}};e.exports=c},ZAvB:function(e,t,n){"use strict";n("pNMO");n("4Brf");n("ma9I");n("TeQF");n("zKZe");n("5DmW");n("B6y2");n("Rm1S");n("FZtP");var r=l(n("q1tI"));var i=s(n("wa3X"));var o=s(n("Pwnf"));var a=s(n("wINb"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function c(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var i=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}i.forEach(function(e){u(t,e,n[e])})}return t}function u(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function h(){h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n){if(Object.prototype.hasOwnProperty.call(n,i)){e[i]=n[i]}}}return e};return h.apply(this,arguments)}var d=n("17x9");var f=n("fhzG");var p=n("TSYQ");var g=n("mR6N"),m=g.StyleSheet,v=g.css;var b=n("2LjZ");var w=n("bLWT");var y=n("MhIR"),C=y.Scratchpad,E=y.UserScratchpad;var A=n("nVHT");var x=n("x1xB"),S=x.moduleLayout;var k=n("6wxr");var F=n("gRsD");var T=n("8M3Y");var D=n("v10r");var R=n("Myuz");var i18n=n("HEOz");var $={Arabic:{ranges:/[\u0600-\u077F\uFB50-\uFDFF\uFE70-\uFEFF]/,className:"scratchpad-editor-freemono-font-override"},Georgian:{ranges:/[\u10A0-\u10FF\u2D00-\u2D2F]/,className:"scratchpad-editor-freemono-font-override"},Hebrew:{ranges:/[\u0590-\u05FF]/,className:"scratchpad-editor-freemono-font-override"}};var L=f({displayName:"ScratchpadContent",propTypes:{appVersion:d.string,creatorProfile:d.instanceOf(w),embedded:d.bool,embeddedAndWithFrame:d.bool,hasAudio:d.bool,hideEditor:d.bool,inEditModeAndCanEdit:d.bool,isRedirectedProjectFork:d.bool,lastUpdatedTime:d.string,originScratchpad:d.instanceOf(C),sandboxProps:d.string,sandboxUrl:d.string,scratchpad:d.instanceOf(C).isRequired,showProjectEvalArea:d.bool,showSpinoffNotice:d.bool,userScratchpad:d.instanceOf(E),youtubeUrl:d.string},mixins:[b],getBackboneModels:function e(){var t=[this.props.scratchpad];if(this.props.originScratchpad){t.push(this.props.originScratchpad)}if(this.props.creatorProfile){t.push(this.props.creatorProfile)}if(this.props.userScratchpad){t.push(this.props.userScratchpad)}return t},isFullyWatched:function e(){return this.props.userScratchpad.get("fullyWatched")},maybeCustomEditorFontClass:function e(){var t=this.props,n=t.hideEditor,i=t.scratchpad;if(n){return null}if(!i.isOwner()&&!i.isChallenge()){return null}var r=i.getCode();if(!r){return null}for(var o=0,a=Object.values($);o<a.length;o++){var s=a[o],l=s.ranges,c=s.className;if(r.match(l)){return c}}return null},renderProjectEvalArea:function e(){if(!this.props.showProjectEvalArea){return null}return r.createElement("div",{className:p("scratchpad-project-eval-mount",v(P.evalMount))})},renderProjectSpinoffNotice:function e(){if(this.props.embeddedAndWithFrame){return null}var t=this.props.showSpinoffNotice?{}:{display:"none"};return r.createElement("div",{className:"spinoff-notice",style:t},r.createElement("div",{className:v(P.spinoffNoticeContentsContainer)},r.createElement("span",{className:v(P.spinoffText)},r.createElement("strong",null,i18n._("You already have a spin-off of this project!"))),r.createElement(i.default,{href:"#scratchpad-tabs",kind:"primary",skipClientNav:true,style:P.buttonOnRight},i18n._("View Your Spin-offs"))))},renderYoutubePlaybackLink:function e(){if(!this.props.youtubeUrl){return null}return r.createElement("div",{className:"scratchpad-editor-youtube-link alert alert-info",style:{display:"none"}},r.createElement("span",{className:"close","data-dismiss":"alert"},"×"),r.createElement("a",{href:this.props.youtubeUrl,target:"_blank"},i18n._("If the audio never loads, reload the page or watch on YouTube.")))},renderAudioPlayback:function e(){if(!this.props.hasAudio){return null}return r.createElement("div",null,r.createElement("div",{className:"scratchpad-editor-bigplay-loading"},r.createElement(A,null),r.createElement("span",{className:"hide-text"},i18n._("Loading..."))),r.createElement("div",{id:"sm2-container"},i18n._("Enable Flash to load audio:"),r.createElement("br",null)),this.renderYoutubePlaybackLink(),r.createElement("button",{className:"scratchpad-editor-bigplay-button",style:{display:"none"}},r.createElement(k,{icon:B.play}),r.createElement("span",{className:"hide-text"},i18n._("Play"))))},renderPlaybackBar:function e(){if(!this.props.hasAudio){return null}return r.createElement("div",{className:v(P.playbar)},r.createElement("div",{className:v(P.playbackBar)},r.createElement(T,this.props)),r.createElement(D,this.props),this.isFullyWatched()&&r.createElement(R,h({},this.props,{showAbove:true})))},renderSaveProgress:function e(){if(this.props.embeddedAndWithFrame){return null}return r.createElement("div",{id:"save-progress-text"})},renderEditor:function e(){var t=this.props.scratchpad.get("userAuthoredContentType");var n=t==="document";return r.createElement("div",{className:p("scratchpad-editor-wrap","overlay-container",v(P.editorWrap,this.props.hideEditor&&P.editorHidden))},r.createElement("div",{className:p("scratchpad-editor-tabs",v(P.editorContainer,P.noBorder))},r.createElement("div",{id:"scratchpad-code-editor-tab",className:p("scratchpad-editor-tab",this.maybeCustomEditorFontClass(),v(P.editorTab,n&&P.editorTabDocument))},r.createElement("div",{className:p("scratchpad-editor","scratchpad-ace-editor",v(P.inputFrame,P.noBorder))}),r.createElement("div",{className:"overlay disable-overlay",style:{display:"none"}}),this.renderAudioPlayback())))},renderDragHandle:function e(){if(!this.props.scratchpad.isResizableType()){return null}return r.createElement("div",{className:p("scratchpad-drag-handle",v(P.dragHandle,this.props.hideEditor&&P.editorHidden))})},renderOutputFrame:function e(){var t=this.props.sandboxUrl;var n=this.props.scratchpad.isResizableType();var i=this.props.hideEditor;if(!t){return null}{}return r.createElement("iframe",{id:"output-frame",className:v(P.noBorder,P.outputFrame,n&&i&&P.outputFrameNoEditorResizable),sandbox:this.props.sandboxProps,src:(0,a.default)("".concat(t,"&deferjsk=0&v=").concat(this.props.appVersion,"&host=").concat(encodeURIComponent(document.location.host))),"data-src":t,style:{width:"100%"}})},renderCanvasToolbar:function e(){if(this.props.hideEditor&&this.props.hasAudio){return this.renderAudioPlayback()}return null},renderDrawCanvas:function e(){var t=this.props.scratchpad.get("width");var n=this.props.scratchpad.get("height");return r.createElement("canvas",{className:"scratchpad-draw-canvas",style:{display:"none"},width:t,height:n})},renderCanvas:function e(){if(!this.props.sandboxUrl){return this.renderDrawCanvas()}var t=this.props.scratchpad.isResizableType();var n=this.props.hideEditor;return r.createElement("div",{className:p("scratchpad-canvas-wrap",v(this.props.hideEditor&&P.canvasWrapNoEditor,P.canvasWrap))},r.createElement("div",{id:"output",className:v(P.output,t&&n&&P.outputNoEditorResizable)},this.renderOutputFrame(),this.renderDrawCanvas(),r.createElement("div",{className:"overlay disable-overlay",style:{display:"none"}}),r.createElement("div",{className:"scratchpad-canvas-loading"},r.createElement(A,null),r.createElement("span",{className:"hide-text"},i18n._("Loading...")))),this.renderCanvasToolbar())},renderDescription:function e(){if(this.props.scratchpad.get("contentKind")==="Talkthrough"||this.props.scratchpad.get("contentKind")==="Challenge"){return null}var t=this.props.scratchpad.get("translatedDescription");if(!t){var n=this.props.originScratchpad;if(n&&n.isProject()){t=n.get("translatedDescription")}}if(!t){return null}return r.createElement("div",{className:v(P.description),dangerouslySetInnerHTML:{__html:t}})},render:function e(){var t=this.props.scratchpad.isResizableType();var n=this.props.hideEditor;return r.createElement("div",{className:v(P.wrap)},this.renderDescription(),this.renderProjectEvalArea(),this.renderProjectSpinoffNotice(),r.createElement("div",{className:p("scratchpad-wrap",this.props.sandboxUrl?"":"no-output",v(P.wrapScratchpad,n&&t&&P.wrapScratchpadNoEditorResizable))},r.createElement("div",{className:v(P.wrapScratchpadOuter)},r.createElement("div",{className:v(P.wrapScratchpadInner,!this.props.hideEditor&&P.wrapScratchpadInnerBorder)},this.renderEditor(),this.renderDragHandle(),this.renderCanvas()),this.renderPlaybackBar(),!this.props.hasAudio&&!this.props.hideEditor&&r.createElement(F,this.props))),this.renderSaveProgress())}});var B={play:"M1.6,9.9C1.5,10,1.3,10,1.2,10C1.1,10,1,10,0.9,9.9C0.7,9.8,0.6,9.6,\n        0.6,9.4V0.6c0-0.2,0.2-0.4,0.4-0.5C1.1,0,1.4,0,1.6,0.1l7.6,4.5c0.2,0.1,\n        0.3,0.3,0.3,0.5c0,0.2-0.1,0.4-0.3,0.5L1.6,9.9z"};var O="1px solid ".concat(o.default.offBlack16);var M=400;var P=m.create({canvasWrap:{flexShrink:0},description:{marginBottom:15},dragHandle:{background:o.default.offBlack16,cursor:"ew-resize",display:"table-cell",flexShrink:0,width:2},editorWrap:{borderRight:O,display:"flex",flexDirection:"column",marginRight:"auto",minHeight:M,flexGrow:1,flexShrink:1},editorHidden:{display:"none"},editorContainer:{display:"flex",flexDirection:"column",flexGrow:1,flexShrink:1,position:"relative"},editorTab:{position:"absolute",padding:0,height:"100%",width:"100%"},editorTabDocument:{position:"static"},evalMount:{marginTop:-10},noBorder:{border:"none"},inputFrame:{height:"100%",position:"relative"},canvasWrapNoEditor:{margin:"0 auto"},output:{border:"none",margin:"auto",minHeight:M,minWidth:M},outputNoEditorResizable:{minWidth:"100%"},outputFrame:{borderBottom:"1px transparent solid",borderTop:"1px transparent solid",marginTop:-1,minWidth:M},outputFrameNoEditorResizable:{minWidth:"100%",left:0},playbar:{border:O,boxSizing:"border-box",display:"flex",height:64,paddingLeft:16,paddingRight:16,paddingTop:12},playbackBar:{flex:"1 0 0"},wrap:c({},S.defaultAlignment,{display:"flex",flexDirection:"column"}),wrapScratchpad:{position:"relative",zIndex:0,flexGrow:1,display:"flex",flexDirection:"row",minWidth:M},wrapScratchpadNoEditorResizable:{minWidth:"100%"},wrapScratchpadOuter:{flexGrow:1,overflow:"auto"},wrapScratchpadInner:{display:"flex"},wrapScratchpadInnerBorder:{border:O,borderBottom:"none"},spinoffNoticeContentsContainer:{display:"flex",flexDirection:"row",alignItems:"center"},spinoffText:{flexGrow:1}});e.exports=L},dzVj:function(e,t,n){"use strict";n("UxlC");Object.defineProperty(t,"__esModule",{value:true});t.default=r;var i=n("DGfY");function r(e,n){i.color(e,"javascript",function(e){var t="<pre class='rainbowjs'>"+o(e)+"</pre>";n(t)})}function o(e,t){if(!t){o.styleMap={};o.counter=0}e=e.replace(/(^|[^A-Za-z0-9])_(?![A-Za-z0-9])/g,"$1<span class='structuredjs_blank'></span>");var n=/(?:(^|[^\w])\$(\w+))|(?:\$<span class="function call">(\w+)<\/span>)/g;return e.replace(n,function(e,t,n,i){t=t||"";n=n||i;var r=o;if(!(n in r.styleMap)){r.styleMap[n]=r.counter<r.styles.length?r.styles[r.counter]:"extra";r.counter+=1}return t+"<span class='structuredjs_var "+r.styleMap[n]+"'>"+"</span>"})}o.styles=["one","two","three","four","five","six","seven"];o.styleMap={};o.counter=0},gRsD:function(e,t,n){"use strict";n("2B1R");n("5DmW");n("07d7");n("5s+n");var a=f(n("q1tI"));var i=d(n("wINb"));var r=n("Vxy9");var s=d(n("wa3X"));var o=d(n("yts4"));var l=n("JasB");var c=d(n("C7u4"));var u=n("JimW");var h=n("DzHr");function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function p(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var g=n("17x9");var m=n("fhzG");var v=n("mR6N"),b=v.StyleSheet,w=v.css;var y=n("2LjZ");var C=n("thi5");var E=n("MhIR"),A=E.Scratchpad,x=E.UserScratchpad;var S=n("8crR"),k=S.ScratchpadChallenge;var F=n("v10r");var T=n("Myuz");var D=n("ExyH");var R=n("4X7z");var i18n=n("HEOz");var $=R.CritterAppearance,L=R.CritterButtonMessages,B=R.getCritterAppearanceReason;var O=m({displayName:"ScratchpadToolbar",propTypes:{challenge:g.instanceOf(k),embeddedAndWithFrame:g.bool,hideSave:g.bool,inEditModeAndCanEdit:g.bool,isChallenge:g.bool,isNew:g.bool,isProject:g.bool,isRedirectedProjectFork:g.bool,onStartOver:g.func.isRequired,onRequestHelp:g.func.isRequired,onUndo:g.func.isRequired,restartLabel:g.string.isRequired,scratchpad:g.instanceOf(A).isRequired,showProjectHelpButton:g.bool,showStartOverButton:g.bool,topic:g.shape({relativeUrl:g.string.isRequired}),userScratchpad:g.instanceOf(x)},mixins:[y],getInitialState:function e(){return{showStartOverModal:false}},getBackboneModels:function e(){var t=[this.props.scratchpad];if(this.props.userScratchpad){t.push(this.props.userScratchpad)}if(this.props.challenge){t.push(this.props.challenge)}return t},renderStartOverButton:function e(){var i=this;if(this.props.embeddedAndWithFrame||!this.props.showStartOverButton){return null}var t=function e(t){var n=t.closeModal;return a.createElement(h.OneColumnModal,{onClickCloseButton:n,content:a.createElement(r.Body,{tag:"p"},i18n._("Are you sure you want to discard your changes? This can't be undone.")),footer:a.createElement(u.View,{style:j.modalFooter},a.createElement(s.default,{kind:"tertiary",onClick:n},i18n._("Cancel")),a.createElement(l.Strut,{size:16}),a.createElement(s.default,{color:"destructive",onClick:function e(){n();i.props.onStartOver()}},i18n._("Start over")))})};return a.createElement(h.ModalLauncher,{modal:t},function(e){var t=e.openModal;return a.createElement(s.default,{kind:"secondary",style:j.buttonOnLeft,onClick:t},i18n._("Start over"))})},renderUndoButton:function e(){return this.props.isChallenge&&a.createElement(s.default,{kind:"secondary",onClick:this.props.onUndo,style:j.buttonOnLeft},i18n._("Undo"))},renderShowOnKAButton:function e(){if(this.props.isNew||!this.props.embeddedAndWithFrame||this.props.isChallenge){return null}return a.createElement(s.default,{kind:"secondary",href:this.props.scratchpad.get("url"),target:"_blank",skipClientNav:true,style:j.buttonOnRight},i18n._("View in new tab"))},renderProjectHelpButton:function e(){var n=this;if(this.props.embeddedAndWithFrame||!this.props.showProjectHelpButton){return null}var i=this.props.isProject&&!this.props.isRedirectedProjectFork;var t=function e(t){var n=t.closeModal;return a.createElement(h.OneColumnModal,{onClickCloseButton:n,content:a.createElement(r.Body,{tag:"p"},i18n._("If you'd like to request help on this project, please make a spin-off of the project first.")),footer:a.createElement(u.View,{style:j.modalFooter},a.createElement(s.default,{onClick:function e(){n()}},i18n._("Okay")))})};return a.createElement(h.ModalLauncher,{modal:t},function(e){var t=e.openModal;return a.createElement(s.default,{kind:"secondary",style:j.buttonOnLeft,onClick:function e(){if(i){t()}else{n.props.onRequestHelp()}}},i18n._("Request help"))})},renderProgress:function e(){if(!this.props.challenge){return null}return a.createElement(I,this.props)},renderEvalLink:function e(){if(this.props.userScratchpad.get("isComplete")&&(this.props.isProject||this.props.isRedirectedProjectFork)){var t="".concat(this.props.topic.relativeUrl)+"/projectfeedback/next-eval";return a.createElement(s.default,{href:t,kind:"secondary",skipClientNav:true,style:j.buttonOnRight},i18n._("Review a project"))}return null},renderSaveButtons:function e(){return a.createElement(F,this.props)},render:function e(){var t=a.createElement(a.Fragment,null,this.renderUndoButton(),this.renderStartOverButton(),this.renderProjectHelpButton(),a.createElement(P,null));var n=a.createElement(a.Fragment,null,a.createElement(M,this.props),this.renderShowOnKAButton(),this.renderProgress(),this.renderSaveButtons(),this.renderEvalLink());return a.createElement(c.default,{leftContent:t,rightContent:n})}});var M=m({displayName:"RestartButton",propTypes:{liveEditorPromise:g.instanceOf(Promise).isRequired,registerCodeChange:g.func.isRequired,restartLabel:g.string.isRequired,shouldHideRestart:g.func.isRequired},getInitialState:function e(){return{animating:false,hidden:true}},componentDidMount:function e(){this._isMounted=true;this.props.registerCodeChange(this.handleUpdate);this.props.liveEditorPromise.then(this.handleUpdate)},componentWillUnmount:function e(){this._isMounted=false},_isMounted:false,handleUpdate:function e(){if(!this._isMounted){return}this.setState({hidden:this.props.shouldHideRestart()})},animate:function e(){var t=this;this.setState({animating:true});window.setTimeout(function(){return t.setState({animating:false})},500)},render:function e(){if(this.state.hidden){return null}return a.createElement(s.default,{onClick:this.animate,kind:"secondary",id:"restart-code",style:[j.buttonOnRight,j.restartButton]},a.createElement("span",{className:w(j.restartLabel)},a.createElement(o.default,{icon:N,size:"medium",style:[j.restartIcon,this.state.animating&&j.restartFlip]}),a.createElement("span",null,this.props.restartLabel)))}});var P=function e(t){return a.createElement("div",{className:w(j.errorBuddyContainer,j.buttonOnLeft)},a.createElement("div",{className:"error-buddy-resting"},a.createElement("div",{className:"error-buddy-happy",style:{display:"none",height:15}},a.createElement("img",{alt:"",src:(0,i.default)("/images/ohnoes-happy.png")})),a.createElement("a",{className:"error-buddy-thinking",style:{display:"none"},href:"javascript:void(0);"},a.createElement("img",{alt:"",src:(0,i.default)("/images/ohnoes-hmm.png")}),a.createElement("span",{style:{marginLeft:8}},i18n._("Hmm...")))))};var I=m({displayName:"ChallengeTools",propTypes:{challenge:g.instanceOf(k).isRequired},mixins:[C({getModel:function e(t){return t.challenge},getState:function e(t){return{appearanceReason:!t.hasSyntaxErrors()&&B(t),hasSyntaxErrors:t.hasSyntaxErrors(),currentStep:t.get("step"),stepStatus:t.get("tests")&&t.get("tests").map(function(e){return e.state==="pass"})}}})],shouldComponentUpdate:function e(t,n){return!n.hasSyntaxErrors},renderProgress:function e(){var n=this;var t=this.state,i=t.currentStep,r=t.stepStatus;return r&&a.createElement(D,{currentStep:i,onClickStep:function e(t){return n.props.challenge.moveToStep(t)},stepStatus:r})},renderCritter:function e(){var t;var n=this.props.challenge;if(!this.state.appearanceReason){var i=$.GO_TO_NEXT_STEP;var r=L[i];return a.createElement(s.default,{disabled:true,style:j.buttonOnRight},r)}var o=(t={},p(t,$.STEPS_COMPLETE,function(){return n.completeChallenge()}),p(t,$.GO_TO_NEXT_STEP,function(){return n.moveToStep(n.firstFailure())}),p(t,$.FIX_PREVIOUS_STEP,function(){return n.moveToStep(n.firstFailure())}),t);if(this.state.appearanceReason===$.CHALLENGE_COMPLETE){return a.createElement(T,{challenge:n,userScratchpad:n.get("userScratchpad"),showAbove:false})}return a.createElement(R,{reason:this.state.appearanceReason,onAcknowledge:o[this.state.appearanceReason]})},render:function e(){return a.createElement("div",{className:w(H.challengeToolbar)},a.createElement("div",{className:w(H.challengeProgressWrap)},this.renderProgress()),this.renderCritter())}});var N={medium:"M18.071 18.644c-3.532 3.232-9.025 3.13-12.452-.297a9.014 9.014 0 0 1-2.636-6.866 1 1 0 0 1 1.997.105 7.014 7.014 0 0 0 2.053 5.346c2.642 2.642 6.856 2.747 9.606.31h-1.81a1 1 0 1 1 0-2h4.242a1 1 0 0 1 1 1v4.243a1 1 0 0 1-2 0v-1.84zM7.361 6.757h1.81a1 1 0 0 1 0 2H4.93a1 1 0 0 1-1-1V3.515a1 1 0 1 1 2 0v1.84c3.532-3.231 9.025-3.13 12.452.298a9.014 9.014 0 0 1 2.636 6.866 1 1 0 1 1-1.997-.105 7.014 7.014 0 0 0-2.053-5.346c-2.642-2.642-6.856-2.747-9.606-.31z"};var H=b.create({challengeProgressWrap:{marginLeft:16},challengeToolbar:{display:"flex",marginLeft:5}});var j=b.create({buttonOnLeft:{marginRight:16},buttonOnRight:{marginLeft:16},errorBuddyContainer:{display:"inline-flex",height:32,position:"relative",width:50},modalFooter:{flexDirection:"row"},restartButton:{paddingLeft:12},restartLabel:{alignItems:"center",display:"flex"},restartIcon:{display:"block",marginRight:6},restartFlip:{animationName:{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(-360deg)"}},animationDuration:"0.5s",animationIterationCount:"infinite"}});e.exports=O},"hz+2":function(e,t){window.TextareaEditor=Backbone.View.extend({initialize:function e(t){this.defaultCode=t.code;this.autoFocus=t.autoFocus;this.config=t.config;this.type=t.type;this.editor=document.createElement("textarea");this.editor.className="textarea-editor";this.$el.append(this.editor);$(this.editor).on("input",function(){this.trigger("change")}.bind(this));this.tooltipEngine={};this.config.editor=this;this.reset()},remove:function e(){},reset:function e(t,n){t=t||this.defaultCode;this.config.runCurVersion(this.type+"_editor",this);this.text(t);this.setCursor({start:0,end:0},n)},setErrorHighlight:function e(t){},toggleGutter:function e(t){},getAllFolds:function e(){},setFolds:function e(t){},blockPaste:function e(t){},focus:function e(){if(this.autoFocus!==false){this.editor.focus()}},getCursor:function e(){return{start:this.editor.selectionStart,end:this.editor.selectionEnd}},getSelectionIndices:function e(){return this.getCursor()},setCursor:function e(t,n){if(this.editor.setSelectionRange){this.editor.focus();this.editor.setSelectionRange(t.start,t.end)}else if(this.editor.createTextRange){var i=this.editor.createTextRange();i.collapse(true);i.moveEnd("character",t.end);i.moveStart("character",t.start);i.select()}if(n!==false&&this.autoFocus!==false){this.editor.focus()}},setSelection:function e(t){this.setCursor(t)},setReadOnly:function e(t){this.editor.readOnly=t},text:function e(t){if(t!=null){this.editor.value=t}else{return this.editor.value}return this},unfold:function e(){},insertNewlineIfCursorAtEnd:function e(){},undo:function e(){}});LiveEditor.registerEditor("textarea_document",TextareaEditor)},o1w5:function(e,t,n){"use strict";n("pNMO");n("4Brf");n("ma9I");n("TeQF");n("4mDm");n("zKZe");n("5DmW");n("07d7");n("5s+n");n("FZtP");n("3bBZ");var s=i(n("q1tI"));function i(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function o(e,t){return l(e)||a(e,t)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){var n=[];var i=true;var r=false;var o=undefined;try{for(var a=e[Symbol.iterator](),s;!(i=(s=a.next()).done);i=true){n.push(s.value);if(t&&n.length===t)break}}catch(e){r=true;o=e}finally{try{if(!i&&a["return"]!=null)a["return"]()}finally{if(r)throw o}}return n}function l(e){if(Array.isArray(e))return e}function c(){c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n){if(Object.prototype.hasOwnProperty.call(n,i)){e[i]=n[i]}}}return e};return c.apply(this,arguments)}function u(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var i=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}i.forEach(function(e){h(t,e,n[e])})}return t}function h(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var d=n("17x9");var f=n("fhzG");var p=n("mR6N"),g=p.StyleSheet,m=p.css;var v=n("2LjZ");var b=n("bLWT");var w=n("MhIR"),y=w.Scratchpad;var C=n("CxBN");var E=n("V2R+");var A=n("KF/j");var x=n("8jLB");var i18n=n("HEOz");var S=f({displayName:"ScratchpadButtons",propTypes:{canEdit:d.bool,creatorProfile:d.instanceOf(b),discussionMeta:d.any,embedded:d.bool,inEditModeAndCanEdit:d.bool,isChallenge:d.bool,isComputerProgramming:d.bool,isDocumentation:d.bool,isModerator:d.bool,isNew:d.bool,isOfficial:d.bool,isOwner:d.bool,hideSpinOffs:d.bool,isRedirectedProjectFork:d.bool,newTitle:d.string,onToggleProp:d.func.isRequired,private:d.bool,scratchpad:d.instanceOf(y).isRequired,scratchpadKey:d.string,showShareButton:d.bool,topic:d.shape({domainSlug:d.string.isRequired}).isRequired,tutorialUrl:d.string},mixins:[v],getDefaultProps:function e(){return{showShareButton:true}},getInitialState:function e(){return{DiscussionMeta:null,DiscussionItemModel:null,showShareModal:false}},getBackboneModels:function e(){return[this.props.scratchpad]},isOfficial:function e(){return this.props.embedded||this.props.isOfficial||this.props.isDocumentation},renderDeleteButton:function e(){if(this.props.hideSpinOffs||this.props.isNew||!this.props.isOwner||this.props.isRedirectedProjectFork){return null}return s.createElement(A,this.props)},renderSettingsButton:function e(){if(this.props.isNew||!this.props.inEditModeAndCanEdit){return null}return s.createElement(x,this.props)},renderEditButton:function e(){var t=this.props,n=t.isNew,i=t.embedded,r=t.canEdit,o=t.scratchpad,a=t.topic;if(n||!i||!r){return null}if(o.get("contentKind")==="Talkthrough"||o.get("category")==="tutorial"){return null}return s.createElement(C,{typeStyle:"primary",domainSlug:a.domainSlug,href:o.get("url"),label:i18n._("Edit"),target:"_blank"})},renderViewInTutorialButton:function e(){if(this.props.isNew||this.props.embedded||!this.props.tutorialUrl||!this.props.canEdit){return null}return s.createElement(C,{typeStyle:"primary",domainSlug:this.props.topic.domainSlug,href:this.props.tutorialUrl,label:i18n._("View in Tutorial"),target:"_blank"})},renderNewProjectButton:function e(){var t=this.props.scratchpad.get("newUrlPath");if(this.props.isNew||this.props.embedded||!t){return null}return s.createElement(C,{typeStyle:"primary",domainSlug:this.props.topic.domainSlug,href:t,label:this.props.newTitle,target:"_blank"})},renderChildAccountNotice:function e(){if(this.props.isNew||!this.props.private||!this.props.creatorProfile){return null}return s.createElement("span",{id:"child-account-notice"},i18n._("Child account program"))},renderVotingControls:function e(){var n=this;if(this.props.isNew||this.props.private||this.isOfficial()||!this.props.scratchpadKey){return null}this.loadDiscussionMeta();if(!this.state.DiscussionMeta||!this.state.DiscussionItemModel){return null}var t=new this.state.DiscussionItemModel(u({badges:[],key:this.props.scratchpadKey,model:this.props.scratchpad,domainSlug:this.props.topic.domainSlug},this.props.discussionMeta,{type:"scratchpad",renderButton:function e(t){return s.createElement(C,c({typeStyle:"primary",domainSlug:n.props.topic.domainSlug},t))}}));return s.createElement("span",{className:"voting-wrap"},s.createElement(this.state.DiscussionMeta,{model:t}))},loadDiscussionMeta:function e(){var r=this;if(this.state.DiscussionMeta){return}Promise.all([Promise.all([n.e("react-components"),n.e("daf7abd750e69442a48333b196fd913e"),n.e("fdfa1aa0e118170244e2663bb81af06f"),n.e("ed4f9949d899ee1dfbf39ca698bea052"),n.e("40639fd1f990528efc7893ed6e5f391a")]).then(n.t.bind(null,"gdZe",7)).then(function(e){return e.default}),n.e("fdfa1aa0e118170244e2663bb81af06f").then(n.t.bind(null,"qgfM",7)).then(function(e){return e.default})]).then(function(e){var t=o(e,2),n=t[0].DiscussionMeta,i=t[1].DiscussionItemModel;r.setState({DiscussionMeta:n,DiscussionItemModel:i})})},renderShareButton:function e(){var t=this;if(this.props.isNew||this.props.private||!this.props.showShareButton){return null}var n=this.isOfficial()?"submit":"primary";return s.createElement(C,{typeStyle:n,domainSlug:this.props.topic.domainSlug,label:i18n._("Share"),onClick:function e(){return t.setState({showShareModal:true})}})},renderShareModal:function e(){var t=this;if(!this.state.showShareModal){return null}return s.createElement(E,c({},this.props,{onComplete:function e(){return t.setState({showShareModal:false})}}))},renderModeratorsArea:function e(){var t=this;if(this.props.isNew||this.props.scratchpad.get("isPublished")||this.props.private||!this.props.isModerator||this.props.scratchpad.get("contentKind")!=="Scratchpad"){return null}var n=this.props.scratchpad.get("deleted")?i18n._("Undo hide everywhere"):i18n._("Hide everywhere");var i=this.props.scratchpad.get("hideFromHotlist")?i18n._("Undo hide from hotlist"):i18n._("Hide from hotlist");return s.createElement("div",null,s.createElement(C,{typeStyle:"secondary",domainSlug:this.props.topic.domainSlug,label:n,onClick:function e(){return t.props.onToggleProp("deleted")}}),s.createElement(C,{typeStyle:"secondary",domainSlug:this.props.topic.domainSlug,label:i,onClick:function e(){return t.props.onToggleProp("hideFromHotlist")}}))},render:function e(){return s.createElement("div",{className:m(k.buttons)},this.renderDeleteButton()," ",this.renderSettingsButton()," ",this.renderChildAccountNotice()," ",this.renderVotingControls()," ",this.renderShareButton(),this.renderShareModal()," ",this.renderNewProjectButton()," ",this.renderModeratorsArea())}});var k=g.create({buttons:{marginBottom:22}});e.exports=S},pnSh:function(e,t,n){"use strict";n("pNMO");n("4Brf");n("ma9I");n("TeQF");n("5DmW");n("07d7");n("5s+n");n("FZtP");var a=r(n("q1tI"));var s=i(n("SGU3"));var l=n("JimW");var c=i(n("17AU"));function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function o(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var i=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}i.forEach(function(e){u(t,e,n[e])})}return t}function u(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var h=n("17x9");var d=n("fhzG");var f=n("mR6N"),p=f.StyleSheet,g=f.css;var m=n("2LjZ");var v=n("x1xB");var b=n("bLWT");var w=n("MhIR"),y=w.Scratchpad;var C=n("o1w5");var i18n=n("HEOz");var E=d({displayName:"ScratchpadAbout",propTypes:{creatorProfile:h.instanceOf(b),embedded:h.bool,lastUpdatedTime:h.string,originScratchpad:h.instanceOf(y),scratchpad:h.instanceOf(y).isRequired},mixins:[m],getInitialState:function e(){return{TimeAgo:null}},componentDidMount:function e(){var t=this;this._isMounted=true;n.e("react-components").then(n.t.bind(null,"vRNn",7)).then(function(e){return e.default}).then(function(e){if(!t._isMounted){return}t.setState({TimeAgo:e})})},componentWillUnmount:function e(){this._isMounted=false},_isMounted:false,getBackboneModels:function e(){var t=[this.props.scratchpad];if(this.props.originScratchpad){t.push(this.props.originScratchpad)}if(this.props.creatorProfile){t.push(this.props.creatorProfile)}return t},renderDescription:function e(){if(this.props.scratchpad.get("contentKind")!=="Talkthrough"&&this.props.scratchpad.get("contentKind")!=="Challenge"){return null}var t=this.props.scratchpad.get("translatedDescription");if(!t){return null}return a.createElement("div",{className:g(A.description),dangerouslySetInnerHTML:{__html:t}})},renderButtons:function e(){return a.createElement(C,this.props)},renderSpinOffParentDetails:function e(){var t=this.props.originScratchpad;if(!t||this.props.embedded){return null}var n=a.createElement(s.default,{href:t.get("url"),skipClientNav:true},t.get("translatedTitle"));if(t.get("deleted")){n=t.get("translatedTitle")}return a.createElement("div",null,i18n.$_("Based on: %(title)s",{title:n}))},getNickname:function e(){var t=this.props,i=t.creatorProfile,n=t.scratchpad;var r=n.get("kaid");var o=i.get("nickname");if(!o){return a.createElement(l.View,{"data-user-kaid":r},i18n._("New visitor"))}return a.createElement(c.default,{mockOnFirstRender:true},function(e){var t=e.getUserProfile();var n=t&&t.attributes&&t.attributes.isModerator;return i.get("isPublic")||n?a.createElement(s.default,{href:i.get("profileRoot"),"data-user-kaid":r,skipClientNav:true},o):a.createElement(l.View,{"data-user-kaid":r,style:A.nicknameNoLink},o)})},renderCreatorDetails:function e(){if(!this.props.creatorProfile){return null}var t=this.getNickname();var n=this.state.TimeAgo;if(n){var i=a.createElement(n,{time:this.props.lastUpdatedTime});var r=a.createElement("span",{className:g(A.lastUpdated)},"(",i18n.$_("Updated %(time)s",{time:i}),")");return a.createElement("div",null,i18n.$_("Created by: %(nickname)s",{nickname:t}),!this.props.embedded&&this.props.lastUpdatedTime&&r)}else{return a.createElement("div",null,i18n.$_("Created by: %(nickname)s",{nickname:t}))}},render:function e(){return a.createElement("div",{className:g(A.about)},this.renderDescription(),this.renderButtons(),this.renderSpinOffParentDetails(),this.renderCreatorDetails())}});var A=p.create({about:o({},v.typography.bodySmall,{color:v.colors.gray17,textAlign:"center"}),description:{marginBottom:22,textAlign:"left"},lastUpdated:{marginLeft:4},nicknameNoLink:{display:"inline-block"}});e.exports=E},pthG:function(e,t,n){"use strict";n("ma9I");n("2B1R");n("zKZe");n("NBAS");var a=l(n("q1tI"));var i=s(n("wa3X"));var r,o;function s(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function c(){c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n){if(Object.prototype.hasOwnProperty.call(n,i)){e[i]=n[i]}}}return e};return c.apply(this,arguments)}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function d(e,t,n){if(t)h(e.prototype,t);if(n)h(e,n);return e}function f(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return g(e)}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function g(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)v(e,t)}function v(e,t){v=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return v(e,t)}function b(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var w=n("17x9");var y=n("fhzG");var C=n("mR6N"),E=C.StyleSheet,A=C.css;var x=n("whzC"),S=x.safeLinkTo;var k=n("6wxr");var F=n("+Hxn");var T=n("QCGh");var D=n("uKIX");var i18n=n("HEOz");var R={TOO_HARD:"inability",DONT_UNDERSTAND_HINT:"hintcode",UNEXPECTED_SYNTAX_ERROR:"syntax",GRADER_FALSE_NEGATIVE:"grader",INSTRUCTIONS_CONFUSING:"instructions",EDITOR_BROKEN:"editor",NOT_TRANSLATED:"translated",OTHER_FEEDBACK:"other"};var $={expectPageIsTranslated:w.bool,handleResolve:w.func,inline:w.bool,onClose:w.func.isRequired,sendFeedback:w.func.isRequired,stepCodeWarning:w.bool,stepGoBackNotice:w.bool};var L=function(e){m(o,e);function o(){var e;var r;u(this,o);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++){n[i]=arguments[i]}r=f(this,(e=p(o)).call.apply(e,[this].concat(n)));b(g(r),"state",{feedbackType:null,error:false});b(g(r),"handleChooseFeedbackType",function(e){r.setState({feedbackType:e})});b(g(r),"handleResolve",function(t,n,i){r.setState({error:false});var e=function e(){return r.props.sendFeedback(r.state.feedbackType,t,n,i)};if(i){r.props.onClose();return e()}else{return e().then(function(){var e;(e=r.props).onClose.apply(e,arguments)}).catch(function(e){r.setState({error:true});throw e})}});b(g(r),"restart",function(){r.setState({feedbackType:null,error:false})});b(g(r),"renderErrorMessage",function(){if(r.state.error){return a.createElement("em",null,i18n._("There was a problem submitting your feedback. Try again?"))}});b(g(r),"renderFeedbackTypeMenu",function(){var e=Object.keys(R).map(function(e,t){var n=R[e];return a.createElement(O,{key:t,onClick:function e(){return r.handleChooseFeedbackType(n)}},B[n])});return a.createElement("form",null,e)});b(g(r),"renderTitle",function(){return r.state.feedbackType?B[r.state.feedbackType]:i18n._("Which best describes your problem?")});b(g(r),"renderFooter",function(){return r.state.feedbackType&&a.createElement("span",null,a.createElement(T,{className:A(W.backLink),onClick:function e(){return r.restart()},href:"javascript:void(0)"},"< ",i18n._("Report a different problem")))});b(g(r),"renderOptionsForFeedbackType",function(){var e=ne[r.state.feedbackType];return a.createElement(e,c({handleResolve:r.handleResolve},r.props))});return r}d(o,[{key:"render",value:function e(){return a.createElement(D,{showCloseButton:true,shouldHandleClose:false,onClose:this.props.onClose,inline:this.props.inline,title:this.renderTitle(),footer:this.renderFooter()},this.state.feedbackType===null?this.renderFeedbackTypeMenu():this.renderOptionsForFeedbackType(),this.renderErrorMessage())}}]);return o}(a.Component);b(L,"propTypes",$);var B=(r={},b(r,R.TOO_HARD,i18n._("This step is too hard, I don't feel prepared enough to do it.")),b(r,R.DONT_UNDERSTAND_HINT,i18n._("I don't understand what the hint code with the boxes and blanks mean.")),b(r,R.UNEXPECTED_SYNTAX_ERROR,i18n._("There's an \"Oh Noes!\" message, and I can't get it to go away.")),b(r,R.GRADER_FALSE_NEGATIVE,i18n._("I did this step correctly, but it won't let me continue.")),b(r,R.INSTRUCTIONS_CONFUSING,i18n._("This step's instructions are confusing. I'm not sure what it wants me to do.")),b(r,R.EDITOR_BROKEN,i18n._("The editor in my browser is broken.")),b(r,R.NOT_TRANSLATED,i18n._("I don't speak English — and the instructions aren't translated.")),b(r,R.OTHER_FEEDBACK,i18n._("I have other feedback.")),r);var O=function e(t){return a.createElement("div",null,a.createElement("label",{className:A(W.radio)},a.createElement("input",{type:"radio",name:t.name,value:t.value,checked:!!t.checked,onClick:t.onClick})," ",t.children))};O.propTypes={checked:w.bool,children:w.node,name:w.string,onClick:w.func.isRequired,value:w.string};var M=function e(t){return a.createElement("h4",{className:A(W.question)},t.children)};M.propTypes={children:w.node.isRequired};var P=function(e){m(o,e);function o(){var e;var t;u(this,o);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++){i[r]=arguments[r]}t=f(this,(e=p(o)).call.apply(e,[this].concat(i)));b(g(t),"state",{details:"",submitting:false});b(g(t),"handleUpdate",function(e){t.setState({details:e.target.value})});b(g(t),"handleSubmit",function(){t.setState({submitting:true});t.props.onSubmit(t.state.details).catch(function(){return t.setState({submitting:false})})});return t}d(o,[{key:"render",value:function e(){var t=this.state.submitting?i18n._("Submitting Feedback..."):i18n._("Give Feedback");return a.createElement("div",null,a.createElement("div",null,a.createElement(F,{className:A(W.feedbackTextArea),onChange:this.handleUpdate,title:"",height:"150"})),a.createElement(i.default,{onClick:this.handleSubmit,kind:"secondary"},t))}}]);return o}(a.Component);b(P,"propTypes",{onSubmit:w.func.isRequired});var I=function e(t){return a.createElement("div",null,t.children)};I.propTypes={children:w.node.isRequired,name:w.string};var N=i18n._("No, I'll try that now.");var H=function(e){m(o,e);function o(){var e;var t;u(this,o);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++){i[r]=arguments[r]}t=f(this,(e=p(o)).call.apply(e,[this].concat(i)));b(g(t),"_maybeCallSingleChildCallback",function(){if(t.props.showSingleChild!==false&&t.props.onSingleChildShown){t.props.onSingleChildShown(t.shownChild())}});b(g(t),"shownChild",function(){var e=a.Children.toArray(t.props.children);return e[Math.min(Math.max(t.props.showSingleChild,0),e.length-1)]});return t}d(o,[{key:"componentDidMount",value:function e(){this._maybeCallSingleChildCallback()}},{key:"componentDidUpdate",value:function e(t,n){if(t.showSingleChild!==this.props.showSingleChild){this._maybeCallSingleChildCallback()}}},{key:"render",value:function e(){return a.createElement("div",null,this.props.showSingleChild!==false?this.shownChild():this.props.children)}}]);return o}(a.Component);b(H,"propTypes",{children:w.node.isRequired,onSingleChildShown:w.func,showSingleChild:w.oneOfType([w.oneOf([false]),w.number]).isRequired});b(H,"defaultProps",{showSingleChild:false});var j=function(e){m(o,e);function o(){var e;var t;u(this,o);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++){i[r]=arguments[r]}t=f(this,(e=p(o)).call.apply(e,[this].concat(i)));b(g(t),"handleSubmitDetails",function(e){return t.props.handleResolve(null,e)});return t}d(o,[{key:"render",value:function e(){return a.createElement(H,null,this.props.children,!this.props.hideFeedback&&a.createElement(P,{onSubmit:this.handleSubmitDetails}))}}]);return o}(a.Component);b(j,"propTypes",{children:w.node.isRequired,handleResolve:w.func.isRequired,hideFeedback:w.bool});var U={warningSign:{path:"M57.379 77.077l0-10.633q0-.784-.539-1.323t-1.225-.539l-10.78 0q-.784 0-1.274.539t-.49 1.323l0 10.633q0 .784.539 1.323t1.225.539l10.78 0q.784 0 1.274-.539t.49-1.323zm-2.009-19.649q1.813 0 1.911-1.274l1.029-25.725q.049-.686-.637-1.176t-1.274-.49l-12.348 0q-.686 0-1.274.49t-.637 1.274l.98 25.627q0 1.176 1.911 1.274l10.339 0zm37.877 35.819l-86.044 0q-4.165 0-6.174-3.528t-.098-7.056l43.022-78.841q.98-1.715 2.646-2.744 3.577-2.156 7.252 0 1.715 1.029 2.646 2.744l43.022 78.841q1.96 3.528-.147 7.056-.931 1.568-2.597 2.548t-3.528.98z",width:100,height:92.816}};var W=E.create({backLink:{float:"left"},feedbackTextArea:{boxSizing:"border-box",minHeight:50,width:"100%"},orangeWarning:{color:"darkorange",fontWeight:"bold"},radio:{display:"block",padding:4},question:{marginBottom:10}});var z={getInitialState:function e(){return{step:0,currentStepName:null,responses:[]}},handleStepShown:function e(t){this.setState({currentStepName:t.props.name})},handleSubmitDetails:function e(t){return this.props.handleResolve(this.state.responses,t)},handleDeadEnd:function e(t){return this.props.handleResolve(this.state.responses,null,true)},nextStep:function e(t){var n=this;return function(){var e=b({},n.state.currentStepName,t);n.setState({responses:n.state.responses.concat(e),step:n.state.step+1})}}};var V=y({displayName:"TooHardDialog",propTypes:$,mixins:[z],render:function e(){return a.createElement(H,{showSingleChild:this.state.step,onSingleChildShown:this.handleStepShown},a.createElement(I,{name:"grader-inability-watched"},a.createElement(M,null,i18n._("Did you watch the talk-through that came before this challenge?")),a.createElement(O,{onClick:this.handleDeadEnd,value:"no-trynow",children:N}),a.createElement(O,{onClick:this.nextStep("yes")},i18n._("Yes, and it didn't prepare me enough."))),a.createElement(I,{name:"grader-inability-rewatched"},a.createElement(M,null,i18n._("Sometimes it helps to re-watch the talk-through. Have you tried that?")),a.createElement(O,{onClick:this.handleDeadEnd,value:"no-trynow",children:N}),a.createElement(O,{onClick:this.nextStep("no-wonthelp")},i18n._("No, I don't think it will help.")),a.createElement(O,{onClick:this.nextStep("yes")},i18n._("Yes!"))),a.createElement(I,{name:"grader-inability-tinkered"},a.createElement(M,null,i18n._("It can help to play with the final code at the end of the talk-through, going through it line by line and editing it to see how the ouput changes. Have you tried that?")),a.createElement(O,{onClick:this.handleDeadEnd,value:"no-trynow",children:N}),a.createElement(O,{onClick:this.nextStep("yes")},i18n._("Yes!"))),a.createElement(I,{name:"grader-inability-question"},a.createElement(M,null,i18n._("Sometimes it helps to ask a question underneath the talk-through, when something is confusing. Did you try that?")),a.createElement(O,{onClick:this.handleDeadEnd,value:"no-trynow",children:N}),a.createElement(O,{onClick:this.nextStep("yes-no-questions")},i18n._("No, but I had no questions")),a.createElement(O,{onClick:this.nextStep("yes-answer-didnthelp")},i18n._("Yes, but the answer didn't help.")),a.createElement(O,{onClick:this.nextStep("yes-no-answer")},i18n._("Yes, but nobody answered."))),a.createElement(I,null,a.createElement(M,null,i18n._("Thank you for answering those questions. Please give us more details on what you feel under-prepared for:")),a.createElement(P,{onSubmit:this.handleSubmitDetails})))}});var q=y({displayName:"DontUnderstandHintDialog",propTypes:$,mixins:[z],render:function e(){return a.createElement(H,{showSingleChild:this.state.step,onSingleChildShown:this.handleStepShown},a.createElement(I,{name:"hintcode"},a.createElement(M,null,i18n._("There's a \"What's this?\" link next to the hint code. If you click that, you'll get an explanation of what it means. Have you read that?")),a.createElement(O,{onClick:this.handleDeadEnd,value:"no-trynow",children:N}),a.createElement(O,{onClick:this.nextStep("read-it-still-confusing")},i18n._("Yes, I have read the explanation, and it does not make sense."))),a.createElement(I,null,a.createElement(M,null,i18n._("What is confusing about the hint code?")),a.createElement(P,{onSubmit:this.handleSubmitDetails})))}});var K=y({displayName:"OhNoesDialog",propTypes:$,mixins:[z],render:function e(){return a.createElement(H,{showSingleChild:this.state.step,onSingleChildShown:this.handleStepShown},a.createElement(I,{name:"syntax-compare-to-hintcode"},a.createElement(M,null,i18n._("Have you tried comparing your code to the hint code on the right?")),a.createElement(O,{onClick:this.handleDeadEnd,value:"no-trynow",children:N}),a.createElement(O,{onClick:this.nextStep("yes-but-not-in-hint")},i18n._("Yes, but it doesn't help because my code isn't in the hint code.")),a.createElement(O,{onClick:this.nextStep("yes-but-cant-see-diff")},i18n._("Yes, but I don't see the difference."))),a.createElement(I,{name:"syntax-message-make-sense"},a.createElement(M,null,i18n._("Does the message make sense?")),a.createElement(O,{onClick:this.nextStep("no")},i18n._("No, it doesn't make sense.")),a.createElement(O,{onClick:this.nextStep("kindof")},i18n._("It makes a little sense.")),a.createElement(O,{onClick:this.nextStep("yes")},i18n._("Yes, it makes sense."))),a.createElement(I,{name:"syntax-tried-fixing"},i18n._("Have you tried anything to fix the syntax error?"),a.createElement(O,{onClick:this.handleDeadEnd,value:"no-trynow",children:N}),a.createElement(O,{onClick:this.nextStep("no-dont-know-how")},i18n._("No, I don't know what I can do.")),a.createElement(O,{onClick:this.nextStep("yes")},i18n._("Yes, but it didn't work."))),a.createElement(I,null,a.createElement(M,null,i18n._("If you tried to fix it, what did you do? If you didn't, you can leave this blank.")),a.createElement(P,{onSubmit:this.handleSubmitDetails})))}});var G=y({displayName:"StepFalseNegativeDialog",propTypes:$,getInitialState:function e(){return{reason:null}},reasons:{TRIED_TO_FIX:"tried-to-fix-it",DONT_UNDERSTAND:"dont-understand"},handleSubmitDetails:function e(t){return this.props.handleResolve(this.state.reason&&[{"grader-message":this.state.reason}],t)},renderWarning:function e(){var t=this;return a.createElement("div",null,a.createElement("p",{className:A(W.orangeWarning)},a.createElement(k,{icon:U.warningSign})," ",i18n._("It looks like there's an orange warning message for this step. Please read the message.")),a.createElement("span",null,i18n._("If you still want to report a problem, please help us understand more:")),a.createElement(O,{name:"grader-message",checked:this.state.reason===this.reasons.TRIED_TO_FIX,onClick:function e(){return t.setState({reason:t.reasons.TRIED_TO_FIX})}},i18n._("I tried to fix it according to the message, but it still won't accept it.")),a.createElement(O,{name:"grader-message",checked:this.state.reason===this.reasons.DONT_UNDERSTAND,onClick:function e(){return t.setState({reason:t.reasons.DONT_UNDERSTAND})}},i18n._("I don't understand what the message wants me to do.")))},renderGoBack:function e(){return a.createElement("p",{className:A(W.orangeWarning)},a.createElement(k,{icon:U.warningSign})," ",i18n._("It looks like there's a message instructing you to go back a step. Check that step to see if something's wrong there that makes sense."),i18n._("If the message in that step does not make sense, please report a problem from there."))},render:function e(){var t=this.props.stepGoBackNotice;var n=this.props.stepCodeWarning;return a.createElement(H,null,a.createElement("p",null,i18n._("Our automated grader checks your code before passing you to the next step, but sometimes it doesn't consider all the possible ways to code something.")),t&&this.renderGoBack(),n&&!t&&this.renderWarning(),!t&&a.createElement("span",null,a.createElement("p",null,i18n._("We will automatically record your current code in the problem report, and try to see why the grader did not pass it. You can give additional details here:")),a.createElement(P,{onSubmit:this.handleSubmitDetails})))}});var Y=function e(t){return a.createElement(j,{handleResolve:t.handleResolve},i18n._("Sorry if our instructions are confusing! Please describe what is unclear about the instructions:"))};Y.propTypes=$;var X=S("https://khanacademy.zendesk.com/hc/en-us/requests/new?ticket_form_id=37070");var Q=function e(t){return a.createElement(j,{handleResolve:t.handleResolve,hideFeedback:true},a.createElement("p",null,i18n._("If you are on an iPad, we have various known issues on that browser. However, the editor should work in Chrome, Firefox, and Internet Explorer 9 or higher.")," ",i18n._("If it is not working on one of those browsers, please follow the following link to report an issue. Thanks!")),a.createElement(i.default,{kind:"secondary",href:X,skipClientNav:true},i18n._("Report an issue")))};Q.propTypes=$;var J=S("http://khanacademy.org/translations");var Z=S("mailto:translations@khanacademy.org");var ee=function e(t){if(t.expectPageIsTranslated){return a.createElement(j,{handleResolve:t.handleResolve},a.createElement(M,null,i18n._("Which part is not translated?")))}else{return a.createElement(H,null,a.createElement("p",null,i18n._("You can see the current status of translations on Khan Academy from the translation dashboard:"))," ",a.createElement(i.default,{href:J,skipClientNav:true,kind:"secondary"},i18n._("Translation dashboard")),a.createElement("p",null,i18n._("If your language is not on that list, you can send us an email to request that it be added:"))," ",a.createElement(i.default,{href:Z,skipClientNav:true,kind:"secondary"},i18n._("Request a translation!")))}};ee.propTypes=$;var te=function e(t){return a.createElement(j,{handleResolve:t.handleResolve},a.createElement("p",null,i18n._("We like feedback!")),a.createElement("p",null,i18n._("Before you leave feedback here, please make sure your report doesn't fall into any of the other categories. You'll get better help that way!")),a.createElement(M,null,i18n._("What other feedback do you have for us?")))};te.propTypes=$;var ne=(o={},b(o,R.TOO_HARD,V),b(o,R.DONT_UNDERSTAND_HINT,q),b(o,R.UNEXPECTED_SYNTAX_ERROR,K),b(o,R.GRADER_FALSE_NEGATIVE,G),b(o,R.INSTRUCTIONS_CONFUSING,Y),b(o,R.EDITOR_BROKEN,Q),b(o,R.NOT_TRANSLATED,ee),b(o,R.OTHER_FEEDBACK,te),o);e.exports=L},tm9o:function(e,t,o){"use strict";o("pNMO");o("4Brf");o("ma9I");o("yXV3");o("4mDm");o("zKZe");o("5DmW");o("NBAS");o("07d7");o("5s+n");o("JfAA");o("3bBZ");var f=i(o("q1tI"));var p=n(o("i8i4"));var a=n(o("j6G6"));var g=n(o("UdSq"));var s=n(o("6OHE"));var l=o("8SBg");function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}function c(){c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n){if(Object.prototype.hasOwnProperty.call(n,i)){e[i]=n[i]}}}return e};return c.apply(this,arguments)}function u(e,t){return d(e)||h(e,t)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function h(e,t){var n=[];var i=true;var r=false;var o=undefined;try{for(var a=e[Symbol.iterator](),s;!(i=(s=a.next()).done);i=true){n.push(s.value);if(t&&n.length===t)break}}catch(e){r=true;o=e}finally{try{if(!i&&a["return"]!=null)a["return"]()}finally{if(r)throw o}}return n}function d(e){if(Array.isArray(e))return e}function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}function b(e,t,n){if(t)v(e.prototype,t);if(n)v(e,n);return e}function w(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return C(e)}function y(e){y=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return y(e)}function C(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function E(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)A(e,t)}function A(e,t){A=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return A(e,t)}function x(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var S=o("17x9");var k=o("TSYQ");var F=o("mR6N"),T=F.StyleSheet,D=F.css;var R=o("whzC"),L=R.safeLinkTo;var B=o("MhIR"),O=B.Scratchpad;var M=o("bLWT");var P=o("qoF3");var I=o("ZAvB");var N=o("Pj0g");var H=o("K91X");var j=o("pnSh");var U=o("58T/");var W=o("Mf8q");var z=o("FNNV");var i18n=o("HEOz");function V(e,t,n,i){if(!e._loadComplete){return}if(e._component){var r=e._component.state.collection;if(r.length>0||i){n()}else{r.on("sync",function(){if(r.length>0||i){n()}})}}else if(e.list&&!e.list.isEmpty()||i){n()}clearInterval(t)}var q=function(e){E(r,e);function r(){var e;var d;m(this,r);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++){n[i]=arguments[i]}d=w(this,(e=y(r)).call.apply(e,[this].concat(n)));x(C(d),"state",{loadingTranscript:false,showSpinoffNotice:false,transcript:null});x(C(d),"_isMounted",false);x(C(d),"lazyLoadProjectFeedback",function(){Promise.all([o.e("db878ce3c6309de61a8fe7db184e5960").then(o.t.bind(null,"CKQW",7)).then(function(e){return e.default})]).then(function(e){var t=u(e,1),n=t[0];if(!d._isMounted){return}var i=d.props,r=i.scratchpad,o=i.discussion;var a=n;if(r.isOwner()||!r.inTutorial()){a.load(o);var s=setInterval(function(){V(a,s,function(){if(!a.shouldShowTab||a.shouldShowTab()){$(a._tabHeaderSelector).show()}d.finishInitializingProjectFeedback(n)},false)},100)}})});x(C(d),"finishInitializingProjectFeedback",function(i){var e=function e(){var t=a.default.getUserProfile();var n=d.props.scratchpad;if(!i.isLoaded()||!t||t.get("isChildAccount")||!n.isOriginProject()||!n.isOwner()||!i.hasEvalRequests()){return}d.setState({showSpinoffNotice:true})};i._projectFeedback.on("change reset add remove",e);e()});x(C(d),"renderHeader",function(){if(d.props.embeddedAndWithFrame){return null}return f.createElement(N,d.props)});x(C(d),"renderContent",function(){return f.createElement(I,c({},d.props,{showSpinoffNotice:d.state.showSpinoffNotice,onRequestHelp:d.onRequestHelp}))});x(C(d),"onRequestHelp",function(){var e=s.default.standardTransitionMs*2;setTimeout(function(){(0,l.scrollToElement)(d.discussionRoot,e,function(){d.discussionRoot.focus()})},0)});x(C(d),"renderDiscussion",function(){var e=d.props,t=e.expandFeedbackType,n=e.qaExpandKey,i=e.restrictPosting,r=e.focusKind,o=e.focusId,a=e.topicSlug,s=e.discussion,l=e.hideDiscussion,c=e.scratchpad,u=e.showProjectFeedback;if(l||!s||c.attributes.byChild){return null}var h={expandFeedbackType:t,qaExpandKey:n,restrictPosting:i,showProjectFeedback:u,authorKaid:c.attributes.kaid};return f.createElement(g.default,{ref:function e(t){return d.discussionRoot=p.default.findDOMNode(t)},contentKind:r,contentId:o,topicSlug:a,discussionContext:h,scratchpad:c})});x(C(d),"renderiPadNavigation",function(){return f.createElement("div",{className:"ipad-scratchpad-wrap-outer"})});x(C(d),"renderLicense",function(){var e=L("http://opensource.org/licenses/mit-license.php");var t=L("https://creativecommons.org/licenses/by/4.0/");var n=L("/about/tos#5");return f.createElement("div",{className:"license"},f.createElement("ul",null,f.createElement("li",null,i18n._("All code is owned by its respective author and made available under the following license:")," ",f.createElement("a",{href:e},i18n._("MIT license"))),f.createElement("li",null,i18n._("All non-code (such as writing, drawings, images, etc.) are also owned by their respective author and made available under the following license:")," ",f.createElement("a",{href:t},i18n._("Creative Commons Attribution License"))),f.createElement("li",null,i18n._("For more information please see:")," ",f.createElement("a",{href:n},i18n._("Terms of Service")))))});x(C(d),"loadTranscript",function(){var i=d.props.scratchpad.getYoutubeId();if(!i||d.state.transcript||d.state.loadingTranscript){return}d.setState({loadingTranscript:true});o.e("41654d857b95e336c1a9dfa461acd8e1").then(o.t.bind(null,"jPIJ",7)).then(function(e){return e.default}).then(function(e){var t=e.VideoTranscript;var n=new t({youtubeId:i});n.fetch({success:function e(){if(!n.hasValid()){return}d.setState({transcript:n})}})})});x(C(d),"renderTabs",function(){var e=[];var t=d.props.scratchpad.get("userAuthoredContentType");if(d.props.creatorProfile||d.props.scratchpad.get("translatedDescription")){e.push({title:i18n._("About"),content:f.createElement(j,d.props)})}if(!d.props.hideDocumentation&&P.validTypes.indexOf(t)>=0){var n=!d.props.isNew&&d.props.embedded;e.push({title:i18n._("Documentation"),content:f.createElement(P,{type:t,hideTitle:false,maximizeWidth:true,moduleLayout:false,inCourse:n})})}if(!d.props.hideSpinOffs&&d.props.scratchpad.id){e.push({title:i18n._("Spin-offs"),content:f.createElement(U,{scratchpadId:d.props.scratchpad.id.toString(),scratchpadKind:d.props.scratchpad.get("contentKind"),topic:d.props.topic})})}if(d.state.transcript){e.push({title:i18n._("Transcript"),content:f.createElement(W,c({},d.props,{transcript:d.state.transcript}))})}if(d.props.isNew||d.props.scratchpad.get("contentKind")==="Scratchpad"&&!d.props.scratchpad.get("isPublished")){e.push({title:i18n._("Guidelines"),content:f.createElement(z,{userAuthoredContentType:t})})}return f.createElement(H,c({},d.props,{tabs:e}))});x(C(d),"renderFooter",function(){if(d.props.embeddedAndWithFrame){return null}return f.createElement("div",{className:D(K.footer)},d.renderTabs(),d.renderDiscussion(),d.renderiPadNavigation(),d.renderLicense())});return d}b(r,[{key:"componentDidMount",value:function e(){this.loadTranscript();this.lazyLoadProjectFeedback();this._isMounted=true}},{key:"componentDidUpdate",value:function e(t){var n=this.state.Discussion;if(n&&t.scratchpad.id!==this.props.scratchpad.id){n.unmountComponents()}}},{key:"componentWillUnmount",value:function e(){var t=this.state.Discussion;if(t){t.unmountComponents()}this._isMounted=false}},{key:"render",value:function e(){return f.createElement("div",null,this.renderHeader(),f.createElement("div",{className:k("scratchpad-wrap-outer",D(K.contentWrap))},this.renderContent(),this.renderFooter()))}}]);return r}(f.Component);x(q,"propTypes",{creatorProfile:S.instanceOf(M),discussion:S.any,embedded:S.bool,embeddedAndWithFrame:S.bool,hideDiscussion:S.bool,hideDocumentation:S.bool,hideSpinOffs:S.bool,inEditModeAndCanEdit:S.bool,isNew:S.bool,scratchpad:S.instanceOf(O).isRequired,showShareButton:S.bool,topic:S.shape({domainSlug:S.string.isRequired}).isRequired,topicSlug:S.string.isRequired});var K=T.create({footer:{margin:"0 auto",maxWidth:688}});e.exports=q},v10r:function(e,t,n){"use strict";n("5DmW");n("TWNs");n("JfAA");n("UxlC");var u=o(n("q1tI"));var h=r(n("wa3X"));var a=n("JasB");var d=n("JimW");var s=n("Vxy9");var l=n("DzHr");var i=r(n("j6G6"));var c=r(n("17AU"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(i.get||i.set){Object.defineProperty(t,n,i)}else{t[n]=e[n]}}}}t.default=e;return t}}var f=n("17x9");var p=n("mR6N"),g=p.StyleSheet,m=p.css;var v=n("fhzG");var b=n("MhIR"),w=b.Scratchpad;var i18n=n("HEOz");var y={CLOSED:"closed",SET_TITLE:"open",VERIFY_PERMISSIONS:"verify",SAVE_SCRATCHPAD:"saving",SAVE_COMPLETE:"complete",SAVE_ERROR:"error"};var C=v({displayName:"ScratchpadSaveSpinOffButtons",propTypes:{isSaveable:f.bool,isSpinOffAllowed:f.func.isRequired,registerTriggerSave:f.func.isRequired,registerTriggerSpinOff:f.func.isRequired,saveScratchpad:f.func.isRequired,scratchpad:f.instanceOf(w).isRequired,setTitle:f.func.isRequired},getInitialState:function e(){return{error:null,saveModalState:y.CLOSED,spinOff:false}},componentDidMount:function e(){var t=this;this._isMounted=true;this.props.registerTriggerSave(function(){if(t._isMounted){t.setState({spinOff:false},function(){return t.nextModalState()})}});this.props.registerTriggerSpinOff(function(){if(t._isMounted){t.setState({spinOff:true},function(){return t.nextModalState()})}})},componentWillUnmount:function e(){this._isMounted=false},_isMounted:false,titleRef:u.createRef(),getNextModalState:function e(){var t=this.state.saveModalState||y.CLOSED;if(t===y.CLOSED){t=y.SET_TITLE;if(this.shouldSetTitle()){return t}}if(t===y.SET_TITLE){t=y.VERIFY_PERMISSIONS;if(this.shouldVerifyPermissions()){return t}}if(t===y.VERIFY_PERMISSIONS){return y.SAVE_SCRATCHPAD}if(t===y.SAVE_SCRATCHPAD){return y.SAVE_COMPLETE}return y.CLOSED},shouldSetTitle:function e(){var t=this.props.scratchpad;return this.state.spinOff||t.isNew()},shouldVerifyPermissions:function e(){var t=this.props.scratchpad;var n=t.get("category");return!this.state.spinOff&&i.default.isDeveloper()&&n},shouldDisplaySavingModal:function e(){return this.shouldSetTitle()||this.shouldVerifyPermissions()},closeModal:function e(){this.setState({saveModalState:y.CLOSED})},nextModalState:function e(){var t=this;var n=this.getNextModalState();this.setState({saveModalState:n});if(n===y.SAVE_SCRATCHPAD){this.props.saveScratchpad(this.state.spinOff).then(function(){return t.nextModalState()},function(e){return t.handleError(e)})}else if(n===y.SAVE_COMPLETE){this.delayClose=setTimeout(function(){return t.closeModal()},5e3)}},getSuggestedTitle:function e(){var t=this.props.scratchpad.get("translatedTitle");var n='Spin-off of ".*"';var i=i18n._('Spin-off of "%(title)s"',{title:"%%%"}).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&").replace("%%%",".*");var r=RegExp("^("+i+"|"+n+")","i");if(this.state.spinOff&&!r.test(t)){t=i18n._('Spin-off of "%(title)s"',{title:t})}return t},renderSetTitleModal:function e(){var n=this;var t=this.state.spinOff;var i=this.getSuggestedTitle();var r=i18n._("We're going to save your project now, please set a descriptive title for it:");var o=function e(){var t=n.titleRef.current.value;n.props.setTitle(t).then(function(){return n.nextModalState()})};return u.createElement(l.OneColumnModal,{content:u.createElement(d.View,null,u.createElement(s.Title,null,i18n._("Save As...")),u.createElement(s.Body,{tag:"p"},r),u.createElement("input",{ref:this.titleRef,className:m(E.titleInput),autoFocus:true,type:"text",defaultValue:i}),u.createElement(s.Body,{tag:"p",style:E.findProgramsNote},i18n._("To find your projects later, you can:")),u.createElement("ul",{className:m(E.findProgramsList)},u.createElement("li",null,i18n._('Click "My Projects" from links around the site.')),u.createElement("li",null,u.createElement(c.default,{mockOnFirstRender:true},function(e){var t=e.featureFlag("GANDALF_LP_NEW_LIHP");return t?i18n._('Click your name in the upper right corner and then click ”Profile”. You\'ll then find the "Projects" card at the bottom right hand side of the screen.'):i18n._('Click your name in the upper right corner to get to your profile, then click "projects".')})),t&&u.createElement("li",null,i18n._('To find all of your spin-offs of this project, click "Spin-offs" and look under "Your spin-offs."')))),footer:u.createElement(d.View,{style:E.modalFooter},u.createElement(h.default,{kind:"tertiary",onClick:function e(){return n.closeModal()}},i18n._("Cancel")),u.createElement(a.Strut,{size:16}),u.createElement(h.default,{onClick:o},i18n._("Save")))})},renderVerifyPermissionsModal:function e(){var t=this;return u.createElement(l.OneColumnModal,{onClickCloseButton:function e(){return t.closeModal()},content:u.createElement(s.Body,null,i18n._("Are you sure you want to save an official program?")),footer:u.createElement(d.View,{style:E.modalFooter},u.createElement(h.default,{kind:"secondary",onClick:function e(){return t.closeModal()}},i18n._("Cancel")),u.createElement(a.Strut,{size:16}),u.createElement(h.default,{onClick:function e(){return t.nextModalState()}},i18n._("Save")))})},renderSaveScratchpadModal:function e(){if(!this.shouldDisplaySavingModal()){return null}return u.createElement(l.OneColumnModal,{content:u.createElement(s.Body,null,i18n._("Saving..."))})},handleError:function e(t){this.setState({saveModalState:y.SAVE_ERROR,error:t})},renderError:function e(t){var n=this;return u.createElement(l.OneColumnModal,{onClickCloseButton:function e(){return n.closeModal()},content:u.createElement(d.View,null,u.createElement(s.Title,null,i18n._("Error")),u.createElement(s.Body,null,t)),footer:u.createElement(d.View,{style:E.modalFooter},u.createElement(h.default,{onClick:function e(){return n.closeModal()}},i18n._("Okay")))})},renderSaveModal:function e(){var t=this;if(!this.shouldDisplaySavingModal()){return null}var n=this.state.saveModalState;var i;if(n===y.SET_TITLE){i=this.renderSetTitleModal()}else if(n===y.VERIFY_PERMISSIONS){i=this.renderVerifyPermissionsModal()}else if(n===y.SAVE_SCRATCHPAD){i=this.renderSaveScratchpadModal()}else if(n===y.SAVE_ERROR){i=this.renderError(this.state.error)}return u.createElement(l.ModalLauncher,{onClose:function e(){return t.closeModal()},opened:!!i,modal:i})},render:function e(){var n=this;var t=this.state.saveModalState;var i=t!==y.CLOSED;var r=i;var o=i18n._("Save");var a=i18n._("Spin-off");if(t===y.SAVE_COMPLETE){if(this.state.spinOff){a=i18n._("Saved!")}else{o=i18n._("Saved!")}}else if(i){if(this.state.spinOff){a=i18n._("Spinning-off...")}else{o=i18n._("Saving...")}}var s=function e(t){n.setState({spinOff:t},function(){return n.nextModalState()})};var l=u.createElement(h.default,{disabled:r,onClick:function e(){return s(false)},style:E.toolbarButton},o);var c=u.createElement(h.default,{kind:this.props.isSaveable?"secondary":"primary",disabled:r,onClick:function e(){return s(true)},style:E.toolbarButton},a);return u.createElement(d.View,{style:E.buttonContainer},this.props.isSpinOffAllowed()&&c,this.props.isSaveable&&l,this.renderSaveModal())}});var E=g.create({buttonContainer:{flexDirection:"row"},modalFooter:{flexDirection:"row",justifyContent:"flex-end"},toolbarButton:{marginLeft:16},titleInput:{fontSize:18,width:"100%"},findProgramsNote:{marginBottom:10},findProgramsList:{listStyle:"initial",marginLeft:22}});e.exports=C},"z/9C":function(e,t,n){window["Handlebars"]=window["Handlebars"]||{};window["Handlebars"]["templates"]=window["Handlebars"]["templates"]||{};window["Handlebars"]["templates"]["tipbar"]=Handlebars.template({1:function(e,t,n,i,r){return"&times;"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){var o,a,s,l=t!=null?t:e.nullContext||{},c=n.helperMissing,u="function",h=e.escapeExpression,d='<div class="tipbar">\n    <div class="speech-arrow"></div>\n    <div class="error-buddy"></div>\n\n    <div class="text-wrap">\n        <button class="close" type="button" aria-label="Close">';o=(a=(a=n.i18nDoNotTranslate||(t!=null?t.i18nDoNotTranslate:t))!=null?a:c,s={name:"i18nDoNotTranslate",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r},typeof a===u?a.call(l,s):a);if(!n.i18nDoNotTranslate){o=n.blockHelperMissing.call(t,o,s)}if(o!=null){d+=o}return d+'</button>\n        <div class="oh-no">'+h((a=(a=n.ohNoesMsg||(t!=null?t.ohNoesMsg:t))!=null?a:c,typeof a===u?a.call(l,{name:"ohNoesMsg",hash:{},data:r}):a))+'</div>\n        <div class="message"></div>\n        <div class="show-me"><a href>'+h((a=(a=n.showMeMsg||(t!=null?t.showMeMsg:t))!=null?a:c,typeof a===u?a.call(l,{name:"showMeMsg",hash:{},data:r}):a))+'</a></div>\n        <div class="tipnav">\n            <a href="javascript:void(0);" class="prev" title="'+h((a=(a=n.prevMsg||(t!=null?t.prevMsg:t))!=null?a:c,typeof a===u?a.call(l,{name:"prevMsg",hash:{},data:r}):a))+'">\n                <span class="ui-icon ui-icon-circle-triangle-w"></span>\n            </a>\n            <span class="current-pos"></span>\n            <a href="javascript:void(0);" class="next" title="'+h((a=(a=n.nextMsg||(t!=null?t.nextMsg:t))!=null?a:c,typeof a===u?a.call(l,{name:"nextMsg",hash:{},data:r}):a))+'">\n                <span class="ui-icon ui-icon-circle-triangle-e"></span>\n            </a>\n        </div>\n    </div>\n</div>'},useData:true});window.TipBar=Backbone.View.extend({initialize:function e(t){this.liveEditor=t.liveEditor;this.pos=0;this.errors=[];this.render();this.bind()},render:function e(){this.$overlay=$('<div class="overlay error-overlay" style="display: none"></div>').appendTo(this.$el);this.$el.append(Handlebars.templates["tipbar"]({ohNoesMsg:i18n._("Oh noes!"),showMeMsg:i18n._("Show me where"),prevMsg:i18n._("Previous error"),nextMsg:i18n._("Next error")}));this.$bar=this.$el.find(".tipbar")},bind:function e(){var n=this;if($.fn.draggable){this.$el.find(".tipbar").draggable({containment:"parent",handle:".error-buddy",axis:"y"})}this.$el.on("click",".tipbar .tipnav a",function(e){if(!$(this).hasClass("ui-state-disabled")){n.pos+=$(this).hasClass("next")?1:-1;n.update()}n.liveEditor.editor.focus();return false});this.$el.on("click",".tipbar .show-me a",function(e){e.preventDefault();var t=n.errors[n.pos];n.liveEditor.editor.setCursor(t);n.liveEditor.editor.setErrorHighlight(true);return false});this.$el.on("click",".tipbar .close",function(e){n.liveEditor.setThinkingState()})},setErrors:function e(t){this.errors=t;this.update(false)},update:function e(t){if(!this.errors.length)return;var n=this.errors;var i=n[this.pos]==null?0:this.pos;this.$bar.find(".current-pos").text(n.length>1?i+1+"/"+n.length:"").end().find(".message").html(n[i].text||n[i]||"").end().find("a.prev").toggleClass("ui-state-disabled",i===0).end().find("a.next").toggleClass("ui-state-disabled",i+1===n.length).end();this.$el.find(".show-me").toggle(n[i].row>-1);this.$bar.find(".tipnav").toggle(n.length>1);if(t){this.$overlay.show();this.$bar.show()}},hide:function e(){this.$bar.hide();this.$overlay.hide();clearTimeout(this.errorDelay)},toggleErrors:function e(t,n){var i=t.length>0;if(!i){this.hide();return}this.$overlay.show();this.setErrors(t);clearTimeout(this.errorDelay);this.errorDelay=setTimeout(function(){this.update(true)}.bind(this),n)},setErrorPosition:function e(t){this.pos=t;this.update(true)}});window["Handlebars"]=window["Handlebars"]||{};window["Handlebars"]["templates"]=window["Handlebars"]["templates"]||{};window["Handlebars"]["templates"]["live-editor"]=Handlebars.template({1:function(e,t,n,i,r){return" no-output"},3:function(e,t,n,i,r){var o,a=t!=null?t:e.nullContext||{},s=n.helperMissing,l="function",c=e.escapeExpression;return'                <iframe id="output-frame"\n                    src="'+c((o=(o=n.execFile||(t!=null?t.execFile:t))!=null?o:s,typeof o===l?o.call(a,{name:"execFile",hash:{},data:r}):o))+'"\n                    data-src="'+c((o=(o=n.execFile||(t!=null?t.execFile:t))!=null?o:s,typeof o===l?o.call(a,{name:"execFile",hash:{},data:r}):o))+'"></iframe>\n'},5:function(e,t,n,i,r){return"Loading..."},7:function(e,t,n,i,r){return"Hmm..."},9:function(e,t,n,i,r){return"Restart"},11:function(e,t,n,i,r){return'                <a href="" class="draw-color-button" id="'+e.escapeExpression(e.lambda(t,t))+'">\n                    <span></span>\n                </a>\n'},13:function(e,t,n,i,r){return"Record"},15:function(e,t,n,i,r){return"Enable Flash to load audio:"},17:function(e,t,n,i,r){return"Play"},19:function(e,t,n,i,r){return"Loading audio..."},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){var o,a,s,l=t!=null?t:e.nullContext||{},c=n.helperMissing,u="function",h=e.escapeExpression,d=n.blockHelperMissing,f='<div class="scratchpad-wrap'+((o=n.unless.call(l,t!=null?t.execFile:t,{name:"unless",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r}))!=null?o:"")+'">\n    \x3c!-- Canvases (Drawing + Output) --\x3e\n    <div class="scratchpad-canvas-wrap">\n        <div id="output">\n            \x3c!-- Extra data-src attribute to work around\n                 cross-origin access policies. --\x3e\n'+((o=n["if"].call(l,t!=null?t.execFile:t,{name:"if",hash:{},fn:e.program(3,r,0),inverse:e.noop,data:r}))!=null?o:"")+'            <canvas class="scratchpad-draw-canvas" style="display:none;"\n                width="400" height="400"></canvas>\n\n            <div class="overlay disable-overlay" style="display:none;">\n            </div>\n\n            <div class="scratchpad-canvas-loading">\n                <img src="'+h((a=(a=n.imagesDir||(t!=null?t.imagesDir:t))!=null?a:c,typeof a===u?a.call(l,{name:"imagesDir",hash:{},data:r}):a))+'/spinner-large.gif">\n                <span class="hide-text">';o=(a=(a=n._||(t!=null?t._:t))!=null?a:c,s={name:"_",hash:{},fn:e.program(5,r,0),inverse:e.noop,data:r},typeof a===u?a.call(l,s):a);if(!n._){o=d.call(t,o,s)}if(o!=null){f+=o}f+='</span>\n            </div>\n        </div>\n\n        <div class="scratchpad-toolbar">\n            <div class="error-buddy-resting">\n                <div class="error-buddy-happy" style="display:none;">\n                    <img src="'+h((a=(a=n.imagesDir||(t!=null?t.imagesDir:t))!=null?a:c,typeof a===u?a.call(l,{name:"imagesDir",hash:{},data:r}):a))+'/creatures/OhNoes-Happy.png"/>\n                </div>\n                <a class="error-buddy-thinking" style="display:none;" href="javascript:void()">\n                    <img src="'+h((a=(a=n.imagesDir||(t!=null?t.imagesDir:t))!=null?a:c,typeof a===u?a.call(l,{name:"imagesDir",hash:{},data:r}):a))+'/creatures/OhNoes-Hmm.png"/>\n                    ';o=(a=(a=n._||(t!=null?t._:t))!=null?a:c,s={name:"_",hash:{},fn:e.program(7,r,0),inverse:e.noop,data:r},typeof a===u?a.call(l,s):a);if(!n._){o=d.call(t,o,s)}if(o!=null){f+=o}f+='\n                </a>\n            </div>\n            <button id="restart-code"\n                class="simple-button pull-right">\n                <span class="icon-refresh"></span>\n                ';o=(a=(a=n._||(t!=null?t._:t))!=null?a:c,s={name:"_",hash:{},fn:e.program(9,r,0),inverse:e.noop,data:r},typeof a===u?a.call(l,s):a);if(!n._){o=d.call(t,o,s)}if(o!=null){f+=o}f+='</button>\n\n            \x3c!-- Widgets for selecting colors to doodle on the canvas during\n                recordings --\x3e\n            <div id="draw-widgets" style="display:none;">\n                <a href="" id="draw-clear-button" class="ui-button">\n                    <span class="ui-icon-cancel"></span>\n                </a>\n'+((o=n.each.call(l,t!=null?t.colors:t,{name:"each",hash:{},fn:e.program(11,r,0),inverse:e.noop,data:r}))!=null?o:"")+'            </div>\n\n            \x3c!-- Record button --\x3e\n            <button id="record" class="simple-button pull-left" style="display:none;">';o=(a=(a=n._||(t!=null?t._:t))!=null?a:c,s={name:"_",hash:{},fn:e.program(13,r,0),inverse:e.noop,data:r},typeof a===u?a.call(l,s):a);if(!n._){o=d.call(t,o,s)}if(o!=null){f+=o}f+='</button>\n        </div>\n    </div>\n\n    \x3c!-- Editor --\x3e\n    <div class="scratchpad-editor-wrap overlay-container">\n        <div class="scratchpad-editor-tabs">\n          <div id="scratchpad-code-editor-tab" class="scratchpad-editor-tab">\n            <div class="scratchpad-editor scratchpad-ace-editor"></div>\n            <div class="overlay disable-overlay" style="display:none;">\n            </div>\n\n            <div class="scratchpad-editor-bigplay-loading" style="display:none;">\n                <img src="'+h((a=(a=n.imagesDir||(t!=null?t.imagesDir:t))!=null?a:c,typeof a===u?a.call(l,{name:"imagesDir",hash:{},data:r}):a))+'/spinner-large.gif">\n                <span class="hide-text">';o=(a=(a=n._||(t!=null?t._:t))!=null?a:c,s={name:"_",hash:{},fn:e.program(5,r,0),inverse:e.noop,data:r},typeof a===u?a.call(l,s):a);if(!n._){o=d.call(t,o,s)}if(o!=null){f+=o}f+='</span>\n            </div>\n\n            \x3c!-- This cannot be removed, if we want Flash to keep working! --\x3e\n            <div id="sm2-container">\n                ';o=(a=(a=n._||(t!=null?t._:t))!=null?a:c,s={name:"_",hash:{},fn:e.program(15,r,0),inverse:e.noop,data:r},typeof a===u?a.call(l,s):a);if(!n._){o=d.call(t,o,s)}if(o!=null){f+=o}f+='\n                <br>\n            </div>\n\n            <button class="scratchpad-editor-bigplay-button" style="display:none;">\n                <span class="icon-play"></span>\n                <span class="hide-text">';o=(a=(a=n._||(t!=null?t._:t))!=null?a:c,s={name:"_",hash:{},fn:e.program(17,r,0),inverse:e.noop,data:r},typeof a===u?a.call(l,s):a);if(!n._){o=d.call(t,o,s)}if(o!=null){f+=o}f+='</span>\n            </button>\n          </div>\n        </div>\n\n        <div class="scratchpad-toolbar">\n            \x3c!-- Row for playback controls --\x3e\n            <div class="scratchpad-playbar" style="display:none;">\n                <div class="scratchpad-playbar-area" style="display:none;">\n                    <button\n                        class="simple-button primary scratchpad-playbar-play"\n                        type="button">\n                        <span class="icon-play"></span>\n                    </button>\n\n                    <div class="scratchpad-playbar-progress"></div>\n\n                    <span class="scratchpad-playbar-timeleft"></span>\n                </div>\n                <div class="loading-msg">\n                    ';o=(a=(a=n._||(t!=null?t._:t))!=null?a:c,s={name:"_",hash:{},fn:e.program(19,r,0),inverse:e.noop,data:r},typeof a===u?a.call(l,s):a);if(!n._){o=d.call(t,o,s)}if(o!=null){f+=o}return f+'\n                </div>\n            </div>\n            <div class="scratchpad-debugger"></div>\n        </div>\n\n        <div class="scratchpad-toolbar scratchpad-dev-record-row" style="display:none;"></div>\n    </div>\n</div>'},useData:true});window.ScratchpadDrawCanvas=Backbone.View.extend({initialize:function e(t){this.record=t.record;this.isDrawing=false;this.ctx=this.el.getContext("2d");this.ctx.shadowBlur=2;this.ctx.lineCap="round";this.ctx.lineJoin="round";this.ctx.lineWidth=1;this.clear(true);if(this.record){this.bindRecordView()}},commands:["startLine","drawLine","endLine","setColor","clear"],colors:{black:[0,0,0],red:[255,0,0],orange:[255,165,0],green:[0,128,0],blue:[0,0,255],lightblue:[173,216,230],violet:[128,0,128]},remove:function e(){this.clear(true);this.endDraw();this.$el.off(".draw-canvas");$(document).off(".draw-canvas")},bindRecordView:function e(){var i=this;var n=this.record;this.$el.on({"mousedown.draw-canvas":function e(t){if(n.recording&&t.button===0){i.startLine(t.offsetX,t.offsetY);t.preventDefault()}},"mousemove.draw-canvas":function e(t){if(n.recording){i.drawLine(t.offsetX,t.offsetY)}},"mouseup.draw-canvas":function e(t){if(n.recording){i.endLine()}},"mouseout.draw-canvas":function e(t){if(n.recording){i.endLine()}}});n.on("runSeek",function(){i.clear(true);i.endDraw()});n.seekCachers.canvas={getState:function e(){if(!i.isDrawing){return}var t=document.createElement("canvas");t.width=t.height=i.el.width;t.getContext("2d").drawImage(i.el,0,0);return{x:i.x,y:i.y,down:i.down,color:i.color,canvas:t}},restoreState:function e(t){i.startDraw();i.x=t.x;i.y=t.y;i.down=t.down;i.setColor(t.color);var n=i.ctx.shadowColor;i.ctx.shadowColor="rgba(0,0,0,0.0)";i.ctx.drawImage(t.canvas,0,0);i.ctx.shadowColor=n}};_.each(this.commands,function(e){n.handlers[e]=function(){i[e].apply(i,arguments)}})},startLine:function e(t,n){if(!this.down){this.down=true;this.x=t;this.y=n;this.record.log("startLine",t,n)}},drawLine:function e(t,n){if(this.down&&this.x!=null&&this.y!=null){this.ctx.beginPath();this.ctx.moveTo(this.x,this.y);this.ctx.lineTo(t,n);this.ctx.stroke();this.ctx.closePath();this.x=t;this.y=n;this.record.log("drawLine",t,n)}},endLine:function e(){if(this.down){this.down=false;this.record.log("endLine")}},setColor:function e(t){if(t!=null){if(!this.isDrawing){this.startDraw(true)}this.color=t;this.ctx.shadowColor="rgba("+this.colors[t]+",0.5)";this.ctx.strokeStyle="rgba("+this.colors[t]+",1.0)";this.record.log("setColor",t)}this.trigger("colorSet",t)},clear:function e(t){this.ctx.clearRect(0,0,600,480);this.x=null;this.y=null;this.down=false;if(t!==true){this.record.log("clear")}},startDraw:function e(t){if(this.isDrawing){return}this.isDrawing=true;if(t!==true){this.setColor("black")}this.trigger("drawStarted")},endDraw:function e(){if(!this.isDrawing){return}this.isDrawing=false;this.setColor(null);this.trigger("drawEnded")}});window.ScratchpadAudioChunks=Backbone.Model.extend({initialize:function e(t){this.audioChunks=[];this.currentChunk=null},setCurrentChunk:function e(t){this.currentChunk=t},currentChunkExists:function e(){return!_.isNull(this.currentChunk)},startNewChunk:function e(){this.currentChunk=null},discardCurrentChunk:function e(){this.currentChunk=null},saveCurrentChunk:function e(){if(!this.currentChunk){return}this.audioChunks.push(this.currentChunk);this.currentChunk=null},getAllChunks:function e(){return this.audioChunks}});window.ScratchpadRecordView=Backbone.View.extend({initialize:function e(t){this.render();this.$recordButton=t.recordButton;this.$finalSaveButton=t.saveButton;this.editor=t.editor;this.record=t.record;this.config=t.config;this.drawCanvas=t.drawCanvas;this.workersDir=t.workersDir;this.transloaditTemplate=t.transloaditTemplate;this.transloaditAuthKey=t.transloaditAuthKey;this.audioChunks=new ScratchpadAudioChunks;this.recordInProgress=false;this.commandChunks=[];this.startingCode="";this.lastSavedCode=this.editor.text();this.$lastAudioChunkElem=this.$el.find(".last-audio-chunk");this.$savedAudioChunksElem=this.$el.find(".saved-audio-chunks");this.initializeButtons()},render:function e(){this.$el.html(Handlebars.templates["dev-record"]({})).show()},initializeButtons:function e(){this.$newChunkButton=this.$el.find(".scratchpad-dev-new-chunk");this.$discardChunkButton=this.$el.find(".scratchpad-dev-discard-chunk");this.$saveChunkButton=this.$el.find(".scratchpad-dev-save-chunk");this.$refreshEditorButton=this.$el.find(".scratchpad-dev-refresh-editor-state");this.disableChunkButtons(true,true,true,true,false);this.$newChunkButton.on("click",_.bind(this.newChunk,this));this.$discardChunkButton.on("click",_.bind(this.discardChunk,this));this.$saveChunkButton.on("click",_.bind(this.saveChunk,this));this.$refreshEditorButton.on("click",_.bind(this.refreshEditor,this))},initializeRecordingAudio:function e(){this.multirecorder=new MultiRecorder({workerPath:this.workersDir+"shared/multirecorder-worker.js"});this.$recordButton.text("Use the chunks (and give permission)");this.setButtonDisableStatus(this.$recordButton,true);this.disableChunkButtons(false,true,true,true,true)},startRecordingAudio:function e(){var t=this;this.lastSavedCode=this.editor.text();this.multirecorder.startRecording(1).progress(_.bind(function(e){this.$newChunkButton.text(e+"...")},this)).done(_.bind(function(){this.disableChunkButtons(false,true,true,true,true);t.record.recordingAudio=true;this.$newChunkButton.html("Stop recording chunk");this.startRecordingCommands()},this))},stopRecordingAudio:function e(){this.multirecorder.stopRecording().done(_.bind(function(e){this.audioChunks.setCurrentChunk(e);this.$lastAudioChunkElem.html(e.createAudioPlayer())},this))},showSavedAudioChunks:function e(){this.getFinalAudioRecording(_.bind(function(e){this.$savedAudioChunksElem.html(e.createAudioPlayer())},this))},getDurationMsOfSavedAudio:function e(){var t=0;var n=$(this.$savedAudioChunksElem).find("audio");if(n&&n.length>0){t=n[0].duration*1e3}return t},startRecordingCommands:function e(){if(this.record.hasNoChunks()){this.startingCode=this.editor.text();var t=this.config.curVersion();this.config.switchVersion(t);this.record.setActualInitData({configVersion:t,code:this.startingCode})}this.editor.focus();this.record.startRecordChunk(this.getDurationMsOfSavedAudio());this.record.log("select",0,0);this.editor.setCursor({row:0,column:0})},stopRecordingCommands:function e(){this.record.stopRecordChunk()},getFinalAudioRecording:function e(t){this.multirecorder.combineRecordings(this.audioChunks.getAllChunks()).done(t)},getFinalCommandRecording:function e(){return this.record.dumpRecording()},newChunk:function e(){if(this.audioChunks.currentChunkExists()){return}if(!this.recordInProgress){this.editor.editor.setReadOnly(false);this.recordInProgress=true;this.startRecordingAudio()}else{this.recordInProgress=false;this.stopRecordingCommands();this.disableChunkButtons(true,false,false,true,true);this.$newChunkButton.html("Start new chunk")}},discardChunk:function e(t){if(!this.audioChunks.currentChunkExists()){return}this.audioChunks.discardCurrentChunk();this.record.discardRecordChunk();this.$lastAudioChunkElem.empty();this.refreshEditor()},saveChunk:function e(t){if(!this.audioChunks.currentChunkExists()){return}this.audioChunks.saveCurrentChunk();this.record.saveRecordChunk();this.lastSavedCode=this.editor.text();this.disableChunkButtons(false,true,true,false,false);this.showSavedAudioChunks();this.$lastAudioChunkElem.empty()},refreshEditor:function e(t){this.record.loadRecording(this.record.dumpRecording());this.editor.editor.setReadOnly(false);this.record.initData=this.record.actualInitData;if(this.record.commands){this.record.commands.push([this.getDurationMsOfSavedAudio(),"seek"])}this.record.time=0;this.editor.text(this.startingCode);this.drawCanvas.clear(true);this.drawCanvas.endDraw();this.record.seekTo(this.getDurationMsOfSavedAudio());setTimeout(_.bind(function(){this.disableChunkButtons(false,true,true,false,false)},this),1e3)},disableChunkButtons:function e(t,n,i,r,o){this.setButtonDisableStatus(this.$newChunkButton,t);this.setButtonDisableStatus(this.$discardChunkButton,n);this.setButtonDisableStatus(this.$saveChunkButton,i);this.setButtonDisableStatus(this.$refreshEditorButton,r);this.setButtonDisableStatus(this.$finalSaveButton,o)},setButtonDisableStatus:function e(t,n){if(!_.isUndefined(n)){t.prop("disabled",n)}}});$._=i18n._;window.LiveEditor=Backbone.View.extend({dom:{DRAW_CANVAS:".scratchpad-draw-canvas",DRAW_COLOR_BUTTONS:"#draw-widgets a.draw-color-button",CANVAS_WRAP:".scratchpad-canvas-wrap",EDITOR:".scratchpad-editor",CANVAS_LOADING:".scratchpad-canvas-loading",BIG_PLAY_LOADING:".scratchpad-editor-bigplay-loading",BIG_PLAY_BUTTON:".scratchpad-editor-bigplay-button",PLAYBAR:".scratchpad-playbar",PLAYBAR_AREA:".scratchpad-playbar-area",PLAYBAR_OPTIONS:".scratchpad-playbar-options",PLAYBAR_LOADING:".scratchpad-playbar .loading-msg",PLAYBAR_PROGRESS:".scratchpad-playbar-progress",PLAYBAR_PLAY:".scratchpad-playbar-play",PLAYBAR_TIMELEFT:".scratchpad-playbar-timeleft",PLAYBAR_UI:".scratchpad-playbar-play, .scratchpad-playbar-progress",OUTPUT_FRAME:"#output-frame",OUTPUT_DIV:"#output",ALL_OUTPUT:"#output, #output-frame",RESTART_BUTTON:"#restart-code",GUTTER_ERROR:".ace_error",ERROR_BUDDY_HAPPY:".error-buddy-happy",ERROR_BUDDY_THINKING:".error-buddy-thinking"},mouseCommands:["move","over","out","down","up"],colors:["black","red","orange","green","blue","lightblue","violet"],defaultOutputWidth:400,defaultOutputHeight:400,editors:{},initialize:function e(t){this.workersDir=this._qualifyURL(t.workersDir);this.externalsDir=this._qualifyURL(t.externalsDir);this.imagesDir=this._qualifyURL(t.imagesDir);this.soundsDir=t.soundsDir;this.execFile=t.execFile?this._qualifyURL(t.execFile):"";this.jshintFile=this._qualifyURL(t.jshintFile||this.externalsDir+"jshint/jshint.js");this.redirectUrl=t.redirectUrl;this.outputType=t.outputType||"";this.editorType=t.editorType||_.keys(this.editors)[0];this.editorHeight=t.editorHeight;this.initialCode=t.code;this.initialVersion=t.version;this.settings=t.settings;this.validation=t.validation;this.recordingCommands=t.recordingCommands;this.recordingMP3=t.recordingMP3;this.recordingInit=t.recordingInit||{code:this.initialCode,version:this.initialVersion};this.transloaditTemplate=t.transloaditTemplate;this.transloaditAuthKey=t.transloaditAuthKey;this.render();this.config=new ScratchpadConfig({version:t.version});this.record=new ScratchpadRecord;this.drawCanvas=new ScratchpadDrawCanvas({el:this.dom.DRAW_CANVAS,record:this.record});this.drawCanvas.on({drawStarted:function(){this.$el.find(this.dom.DRAW_CANVAS).show()}.bind(this),drawEnded:function(){this.$el.find(this.dom.DRAW_CANVAS).hide()}.bind(this),colorSet:function(e){this.$el.find(this.dom.DRAW_COLOR_BUTTONS).removeClass("ui-state-active");if(e!==null){this.$el.find("#"+e).addClass("ui-state-active")}}.bind(this)});this.newErrorExperience=t.newErrorExperience;if(window.location.search.indexOf("new_error_experience=yes")!==-1){this.newErrorExperience=true}if(t.enableLoopProtect!=null){this.enableLoopProtect=t.enableLoopProtect}else{this.enableLoopProtect=true}this.editor=new this.editors[this.editorType]({el:this.dom.EDITOR,code:this.initialCode,autoFocus:t.autoFocus,config:this.config,record:this.record,imagesDir:this.imagesDir,soundsDir:this.soundsDir,externalsDir:this.externalsDir,workersDir:this.workersDir,type:this.editorType});var i=this.config.editor.tooltipEngine;if(i.setEnabledStatus){if(window.location.search.indexOf("autosuggestToggle=yes")!==-1){window.localStorage["autosuggest"]="true";this.editor.editor.commands.addCommand({name:"toggleAutosuggest",bindKey:{win:"Ctrl+Alt+A",mac:"Command+Option+A"},exec:function e(t){var n=window.localStorage["autosuggest"]==="true";i.setEnabledStatus(n!==true);window.localStorage.setItem("autosuggest",String(n!==true))}})}else{i.setEnabledStatus("true")}}if(this.editorType==="ace_pjs"){this.noLint=false;this.editor.on("scrubbingStarted",function(){this.noLint=true}.bind(this));this.editor.on("scrubbingEnded",function(){this.noLint=false}.bind(this))}this.tipbar=new TipBar({el:this.$(this.dom.OUTPUT_DIV),liveEditor:this});var n=t.code;if(n!==undefined){this.editor.text(n);this.editor.originalCode=n}this.editor.focus();if(t.cursor){this.editor.setCursor(t.cursor)}else{this.editor.setSelection({start:{row:0,column:0},end:{row:0,column:0}})}this.$el.find("#page-overlay").hide();this.updateCanvasSize(t.width,t.height);if(this.canRecord()){this.$el.find("#record").show()}this.bind();this.setupAudio()},render:function e(){this.$el.html(Handlebars.templates["live-editor"]({execFile:this.execFile,imagesDir:this.imagesDir,colors:this.colors}))},bind:function e(){var t=this;var r=this;var n=this.$el;var i=this.dom;n.delegate(".simple-button.disabled, .ui-state-disabled","click",function(e){e.stopImmediatePropagation();return false});n.delegate(this.dom.RESTART_BUTTON,"click",this.restartCode.bind(this));this.handleMessagesBound=this.handleMessages.bind(this);$(window).on("message",this.handleMessagesBound);n.find("#output-frame").on("load",function(){t.outputState="clean";t.markDirty()});this.editor.on("change",function(){t.markDirty()});this.editor.on("userChangedCode",function(){if(!t.record.recording&&!t.record.playing){t.trigger("userChangedCode")}});this.on("runDone",this.runDone.bind(this));var o=function e(){if(r.outputState!=="clean"){r.once("runDone",e)}else{setTimeout(function(){if(r.editor.getSelectionIndices){r.postFrame({setCursor:r.editor.getSelectionIndices()})}r.editor.once("changeCursor",e)},0)}setTimeout(function(){r.maybeShowErrors()},0)};this.editor.once("changeCursor",o);this.config.on("versionSwitched",function(e,t){this.markDirty();this.config.runVersion(t,"jshint")}.bind(this));if(this.hasAudio()){n.find(".overlay").show();n.find(i.BIG_PLAY_LOADING).show();n.find(i.PLAYBAR).show()}n.find(i.DRAW_COLOR_BUTTONS).each(function(){$(this).addClass("ui-button").children().css("background",this.id)});if(jQuery.fn.buttonize){n.buttonize()}n.on("buttonClick","a.draw-color-button",function(){r.drawCanvas.setColor(this.id);r.editor.focus()});n.on("click",".disable-overlay",function(){r.record.pausePlayback()});n.find(i.PLAYBAR_PROGRESS).slider({range:"min",value:0,min:0,max:100,start:function e(){if(r.record.recording){return false}r.record.seeking=true;r.wasPlaying=r.record.playing;r.record.pausePlayback()},slide:function e(t,n){var i=n.value*1e3;if(i!==r.record.endTime()){r.updateTimeLeft(i);r.seekTo(i)}},stop:function e(t,n){r.record.seeking=false;r.updateTimeLeft(n.value*1e3);if(r.wasPlaying){setTimeout(function(){r.record.play()},1e3)}}});var a=function e(){if(r.record.playing){r.record.pausePlayback()}else{r.record.play()}};n.find(i.PLAYBAR_PLAY).off("click.play-button").on("click.play-button",a);var s=function e(){n.find(i.PLAYBAR_LOADING).hide();n.find(i.PLAYBAR_AREA).show();n.find(i.BIG_PLAY_BUTTON).off("click.big-play-button").on("click.big-play-button",function(){n.find(i.BIG_PLAY_BUTTON).hide();a()});n.find(i.PLAYBAR_PLAY).on("click",function(){n.find(i.BIG_PLAY_BUTTON).hide()});n.find(i.EDITOR).on("click",function(){n.find(i.BIG_PLAY_BUTTON).hide()});n.find(i.BIG_PLAY_LOADING).hide();n.find(i.BIG_PLAY_BUTTON).show();r.off("readyToPlay",e)};this.on("readyToPlay",s);n.on("buttonClick","#draw-clear-button",function(){r.drawCanvas.clear();r.drawCanvas.endDraw();r.editor.focus()});n.on("click",this.dom.RESTART_BUTTON,function(){r.record.log("restart")});n.on("click",this.dom.ERROR_BUDDY_THINKING,function(){r.setErrorPosition(0)});n.find("#record").on("click",function(){r.recordHandler(function(e){if(e){console.error(e)}})});if(this.recordingCommands){var l=this.recordingMP3;var c=/_x(1.\d+).mp3/.exec(l);var u=parseFloat(c&&c[1])||1;this.record.loadRecording({init:this.recordingInit,commands:this.recordingCommands,multiplier:u})}},remove:function e(){$(window).off("message",this.handleMessagesBound);this.editor.remove()},canRecord:function e(){return this.transloaditAuthKey&&this.transloaditTemplate},hasAudio:function e(){return!!this.recordingMP3},setupAudio:function e(){if(!this.hasAudio()){return}var n=this;var i;soundManager.setup({url:this.externalsDir+"SoundManager2/swf/",debugMode:false,useFlashBlock:true,onready:function e(){window.clearTimeout(i);n.audioInit()},ontimeout:function e(t){window.clearTimeout(i);i=window.setTimeout(function(){n.$el.find("#sm2-container div").remove();soundManager.reboot()},3e3)}});soundManager.beginDelayedInit();this.bindRecordHandlers()},audioInit:function e(){if(!this.hasAudio()){return}var t=this;var n=this.record;this.wasPlaying=undefined;n.time=0;this.player=soundManager.createSound({id:"sound"+(new Date).getTime(),url:this.recordingMP3,autoLoad:true,whileplaying:function(){t.updateTimeLeft(n.currentTime());if(!n.seeking){t.$el.find(t.dom.PLAYBAR_PROGRESS).slider("option","value",n.currentTime()/1e3)}n.trigger("playUpdate")}.bind(this),onplay:function e(){n.play()},onresume:function e(){n.play()},onpause:function e(){n.pausePlayback()},onload:function e(){n.durationEstimate=n.duration=this.duration;n.trigger("loaded")},whileloading:function e(){n.duration=null;n.durationEstimate=this.durationEstimate;n.trigger("loading")},onfinish:function e(){n.stopPlayback();n.trigger("playEnded")},onsuspend:function e(){t.trigger("readyToPlay")}});var i=setInterval(function(){if(t.audioReadyToPlay()){clearInterval(i);t.trigger("readyToPlay")}},16);this.bindPlayerHandlers()},audioReadyToPlay:function e(){return this.player&&(this.player.bytesLoaded>0||this.player.loaded)},bindPlayerHandlers:function e(){var n=this;var i=this.record;this.record.bind({loading:function e(){n.updateDurationDisplay()},loaded:function e(){var t=i.commands;if(t){t.push([Math.max(i.endTime(),t[t.length-1][0]),"seek"])}n.updateDurationDisplay()},playStarted:function e(){if(n.player.paused){n.player.resume()}else if(n.player.playState===0){n.player.play()}},playPaused:function e(){n.player.pause()}})},bindRecordHandlers:function e(){var i=this;var r=this.record;r.bind({playStarted:function e(t,n){i.config.switchVersion(r.getVersion());if(!r.recording&&!n){i.editor.reset(r.initData.code,false);i.drawCanvas.clear(true);i.drawCanvas.endDraw()}if(!r.recording){i.$el.find("#record").addClass("disabled")}i.$el.find(i.dom.RESTART_BUTTON).addClass("disabled");if(!r.recording){$("html").addClass("playing");i.$el.find(".disable-overlay").show()}i.editor.unfold();i.$el.find(i.dom.PLAYBAR_PLAY).find("span").removeClass("glyphicon-play icon-play").addClass("glyphicon-pause icon-pause")},playEnded:function e(){i.config.switchVersion(this.initialVersion)},playPaused:function e(){$("html").removeClass("playing");i.$el.find(".disable-overlay").hide();i.$el.find(i.dom.RESTART_BUTTON).removeClass("disabled");i.$el.find("#record").removeClass("disabled");i.$el.find(i.dom.PLAYBAR_PLAY).find("span").addClass("glyphicon-play icon-play").removeClass("glyphicon-pause icon-pause")},recordStarted:function e(){i.postFrame({recording:true});i.$el.find("#draw-widgets").removeClass("hidden").show();i.$el.find(".disable-overlay").hide();i.editor.setReadOnly(false);$("html").removeClass("playing");if(r.hasNoChunks()){i.drawCanvas.clear(true);i.drawCanvas.endDraw()}i.$el.find("#save-button, #fork-button").addClass("disabled");i.$el.find("#record").addClass("toggled")},recordEnded:function e(){i.postFrame({recording:false});if(r.recordingAudio){i.recordView.stopRecordingAudio()}i.$el.find("#save-button, #fork-button").removeClass("disabled");i.$el.find(i.dom.PLAYBAR_UI).removeClass("ui-state-disabled");i.$el.find("#record").removeClass("toggled disabled");r.stopPlayback();i.$el.find(".disable-overlay").show();$("html").addClass("playing");i.editor.setReadOnly(true);i.$el.find("#draw-widgets").addClass("hidden").hide();i.drawCanvas.endDraw()}});_.each(this.mouseCommands,function(n){r.handlers[n]=function(e,t){i.postFrame({mouseAction:{name:n,x:e,y:t}})}});r.handlers.restart=function(){var e=i.$el.find(i.dom.RESTART_BUTTON);if(!e.hasClass("hilite")){e.addClass("hilite green");setTimeout(function(){e.removeClass("hilite green")},300)}i.postFrame({restart:true})};r.currentTime=function(){return i.player?i.player.position:0};r.endTime=function(){return this.duration||this.durationEstimate}},recordHandler:function e(t){if(this.record.recording){this.recordView.stopRecordingCommands();return}var n=this.editor.text();if(!n){t({error:"empty"})}else if(this.config.curVersion()!==this.config.latestVersion()){t({error:"outdated"})}else if(this.canRecord()&&!this.hasAudio()){this.startRecording();this.editor.focus()}else{t({error:"exists"})}},startRecording:function e(){this.bindRecordHandlers();if(!this.recordView){var t=this.$el;var n=this.workersDir.replace(/^https?:\/\/[^\/]*/,"");this.recordView=new ScratchpadRecordView({el:t.find(".scratchpad-dev-record-row"),recordButton:t.find("#record"),saveButton:t.find("#save-button"),record:this.record,editor:this.editor,config:this.config,workersDir:n,drawCanvas:this.drawCanvas,transloaditTemplate:this.transloaditTemplate,transloaditAuthKey:this.transloaditAuthKey})}this.recordView.initializeRecordingAudio()},saveRecording:function e(t,n){if(!this.record.recorded||!this.record.recordingAudio){return t()}var i=new TransloaditXhr({authKey:this.transloaditAuthKey,templateId:this.transloaditTemplate,steps:n,successCb:function(e){this.recordingMP3=e.mp3[0].url.replace(/^http:/,"https:");t(null,this.recordingMP3)}.bind(this),errorCb:t});this.recordView.getFinalAudioRecording(function(e){i.uploadFile(e.wav)})},updateDurationDisplay:function e(){this.updateTimeLeft(this.record.currentTime());this.$el.find(this.dom.PLAYBAR_PROGRESS).slider("option","max",this.record.endTime()/1e3)},updateTimeLeft:function e(t){this.$el.find(".scratchpad-playbar-timeleft").text("-"+this.formatTime(this.record.endTime()-t))},formatTime:function e(t){var n=t/1e3,i=Math.floor(n/60),r=Math.floor(n%60);if(i<0||r<0){i=0;r=0}return i+":"+(r<10?"0":"")+r},seekTo:function e(t){if(!this.record.seeking){this.$el.find(this.dom.PLAYBAR_PROGRESS).slider("option","value",t/1e3)}if(this.record.seekTo(t)!==false){this.player.setPosition(t)}},handleMessages:function e(t){var n=t.originalEvent;var i;try{i=JSON.parse(n.data)}catch(e){}if(!i){return}if(typeof i!=="object"){return}this.trigger("update",i);if(i.loaded||i.results){this.$el.find(this.dom.CANVAS_LOADING).hide()}if(i.code!==undefined){this.editor.text(i.code);this.editor.originalCode=i.code;this.restartCode()}if(i.validate!==undefined&&i.validate!==null){this.validation=i.validate}if(i.results){this.trigger("runDone")}if(this.editorType.indexOf("ace_")===0&&i.results){this.removeUnderlineMarkers();if(i.results.assertions||i.results.warnings){var r=[];for(var o=0;o<i.results.assertions.length;o++){var a=i.results.assertions[o];r.push({row:+a.row,column:+a.column,text:a.text.toString(),type:"warning"});this.addUnderlineMarker(+a.row)}for(var o=0;o<i.results.warnings.length;o++){var s=i.results.warnings[o];r.push({row:+s.row,column:+s.column,text:s.text.toString(),type:"warning"});this.addUnderlineMarker(+s.row)}this.editor.editor.session.setAnnotations(r)}else{this.editor.editor.session.setAnnotations([])}}if(this.newErrorExperience&&this.errorState.length===0){this.setHappyState()}if(i.results&&_.isArray(i.results.errors)){this.handleErrors(this.cleanErrors(i.results.errors))}if(i.lines!==undefined){this.editor.toggleGutter(i.lines.map(function(e){return+e}))}if(i.restart){this.restartCode()}if(i.log){this.record.log.apply(this.record,i.log)}},addUnderlineMarker:function e(t){var n=ace.require("ace/range").Range;var i=this.editor.editor.session.getDocument().getLine(t);this.editor.editor.session.addMarker(new n(t,0,t,i.length),"ace_problem_line","text",false)},removeUnderlineMarkers:function e(){var t=this.editor.editor.session;var n=t.getMarkers();Object.keys(n).forEach(function(e){t.removeMarker(e)})},errorCursorRow:null,showError:null,handleErrors:function e(t){if(!this.newErrorExperience){this.tipbar.toggleErrors(t,1500);return}window.clearTimeout(this.errorTimeout);if(t.length){var n=this.editor.editor.session;this.removeUnderlineMarkers();this.setErrors(t);this.maybeShowErrors()}else{this.setErrors([]);this.setHappyState();this.showError=false;this.errorCursorRow=null}},maybeShowErrors:function e(){if(!this.hasErrors()||!this.editor||!this.editor.getCursor()){return}var t=this.editor.getCursor().row;var n=this.errorCursorRow===null||this.errorCursorRow===t;if(this.errorCursorRow===null){this.errorCursorRow=t}this.showError=this.showError||!n||this.showError===null;if(this.showError){this.setErrorState()}else if(n){this.setThinkingState();window.clearTimeout(this.errorTimeout);this.errorTimeout=setTimeout(function(){if(this.hasErrors()){this.setErrorState()}}.bind(this),6e4)}},errorState:"",hasErrors:function e(){return this.tipbar.errors.length},setErrors:function e(t){this.tipbar.setErrors(t)},setErrorPosition:function e(t){this.setErrorState();this.tipbar.setErrorPosition(t)},setErrorState:function e(){this.errorState="error";this.$el.find(this.dom.ERROR_BUDDY_THINKING).hide();this.$el.find(this.dom.ERROR_BUDDY_HAPPY).hide();this.tipbar.update(true)},setThinkingState:function e(){if(this.errorState!=="thinking"){this.errorState="thinking";this.tipbar.hide();this.$el.find(this.dom.ERROR_BUDDY_HAPPY).hide();this.$el.find(this.dom.ERROR_BUDDY_THINKING).show().animate({left:-2},{duration:300,easing:"linear"}).animate({left:2},{duration:300,easing:"linear"}).animate({left:0},{duration:300,easing:"linear"})}},setHappyState:function e(){this.errorState="happy";this.tipbar.hide();this.$el.find(this.dom.ERROR_BUDDY_THINKING).hide();this.$el.find(this.dom.ERROR_BUDDY_HAPPY).show()},postFrameOrigin:function e(){var t=/^.*:\/\/[^\/]*/.exec(this.$el.find("#output-frame").attr("data-src"));return t?t[0]:window.location.protocol+"//"+window.location.host},postFrame:function e(t){this.$el.find("#output-frame")[0].contentWindow.postMessage(JSON.stringify(t),this.postFrameOrigin())},hasFrame:function e(){return!!this.execFile},restartCode:function e(){this.postFrame({restart:true})},runCode:_.throttle(function(e){var t={code:arguments.length===0?this.editor.text():e,cursor:this.editor.getSelectionIndices?this.editor.getSelectionIndices():-1,validate:this.validation||"",noLint:this.noLint,version:this.config.curVersion(),settings:this.settings||{},workersDir:this.workersDir,externalsDir:this.externalsDir,imagesDir:this.imagesDir,soundsDir:this.soundsDir,redirectUrl:this.redirectUrl,jshintFile:this.jshintFile,outputType:this.outputType,enableLoopProtect:this.enableLoopProtect};this.trigger("runCode",t);this.postFrame(t)},20),markDirty:function e(){var t=this;if(!this.newErrorExperience){this.tipbar.hide()}if(this.outputState==="clean"){setTimeout(this.runCode.bind(this),0);this.outputState="running";this.runTimeout=setTimeout(function(){t.trigger("runDone")},500)}else{this.outputState="dirty"}},runDone:function e(){clearTimeout(this.runTimeout);var t=this.outputState;this.outputState="clean";if(t==="dirty"){this.markDirty()}},outputState:"dirty",updateCanvasSize:function e(t,n){t=t||this.defaultOutputWidth;n=n||this.defaultOutputHeight;this.$el.find(this.dom.CANVAS_WRAP).width(t);this.$el.find(this.dom.ALL_OUTPUT).height(n);this.$el.find(this.dom.EDITOR).height(this.editorHeight||n);this.trigger("canvasSizeUpdated",{width:t,height:n})},getScreenshot:function e(t){if(!this.hasFrame()){var n=document.createElement("canvas");n.width=200;n.height=200;var i=n.getContext("2d");var r=24;var o=190;var a=this.editor.text();a=a.replace(/<[^>]+>/g,"");a=a.replace(/&nbsp;|&#160;/g," ");a=a.replace(/&lt;|&#60;/g,"<");a=a.replace(/&gt;|&#62;/g,">");a=a.replace(/&amp;|&#38;/g,"&");a=a.replace(/&quot;|&#34;/g,'"');a=a.replace(/&apos;|&#39;/g,"'");var s=a.split(/\s+/);var l=0;var c=s[0];i.font=r+"px serif";for(var u=1;u<s.length;u++){var h=s[u];var d=i.measureText(c+" "+h).width;if(d<o){c+=" "+h}else{l+=1;i.fillText(c,5,(r+5)*l);c=h}}l+=1;i.fillText(c,5,(r+5)*l+5);t(n.toDataURL("image/png"));return}$(window).off("message.getScreenshot");$(window).on("message.getScreenshot",function(e){if(/^data:/.test(e.originalEvent.data)){t(e.originalEvent.data)}});this.postFrame({screenshot:true})},undo:function e(){this.editor.undo()},_qualifyURL:function e(t){var n=document.createElement("a");n.href=t;return n.href},cleanErrors:function e(t){var a={WhileStatement:i18n._("<code>while</code> loop"),DoWhileStatement:i18n._("<code>do-while</code> loop"),ForStatement:i18n._("<code>for</code> loop"),FunctionDeclaration:i18n._("<code>function</code>"),FunctionExpression:i18n._("<code>function</code>")};t=t.map(function(t){delete t.html;var e=t.infiniteLoopNodeType;if(e){t.html=i18n._("A %(type)s is taking too long to run. "+"Perhaps you have a mistake in your code?",{type:a[e]})}var n={};if(typeof t==="string"){n.text=this.clean(this.prettify(t))}else if(t.html){n.text=this.prettify(t.html)}else{n.text=this.prettify(this.clean(t.text||t.message||""))}if(t.lint!==undefined){n.lint={};var i=["character","line"];var r=["code","evidence","id","raw","reason","scope","type"];var o=["openTag"];i.forEach(function(e){if(t.lint[e]!=undefined){n.lint[e]=+t.lint[e]}});r.forEach(function(e){if(t.lint[e]!=undefined){n.lint[e]=t.lint[e].toString()}});o.forEach(function(e){if(t.lint[e]!=undefined){n.lint[e]=t.lint[e]}})}if(t.row!=undefined){n.row=+t.row}if(t.column!=undefined){n.column=+t.column}if(t.type!=undefined){n.type=t.type.toString()}if(t.source!=undefined){n.source=t.source.toString()}if(t.priority!=undefined){n.priority=+t.priority}return n}.bind(this));t=t.sort(function(e,t){var n=e.row-t.row;return n===0?(e.priority||99)-(t.priority||99):n});return t},prettify:function e(t){t=t.split('"');var n="";for(var i=0;i<t.length;i++){if(t[i].length===0){continue}if(i%2===0){n+='<span class="text">'+t[i]+"</span>"}else{n+='<span class="quote">'+t[i]+"</span>"}}return n},clean:function e(t){return String(t).replace(/</g,"&lt;")}});LiveEditor.registerEditor=function(e,t){LiveEditor.prototype.editors[e]=t};if(true){t.LiveEditor=LiveEditor}}}]);
//# sourceMappingURL=../../sourcemaps/en/c19ed17eed0ed37a24c99762b78ab9a0.5e7ee64860fb1133625e.js.map