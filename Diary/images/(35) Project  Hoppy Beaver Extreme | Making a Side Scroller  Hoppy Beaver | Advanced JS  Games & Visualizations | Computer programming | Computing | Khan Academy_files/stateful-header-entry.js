(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["./javascript/app-shell-package/app-entry~./javascript/page-package/stateful-header-entry"],{"2cot":function(e,t,r){"use strict";r("pNMO");r("4Brf");r("ma9I");r("TeQF");r("yXV3");r("4mDm");r("zKZe");r("5DmW");r("NBAS");r("07d7");r("5s+n");r("inlA");r("hByQ");r("LKBx");r("FZtP");r("3bBZ");var s=k(r("q1tI"));var a=D(r("i8i4"));var o=r("mR6N");var n=k(r("Pwnf"));var i=r("JimW");var l=D(r("C7Yw"));var c=D(r("6cSF"));var f=D(r("qRKg"));var d=D(r("ZpD3"));var p=D(r("8SJn"));var h=D(r("6OHE"));var g=D(r("6wxr"));var u=D(r("j6G6"));var v=D(r("Q8Wn"));var m=D(r("QCGh"));var b=D(r("uEGL"));var y=D(r("hSyu"));var w=D(r("hDgO"));var O=D(r("Tipd"));var S=D(r("FFwm"));var N=D(r("30Ry"));var C=D(r("Ew9B"));var I=D(r("5gsP"));var M=D(r("UUpl"));var E=D(r("v8iP"));function D(e){return e&&e.__esModule?e:{default:e}}function k(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function P(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){B(t,e,n[e])})}return t}function T(){T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};return T.apply(this,arguments)}function L(e,t){return R(e)||x(e,t)||A()}function A(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function x(e,t){var n=[];var r=true;var o=false;var a=undefined;try{for(var i=e[Symbol.iterator](),s;!(r=(s=i.next()).done);r=true){n.push(s.value);if(t&&n.length===t)break}}catch(e){o=true;a=e}finally{try{if(!r&&i["return"]!=null)i["return"]()}finally{if(o)throw a}}return n}function R(e){if(Array.isArray(e))return e}function B(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function j(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function F(e,t,n){if(t)W(e.prototype,t);if(n)W(e,n);return e}function U(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return q(e)}function q(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function G(e){G=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return G(e)}function H(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)z(e,t)}function z(e,t){z=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return z(e,t)}var i18n=r("HEOz");var K={path:"M100.035 70.91l0 8.322q.057 1.653-1.197 2.907t-2.964 1.254l-91.713 0q-1.653 0-2.907-1.254t-1.254-2.907l0-8.322q0-1.71 1.254-2.964t2.907-1.254l91.713 0q1.71 0 2.964 1.254t1.197 2.964zm0-33.402l0 8.379q.057 1.71-1.197 2.964t-2.964 1.197l-91.713 0q-1.653 0-2.907-1.254t-1.254-2.907l0-8.379q0-1.653 1.254-2.907t2.907-1.254l91.713 0q1.71 0 2.964 1.254t1.197 2.907zm0-33.345l0 8.379q.057 1.653-1.197 2.907t-2.964 1.254l-91.713 0q-1.653 0-2.907-1.254t-1.254-2.907l0-8.379q0-1.71 1.254-2.964t2.907-1.197l91.713 0q1.71-.057 2.964 1.197t1.197 2.964z",width:100,height:83.362};var Z="M9.9,9.9C9.9,10,9.8,10,9.7,10c-0.1,0-0.2,0-0.2-0.1L5,5.4L0.5,9.9C\n    0.5,10,0.4,10,0.3,10c-0.1,0-0.2,0-0.2-0.1C0,9.8,0,9.6,0.1,9.5L4.6,5L\n    0.1,0.5C0,0.4,0,0.2,0.1,0.1C0.2,0,0.4,0,0.5,0.1L5,4.6l4.4-4.5C9.6,0,\n    9.8,0,9.9,0.1c0.1,0.1,0.1,0.3,0,0.4L5.4,5l4.5,4.5C10,9.6,10,9.8,9.9,\n    9.9z";var Q="M7.73732912,6.67985439 C7.75204857,6.69246326 7.76639529,\n    6.70573509 7.7803301,6.7196699 L9.65165045,8.59099025 C9.94454365,\n    8.8838835 9.94454365,9.3587572 9.65165045,9.65165045 C9.3587572,\n    9.94454365 8.8838835,9.94454365 8.59099025,9.65165045 L6.7196699,\n    7.7803301 C6.70573509,7.76639529 6.69246326,7.75204857 6.67985439,\n    7.73732912 C5.99121283,8.21804812 5.15353311,8.5 4.25,8.5 C1.90278981,\n    8.5 0,6.59721019 0,4.25 C0,1.90278981 1.90278981,0 4.25,0 C6.59721019,\n    0 8.5,1.90278981 8.5,4.25 C8.5,5.15353311 8.21804812,5.99121283\n    7.73732912,6.67985439 L7.73732912,6.67985439 Z M4.25,7.5 C6.04492544,\n    7.5 7.5,6.04492544 7.5,4.25 C7.5,2.45507456 6.04492544,1 4.25,1\n    C2.45507456,1 1,2.45507456 1,4.25 C1,6.04492544 2.45507456,7.5 4.25,\n    7.5 L4.25,7.5 Z";var Y=function(e){H(t,e);function t(){j(this,t);return U(this,G(t).apply(this,arguments))}F(t,[{key:"render",value:function e(){return s.createElement("a",{href:"#main-content","data-skip-to-main":true,className:(0,o.css)(f.default.skipToMain)},i18n._("Skip to main content"))}}]);return t}(s.Component);var V=function(e){H(t,e);function t(){j(this,t);return U(this,G(t).apply(this,arguments))}F(t,[{key:"render",value:function e(){return s.createElement("div",{className:(0,o.css)(ae.pad,ae.navItem,ae.learnMenuSpacer)},i18n._("Courses"))}}]);return t}(s.Component);var J=function(e){H(t,e);function t(e){var u;j(this,t);u=U(this,G(t).call(this,e));B(q(u),"state",{openMenu:u.props.showWelcome?"learn-menu":null,currentUrl:u.props.initialUrl,hovered:false,learnMenuHasBeenClosed:!u.props.showWelcome,signupModal:null,responsiveMenuOpen:false,searchMenuOpen:false,hasLoadedTypeahead:false,SearchBox:null,suggestionSource:null,searchHover:false});B(q(u),"_isMounted",false);B(q(u),"_skipToMainMountNode",null);B(q(u),"responsiveNavMenuId",null);B(q(u),"hasOpenedNotifications",false);B(q(u),"handleFocus",function(){if(l.default.touchevents){return}if(u._isMounted){u.setState({hovered:true})}});B(q(u),"handleBlur",function(e){if(!(e.target instanceof HTMLElement)){return}var t=e.target.getAttribute("data-do-not-blur-header-on-search-bar-close");if(t){return}if(u._isMounted){u.setState({hovered:false})}});B(q(u),"handleBodyClick",function(e){if(!u._isMounted||u.state.openMenu===null||u.props.showWelcome&&!u.state.learnMenuHasBeenClosed){return}var t=a.default.findDOMNode(u.refs.notificationsDropdown);var n=a.default.findDOMNode(u.refs.profileDropdown);var r=a.default.findDOMNode(u.refs.learnMenu);var o=e.target;while(o!==document.body){if(o===t||o===n||o===r){return}if(o instanceof HTMLElement){o=o.parentNode}else{return}}if(u.state.openMenu==="learn-menu"){u.hideDashboardSpacer()}if(u._isMounted){u.setState({openMenu:null,learnMenuHasBeenClosed:true})}});B(q(u),"handleUserClick",function(){if(!u.hasOpenedNotifications){if(u.props.onLoadNotifications){u.props.onLoadNotifications()}u.hasOpenedNotifications=true}if(u.state.openMenu!=="user"){d.default.markMinorConversions([{id:"global_nav_open_user_menu",extra:{view:"desktop"}}]);if(u.state.openMenu==="learn-menu"){u.hideDashboardSpacer()}if(u._isMounted){u.setState({openMenu:"user"})}}else{u.handleUserClose()}});B(q(u),"handleUserClose",function(){if(u._isMounted){u.setState({openMenu:null})}});B(q(u),"handleLearnMenuClick",function(){if(u.state.openMenu!=="learn-menu"&&!u.props.missionPercentages&&!!u.props.userProfileData){u.props.onRequestMissionPercentages()}if(u.state.openMenu==="learn-menu"){u.handleLearnMenuClose()}else{d.default.markMinorConversions([{id:"global_nav_open_learn_menu"}]);if(u._isMounted){u.setState({openMenu:"learn-menu"})}}});B(q(u),"handleLearnMenuClose",function(){if(u._isMounted){u.setState({openMenu:null,learnMenuHasBeenClosed:true})}u.hideDashboardSpacer()});B(q(u),"handleResponsiveMenuKeyUp",function(e){if(e.key===" "||e.key==="Escape"&&u.state.responsiveMenuOpen){e.preventDefault();u.handleResponsiveMenuToggle()}});B(q(u),"handleResponsiveMenuKeyDown",function(e){if(e.key==="Enter"){e.preventDefault();u.handleResponsiveMenuToggle()}});B(q(u),"handleResponsiveMenuToggle",function(){var e=!u.state.responsiveMenuOpen;var t=window.navigator.userAgent;var n=t.indexOf("Safari")>=0&&t.indexOf("Mobile")>=0&&t.indexOf("Chrome")<0;var r=u.getOuterWrapper();if(e){if(typeof document!=="undefined"&&document.body){document.body.style.overflowY="hidden"}if(n&&r){r.style.overflowY="hidden";r.style.height="100vh"}}else{if(typeof document!=="undefined"&&document.body){document.body.style.overflowY="auto"}if(n&&r){r.style.overflowY="auto";r.style.height="auto"}}if(e){d.default.markMinorConversions([{id:"global_nav_open_mobile"}])}if(u._isMounted){u.setState({responsiveMenuOpen:e})}});B(q(u),"handleSearchClick",function(e){e.preventDefault();d.default.markMinorConversions([{id:"global_nav_start_search",extra:{view:"desktop"}}]);if(!u.state.hasLoadedTypeahead){Promise.all([Promise.all([r.e("corelibs"),r.e("corelibs-legacy"),r.e("shared"),r.e("0b988ebdb96e0879bea9cfcf6bd26123")]).then(r.t.bind(null,"IhkI",7)).then(function(e){return e.default}),Promise.all([r.e("corelibs-legacy"),r.e("3fa99068de23e9956e10785c83deca6d"),r.e("e5119190b3b1fc593f0bbb6763d4403c"),r.e("2fa20733d55dcbdaff7fcae2ed5921ee")]).then(r.t.bind(null,"wpa5",7)).then(function(e){return e.default}),r.e("71d7bf16d56f1d99fee60c46e86a0b6d").then(r.t.bind(null,"qaUz",7))]).then(function(e){var t=L(e,2),n=t[0],r=t[1];if(u._isMounted){u.setState({SearchBox:n,suggestionSource:r,hasLoadedTypeahead:true,searchMenuOpen:true,searchHover:false})}})}else{if(u._isMounted){u.setState({searchMenuOpen:true,searchHover:false})}}});B(q(u),"handleSearchExit",function(e){e&&e.preventDefault();if(u._isMounted){u.setState({searchMenuOpen:false});setTimeout(function(){if(u._isMounted&&u.searchBoxRef){u.searchBoxRef.focus()}})}});B(q(u),"shouldUseLoginModal",function(){var e=window.location.pathname==="/login";var t=window.location.hostname.endsWith(".appspot.com")&&(window.location.hostname.startsWith("vm-dot-")||window.location.hostname.indexOf("-dot-vm-dot")!==-1);var n=v.default.isPhone||e||t;if(n){return false}return!!u.state.signupModal});B(q(u),"hideDashboardSpacer",function(){if(typeof document!=="undefined"&&document.body){document.body.classList.add("bibliotron-hide-spacer")}});B(q(u),"getProfileDropdownData",function(){if(!u.props.userProfileData){return null}var e=u.props.userProfileData,t=e.hasChildStudents,n=e.hasStudents,r=e.isChildAccount,o=e.isMidsignupPhantom,a=e.isPhantom,i=e.profileRoot,s=e.nickname,l=e.avatarSrc;return{profileUrl:i,avatarImage:l,nickName:s,isPhantom:a,showSignUpToSave:a&&!o,hasStudents:n,hasChildren:n&&t,showSettings:!a,showCoachingLinks:!r}});B(q(u),"getBackgroundColor",function(){if(u.getIsOpaque()){return $}else if(u.props.transparent){return"transparent"}else if(u.props.pageDomain&&u.props.allowDomainTheming){return n.default.darkBlue}else{return"transparent"}});B(q(u),"getSearchBackgroundColor",function(){if(u.state.searchHover){return h.default.colors.gray90}else if(u.getIsOpaque()){if(u.state.searchMenuOpen){return h.default.colors.gray97}return h.default.colors.gray95}else if(u.props.pageDomain&&u.props.allowDomainTheming){return(0,n.mix)((0,n.fade)(n.default.white,.08),n.default.darkBlue)}else if(u.props.transparent){var e=p.default.parse(h.default.colors.white);return p.default.format(p.default.fade(e,.2))}else{return"transparent"}});B(q(u),"getUserIsPhantom",function(){return!!u.props.userProfileData&&u.props.userProfileData.isPhantom!==false});B(q(u),"markSigninSignupLinkClicked",function(){d.default.markConversion("global_nav_signin_signup_clicked")});B(q(u),"markSignupLinkClicked",function(){d.default.markConversion("global_nav_signup_clicked")});B(q(u),"renderProminentSearchContents",function(){var e=s.createElement(i.View,{style:[].concat(u.getNavItemStyles(),[u.getIsOpaque()&&ae.opaqueSearchIcon])},s.createElement(g.default,{icon:Q,size:ne}));var t=u.getSearchBackgroundColor();if(u.state.searchMenuOpen){return s.createElement("div",{className:(0,o.css)(ae.headerContents,ae.alignLeft)},u.renderCloseSearchLink(),s.createElement(V,null),s.createElement(c.default,{transitionStyle:{appear:ae.enterSearch,appearActive:ae.enterActiveSearch},transitionAppearTimeout:300},s.createElement("div",{className:(0,o.css)(ae.searchWrapper,ae.activeSearchWrapper)},s.createElement("div",{style:{backgroundColor:t},className:(0,o.css)(ae.searchBackground)},s.createElement("div",{className:(0,o.css)(ae.searchBoxContainer)},s.createElement(N.default,{onEscape:u.handleSearchExit,isBibliotron:true,searchFormStyles:[ae.navItem,ae.navItemWhenOpaque,ae.searchForm,ae.wonderBlocksNavItem].filter(function(e){return!!e}),searchInputStyles:[ae.searchInput,ae.prominentSearchInput,ae.wonderBlocksNavItem].filter(function(e){return!!e}),SearchBox:u.state.SearchBox,spacer:u.renderProminentSearchSpacer(),suggestionSource:u.state.suggestionSource}),e)))))}else{return s.createElement("div",{className:(0,o.css)(ae.headerContents)},s.createElement("div",{className:(0,o.css)(ae.headerSection,ae.grow,ae.alignLeft,ae.hideOnPrint)},u.renderLearnMenu(),s.createElement("div",{className:(0,o.css)(ae.searchWrapper)},s.createElement("a",{ref:function e(t){return u.searchBoxRef=t},"data-hack-search-button-label":true,"aria-label":i18n._("Search for courses, skills, and videos"),href:"/search",className:(0,o.css)(ae.navItem,u.getIsOpaque()&&ae.searchOpaque,ae.searchBackground),onClick:u.handleSearchClick,onMouseEnter:function e(){if(u._isMounted){u.setState({searchHover:true})}},onMouseLeave:function e(){if(u._isMounted){u.setState({searchHover:false})}},style:{backgroundColor:t},"data-test-id":"navbar-search-button"},s.createElement("div",{className:(0,o.css)(ae.searchBoxContainer)},s.createElement("span",{className:(0,o.css)(ae.inactiveSearch,ae.wonderBlocksNavItem)},i18n._("Search")),e)))),s.createElement("div",{className:(0,o.css)(ae.headerSection)},u.renderLogo()),s.createElement("div",{className:(0,o.css)(ae.headerSection,ae.grow,ae.alignRight,ae.hideOnPrint)},u.getUserIsLoggedIn()?u.renderLoggedInItems():u.renderLoggedOutItems(),u.renderResponsiveMenuItems()))}});B(q(u),"renderCloseSearchLink",function(){return s.createElement("a",{href:"javascript:void 0",className:o.css.apply(void 0,u.getNavItemStyles()),onClick:u.handleSearchExit,"data-test-id":"header-search-close","aria-label":"Close search"},s.createElement(g.default,{icon:Z,size:15,color:X}))});B(q(u),"renderSearchResultsSpacer",function(){return s.createElement("div",{className:(0,o.css)(ae.searchResultsSpacer)},s.createElement(V,null))});B(q(u),"renderProminentSearchSpacer",function(){return s.createElement("div",{className:(0,o.css)(ae.prominentSearchResultsSpacer)},s.createElement(V,null))});B(q(u),"renderLogo",function(){return s.createElement(I.default,{logoStyles:[].concat(u.getNavItemStyles(),[ae.logo]),linkAttributes:S.default.handlers(["global_nav_visit_home"]),transparent:!u.getIsOpaque()})});B(q(u),"renderLearnMenu",function(){var e=u.props.domains;return s.createElement(M.default,{ref:"learnMenu",domains:e,missionPercentages:u.props.missionPercentages,onDropdownToggle:u.handleLearnMenuClick,onDropdownClose:u.handleLearnMenuClose,showDropdown:u.state.openMenu==="learn-menu",buttonStyles:u.getTextNavItemStyles(),transparent:!u.getIsOpaque(),showWelcome:u.props.showWelcome})});B(q(u),"renderResponsiveMenuItems",function(){var e=[];if(!u.props.hideSearchBar){e=e.concat([s.createElement("div",{key:"responsive-search",className:(0,o.css)(ae.responsiveMenuItemWrapper)},s.createElement("a",T({className:o.css.apply(void 0,u.getNavItemStyles().concat([ae.responsiveMenuLink,ae.responsiveSearchIcon]))},S.default.handlersWithExtras([{id:"global_nav_start_search",extra:{view:"mobile"}}]),{href:"/search","data-test-id":"mobile-search-button"}),s.createElement("span",{className:(0,o.css)(f.default.srOnly)},i18n._("Search for courses, skills, and videos")),s.createElement(g.default,{icon:Q,size:ne})))])}if(!u.props.showWelcome){var t=u.state.responsiveMenuOpen?i18n._("Close menu"):i18n._("Open menu");e=e.concat([s.createElement("div",{key:"responsive-dropdown-menu",className:(0,o.css)(ae.responsiveMenuItemWrapper)},s.createElement("button",{onClick:u.handleResponsiveMenuToggle,onKeyUp:u.handleResponsiveMenuKeyUp,onKeyDown:u.handleResponsiveMenuKeyDown,className:o.css.apply(void 0,[ae.notAButton].concat(u.getNavItemStyles(),[ae.responsiveMenuLink])),"data-test-id":"mobile-header-menu-button","aria-expanded":u.state.responsiveMenuOpen,"aria-label":t,"aria-controls":u.responsiveNavMenuId},u.state.responsiveMenuOpen?s.createElement(i.View,{style:ae.navItemDarkColor},s.createElement(g.default,{icon:Z,size:17})):s.createElement(g.default,{icon:K,size:14})))])}return e});B(q(u),"renderResponsiveNavMenu",function(){return s.createElement("div",{className:(0,o.css)(ae.responsiveNavMenuWrapper),"data-test-id":"responsive-nav-menu",id:u.responsiveNavMenuId,role:"menu"},s.createElement(c.default,{transitionStyle:{enter:ae.responsiveNavMenuClosed,enterActive:ae.responsiveNavMenuOpen,leave:ae.responsiveNavMenuOpen,leaveActive:ae.responsiveNavMenuClosed},transitionEnterTimeout:300,transitionLeaveTimeout:300},u.state.responsiveMenuOpen?s.createElement(C.default,{domains:u.props.domains,profileData:u.getProfileDropdownData(),notifications:u.props.notifications,loadNotifications:u.props.onLoadNotifications,onOpenNotifications:u.props.onOpenNotifications,onClickLink:u.handleResponsiveMenuToggle}):null))});u.responsiveNavMenuId=e.idGenerator("responsive-nav-menu");return u}F(t,[{key:"componentDidMount",value:function e(){var t=this;this._isMounted=true;this.setState({currentUrl:location.pathname+location.hash});var n=this.props.userProfileData;if(!n||n.isPhantom){Promise.all([r.e("corelibs"),r.e("corelibs-legacy"),r.e("shared"),r.e("shared-components"),r.e("wonder-blocks"),r.e("3fa99068de23e9956e10785c83deca6d"),r.e("202ffdaf65bb3b99881b549c4a77dff1"),r.e("db57c62ad4591639c4cc7623f02f750f"),r.e("9a87944f1b8caa5e159abb50478ca44a"),r.e("0e1b29d63682f2632b2fc88efac86494"),r.e("21435a7405f9d440a442f9c4e9f7d3cd"),r.e("b8a4d2626d84b9d3c29517e3f55cb676"),r.e("8ba89738e0cc3f43cdc1e489ace4fad2"),r.e("f073b6a96a1bf7ab796418cb12338596"),r.e("d82bb919bf587dbc56e367de5f5928dc"),r.e("4ee3eca946cb236d4ae69a96a9376e8d"),r.e("99a2d7570bfe02138819469ab1af6970"),r.e("e60a1775e2419faf5a23f8bb4ac8d007"),r.e("ef2415f238e49baab5d7f5919e09f390"),r.e("d8bedab3a65ee5615b10b9a845382096"),r.e("875f0d644ab369028394d58d220ee06f"),r.e("b45d75f95aaa5af6a0175ae5692ae1c9")]).then(r.t.bind(null,"++Bp",7)).then(function(e){if(t._isMounted){t.setState({signupModal:e})}})}if(this.props.showWelcome&&!this.props.missionPercentages){this.props.onRequestMissionPercentages()}if(typeof document!=="undefined"&&document.body){document.body.addEventListener("click",this.handleBodyClick)}this.addSkipToMainToDOM()}},{key:"componentWillUnmount",value:function e(){if(typeof document!=="undefined"&&document.body){document.body.removeEventListener("click",this.handleBodyClick)}this._isMounted=false;var t=this._skipToMainMountNode;if(!t){return}a.default.unmountComponentAtNode(t)}},{key:"getOuterWrapper",value:function e(){return document.getElementById("outer-wrapper")||document.body}},{key:"getNavItemStyles",value:function e(){return[ae.pad,ae.navItem,this.getIsOpaque()&&ae.navItemWhenOpaque,ae.wonderBlocksNavItem]}},{key:"getTextNavItemStyles",value:function e(){return[].concat(this.getNavItemStyles(),[ae.textNavItem,this.getIsOpaque()&&ae.textNavItemWhenOpaque])}},{key:"getDonateStyles",value:function e(){return[].concat(this.getTextNavItemStyles(),[ae.hideWhenSmall])}},{key:"getIsOpaque",value:function e(){if(!this.props.transparent&&!this.props.pageDomain){return true}return this.state.hovered||this.state.openMenu!==null||this.state.responsiveMenuOpen||this.state.searchMenuOpen}},{key:"getUserIsLoggedIn",value:function e(){return this.props.userProfileData&&this.props.userProfileData.isPhantom===false}},{key:"addSkipToMainToDOM",value:function e(){var t=this.getOuterWrapper();if(!this.props.showSkipToMain||!t){return null}var n=document.createElement("div");this._skipToMainMountNode=n;t.insertBefore(n,t.firstChild);if(this._skipToMainMountNode){a.default.render(s.createElement(Y,null),this._skipToMainMountNode)}}},{key:"renderLoginLink",value:function e(){var t=this;if(this.shouldUseLoginModal()){return s.createElement(y.default,{ariaLabel:i18n._("Login (Opens a modal)"),focusId:"login-or-signup",key:"signin-link",modal:this.getSignupModal()},function(n,e){return s.createElement("a",{"aria-label":e,href:O.default.getLoginURL(),id:"login-or-signup",onClick:function e(t){t.preventDefault();d.default.markMinorConversions([{id:"global_nav_login_clicked"}]);n()},rel:"nofollow",className:o.css.apply(void 0,t.getTextNavItemStyles().concat([ae.hideWhenSmall,ae.withLeftMargin]))},i18n._("Login"))})}return s.createElement("a",T({href:O.default.getLoginURL()},S.default.handlers(["global_nav_login_clicked"]),{id:"login-or-signup",key:"signin-link",rel:"nofollow",className:o.css.apply(void 0,this.getTextNavItemStyles().concat([ae.hideWhenSmall,ae.withLeftMargin]))}),i18n._("Login"))}},{key:"renderLoggedInItems",value:function e(){var t=this.props,n=t.notifications,r=t.onLoadNotifications,o=t.signUpUrl;var a=u.default.featureFlag("SHOW_LOGGED_IN_DONATE_LINK");var i=[s.createElement(E.default,T({key:"user-dropdown",ref:"profileDropdown",onDropdownToggle:this.handleUserClick,onDropdownClose:this.handleUserClose,showDropdown:this.state.openMenu==="user",buttonStyles:[this.getTextNavItemStyles(),ae.withLeftMargin],currentUrl:this.state.currentUrl,signUpUrl:o,profileData:this.getProfileDropdownData()},n,{onOpenNotifications:this.props.onOpenNotifications,onScrollToBottom:r}))];if(a){i.unshift([s.createElement(m.default,T({key:"donate-link","data-test-id":"header-donate-link"},S.default.handlersWithExtras([{id:"global_nav_donate_clicked",extra:{view:"desktop",isLoggedIn:true,isPhantom:false,kaid:u.default.getKaid()}}]),{href:"/donate",style:[].concat(this.getDonateStyles())}),i18n._("Donate"))])}return i}},{key:"getSignupModal",value:function e(){if(!this.state.signupModal){return s.createElement(i.View,null)}var t=location.pathname+location.search+location.hash;return s.createElement(this.state.signupModal.default,{continueUrl:t,initialPurpose:"login"})}},{key:"renderLoggedOutItems",value:function e(){return[s.createElement(m.default,T({key:"donate-link","data-test-id":"header-donate-link"},S.default.handlersWithExtras([{id:"global_nav_donate_clicked",extra:{view:"desktop",isLoggedIn:false,isPhantom:this.getUserIsPhantom(),kaid:u.default.getKaid()}}]),{href:"/donate",style:[].concat(this.getDonateStyles())}),i18n._("Donate")),this.renderLoginLink(),s.createElement("a",{key:"signup-link",href:O.default.getSignupURL(),rel:"nofollow",className:o.css.apply(void 0,this.getTextNavItemStyles().concat([ae.hideWhenSmall,ae.withLeftMargin])),onClick:this.markSignupLinkClicked},i18n._("Sign up"))]}},{key:"render",value:function e(){return s.createElement("div",{className:(0,o.css)(ae.wrapper,this.props.transparent&&ae.wrapperFloat,this.getIsOpaque()&&ae.headerActive),style:{backgroundColor:this.getBackgroundColor()}},s.createElement("nav",{className:(0,o.css)(ae.header,this.props.fullBleed&&ae.headerFullBleed),onFocus:this.handleFocus,onBlur:this.handleBlur,onMouseEnter:this.handleFocus,onMouseLeave:this.handleBlur,role:"navigation"},this.renderProminentSearchContents()),this.renderResponsiveNavMenu())}}]);return t}(s.Component);B(J,"defaultProps",{hideSearchBar:false,hideSignupInHeader:false,notifications:{newNotificationCount:0,notifications:[],loading:true,teaser:null},onLoadNotifications:function e(){},onOpenNotifications:function e(){},onRequestMissionPercentages:function e(){},showSkipToMain:true,showWelcome:false});var X=n.default.blue;var $=n.default.white;var ee=32;var te=20;var ne=20;var re=10;var oe=400;var ae=o.StyleSheet.create({wrapper:{borderTop:"1px solid transparent",borderBottom:"1px solid rgba(255, 255, 255, 0.3)",boxSizing:"border-box",height:h.default.pageHeaderHeight,left:0,position:"relative",right:0,zIndex:w.default.zindexHeader,"@media print":{backgroundColor:n.default.white}},wrapperFloat:{position:"absolute"},header:{maxWidth:w.default.maxContainerWidth,marginLeft:"auto",marginRight:"auto",width:"100%",height:"100%"},headerContents:{display:"flex",height:"100%",alignItems:"center","@media print":{justifyContent:"center"}},headerActive:B({borderTop:"1px solid ".concat(h.default.colors.gray85),borderBottom:"1px solid ".concat(h.default.colors.gray85)},b.default.smOrSmaller,{background:h.default.colors.gray98}),headerFullBleed:{maxWidth:"none"},headerSection:{alignItems:"center",display:"flex",height:"100%"},hideOnPrint:{"@media print":{display:"none"}},learnMenuSpacer:{paddingRight:16,pointerEvents:"none",visibility:"hidden",whiteSpace:"nowrap"},searchResultsSpacer:{marginLeft:ee+ne+te},prominentSearchResultsSpacer:{marginLeft:ee+re},logo:B({},b.default.smOrSmaller,{paddingLeft:h.default.pageHeaderHorizontalPaddingMobile}),grow:{flexGrow:1,width:0},alignLeft:B({justifyContent:"flex-start",paddingLeft:h.default.pageHeaderHorizontalPadding},b.default.smOrSmaller,{display:"none"}),alignRight:B({justifyContent:"flex-end",paddingRight:h.default.pageHeaderHorizontalPadding},b.default.smOrSmaller,{paddingRight:0}),pad:{alignItems:"center",display:"flex",height:"100%"},navItem:{color:$,fontFamily:"inherit",fontSize:15,fontWeight:"bold",textDecoration:"none",":hover":{textDecoration:"none"}},navItemWhenOpaque:{color:X,":hover":{textDecoration:"none"}},textNavItem:{":focus":{boxShadow:"inset 0 -3px 0 0 ".concat($)}},textNavItemWhenOpaque:{":focus":{boxShadow:"inset 0 -3px 0 0 ".concat(X)}},navItemDarkColor:{color:X},searchOpaque:{color:"#1B65E9"},withLeftMargin:{marginLeft:32},searchForm:{flexGrow:1},searchInput:{border:"none",fontFamily:h.default.fonts.regular,fontSize:15,height:"auto",marginLeft:te,outline:"none",width:300},searchWrapper:{paddingTop:10,paddingBottom:10,marginLeft:ee,marginRight:ee,width:200,boxSizing:"border-box",height:"100%"},activeSearchWrapper:{maxWidth:"none",width:oe},enterSearch:{maxWidth:200,transition:"max-width 0.2s ease-out"},enterActiveSearch:{maxWidth:oe},searchBackground:{flex:1,height:40,display:"flex",flexDirection:"row",alignItems:"center",borderRadius:4},searchBoxContainer:{flex:1,display:"flex",alignItems:"center",paddingLeft:re,paddingRight:10,outline:"1px solid rgba(0,0,0,0)"},prominentSearchInput:{height:"100%",width:"100%",backgroundColor:"transparent",marginLeft:0},inactiveSearch:{flexGrow:1},opaqueSearchIcon:{color:h.default.colors.gray68},hideWhenSmall:B({},b.default.smOrSmaller,{display:"none"}),responsiveNavMenuWrapper:B({background:h.default.colors.white,left:0,position:"absolute",right:0},b.default.mdOrLarger,{display:"none"}),responsiveNavMenuOpen:{maxHeight:1e3,transition:"max-height .3s",overflow:"hidden"},responsiveNavMenuClosed:{maxHeight:0,transition:"max-height .3s",overflow:"hidden"},responsiveMenuItemWrapper:B({alignItems:"stretch",display:"none"},b.default.smOrSmaller,{display:"flex"}),responsiveMenuLink:{height:"auto",marginRight:h.default.pageHeaderHorizontalPaddingMobile},responsiveSearchIcon:{marginRight:25},notAButton:{backgroundColor:"transparent",border:"none"},wonderBlocksNavItem:P({},h.default.typography.wonderBlocksLabelLarge)});e.exports=J},"30Ry":function(e,t,n){"use strict";n("5DmW");n("NBAS");var c=o(n("q1tI"));var f=r(n("Q8Wn"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function s(e,t,n){if(t)i(e.prototype,t);if(n)i(e,n);return e}function l(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return u(e)}function u(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function d(e){d=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return d(e)}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return h(e,t)}function g(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var v=n("17x9");var i18n=n("HEOz");var m=n("mR6N"),b=m.css;var y=function(e){p(t,e);function t(){a(this,t);return l(this,d(t).apply(this,arguments))}s(t,[{key:"render",value:function e(){var t=this.props,n=t.onEscape,r=t.SearchBox,o=t.searchInputStyles,a=t.searchFormStyles,i=t.spacer,s=t.suggestionSource;var l=i18n._("Search for courses, skills, and videos");var u={searchSuggestion:s};return c.createElement(r,{isBibliotron:true,inputClassName:b.apply(void 0,o),formClassName:b.apply(void 0,a),placeholder:l,dataSources:u,initiallyFocused:true,showGoogleResults:!f.default.isZeroRated,extraFormArgs:{referer:window.location.pathname},spacer:i,onEscape:n})}}]);return t}(c.Component);g(y,"propTypes",{SearchBox:v.any.isRequired,onEscape:v.func.isRequired,searchFormStyles:v.arrayOf(v.objectOf(v.any)),searchInputStyles:v.arrayOf(v.objectOf(v.any)),spacer:v.node.isRequired,suggestionSource:v.shape({get:v.func.isRequired}).isRequired});e.exports=y},GmTQ:function(e,t,s){"use strict";s("pNMO");s("4Brf");s("4mDm");s("07d7");s("5s+n");s("3bBZ");var l=s("skGw");var r=n(s("YgFD"));function n(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return i(e)||a(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function a(e,t){var n=[];var r=true;var o=false;var a=undefined;try{for(var i=e[Symbol.iterator](),s;!(r=(s=i.next()).done);r=true){n.push(s.value);if(t&&n.length===t)break}}catch(e){o=true;a=e}finally{try{if(!r&&i["return"]!=null)i["return"]()}finally{if(o)throw a}}return n}function i(e){if(Array.isArray(e))return e}function c(e){return{type:r.default.NEW_NOTIFICATIONS,notifications:e}}function f(){return{type:r.default.CLEAR_NOTIFICATIONS_TEASER}}function d(e){return function(t,n){t(c(e));setTimeout(function(){var e=n();if(e.notifications.teaser!=null){t(f())}},5e3)}}function p(){return{type:r.default.START_LOADING_NOTIFICATIONS}}function h(e,t,n){return{type:r.default.LOADED_NOTIFICATIONS,notifications:e,cursor:t,hasMore:n}}function g(){return function(r,e){r(p());var t=e();var n=t.notifications.lastCursor;var o={};o.casing="camel";if(n){o.cursor=n}var a="/api/internal/user/notifications/readable?".concat((0,l.encodeParams)(o));var i=new Promise(function(e){Promise.all([Promise.all([s.e("corelibs"),s.e("corelibs-legacy"),s.e("shared-components"),s.e("wonder-blocks"),s.e("3fa99068de23e9956e10785c83deca6d"),s.e("a86ce9e1ef373de4d2a1ad309834c528"),s.e("326c71b53d46dcf9ce187853ae2bbcf4"),s.e("d2b510a52740e9565335ffb74418a12e"),s.e("246618b2fb0cda9f132c46b9925c444b"),s.e("f0d35bbabd90e73943b36a12209db0ae")]).then(s.t.bind(null,"3XV4",7)).then(function(e){return e.default}),Promise.all([s.e("corelibs"),s.e("corelibs-legacy"),s.e("shared-components"),s.e("wonder-blocks"),s.e("3fa99068de23e9956e10785c83deca6d"),s.e("a86ce9e1ef373de4d2a1ad309834c528"),s.e("326c71b53d46dcf9ce187853ae2bbcf4"),s.e("d2b510a52740e9565335ffb74418a12e"),s.e("246618b2fb0cda9f132c46b9925c444b"),s.e("f0d35bbabd90e73943b36a12209db0ae")]).then(s.t.bind(null,"2VuT",7)).then(function(e){return e.default}),Promise.all([s.e("corelibs-legacy"),s.e("3fa99068de23e9956e10785c83deca6d")]).then(s.t.bind(null,"q1z7",7)).then(function(e){return e.default}),Promise.all([s.e("corelibs-legacy"),s.e("3fa99068de23e9956e10785c83deca6d")]).then(s.t.bind(null,"e2gc",7)).then(function(e){return e.default}),s.e("0b28f4f33bffd586d20cc87d96f8b279").then(s.t.bind(null,"fYwb",7))]).then(e)});Promise.all([(0,l.khanFetch)(a).then(function(e){return e.json()}),i]).then(function(e){var t=u(e,2),n=t[0],_=t[1];r(h(n.notifications,n.cursor,n.hasMore))})}}function v(){return{type:r.default.CLEARED_NEW_NOTIFICATIONS}}function m(){return function(e){e(v());(0,l.khanFetch)("/api/internal/user/notifications/clear_brand_new",{method:"POST"})}}function b(){return{type:r.default.LOADING_MISSION_PERCENTAGE_DATA}}function y(e){return{type:r.default.LOADED_MISSION_PERCENTAGE_DATA,missions:e}}function w(){return function(t){t(b());(0,l.khanFetch)("/api/internal/user/missions/progress_info?casing=camel").then(function(e){return e.json()}).then(function(e){t(y(e))})}}function O(e){return{type:r.default.UPDATE_PROFILE,profile:e}}e.exports={gotNewNotifications:d,loadMoreNotifications:g,clearNewNotifications:m,loadMissionPercentages:w,updateProfile:O}},"V+Qr":function(e,t,n){"use strict";n("ma9I");n("FZtP");var r=n("RPZL");var o=n("ANjH"),a=o.combineReducers,i=o.applyMiddleware,s=o.createStore;var l=n("TdMD");var u=n("z18T");var c=n("YgFD");function f(e){var r={};e.forEach(function(e){var t=u.getCountPerLevel(e.progressInfo);var n=u.getProgressPercentage(t);r[e.slug]=n});return r}var d=r.freeze({loading:false,missionPercentages:null});function p(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:d;var t=arguments.length>1?arguments[1]:undefined;switch(t.type){case c.LOADING_MISSION_PERCENTAGE_DATA:return r.assign(e,{loading:true});case c.LOADED_MISSION_PERCENTAGE_DATA:return r.assign(e,{loading:false,missionPercentages:f(t.missions)});default:return e}}var h=r.freeze({newNotificationCount:0,notifications:[],loading:false,everLoaded:false,lastCursor:null,hasMore:true,teaser:null});function g(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:h;var t=arguments.length>1?arguments[1]:undefined;switch(t.type){case c.START_LOADING_NOTIFICATIONS:return r.assign(e,{loading:true,everLoaded:true});case c.LOADED_NOTIFICATIONS:return r.assign(e,{notifications:e.notifications.concat(t.notifications),lastCursor:t.cursor,hasMore:t.hasMore,loading:false});case c.NEW_NOTIFICATIONS:return r.assign(e,{notifications:!e.everLoaded?e.notifications:t.notifications.concat(e.notifications),newNotificationCount:e.newNotificationCount+t.notifications.length,teaser:t.notifications.length>0?t.notifications[0].translatedTeaser:null});case c.CLEAR_NOTIFICATIONS_TEASER:return r.assign(e,{teaser:null});case c.CLEARED_NEW_NOTIFICATIONS:return r.assign(e,{newNotificationCount:0});default:return e}}var v=function e(t){return{hasChildStudents:t.get("hasChildStudents"),hasCoachHomepage:t.get("hasCoachHomepage"),hasParentHomepage:t.get("hasParentHomepage"),hasStudents:t.get("hasStudents"),isChildAccount:t.get("isChildAccount"),isMidsignupPhantom:t.get("isMidsignupPhantom"),isPhantom:t.get("isPhantom"),profileRoot:t.get("profileRoot"),nickname:t.get("nickname"),avatarSrc:t.get("avatarSrc")}};function m(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=arguments.length>1?arguments[1]:undefined;switch(t.type){case c.UPDATE_PROFILE:return t.profile&&r.freeze(v(t.profile));default:return e}}var b=a({notifications:g,userProfileData:m,missionData:p});var y=i(l)(s);var w=function e(t,n){return y(b,{notifications:r.assign(h,{newNotificationCount:t}),userProfileData:n&&r.freeze(n)})};e.exports={create:w,notifications:g,userProfileData:m,missionData:p}},YgFD:function(e,t,n){"use strict";e.exports={START_LOADING_NOTIFICATIONS:"PAGE.START_LOADING_NOTIFICATIONS",LOADED_NOTIFICATIONS:"PAGE.LOADED_NOTIFICATIONS",NEW_NOTIFICATIONS:"PAGE.NEW_NOTIFICATIONS",CLEARED_NEW_NOTIFICATIONS:"PAGE.CLEARED_NEW_NOTIFICATIONS",LOADING_MISSION_PERCENTAGE_DATA:"PAGE.LOADING_MISSION_PERCENTAGE_DATA",LOADED_MISSION_PERCENTAGE_DATA:"PAGE.LOADED_MISSION_PERCENTAGE_DATA",UPDATE_PROFILE:"PAGE.UPDATE_PROFILE",CLEAR_NOTIFICATIONS_TEASER:"PAGE.CLEAR_NOTIFICATIONS_TEASER"}},k4db:function(e,t,l){"use strict";l("pNMO");l("4Brf");l("ma9I");l("4mDm");l("zKZe");l("5DmW");l("NBAS");l("07d7");l("5s+n");l("3bBZ");var u=v(l("q1tI"));var n=l("/MKj");var r=l("JimW");var c=g(l("nSHN"));var f=g(l("j6G6"));var d=g(l("Q8Wn"));var p=g(l("Td5A"));var o=g(l("Tipd"));var h=g(l("GmTQ"));var i=g(l("2cot"));var s=l("V+Qr");var a;function g(e){return e&&e.__esModule?e:{default:e}}function v(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function m(){m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};return m.apply(this,arguments)}function b(e,t){return O(e)||w(e,t)||y()}function y(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function w(e,t){var n=[];var r=true;var o=false;var a=undefined;try{for(var i=e[Symbol.iterator](),s;!(r=(s=i.next()).done);r=true){n.push(s.value);if(t&&n.length===t)break}}catch(e){o=true;a=e}finally{try{if(!r&&i["return"]!=null)i["return"]()}finally{if(o)throw a}}return n}function O(e){if(Array.isArray(e))return e}function S(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function C(e,t,n){if(t)N(e.prototype,t);if(n)N(e,n);return e}function I(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return E(e)}function M(e){M=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return M(e)}function E(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function D(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)k(e,t)}function k(e,t){k=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return k(e,t)}function P(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var T=(0,n.connect)(function(e){return e})((a=function(e){D(a,e);function a(){var e;var t;S(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}t=I(this,(e=M(a)).call.apply(e,[this].concat(r)));P(E(t),"_isMounted",false);P(E(t),"handleLoadNotifications",function(){if(t.props.notifications.hasMore&&!t.props.notifications.loading){t.props.dispatch(h.default.loadMoreNotifications())}});P(E(t),"handleOpenNotifications",function(){if(t.props.notifications.newNotificationCount>0){t.props.dispatch(h.default.clearNewNotifications());(0,p.default)({noteCount:0})}});P(E(t),"handleRequestMissionPercentages",function(){if(!t.props.missionData.loading){t.props.dispatch(h.default.loadMissionPercentages())}});return t}C(a,[{key:"componentDidMount",value:function e(){var a=this;this._isMounted=true;(0,p.default)();c.default.register("notifications_added",function(e){if(!a._isMounted){return}var t=e.readable;a.props.dispatch(h.default.gotNewNotifications(t));var n=f.default.getUserProfile();if(n){(0,p.default)({noteCount:n.get("countBrandNewNotifications")+t.length})}});f.default.addProfileChangeListener(function(e){a.props.dispatch(h.default.updateProfile(e))});if(this.props.urgentNotification){var t=this.props.urgentNotification,n=t.urgentNotes,r=t.continuePath;if(n&&n.length){Promise.resolve().then(l.t.bind(null,"qoeO",7)).then(function(e){return e.default}).then(function(e){e.renderUrgent(n,r)})}}if(this.props.footer){var o=window.innerWidth>768;var i=this.props.footer.contentKind;var s=!!d.default.isMobile;if(o||!i||!s){Promise.all([Promise.resolve().then(l.t.bind(null,"i8i4",7)).then(function(e){return e.default}),Promise.all([l.e("corelibs"),l.e("shared-components"),l.e("wonder-blocks"),l.e("e56dbf21b3631cec7d4d55940c99b147")]).then(l.t.bind(null,"Y6C+",7)).then(function(e){return e.default})]).then(function(e){var t=b(e,2),n=t[0],r=t[1];var o=document.getElementById("footer");if(o){n.render(u.createElement(r,m({hideFooter:false},a.props.footer)),o)}})}}}},{key:"componentWillUnmount",value:function e(){this._isMounted=false}},{key:"render",value:function e(){return u.createElement(i.default,{idGenerator:this.props.idGenerator,allowDomainTheming:this.props.allowDomainTheming,domains:this.props.domains,initialUrl:this.props.initialUrl,hideSignupInHeader:this.props.hideSignupInHeader,hideSearchBar:this.props.hideSearchBar,transparent:this.props.transparent,fullBleed:this.props.fullBleed,showWelcome:this.props.showWelcome,notifications:this.props.notifications,userProfileData:this.props.userProfileData,missionPercentages:this.props.missionData.missionPercentages,onLoadNotifications:this.handleLoadNotifications,onOpenNotifications:this.handleOpenNotifications,onRequestMissionPercentages:this.handleRequestMissionPercentages,signUpUrl:o.default.getLoginURL("","/signup"),pageDomain:this.props.pageDomain})}}]);return a}(u.Component),a));var L=function(e){D(a,e);function a(){var e;var t;S(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}t=I(this,(e=M(a)).call.apply(e,[this].concat(r)));P(E(t),"state",{store:(0,s.create)(t.props.initialNotificationCount,t.props.initialUserProfileData)});return t}C(a,[{key:"render",value:function e(){var t=this;return u.createElement(n.Provider,{store:this.state.store},u.createElement(r.UniqueIDProvider,{scope:"page-header",mockOnFirstRender:false},function(e){return u.createElement(T,m({},t.props,{idGenerator:e.get}))}))}}]);return a}(u.Component);e.exports=L},v8iP:function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("zKZe");n("5DmW");n("NBAS");n("FZtP");var l=b(n("q1tI"));var r=m(n("17x9"));var u=n("mR6N");var o=m(n("Pwnf"));var a=m(n("ZpD3"));var c=m(n("mU3e"));var i=m(n("6OHE"));var f=m(n("fBNR"));var d=m(n("j6G6"));var s=m(n("uEGL"));var p=m(n("TJgv"));var h=m(n("Ntfq"));var g=m(n("TRhi"));var v;function m(e){return e&&e.__esModule?e:{default:e}}function b(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function y(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){k(t,e,n[e])})}return t}function w(){w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};return w.apply(this,arguments)}function O(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function N(e,t,n){if(t)S(e.prototype,t);if(n)S(e,n);return e}function C(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return M(e)}function I(e){I=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return I(e)}function M(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function E(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)D(e,t)}function D(e,t){D=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return D(e,t)}function k(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var i18n=n("HEOz");var P=function(e){E(o,e);function o(){var e;var i;O(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++){n[r]=arguments[r]}i=C(this,(e=I(o)).call.apply(e,[this].concat(n)));k(M(i),"state",{showNotifications:!!i.props.showNotifications});k(M(i),"dropdownButton",null);k(M(i),"notificationsSwitch",null);k(M(i),"focusDropdownButton",function(){if(i.dropdownButton){i.dropdownButton.focus()}});k(M(i),"handleDropdownClose",function(){i.focusDropdownButton();i.props.onDropdownClose()});k(M(i),"handleScroll",function(e){if(!i.state.showNotifications){return}var t=e.target,n=t.scrollHeight,r=t.clientHeight,o=t.scrollTop;var a=2;if(o+r>=n-a){i.props.onScrollToBottom();e.preventDefault()}});k(M(i),"handleNavigateToNotificationsSwitch",function(e){if(i.props.showDropdown&&i.notificationsSwitch){e.preventDefault();i.notificationsSwitch.focus()}else if(!i.props.showDropdown){e.preventDefault();i.props.onDropdownToggle()}});k(M(i),"handleToggleClick",function(){i.setState({showNotifications:!i.state.showNotifications})});k(M(i),"handleArrowDownNotificationsSwitch",function(){if(i.firstNavigableChild&&i.firstNavigableChild.firstChild){i.firstNavigableChild.firstChild.focus()}});k(M(i),"handleArrowUpNotificationsSwitch",function(){i.handleDropdownClose()});k(M(i),"handleArrowClose",function(e){e.preventDefault();i.handleDropdownClose()});return i}N(o,[{key:"componentDidMount",value:function e(){if(this.props.showNotifications){this.props.onOpenNotifications()}}},{key:"componentDidUpdate",value:function e(t,n){if(!n.showNotifications&&this.state.showNotifications){this.props.onOpenNotifications();a.default.markMinorConversions([{id:"global_nav_open_notifications",extra:{view:"desktop"}}])}}},{key:"render",value:function e(){var n=this;var t=this.state.showNotifications;var r=this.props,o=r.profileData,a=r.newNotificationCount;var i=d.default.featureFlag("SHOW_LOGGED_IN_DONATE_LINK");var s=a>9?"9+":a;return l.createElement("div",{role:"navigation",className:(0,u.css)(L.wrapper)},l.createElement(c.default,{dropdownIsOpen:this.props.showDropdown,innerRef:function e(t){return n.dropdownButton=t},buttonStyles:this.props.buttonStyles,onClick:this.props.onDropdownToggle,onArrowDown:this.handleNavigateToNotificationsSwitch,onArrowUp:this.handleArrowClose,onEscape:this.handleDropdownClose,testId:"user-dropdown"},l.createElement("span",{className:(0,u.css)(L.trigger,i&&L.shortTrigger),"data-test-id":"header-profile-button"},l.createElement("span",{className:(0,u.css)(L.nicknameDisplay)},o.nickName),a>0&&l.createElement("div",{"aria-label":i18n.ngettext("%(num)s new notification","%(num)s new notifications",a),className:(0,u.css)(L.notificationsBadge)},s))),l.createElement(f.default,{visible:this.props.showDropdown,hasBorder:false,dropdownStyles:[L.dropdown]},l.createElement(h.default,{innerRef:function e(t){return n.notificationsSwitch=t},direction:t?"left":"right",onClick:this.handleToggleClick,onArrowDown:this.handleArrowDownNotificationsSwitch,onArrowUp:this.handleArrowUpNotificationsSwitch,onEscape:this.handleDropdownClose,notificationCount:a,buttonStyles:[L.notificationsSwitch]}),l.createElement("li",{className:(0,u.css)(t&&L.scrollDropdown),onScroll:this.handleScroll},t?l.createElement(p.default,{notifications:this.props.notifications,loading:this.props.loading,onDropdownClose:this.handleDropdownClose,navigateToNotificationsSwitch:this.handleNavigateToNotificationsSwitch,captureFirstNavigableChildRef:function e(t){return n.firstNavigableChild=t}}):l.createElement(g.default,w({signUpUrl:this.props.signUpUrl},this.props.profileData,{onCloseDropdown:this.handleDropdownClose,navigateToNotificationsSwitch:this.handleNavigateToNotificationsSwitch,captureFirstNavigableChildRef:function e(t){return n.firstNavigableChild=t}})))))}}]);return o}(l.Component);k(P,"propTypes",{buttonStyles:r.default.arrayOf(r.default.any),currentUrl:r.default.string,loading:r.default.bool.isRequired,newNotificationCount:r.default.number.isRequired,notifications:p.default.propTypes.notifications,onDropdownToggle:r.default.func,onDropdownClose:r.default.func,onOpenNotifications:r.default.func,onScrollToBottom:r.default.func,profileData:r.default.shape(g.default.propTypes),showDropdown:r.default.bool,showNotifications:r.default.bool,signUpUrl:r.default.string,teaser:r.default.string});k(P,"defaultProps",{showDropdown:false,onDropdownToggle:function e(){},onDropdownClose:function e(){},onOpenNotifications:function e(){},onScrollToBottom:function e(){},buttonStyles:[]});var T=18;var L=u.StyleSheet.create({wrapper:k({display:"inline-block",fontFamily:i.default.fonts.regular,height:"100%",position:"relative"},s.default.smOrSmaller,{display:"none"}),trigger:{maxWidth:205,position:"relative",whiteSpace:"nowrap"},shortTrigger:(v={},k(v,s.default.mdOrLarger,{maxWidth:115}),k(v,s.default.lgOrLarger,{maxWidth:205}),v),nicknameDisplay:{maxWidth:"100%",display:"block",overflow:"hidden",textOverflow:"ellipsis"},notificationsBadge:y({},i.default.typography.labelSmall,{backgroundColor:o.default.blue,borderRadius:T/2,boxSizing:"border-box",color:i.default.colors.white,height:T,lineHeight:"".concat(T,"px"),paddingTop:1,position:"absolute",right:-10,textAlign:"center",top:-7,width:T}),dropdown:{backgroundColor:i.default.colors.gray98,border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:3,right:-8,width:300},scrollDropdown:{height:220,overflowY:"scroll"},notificationsSwitch:{backgroundColor:i.default.colors.white,height:45,":hover":{backgroundColor:i.default.colors.gray95}}});e.exports=P}}]);
//# sourceMappingURL=../../../../../../../sourcemaps/en/javascript/app-shell-package/app-entry~./javascript/page-package/stateful-header-entry.ee32ad04394dc31e4071.js.map