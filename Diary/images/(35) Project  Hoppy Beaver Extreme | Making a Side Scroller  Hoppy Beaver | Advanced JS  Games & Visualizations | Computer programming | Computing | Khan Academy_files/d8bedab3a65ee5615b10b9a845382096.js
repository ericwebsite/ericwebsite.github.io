(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["d8bedab3a65ee5615b10b9a845382096"],{"/BnC":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=[{username:"testadmin",password:"khan1",bio:"has all permissions and capabilities"},{username:"testchild",password:"khan1",bio:"a spawned child of testcoach"},{username:"testcoach",password:"khan1",bio:"a google-user coach of teststudent and testchild"},{username:"testcreator",password:"khan1",bio:"has creator capabilities"},{username:"testcurator",password:"khan1",bio:"has curator capabilities"},{username:"testmaybestudent",password:"khan1",bio:"a user testcoach requested to coach"},{username:"testmoderator",password:"khan1",bio:"has moderator permissions; coaches testcoach/teststudent"},{username:"testnweasupporter",password:"khan1",bio:"has the permissions of nwea support staff"},{username:"testpublisher",password:"khan1",bio:"has curator and publish capabilities"},{username:"testspanishcurator",password:"khan1",bio:"has curator capabilities for es only"},{username:"teststudent",password:"khan1",bio:"a spawned coachee of testcoach"},{username:"teststudent2",password:"khan1",bio:"a non-spawned coachee testcoach and teststudent"},{username:"testunverified",password:"khan1",bio:'an unverified user with the "resend email" banner notification'},{username:"testunverified2",password:"khan1",bio:'an unverified user with the "change email" banner notification'}];t.default=n},"9x/I":function(e,t,r){"use strict";r("ma9I");r("5DmW");r("NBAS");var c=i(r("wd/R"));var d=r("mR6N");var f=a(r("q1tI"));var p=i(r("Pwnf"));var h=i(r("ZpD3"));var v=i(r("Nw73"));var m=a(r("6OHE"));var b=i(r("Q8Wn"));var g=i(r("HYhL"));var n=i(r("mkzS"));var y=i(r("m+8x"));var w=i(r("YmN9"));var O=i(r("3sfC"));function a(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function l(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return E(e)}function S(e){S=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return S(e)}function E(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function k(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)P(e,t)}function P(e,t){P=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return P(e,t)}function j(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var i18n=r("HEOz");var C=i18n._("Please select a valid birthdate.");var F={path:"M8.967 71.687l82.418 0q.735 0 1.274-.539t.539-1.274l0-42.973q-1.813 2.009-3.871 3.675-14.945 11.515-20.825 16.415t-7.693 6.272-4.851 2.695q-3.038 1.372-5.733 1.372l-.098 0q-2.695 0-5.733-1.372t-4.851-2.695q-1.813-1.372-7.693-6.272t-20.825-16.415q-2.058-1.666-3.871-3.675l0 42.973q0 .735.539 1.274t1.274.539zm84.231-62.034q0-2.499-1.813-2.499l-82.418 0q-.735 0-1.274.539t-.539 1.274q0 9.408 8.232 15.925 21.952 17.297 25.676 20.433 5.733 4.851 9.065 4.851l.098 0q2.254 0 5.194-2.009t7.056-5.537q11.662-9.261 22.491-17.738 3.038-2.401 5.635-6.468t2.597-7.399l0-1.372zm7.154-.686l0 60.907q0 3.675-2.646 6.321t-6.321 2.646l-82.418 0q-3.675 0-6.321-2.646t-2.646-6.321l0-60.907q0-3.675 2.646-6.321t6.321-2.646l82.418 0q3.675 0 6.321 2.646t2.646 6.321z",width:100,height:91.88};var B=function e(t,r){var n=c.default.utc().subtract(13,"years");return c.default.utc(t,"YYYY-MM-DD")>n&&r==="learner"};var D=function(e){k(i,e);function i(){var e;var a;o(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}a=u(this,(e=S(i)).call.apply(e,[this].concat(r)));j(E(a),"state",{birthdate:a.props.birthdate||"",birthdateError:"",birthdateFieldInFocus:false});j(E(a),"updateBirthdateFromDateInput",function(e){a.setState({birthdate:e.target.value,birthdateError:""})});j(E(a),"validateBirthdateFromDateInput",function(e){var t=e.target.value;var r=t&&(0,c.default)(t,"YYYY-MM-DD");if(r&&r.isAfter()){a.setState({birthdateError:C})}});j(E(a),"updateBirthdateFromDatepicker",function(e){if(e){if(e.isAfter()){a.setState({birthdateError:C})}else{var t=e.format("YYYY-MM-DD");a.setState({birthdate:t,birthdateError:""})}}});j(E(a),"handleEmailClick",function(e){var t=a.props.role;var r=a.state.birthdate;var n=B(r,t);h.default.markMinorConversions([{id:"signup_email_button_clicked"}]);a.props.onBirthdateChange(r,n);a.props.updateStep("identify")});return a}l(i,[{key:"componentDidUpdate",value:function e(t,r){var n=r.birthdate!==this.state.birthdate;if(n&&!this.state.birthdateError){h.default.markMinorConversions([{id:"signup_birthdate_filled",extra:{isIOS:b.default.isIOS}}])}}},{key:"showSignupButtons",value:function e(){if(this.props.role!=="learner"){return true}return!!(this.state.birthdate&&!this.state.birthdateError)}},{key:"setBirthdateFieldInFocus",value:function e(t){if(t){h.default.markMinorConversions([{id:"signup_birthdate_focused",extra:{isIOS:b.default.isIOS}}])}this.setState({birthdateFieldInFocus:t})}},{key:"maybeRenderSignupButtons",value:function e(){var t=this.props,r=t.continueUrl,n=t.googleContinueUrl,a=t.role,i=t.classCodes,o=t.showFacebookButton;var s=this.state.birthdate;var l=B(s,a);if(!this.showSignupButtons()){return null}var u=l&&!i;return f.createElement("div",{className:(0,d.css)(I.buttons)},!u&&f.createElement("div",{className:(0,d.css)(O.default.signupButtonWrapper)},f.createElement(w.default,{color:m.default.colors.modernGoogle,hoverColor:m.default.colors.modernGoogleHover,width:"100%",size:"large",role:a,googleContinueUrl:n,postLoginContinueUrl:r,minorConversions:[{id:"signup_google_button_clicked"}],classCodes:i,birthdate:s})),!l&&o&&f.createElement("div",{className:(0,d.css)(O.default.signupButtonWrapper)},f.createElement(y.default,{color:m.default.colors.modernFacebook,hoverColor:m.default.colors.modernFacebookHover,width:"100%",size:"large",role:a,postLoginContinueUrl:r,minorConversions:[{id:"signup_facebook_button_clicked"}],classCodes:i})),f.createElement("div",{className:(0,d.css)(O.default.signupButtonWrapper)},f.createElement(v.default,{"data-test-id":"sign-up-with-email-button",color:l?p.default.blue:m.default.colors.kaGreen,hoverColor:l?"#1044a4":m.default.colors.kaGreenHover,width:"100%",size:"large",icon:l?"":F,onClick:this.handleEmailClick},l?i18n._("Sign up by choosing a username"):i18n._("Sign up with Email"))))}},{key:"render",value:function e(){var r=this;var t=this.state,n=t.birthdate,a=t.birthdateError;var i=this.props.role;var o=!this.state.birthdateFieldInFocus&&a;var s=(0,c.default)();var l=(0,c.default)().subtract(120,"years");var u=b.default.isIOS?f.createElement("input",{type:"date",min:l.format("YYYY-MM-DD"),max:s.format("YYYY-MM_DD"),className:(0,d.css)(I.dateInput,o&&O.default.errorInput),value:n,onFocus:function e(t){return r.setBirthdateFieldInFocus(true)},onChange:function e(t){r.updateBirthdateFromDateInput(t);r.validateBirthdateFromDateInput(t)},onBlur:function e(t){r.setBirthdateFieldInFocus(false);r.validateBirthdateFromDateInput(t)}}):f.createElement("div",{className:(0,d.css)(a&&O.default.errorInput)},f.createElement(g.default,{appearance:"blue-mountain",defaultValue:this.state.birthdate,onChange:this.updateBirthdateFromDatepicker,onFocus:function e(t){h.default.markMinorConversions([{id:"signup_birthdate_focused",extra:{isIOS:b.default.isIOS}}])},reportNull:false,showTitles:true}));return f.createElement("div",null,f.createElement("div",{className:(0,d.css)(i==="learner"?I.birthdayPickerWrapper:I.invisibleBirthdayPickerWrapper)},f.createElement("div",{className:(0,d.css)(O.default.label)},f.createElement("div",{className:(0,d.css)(I.birthdayPickerPrompt)},i18n._("What is your date of birth?")),u,f.createElement("div",{className:(0,d.css)(O.default.fieldRequirement,a?O.default.fieldError:O.default.hiddenFieldError)},a))),this.maybeRenderSignupButtons())}}]);return i}(f.Component);j(D,"defaultProps",{under13:false,role:"learner",showFacebookButton:true});var N=40;var I=d.StyleSheet.create({birthdayPickerWrapper:{display:"block",marginBottom:8,height:95},invisibleBirthdayPickerWrapper:{height:0,opacity:0,visibility:"hidden",overflow:"hidden"},birthdayPickerPrompt:{marginBottom:4},dateInput:{height:N,fontSize:n.default.BODY_FONT_SIZE,border:"1px solid ".concat(m.default.colors.gray85),borderRadius:m.borderRadius,minWidth:"50%",outline:"none",":focus":{borderColor:m.default.colors.kaGreen}},buttons:{animationName:{from:{opacity:0},to:{opacity:1}},animationDuration:"500ms"},login:{marginTop:24,marginBottom:72,textAlign:"center",fontSize:n.default.BODY_FONT_SIZE,color:m.default.colors.kaGreen},link:{":hover":{textDecoration:"none",color:m.default.colors.kaGreenHover}}});e.exports=D},DvtR:function(e,t,r){"use strict";r("zKZe");r("5DmW");r("SYor");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var n=o(r("q1tI"));var a=i(r("WjuW"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function s(){s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return s.apply(this,arguments)}var i18n=r("HEOz");var l=function e(t){if(t==="first"){return i18n._("First name")}else if(t==="last"){return i18n._("Last name")}else if(t==="full"){return i18n._("Your name")}else{return null}};var u=function e(t){if(t==="first"){return i18n._("Please tell us your first name.")}else if(t==="last"){return i18n._("Please tell us your last name.")}else if(t==="full"){return i18n._("Please tell us your full name.")}else{return null}};var c=function e(t){return function(e){return e.trim().length===0?u(t):null}};var d=function e(t){return n.createElement(a.default,s({emptyMessage:u(t.nameType),label:l(t.nameType),validator:c(t.nameType)},t))};t.default=d},QuFw:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("2B1R");r("+2oP");r("5DmW");r("NBAS");r("UxlC");r("EnZy");r("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=O(r("q1tI"));var s=r("mR6N");var n=r("vwLt");var l=w(r("Nw73"));var u=w(r("6OHE"));var c=w(r("QCGh"));var a=w(r("Q8Wn"));var i=w(r("mkzS"));var d=w(r("m+8x"));var f=w(r("YmN9"));var p=w(r("JKja"));var h=w(r("3sfC"));var v=w(r("WjuW"));var m=w(r("SW+Y"));var b=w(r("RNI6"));var g=r("WGxL");var y=w(r("/BnC"));function w(e){return e&&e.__esModule?e:{default:e}}function O(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function S(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){N(t,e,r[e])})}return t}function E(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function P(e,t,r){if(t)k(e.prototype,t);if(r)k(e,r);return e}function j(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return F(e)}function C(e){C=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return C(e)}function F(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function B(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)D(e,t)}function D(e,t){D=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return D(e,t)}function N(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var I=r("t1sY");var i18n=r("HEOz");var M={identifierMissing:i18n._("An email or username is required to log in. "+"You can also log in with Google or Facebook."),passwordMissing:i18n._("A password is required to log in.")};var Y=function(e){B(i,e);function i(){var e;var a;E(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}a=j(this,(e=C(i)).call.apply(e,[this].concat(r)));N(F(a),"state",{credentials:{},serverError:null,isSubmitting:false});N(F(a),"handleSubmit",function(e){e.preventDefault();var t=a.getCredentials();if(t){a.doLogin(t)}});N(F(a),"handleSignupClick",function(e){e.preventDefault();a.props.updateStep("intro")});N(F(a),"handleDevSubmit",function(e){var t=e.split(":");var r=t[0];var n=t.slice(1).join(":");a.doLogin({identifier:r,password:n})});return a}P(i,[{key:"doLogin",value:function e(t){var r=this;var n=this.props.classCodes;var a=this.state.isSubmitting;if(a){return}var i=(0,g.getcontinueUrlFromQueryString)()||this.props.continueUrl||null;(0,g.login)({identifier:t.identifier,password:t.password,fkey:I.readCookie("fkey"),continue:i}).then(function(e){window.top.location.replace((0,b.default)({type:"password",continueUrl:i,classCodes:n}))}).catch(function(e){var t=true;if(e&&e.errors&&e.errors.badlogin){t=false;r.setState({serverError:i18n._("Your login or password is incorrect.")})}if(t){r.setState({serverError:i18n._("Error logging in. Please try again.")})}r.setState({isSubmitting:false})});this.setState({isSubmitting:true})}},{key:"getCredentials",value:function e(){var t=this.state.credentials,r=t.identifier,n=t.password;if(r&&n){return{identifier:r,password:n}}return null}},{key:"renderOAuthButtons",value:function e(){var t=this.props,r=t.classCodes,n=t.continueUrl,a=t.googleContinueUrl,i=t.role;return o.createElement("div",{className:(0,s.css)(W.buttons)},o.createElement("div",{className:(0,s.css)(h.default.signupButtonWrapper)},o.createElement(f.default,{color:u.default.colors.modernGoogle,hoverColor:u.default.colors.modernGoogleHover,width:"100%",size:"large",role:i,googleContinueUrl:a,postLoginContinueUrl:n,classCodes:r,minorConversions:[{id:"login_google_button_clicked"}]})),o.createElement("div",{className:(0,s.css)(h.default.signupButtonWrapper)},o.createElement(d.default,{color:u.default.colors.modernFacebook,hoverColor:u.default.colors.modernFacebookHover,width:"100%",size:"large",role:i,postLoginContinueUrl:n,classCodes:r,minorConversions:[{id:"login_facebook_button_clicked"}]})))}},{key:"maybeRenderDevUsers",value:function e(){if(!a.default.IS_DEV_SERVER){return null}var t=y.default.map(function(e){return o.createElement(n.OptionItem,{key:e.username,label:"".concat(e.username,": ").concat(e.bio),value:"".concat(e.username,":").concat(e.password)})});return o.createElement("div",null,o.createElement(n.SingleSelect,{onChange:this.handleDevSubmit,placeholder:"OR log in as an existing user:"},t))}},{key:"renderLoginButtonText",value:function e(){var t=this.state.isSubmitting;return t?i18n._("Logging you in..."):i18n._("Log in")}},{key:"renderLoginForm",value:function e(){var n=this;var t=this.state,r=t.serverError,a=t.isSubmitting;return o.createElement("div",null,o.createElement("div",{className:(0,s.css)(h.default.fieldRequirement,W.serverError,h.default.fieldError)},r),o.createElement(v.default,{testId:"identifier",label:i18n._("Email or username"),emptyMessage:M.identifierMissing,onSubmit:this.handleSubmit,onValidation:function e(t,r){return n.setState({credentials:S({},n.state.credentials,{identifier:t?r:null})})}}),o.createElement(m.default,{testId:"password",emptyMessage:M.passwordMissing,label:i18n._("Password"),onSubmit:this.handleSubmit,onValidation:function e(t,r){return n.setState({credentials:S({},n.state.credentials,{password:t?r:null})})}}),o.createElement(c.default,{href:"/forgotpw",style:[W.link]},i18n._("Forgot password?")),o.createElement(l.default,{width:"100%",size:"large",color:u.default.colors.kaBlueHover,onClick:this.handleSubmit,disabled:!this.getCredentials()||a},this.renderLoginButtonText()),o.createElement("div",{className:(0,s.css)(W.signup)},o.createElement(c.default,{href:"/signup",onClick:this.handleSignupClick,style:[W.link]},i18n._("Create an account"))))}},{key:"render",value:function e(){var t=this.props,r=t.previousStep,n=t.updateStep;return o.createElement(p.default,{showBackButton:!!r,onBackClick:r&&function(){return n(r)}},this.renderOAuthButtons(),this.maybeRenderDevUsers(),this.renderLoginForm())}}]);return i}(o.Component);N(Y,"defaultProps",{role:"learner"});var W=s.StyleSheet.create({buttons:{marginBottom:40},serverError:{height:24,lineHeight:"24px"},signup:{marginTop:24,marginBottom:72,textAlign:"center"},link:{fontSize:i.default.BODY_FONT_SIZE,color:u.default.colors.kaGreen,":hover":{textDecoration:"none",color:u.default.colors.kaGreenHover}}});var L=Y;t.default=L},radk:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("5DmW");r("NBAS");r("07d7");r("JfAA");r("UxlC");r("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var l=s(r("q1tI"));var n=r("mR6N");var u=a(r("JKja"));var c=a(r("P6bW"));var i=a(r("DvtR"));var d=a(r("SW+Y"));var f=a(r("zdYe"));var o=a(r("RNI6"));var p=r("WGxL");function a(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function h(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){E(t,e,r[e])})}return t}function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function b(e,t,r){if(t)m(e.prototype,t);if(r)m(e,r);return e}function g(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return w(e)}function y(e){y=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return y(e)}function w(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function O(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)S(e,t)}function S(e,t){S=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return S(e,t)}function E(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var i18n=r("HEOz");var k=function e(t){var r=function e(t){return l.createElement("span",{dangerouslySetInnerHTML:{__html:t}})};var n={};for(var a=0,i=["username","email","password"];a<i.length;a++){var o=i[a];var s=o+"_html";if(t[o]){n[o]=t[o].toString()}if(t[s]){n[o]=r(t[s])}}return n};var P=function(e){O(a,e);function a(){var e;var i;v(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}i=g(this,(e=y(a)).call.apply(e,[this].concat(r)));E(w(i),"state",{fields:{},fieldErrors:{},isRedirecting:false,isSubmitting:false,serverError:false,signupButtonText:null});E(w(i),"handleEmailSignupSuccess",function(e){var t=i.props,r=t.onEmailSignupSuccess,n=t.referral,a=t.classCodes;if(r){r()}window.top.location.replace((0,o.default)({type:"password",continueUrl:e,referral:n,classCodes:a}))});E(w(i),"handleBackClick",function(e){i.props.updateStep(i.props.previousStep)});E(w(i),"handleSubmit",function(e){e.preventDefault();i.submitForm()});E(w(i),"handleProceedClick",function(e){e.preventDefault();i.submitForm()});E(w(i),"validationHandler",function(n,a){return function(e,t){var r=e?t:null;i.setState({fields:h({},i.state.fields,n(r)),fieldErrors:h({},i.state.fieldErrors,a?a(r):{})})}});return i}b(a,[{key:"getSubmission",value:function e(){var t=this.state.fields,r=t.email,n=t.firstName,a=t.lastName,i=t.password,o=t.username;var s=this.props,l=s.under13,u=s.classCodes;if(!l&&r&&n&&a&&i){return{under13:l,fields:{email:r,firstName:n,lastName:a,password:i}}}else if(l&&o&&i){if(u){return{fields:{username:o,password:i,email:""},under13:l}}else if(r){return{fields:{username:o,password:i,email:r},under13:l}}}return null}},{key:"submitForm",value:function e(){var r=this;var t=this.getSubmission();if(t===null){return}var n=this.props,a=n.birthdate,i=n.role,o=n.referral,s=n.classCodes;var l=(0,p.getcontinueUrlFromQueryString)()||this.props.continueUrl||null;var u=s?s.join(","):"";var c={password:t.fields.password,email:t.fields.email,classCodes:u,continue:l,birthdate:a,referral:o};var d=t.under13?(0,p.signupUnder13)(h({},c,{parent_email:t.fields.email,username:t.fields.username})):(0,p.signup)(h({},c,{firstname:t.fields.firstName,lastname:t.fields.lastName,role:i}));d.then(function(e){r.handleEmailSignupSuccess(e.continueUrl);r.setState({isRedirecting:true})}).catch(function(e){if(e&&e.errors){var t=k(e.errors);if(Object.keys(t).length===0){r.setState({serverError:true})}r.setState({fieldErrors:t})}r.setState({isSubmitting:false})});this.setState({isSubmitting:true,serverError:false})}},{key:"renderNameFields",value:function e(){return l.createElement("div",{className:(0,n.css)(j.nameFields)},l.createElement("div",{className:(0,n.css)(j.nameFieldWrapper)},l.createElement(i.default,{testId:"signup-first-name-field",nameType:"first",onValidation:this.validationHandler(function(e){return{firstName:e}}),onSubmit:this.handleSubmit})),l.createElement("div",{className:(0,n.css)(j.nameFieldWrapper)},l.createElement(i.default,{testId:"signup-last-name-field",nameType:"last",onValidation:this.validationHandler(function(e){return{lastName:e}}),onSubmit:this.handleSubmit})))}},{key:"renderServerError",value:function e(){var t=this.state.serverError;return t&&i18n._("Sorry, we saw an unexpected error! Please try again later.")}},{key:"renderProceedButtonLabel",value:function e(){var t=this.state,r=t.isRedirecting,n=t.isSubmitting;if(r){return i18n._("Logging you in...")}else if(n){return i18n._("Signing up...")}else{return i18n._("Sign up")}}},{key:"renderEmailFieldLabel",value:function e(){var t=this.props.under13;if(t){return i18n._("Your parent or guardian's email")}else{return i18n._("Your email")}}},{key:"renderEmailFieldNotice",value:function e(){var t=this.props.under13;if(t){return i18n._("You’re under 13 and we think that’s awesome, but we need to notify a caregiver of your account.")}return null}},{key:"render",value:function e(){var t=this.props,r=t.under13,n=t.classCodes;var a=this.state,i=a.fieldErrors,o=a.isSubmitting;var s=r&&n;return l.createElement(u.default,{showBackButton:true,onBackClick:this.handleBackClick,showProceedButton:true,proceedLabel:this.renderProceedButtonLabel(),proceedDisabled:!this.getSubmission()||o,onProceedClick:this.handleProceedClick},!s&&l.createElement(c.default,{testId:"signup-email-field",label:this.renderEmailFieldLabel(),notice:this.renderEmailFieldNotice(),error:i.email,onValidation:this.validationHandler(function(e){return{email:e}},function(){return{email:null}}),onSubmit:this.handleSubmit}),r?l.createElement(f.default,{error:i.username,onValidation:this.validationHandler(function(e){return{username:e}},function(){return{username:null}}),onSubmit:this.handleSubmit}):this.renderNameFields(),l.createElement(d.default,{testId:"signup-password-field",isCreating:true,error:i.password,onValidation:this.validationHandler(function(e){return{password:e}},function(){return{password:null}}),onSubmit:this.handleSubmit}),this.renderServerError())}}]);return a}(l.Component);E(P,"defaultProps",{previousStep:"intro"});var j=n.StyleSheet.create({serverError:{marginTop:24,marginBottom:72},nameFields:{display:"flex",alignItems:"top"},nameFieldWrapper:{width:"50%",":first-of-type":{marginRight:4},":last-of-type":{marginLeft:4}}});var C=P;t.default=C},zdYe:function(e,t,r){"use strict";r("ma9I");r("zKZe");r("5DmW");r("NBAS");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var o=i(r("q1tI"));var a=r("WGxL");var s=n(r("WjuW"));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function l(){l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return l.apply(this,arguments)}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function d(e,t,r){if(t)c(e.prototype,t);if(r)c(e,r);return e}function f(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return h(e)}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function h(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return m(e,t)}function b(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var i18n=r("HEOz");var g={INVALID:i18n._("Usernames must contain only letters and numbers, start with a letter, and be at least three characters long."),UNAVAILABLE:i18n._("This username is unavailable.")};var y=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var n=arguments.length>2?arguments[2]:undefined;if(t&&!(0,a.isUsernameValid)(n)){return g.INVALID}else{if(r){return(0,a.isUsernameAvailable)(n).then(function(e){return e?null:g.UNAVAILABLE})}else{return null}}};var w=function(e){v(i,e);function i(){var e;var a;u(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}a=f(this,(e=p(i)).call.apply(e,[this].concat(r)));b(h(a),"state",{showValidationWhileFocused:false});b(h(a),"handleValidation",function(e,t,r){var n=a.props.onValidation;a.setState({showValidationWhileFocused:r===g.UNAVAILABLE});if(n){n(e,t,r)}});return a}d(i,[{key:"render",value:function e(){var t=this.props,r=t.checkAvailable,n=t.checkValid;var a=this.state.showValidationWhileFocused;return o.createElement(s.default,l({label:i18n._("Choose a username"),notice:i18n._("Use letters and numbers only. For safety, don't use your real name.")},this.props,{emptyMessage:i18n._("Please choose a username."),onValidation:this.handleValidation,showValidationWhileFocused:a,validator:function e(t){return y(r,n,t)}}))}}]);return i}(o.Component);b(w,"defaultProps",{checkAvailable:true,checkValid:true});var O=w;t.default=O}}]);
//# sourceMappingURL=../../sourcemaps/en/d8bedab3a65ee5615b10b9a845382096.f3ae651e8f910269d125.js.map