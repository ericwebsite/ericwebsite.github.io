(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["785952e5545ec823b6f564be3a737b5d"],{AE4M:function(e,t,n){"use strict";n("ma9I");n("yXV3");n("5DmW");n("U3f4");n("UxlC");n("hByQ");Object.defineProperty(t,"__esModule",{value:true});t.getPostContext=O;t.capabilities=t.makeView=t.makeUser=t.isModeratorProfile=t.shouldAutoExpandPost=t.EnglishLink=t.PostAuthorName=t.isPostUnanswered=t.userHasJustLoggedIn=t.loggedInQueryName=t.getAnswerInputId=t.getAriaAvatarName=void 0;var s=o(n("q1tI"));var a=n("Vxy9");var l=n("p3MR");var c=r(n("whzC"));var u=r(n("Q8Wn"));var i=r(n("QCGh"));var p=r(n("SGU3"));var d=r(n("TqM9"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}var f=function e(t){return t?t.replace(/_/g," "):""};t.getAriaAvatarName=f;var m=function e(t){return"".concat(t,"-answer-input")};t.getAnswerInputId=m;var g="loggedInViaDiscussion";t.loggedInQueryName=g;var v=function e(t){return t.href.indexOf("".concat(g,"=true"))!==-1};t.userHasJustLoggedIn=v;var y=function e(t,n){var r=n[t];if(!r||r.deleted||r.appearsAsDeleted){return false}var o=r.answers;if(!o.length){return true}var a=o.some(function(e){var t=n[e];return!t.deleted&&!t.appearsAsDeleted});return!a};t.isPostUnanswered=y;var h=function e(t){var n=t.kaid,r=t.name;var o=s.createElement(a.LabelLarge,{style:d.default.authorNickname},r);return s.createElement("div",null,n?s.createElement(i.default,{href:"/profile/".concat(n,"/discussion"),"aria-label":l.avatarStrings.goToUserProfile(r)},o):o)};t.PostAuthorName=h;var b=function e(t){if(u.default.kaLocale==="en"){return null}var n=window.location,r=n.pathname,o=n.search,a=n.hash;var i=c.default.safeLinkTo("https://en.khanacademy.org".concat(r).concat(o).concat(a));return s.createElement(p.default,{href:i,style:t.style,skipClientNav:true},l.miscStrings.englishDiscussionUpsell)};t.EnglishLink=b;var w=function e(t,n,r){if(!r||!n){return false}var o=t.expandKey,a=t.key;if(n==="Video"||n==="Article"){return o===r}else{return a===r}};t.shouldAutoExpandPost=w;function O(e){var t=e.profile,n=e.post,r=e.moderatorMode;var o=k(t);var a=E({moderatorMode:r});return{user:o,post:n,view:a}}var P=function e(t){return t&&t.attributes&&t.attributes.isModerator};t.isModeratorProfile=P;var k=function e(t){if(!t){return{status:"LOGGED_OUT"}}return{status:"LOGGED_IN",isModerator:P(t),isChild:t.attributes&&t.attributes.isChildAccount}};t.makeUser=k;var E=function e(t){var n=t.moderatorMode;if(n){return{where:"FLAG_QUEUE"}}return{where:"CONTENT"}};t.makeView=E;var C=function e(t){return t.status==="LOGGED_IN"&&t.isModerator};var S=function e(t){return!!t.flags&&t.flags.length>0};var T=function e(t){return!S(t)};var x=function e(t){return t.definitelyNotSpam};var A=function e(t){return!x(t)};var j=function e(t){return t.where==="FLAG_QUEUE"};var M={clearFlags:function e(t){var n=t.user,r=t.post;return C(n)&&S(r)},approve:function e(t){var n=t.user,r=t.post,o=t.view;return j(o)&&C(n)&&A(r)&&T(r)}};t.capabilities=M},"Az/T":function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("2B1R");n("5DmW");n("NBAS");n("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=t.DiscussionList=void 0;var v=l(n("q1tI"));var r=n("/MKj");var y=n("mR6N");var h=s(n("wa3X"));var o=s(n("Pwnf"));var i=n("Vxy9");var b=n("JimW");var w=s(n("y6Wz"));var O=n("AE4M");var P=s(n("17AU"));var k=n("p3MR");var E=s(n("TqM9"));var a=n("DDFQ");function s(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function c(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){T(t,e,n[e])})}return t}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function d(e,t,n){if(t)p(e.prototype,t);if(n)p(e,n);return e}function f(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return g(e)}function m(e){m=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return m(e)}function g(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function C(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)S(e,t)}function S(e,t){S=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return S(e,t)}function T(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var x=function(e){C(a,e);function a(){var e;var o;u(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++){n[r]=arguments[r]}o=f(this,(e=m(a)).call.apply(e,[this].concat(n)));T(g(o),"maybeRenderListHeader",function(e){var t=o.props,n=t.tab,r=t.contentKind;if(!e||!(r==="Video"&&n==="clarifications")){return null}return v.createElement(i.LabelLarge,{style:E.default.clarificationsListHeader},k.miscStrings.clarificationListSuggested)});return o}d(a,[{key:"render",value:function e(){var i=this;var t=this.props,n=t.fetchingPosts,s=t.postKeys,l=t.newPostKey,c=t.resetNewPostKeyInfo,u=t.tab,p=t.topicSlug,d=t.contentKind,r=t.isComplete,o=t.cursor,a=t.onNextPage,f=t.discussionContext,m=t.clarificationsEnabled;var g=f.view==="maximized";return v.createElement(b.View,{style:g?A.maximizedContainer:E.default.discussionContainer},v.createElement(P.default,{mockOnFirstRender:true},function(e){var t=e.getUserProfile();var n=t&&t.attributes&&t.attributes.isModerator;var r=u==="clarifications"&&d==="Article"&&!n;var o=r?s.filter(function(e){return e===l}):s;var a=f.viewMode==="compact";return v.createElement(b.View,{style:[E.default.listWrapper,!a&&A.listWrapperExtraSpacing]},d==="Topic"&&v.createElement(O.EnglishLink,{style:A.englishLink}),i.maybeRenderListHeader(o.length),v.createElement("ul",null,o.map(function(e){return v.createElement("li",{key:e,className:(0,y.css)(A.post,!a&&A.postExtraSpacing)},v.createElement(w.default,{tab:u,postKey:e,newPostKey:l,resetNewPostKeyInfo:c,topicSlug:p,restrictPosting:f.restrictPosting,clarificationsEnabled:m,isMaximized:g,moderatorMode:f.moderatorMode,viewMode:f.viewMode,isProjectFeedback:f.showProjectFeedback}))})))}),o&&!r&&v.createElement(h.default,{onClick:a,spinner:n},k.miscStrings.showMore))}}]);return a}(v.Component);t.DiscussionList=x;var A=y.StyleSheet.create({maximizedContainer:c({},E.default.discussionContainer,{maxWidth:"100%"}),listWrapper:{backgroundColor:o.default.white,paddingTop:16},listWrapperExtraSpacing:{paddingTop:32},post:c({},E.default.postWrapper),postExtraSpacing:{marginBottom:24},linkStyledButton:{color:o.default.offBlack64,border:"none",backgroundColor:"transparent",cursor:"pointer",padding:0,margin:0},englishLink:{marginBottom:20}});var j=function e(t){var n=t.tabs[t.currentTab];return{fetchingPosts:t.fetchingPosts,tab:t.currentTab,newPostKey:t.newPostKey,cursor:n.cursor,isComplete:n.isComplete,postKeys:n.postKeys,contentKind:t.contentKind}};var M={resetNewPostKeyInfo:a.resetNewPostKeyInfoAction,onNextPage:a.getNextPageAction};var L=(0,r.connect)(j,M)(x);t.default=L},DDFQ:function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("fbCW");n("2B1R");n("5DmW");n("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.updatePosts=t.toggleReplyInputAction=t.postSuccess=t.addReply=t.fetchReplies=t.modifyNotificationsAction=t.stopEditingPostAction=t.stopAcceptingClarificationAction=t.editAcceptedClarificationAction=t.startEditingPostAction=t.startAcceptingClarificationAction=t.acceptClarificationAction=t.editPost=t.undeletePost=t.deleteAcceptedClarificationPost=t.deletePost=t.clearFlags=t.changeType=t.flagPost=t.downvotePost=t.upvotePost=t.postSuccessAction=t.resetNewPostKeyInfoAction=t.resetExpandKeyAction=t.changeSortByAction=t.changeTabAction=t.getNextPageAction=t.initializeDiscussionListComponentAction=t.initializeContentAction=t.clearAndFetchPostsAction=void 0;var r=o(n("P7jp"));var f=o(n("tCRy"));function o(e){return e&&e.__esModule?e:{default:e}}function m(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){a(t,e,n[e])})}return t}function a(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var g=function e(t){return function(e){r.default.log("Failed to ".concat(t,"!"),e)}};var p=function e(t,n){var r=n(),o=r.currentTab;t({type:"updatePosts",tab:o,posts:[],cursor:"",isComplete:true,totalCount:0})};var s=function e(i,t){var n=t();var s=n.currentTab,l=n.contentKind,c=n.youtubeId,u=n.apiId;p(i,t);i({type:"fetchingPosts"});f.default.get(u).fetchPosts(n).then(function(e){var t=e.feedback,n=e.cursor,r=e.totalCount,o=e.isComplete;var a={type:"updatePosts",tab:s,posts:t,cursor:n,totalCount:r,isComplete:o};if(s==="clarifications"&&l==="Video"&&c){f.default.get(u).fetchAcceptedClarifications({youtubeId:c}).then(function(e){var t=e.map(function(e){return{reporter:e.reporter,key:e.key,content:e.text,youtubeId:e.youtube_id,openTimestamp:e.open_timestamp,closeTimestamp:e.close_timestamp}});i(m({},a,{acceptedClarificationPosts:t}))}).catch(g("fetch accepted clarifications"))}else{i(a)}return e}).catch(g("fetch posts"))};var i=function e(){return s};t.clearAndFetchPostsAction=i;var l=function e(n,r,o,a,i){return function(e,t){e({type:"initializeContent",contentKind:n,contentId:r,youtubeId:o,expandFeedbackType:a,qaExpandKey:i});s(e,t)}};t.initializeContentAction=l;var c=function e(n,r,o,a,i){return function(e,t){e({type:"initializeDiscussionListComponent",tab:n,cursor:r,apiId:o});if(i){e(N(n,i,r,a))}else{s(e,t)}}};t.initializeDiscussionListComponentAction=c;var u=function e(){return function(t,e){var n=e();var r=n.currentTab,o=n.tabs,a=n.apiId;var i=o[r];if(!i.cursor){return}t({type:"fetchingPosts"});f.default.get(a).fetchPosts(m({},n,{cursor:i.cursor})).then(function(e){t({type:"appendPosts",tab:r,posts:e.feedback,cursor:e.cursor,totalCount:e.totalCount,isComplete:e.isComplete});return e}).catch(g("get next"))}};t.getNextPageAction=u;var d=function e(n){return function(e,t){e({type:"changeTab",tab:n});s(e,t)}};t.changeTabAction=d;var v=function e(n){return function(e,t){e({type:"changeSortBy",sort:n});s(e,t)}};t.changeSortByAction=v;var y=function e(){return{type:"resetExpandKey"}};t.resetExpandKeyAction=y;var h=function e(){return{type:"resetNewPostKey"}};t.resetNewPostKeyInfoAction=h;var b=function e(t,n){return{type:"postSuccess",post:t,tab:n}};t.postSuccessAction=b;var w=function e(o){return function(e,t){var n=t(),r=n.apiId;f.default.get(r).upvotePost({postKey:o.key,upVoted:o.upVoted}).catch(g("upvote post"));e({type:"upvotePost",postKey:o.key})}};t.upvotePost=w;var O=function e(o){return function(e,t){var n=t(),r=n.apiId;f.default.get(r).downvotePost({postKey:o.key,downVoted:o.downVoted}).catch(g("downvote post"));e({type:"downvotePost",postKey:o.key})}};t.downvotePost=O;var P=function e(o,a){return function(e,t){var n=t(),r=n.apiId;e({type:"flagPost",postKey:o.key,flag:a});f.default.get(r).flagPost({postKey:o.key,flag:a}).catch(g("flag post"))}};t.flagPost=P;var k=function e(o,a){return function(e,t){var n=t(),r=n.apiId;f.default.get(r).changeType({postKey:o.key,intoType:a}).catch(g("change type of post"));e({type:"changePostType",postKey:o.key,postType:a})}};t.changeType=k;var E=function e(o){return function(e,t){var n=t(),r=n.apiId;f.default.get(r).clearFlags({postKey:o.key}).catch(g("clear flags"));e({type:"clearFlags",postKey:o.key})}};t.clearFlags=E;var C=function e(o){return function(e,t){var n=t(),r=n.apiId;f.default.get(r).deletePost({postKey:o.key}).catch(g("delete post"));e({type:"deletePost",postKey:o.key})}};t.deletePost=C;var S=function e(o){return function(e,t){var n=t(),r=n.apiId;f.default.get(r).deleteAcceptedClarification({youtubeId:o.youtubeId,postKey:o.key}).catch(g("delete accepted clarification"));e({type:"deleteAcceptedClarificationPost",postKey:o.key})}};t.deleteAcceptedClarificationPost=S;var T=function e(o){return function(e,t){var n=t(),r=n.apiId;f.default.get(r).undeletePost({postKey:o.key}).catch(g("undelete post"));e({type:"undeletePost",postKey:o.key})}};t.undeletePost=T;var x=function e(n,t){return function(e,t){e({type:"editPost",postKey:n.key,content:n.content})}};t.editPost=x;var A=function e(t,s,l,c,u,p,d){return function(n,e){var t=e(),r=t.youtubeId,o=t.clarificationBeingAcceptedKey,a=t.apiId;if(!r){throw new Error("Can't accept a clarification if we don't know the youtubeId.")}if(!o){throw new Error("Can't accept a clarification if we don't have a clarificationBeingAcceptedKey.")}var i={avatarSrc:s,nickname:l,kaid:c,youtubeId:r,openTimestamp:p,closeTimestamp:d,text:u};f.default.get(a).acceptClarification(m({},i)).then(function(t){f.default.get(a).deletePost({postKey:o}).then(function(){var e={key:t.key,content:t.text,reporter:{kaid:t.reporter.kaid,nickname:t.reporter.nickname,avatarSrc:t.reporter.avatarSrc},openTimestamp:t.open_timestamp,closeTimestamp:t.close_timestamp,youtubeId:t.youtube_id};n({type:"acceptClarification",originalPostKey:o,post:e})}).catch(g("delete suggested version of accepted clarification"))}).catch(g("post new accepted clarification"))}};t.acceptClarificationAction=A;var j=function e(t){return function(e){e({type:"startAcceptingClarification",postKey:t})}};t.startAcceptingClarificationAction=j;var M=function e(t){return function(e){e({type:"startEditingPost",postKey:t})}};t.startEditingPostAction=M;var L=function e(l,c,u){return function(n,e){var t=e(),r=t.acceptedClarificationPosts,o=t.postBeingEditedKey,a=t.apiId;var i=r.find(function(e){return e.key===o});if(!i){throw new Error("The clarification you're trying to edit doesn't seem to exist!"+"\nThe posts's key is:\n".concat(o||"unknown"))}var s=m({},i,{openTimestamp:c,closeTimestamp:u,text:l,youtubeId:i.youtubeId});f.default.get(a).editAcceptedClarification(m({},s)).then(function(e){var t={key:e.key,reporter:i.reporter,openTimestamp:e.open_timestamp,closeTimestamp:e.close_timestamp,youtubeId:e.youtube_id,content:e.text};n({type:"editAcceptedClarification",post:t});n({type:"stopEditingPost"})}).catch(g("edit accepted clarification"))}};t.editAcceptedClarificationAction=L;var I=function e(){return function(e){e({type:"stopAcceptingClarification"})}};t.stopAcceptingClarificationAction=I;var F=function e(){return function(e){e({type:"stopEditingPost"})}};t.stopEditingPostAction=F;var D=function e(o,a){return function(t,e){var n=e(),r=n.apiId;f.default.get(r).modifyNotificationsFlag({postKey:o,enable:a}).then(function(e){t({type:"updatePost",post:e})}).catch(g("modify notification settings"))}};t.modifyNotificationsAction=D;var K=function e(o){return function(t,e){var n=e(),r=n.apiId;f.default.get(r).fetchReplies({postKey:o}).then(function(e){t({type:"updateReplies",parentKey:o,replies:e})}).catch(g("fetch replies"))}};t.fetchReplies=K;var R=function e(o,a,i){return function(t,e){var n=e(),r=n.apiId;f.default.get(r).addReply({postKey:o,text:a,topic_slug:i}).then(function(e){t({type:"addReply",post:e,parentKey:o})}).catch(g("add reply"))}};t.addReply=R;var B=function e(n,r){return function(e,t){e({type:"postSuccess",post:n,tab:r})}};t.postSuccess=B;var V=function e(n){return function(e,t){e({type:"toggleReplyInput",postKey:n})}};t.toggleReplyInputAction=V;var N=function e(n,r,o,a){return function(e,t){e({type:"updatePosts",tab:n,posts:r,cursor:o,isComplete:a,totalCount:r.length});e({type:"changeTab",tab:n})}};t.updatePosts=N},F4p2:function(e,t,n){"use strict";n("5DmW");var r=u(n("q1tI"));var o=n("mR6N");var a=n("Vxy9");var i=n("JimW");var s=n("p3MR");var l=c(n("TqM9"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}var i18n=n("HEOz");var p=function e(){return r.createElement("table",{className:(0,o.css)(d.formattingOptionsTable)},r.createElement("thead",null,r.createElement("tr",{className:(0,o.css)(d.formattingOptionsRow,d.formattingOptionsHeaderRow)},r.createElement("th",{scope:"col"},r.createElement(i.View,{style:d.formattingOptionsRowContent},s.formattingOptionsStrings.rawTextHeading)),r.createElement("th",{scope:"col"},r.createElement(i.View,{style:d.formattingOptionsRowContent},s.formattingOptionsStrings.formattedTextHeading)))),r.createElement("tbody",null,r.createElement("tr",{className:(0,o.css)(d.formattingOptionsRow)},r.createElement("td",null,r.createElement(i.View,{style:d.formattingOptionsRowContent},"*",s.formattingOptionsStrings.bold,"*")),r.createElement("td",null,r.createElement(i.View,{style:d.formattingOptionsRowContent,"aria-labelledby":"bold","aria-describedby":"boldDescription"},r.createElement(a.LabelLarge,{id:"bold"},s.formattingOptionsStrings.bold),r.createElement("span",{className:"sr-only",id:"boldDescription"},s.formattingOptionsStrings.boldDescription)))),r.createElement("tr",{className:(0,o.css)(d.formattingOptionsRow)},r.createElement("td",null,r.createElement(i.View,{style:d.formattingOptionsRowContent},i18n.doNotTranslate("_"),s.formattingOptionsStrings.italics,i18n.doNotTranslate("_"))),r.createElement("td",null,r.createElement(i.View,{style:[d.formattingOptionsRowContent,d.italic],"aria-labelledby":"italics","aria-describedby":"italicsDescription"},r.createElement("span",{id:"italics"},s.formattingOptionsStrings.italics),r.createElement("span",{className:"sr-only",id:"italicsDescription"},s.formattingOptionsStrings.italicsDescription)))),r.createElement("tr",{className:(0,o.css)(d.formattingOptionsRow)},r.createElement("td",null,r.createElement(i.View,{style:d.formattingOptionsRowContent},"`",s.formattingOptionsStrings.code,"`")),r.createElement("td",null,r.createElement(i.View,{style:[d.formattingOptionsRowContent,d.code],"aria-labelledby":"code","aria-describedby":"codeDescription"},r.createElement("span",{id:"code"},s.formattingOptionsStrings.code),r.createElement("span",{className:"sr-only",id:"codeDescription"},s.formattingOptionsStrings.codeDescription)))),r.createElement("tr",{className:(0,o.css)(d.formattingOptionsRow)},r.createElement("td",null,r.createElement(i.View,{style:d.formattingOptionsRowContent},r.createElement(i.View,null,i18n.doNotTranslate("```if (x < 0) {")),r.createElement(i.View,null,"    ",i18n.doNotTranslate("return;")),r.createElement(i.View,null,i18n.doNotTranslate("&#125;```")))),r.createElement("td",null,r.createElement(i.View,{style:[d.formattingOptionsRowContent,d.code],"aria-describedby":"codeSnippetDescription"},r.createElement(i.View,null,i18n.doNotTranslate("if (x < 0) {")),r.createElement(i.View,null,"    ",i18n.doNotTranslate("return;")),r.createElement(i.View,null,i18n.doNotTranslate("&#125;")),r.createElement("span",{className:"sr-only",id:"codeSnippetDescription"},s.formattingOptionsStrings.codeDescription))))))};var d=o.StyleSheet.create({formattingOptionsTable:{width:"100%",marginTop:14},formattingOptionsRow:{borderTop:l.default.border,borderBottom:l.default.border},formattingOptionsHeaderRow:{backgroundColor:l.default.secondaryBackgroundColor,textAlign:"left",textTransform:"uppercase"},formattingOptionsRowContent:{padding:"14px 16px 16px 16px"},italic:{fontStyle:"italic"},code:{fontFamily:"Inconsolata"},codeSnippet:{height:231}});e.exports=p},HbaH:function(e,t,n){"use strict";n("ma9I");n("zKZe");n("5DmW");n("NBAS");n("SYor");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var P=d(n("q1tI"));var k=p(n("i8i4"));var r=n("/MKj");var E=n("mR6N");var C=n("Vxy9");var S=n("JimW");var T=n("JasB");var o=p(n("Pwnf"));var x=n("z8VS");var a=p(n("whzC"));var A=p(n("mt3D"));var v=p(n("mEQP"));var i=p(n("6OHE"));var s=p(n("Q8Wn"));var j=p(n("17AU"));var b=p(n("P7jp"));var w=n("skGw");var M=p(n("QCGh"));var l=p(n("TqM9"));var L=n("p3MR");var c=n("AE4M");var u=n("DDFQ");function p(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function y(){y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};return y.apply(this,arguments)}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function g(e,t,n){if(t)m(e.prototype,t);if(n)m(e,n);return e}function O(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return F(e)}function I(e){I=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return I(e)}function F(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)D(e,t)}function D(e,t){D=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return D(e,t)}function K(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var R=i.default.domainColors("default").domain1;var B=function e(){var t=s.default.language==="es"||s.default.language==="pt-br"?s.default.language:"en-us";var n=a.default.safeLinkTo("https://khanacademy.zendesk.com/hc/".concat(t,"/community/topics"));return P.createElement("a",{href:n,className:(0,E.css)(N.helpLink)},L.footerStrings.helpCenter)};var V=function(e){h(t,e);function t(e){var h;f(this,t);h=O(this,I(t).call(this,e));K(F(h),"editingOrAcceptingClarification",function(){return h.props.editing||h.props.acceptingClarification||h.props.editingAcceptedClarification});K(F(h),"handleWindowKeyup",function(e){if(e.key==="Tab"&&h.textarea&&document.activeElement===h.textarea){h.setState({hideFocusOutline:false})}});K(F(h),"handleFocus",function(){h.setState({textareaExpanded:true})});K(F(h),"collapseTextarea",function(){if(!h._isMounted){return}h.setState({hideFocusOutline:true,textareaExpanded:false,formattingOptionsExpanded:false});var e=h.props.onToggleFormattingOptionsExpanded;if(e){e(false)}});K(F(h),"handleDocumentInteraction",function(e){if(!h.container){return}var t=e.target;if(!h.container.contains(t)){h.collapseTextarea()}});K(F(h),"getSanitizedText",function(e){if(e&&e.length){var t=e.trim();if(t.length){return t}}return null});K(F(h),"handleTextChange",function(e){var t=true;var n=h.getSanitizedText(e.target.value);if(n){t=false}h.setState({postContent:n,submitButtonDisabled:t})});K(F(h),"updateUI",function(e){var t=h.props,n=t.onPostSuccess,r=t.tab,o=t.editing,a=t.onEditPost;var i=false;if(e.showLowQualityNotice){if(h._isMounted){h.setState({submitStatus:"failed",isLowQuality:true,feedbackEditTip:e.translatedFeedbackEditTip})}return}if(o){a(e,e.content)}else{if(h.textarea){h.textarea.value=""}}n(e,r);i=true;h.collapseTextarea();if(h._isMounted){h.setState({submitStatus:"ready",submitButtonDisabled:i,isLowQuality:false})}});K(F(h),"getBaseSubmitUrl",function(){var e=h.props,t=e.isAnswer,n=e.tab,r=e.feedbackKey,o=e.youtubeId;var a=h.props.contentKind?h.props.contentKind.toLowerCase():null;var i=h.props.contentId;if(a==="video"&&n==="clarifications"&&o){a="youtubevideo";i=o}if(!t&&i&&a&&n){return"/api/internal/discussions/".concat(a,"/").concat(i,"/").concat(n)}else if(t&&r){return"/api/internal/questions/".concat(r,"/answers")}else{throw new Error("We don't have enough information to submit this type of post.")}});K(F(h),"getPlaceholderText",function(){var e=h.props,t=e.isReply,n=e.isAnswer,r=e.tab;if(t){return L.postStrings.replyCommentPlaceholder}else if(!n&&r&&L.tabsStrings[r]){return L.tabsStrings[r].placeholder}else if(n&&r==="projecthelp"){return L.postStrings.answerPlaceholder}else{return L.postStrings.replyPlaceholder}});K(F(h),"getTextareaLabel",function(){var e=h.props,t=e.isReply,n=e.isAnswer,r=e.tab,o=e.acceptingClarification;if(t){return L.postStrings.comment}else if(n&&r==="projecthelp"){return L.postStrings.answer}else if(n){return L.postStrings.reply}else if(r&&L.tabsStrings[r]){return L.tabsStrings[r].textAreaLabel}else if(o){return L.miscStrings.acceptedClarificationLabel}else{return""}});K(F(h),"handleSubmit",function(){var e=h.props,t=e.feedbackKey,n=e.topicSlug,r=e.isAnswer,o=e.isReply,a=e.onAddReply,i=e.postKey,s=e.acceptingClarification,l=e.editingAcceptedClarification,c=e.onSubmitAcceptedClarification;var u=h.state,p=u.postContent,d=u.isFromAuthor,f=u.submitStatus,m=u.isLowQuality;if(!p||f==="submitting"){return}if((s||l)&&c&&p){c(p);return}if(!i&&o&&t&&p){h.setState({submitStatus:"submitting"});a(t,p,n);return}var g={text:p,shownLowQualityNotice:m,topic_slug:"",fromVideoAuthor:d};if(!r){g.topic_slug=n}var v=h.getBaseSubmitUrl();var y="POST";if(i){v+="/".concat(i);y="PUT"}v+="?casing=camel";h.setState({submitStatus:"submitting",feedbackEditTip:""});(0,w.khanFetch)(v,{method:y,body:JSON.stringify(g),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if(h._isMounted){h.updateUI(e)}}).catch(function(e){b.default.log("Failed to submit post!",e);if(h._isMounted){h.setState({submitStatus:"failed"})}})});K(F(h),"renderTextarea",function(e){var t=h.props,n=t.isAnswer,r=t.isReply,o=t.editing;var a=h.state,i=a.hideFocusOutline,s=a.textareaExpanded,l=a.submitStatus,c=a.feedbackEditTip;var u=l==="submitting";var p=h.getPlaceholderText();var d=s&&c;var f=s&&!n&&!r&&!o;var m=[N.textareaContainer,!!d&&N.textareaContainerError,s&&(r||h.editingOrAcceptingClarification()?N.replyTextareaContainerExpanded:N.textareaContainerExpanded)];var g=[N.textareaField,(n||h.editingOrAcceptingClarification())&&N.textareaFieldForAnswer,f&&N.textareaFieldExpanded,i&&N.textareaNoFocusOutline,d&&N.textareaFieldError];var v=r?{rows:1}:null;return P.createElement(S.View,{style:m},P.createElement("textarea",y({id:e,className:(0,E.css)(g),placeholder:"".concat(p),"aria-label":p,onFocus:h.handleFocus,onBlur:function e(){return h.setState({hideFocusOutline:true})},onClick:function e(){return h.setState({hideFocusOutline:true})},onChange:h.handleTextChange,onKeyUp:h.handleTextChange,ref:function e(t){return h.textarea=t},disabled:u},v)))});K(F(h),"renderFooter",function(){var e=h.props,t=e.tab,n=e.isAnswer,r=e.isReply,o=e.editing,a=e.acceptingClarification,i=e.editingAcceptedClarification,s=e.onToggleFormattingOptionsExpanded,l=e.onCancel;var c=h.state,u=c.formattingOptionsExpanded,p=c.submitButtonDisabled,d=c.submitStatus,f=c.textareaExpanded;var m=a||i;var g=!!(f||n||o)&&!a;return P.createElement(v.default,{tab:t,isAnswer:n,isReply:r,editing:o,acceptingClarification:m,submitButtonDisabled:p&&!m,submitStatus:d,onSubmit:h.handleSubmit,onCancel:l,canShowFormattingOptions:g,formattingOptionsExpanded:u,onToggleFormattingOptionsExpanded:function e(t){if(s){s(t)}h.setState({formattingOptionsExpanded:t})}})});h.state={hideFocusOutline:true,textareaExpanded:false,formattingOptionsExpanded:false,postContent:e.initialPostContent,submitButtonDisabled:true,submitStatus:"ready",isLowQuality:false,feedbackEditTip:"",isFromAuthor:false};return h}g(t,[{key:"UNSAFE_componentWillMount",value:function e(){var t=this.props,n=t.isAnswer,r=t.isReply;if(!n&&!r&&(0,c.userHasJustLoggedIn)(window.location)){this.setState({hideFocusOutline:false})}}},{key:"componentDidMount",value:function e(){var t=this.props,n=t.isAnswer,r=t.isReply;this._isMounted=true;var o=this.textarea;if(o&&!n&&!r&&(0,c.userHasJustLoggedIn)(window.location)){o.focus({preventScroll:true})}if(o&&this.props.autoFocus){o.focus()}if(o){o.value=this.props.initialPostContent}document.addEventListener("keyup",this.handleWindowKeyup);document.addEventListener("mousedown",this.handleDocumentInteraction);document.addEventListener("touchstart",this.handleDocumentInteraction)}},{key:"UNSAFE_componentWillUpdate",value:function e(t,n){var r=this.textarea;if(r&&t.autoFocus&&this.state.hideFocusOutline){this.setState({hideFocusOutline:false})}if(t.newPostKey&&this.state.submitStatus==="submitting"){if(this.textarea){this.textarea.value=""}this.collapseTextarea();this.setState({submitStatus:"ready",submitButtonDisabled:true,isLowQuality:false});if(this.props.resetNewPostKeyInfo){this.props.resetNewPostKeyInfo()}}}},{key:"componentDidUpdate",value:function e(t,n){var r=this.textarea;if(r&&this.props.autoFocus&&!t.autoFocus){setTimeout(function(){return r&&r.focus()},0)}}},{key:"componentWillUnmount",value:function e(){this._isMounted=false;document.removeEventListener("keyup",this.handleWindowKeyup);document.removeEventListener("mousedown",this.handleDocumentInteraction);document.removeEventListener("touchstart",this.handleDocumentInteraction)}},{key:"getIsModerator",value:function e(t){var n=t.getUserProfile();return n&&n.attributes&&n.attributes.isModerator}},{key:"render",value:function e(){var o=this;var t=this.props,n=t.tab,a=t.isAnswer,i=t.isReply,s=t.showAvatar,r=t.clarificationsEnabled,l=t.contentKind;var c=this.state,u=c.textareaExpanded,p=c.feedbackEditTip,d=c.isFromAuthor;var f=this.getTextareaLabel();var m=n&&L.tabsStrings[n]||{};var g=!a&&m.tipLabel;var v=!a&&m.tipContents;var y=u&&p;var h=u||a||this.editingOrAcceptingClarification();var b=u&&!a&&!i&&!this.editingOrAcceptingClarification();var w=n!=="clarifications"&&r;var O=function e(t,n){var r=n.get("content-input");return P.createElement(S.View,{style:i?N.replyContainer:N.container,ref:function e(t){return o.container=k.default.findDOMNode(t)}},y&&P.createElement(S.View,{style:N.errorText},P.createElement(C.Body,null,p)),P.createElement(S.View,{style:[N.textAreaHeading,s&&N.textAreaHeadingMargin]},P.createElement("label",{htmlFor:r},P.createElement(C.Body,null,f)),P.createElement(T.Spring,null),a&&l!=="scratchpad"&&o.getIsModerator(t)?P.createElement(x.Checkbox,{label:L.postStrings.fromTheAuthor,style:N.postAsAuthorCheckbox,checked:d,onChange:function e(t){return o.setState({isFromAuthor:t})}}):null),P.createElement(S.View,{style:N.expandableContainer},s&&P.createElement(S.View,{style:N.avatarContainer},P.createElement(A.default,{showCurrentUserAvatar:true})),P.createElement(S.View,{style:N.textareaAndTipsContainer},o.renderTextarea(r),h&&o.renderFooter(),b&&P.createElement(S.View,null,P.createElement(S.View,{style:N.tip},P.createElement(S.View,{style:N.tipHeading},P.createElement(C.LabelLarge,null,g)),v),P.createElement(S.View,{style:N.helpLinksContainer},P.createElement(B,null),w&&P.createElement(M.default,{className:(0,E.css)(N.helpLink),onClick:o.props.onReportMistake},L.footerStrings.reportMistake))))))};return P.createElement(j.default,{mockOnFirstRender:true},function(t){return P.createElement(S.UniqueIDProvider,{mockOnFirstRender:true,scope:"discussion-input"},function(e){return P.createElement("form",null,O(t,e))})})}}]);return t}(P.Component);K(V,"defaultProps",{initialPostContent:"",editing:false,showAvatar:true});var N=E.StyleSheet.create({container:{backgroundColor:i.default.colors.white},replyContainer:{backgroundColor:o.default.offWhite},errorText:{marginLeft:64,color:o.default.red},expandableContainer:{flexDirection:"row"},avatarContainer:{marginRight:l.default.avatarFormSpace},textareaAndTipsContainer:{width:"100%"},textAreaHeading:{flexDirection:"row"},textAreaHeadingMargin:{marginLeft:56},postAsAuthorCheckbox:{minWidth:148,marginTop:4},textareaContainer:{marginTop:4,marginBottom:0,borderRadius:4,flex:1,border:l.default.border,backgroundColor:o.default.white},textareaContainerExpanded:{borderBottomRightRadius:0,borderBottomLeftRadius:0},replyTextareaContainerExpanded:{paddingBottom:7},textareaContainerError:{borderColor:o.default.red,backgroundColor:l.default.errorBackgroundColor},textareaField:{boxSizing:"border-box",border:"none",resize:"vertical",width:"98%",fontSize:16,lineHeight:1.38,transition:"min-height ".concat(i.default.standardTransition),minHeight:34,overflow:"auto",padding:"8px 12px",margin:"1px 0px 0px 1px",":focus":{outline:"auto"},"::placeholder":{color:"solid 1px ".concat(o.default.offBlack16),fontSize:16,lineHeight:1.38}},textareaFieldForAnswer:{minHeight:62},textareaFieldError:{backgroundColor:l.default.errorBackgroundColor},textareaFieldExpanded:{minHeight:143,overflow:"auto"},textareaNoFocusOutline:{":focus":{outline:"none"}},tip:{marginTop:24,marginBottom:16,padding:24,borderRadius:2,backgroundColor:l.default.secondaryBackgroundColor},tipHeading:{marginBottom:8},helpLinksContainer:{textAlign:"right"},helpLink:{color:R,textDecoration:"none",":hover":{textDecoration:"underline"}}});var q=function e(t){return{newPostKey:t.newPostKey,youtubeId:t.youtubeId}};var U={onAddReply:u.addReply,onEditPost:u.editPost};var H=(0,r.connect)(q,U)(V);t.default=H},KPIR:function(e,t,n){"use strict";n("TeQF");n("2B1R");n("5DmW");n("NBAS");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var d=r(n("q1tI"));var f=n("mR6N");var m=n("p3MR");var g=n("4Arr");function r(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function i(e,t,n){if(t)a(e.prototype,t);if(n)a(e,n);return e}function s(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return l(e)}function l(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return c(e)}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return p(e,t)}function v(e){var t=document.implementation.createHTMLDocument();if(!t.body){return new HTMLCollection}t.body.innerHTML=e;return t.body.children||new HTMLCollection}function y(e,t){return Array.prototype.filter.call(e,t)}function h(e){var t=y(e,function(e){return e.classList.contains("overall-eval-info")});var n=t.length>0?t[0].textContent:"";if(n.length===0){return null}return d.createElement("div",{className:(0,f.css)(O.moreInfo)},d.createElement("strong",null,m.evalStrings.fromTheEvaluator),d.createElement("div",{dangerouslySetInnerHTML:{__html:(0,g.formatContent)(n,true)}}))}function b(e){e=e.cloneNode(true);var t=e.querySelector("div");var n="";if(t){n=t.textContent;t.innerHTML=""}return{primary:e.textContent,extra:n}}var w=function(e){u(t,e);function t(){o(this,t);return s(this,c(t).apply(this,arguments))}i(t,[{key:"render",value:function e(){var t=this.props.post;var n=t.content,r=t.question;var o=t.sumVotesIncremented>1;var a=v(n);var i=y(a,function(e){var t=e.tagName.toLowerCase()==="li";var n=e.classList.contains("pass");return t&&!n});var s=o?m.evalStrings.projectPassedEval:m.evalStrings.projectFailedEval;var l=null;if(o){var c=h(a);if(c){l=d.createElement("div",null,c)}}else{var u=i.map(function(e,t){var n=b(e),r=n.primary,o=n.extra;return d.createElement("li",{key:"objective-"+t},d.createElement("div",{className:(0,f.css)(O.failedObjectiveItem)},d.createElement("strong",null,r)),d.createElement("div",{className:(0,f.css)(O.objectiveMoreInfo),dangerouslySetInnerHTML:{__html:(0,g.formatContent)(o,true)}}))});l=d.createElement("div",null,h(a),d.createElement("div",{className:(0,f.css)(O.failedObjectives)},d.createElement("strong",null,m.evalStrings.needsMoreWork),d.createElement("ul",{className:(0,f.css)(O.styledList)},u)))}var p=r&&r.content||"";return d.createElement("div",null,d.createElement("div",null,p),d.createElement("div",{className:"eval-guideline"},d.createElement("div",{className:(0,f.css)(O.evalTitle)},s),l))}}]);return t}(d.Component);t.default=w;var O=f.StyleSheet.create({moreInfo:{marginTop:20},objectiveMoreInfo:{marginBottom:10},failedObjectiveItem:{marginTop:10},failedObjectives:{marginTop:20},styledList:{marginLeft:16,listStyle:"disc"},evalTitle:{fontSize:"larger"}})},RdRB:function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("+2oP");n("3KgV");n("5DmW");n("NBAS");n("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var p=c(n("q1tI"));var d=n("mR6N");var r=l(n("lTCR"));var o=n("oJmH");var f=n("JimW");var a=l(n("Pwnf"));var i=l(n("gE8/"));var m=n("Vxy9");var g=l(n("wINb"));var s=l(n("uJWH"));var v=n("p3MR");var y=n("AE4M");function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function u(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){h(t,e,n[e])})}return t}function h(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function b(){var t=w(["\n    query getUserHoverCardProfile($kaid: String!) {\n        user(kaid: $kaid) {\n            id\n            nickname\n            username\n            bio\n            avatar {\n                name\n                imageSrc\n            }\n            points\n            isActivityAccessible\n            isPhantom\n            isPublic\n        }\n    }\n"]);b=function e(){return t};return t}function w(e,t){if(!t){t=e.slice(0)}return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function O(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function k(e,t,n){if(t)P(e.prototype,t);if(n)P(e,n);return e}function E(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return C(e)}function C(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function S(e){S=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return S(e)}function T(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)x(e,t)}function x(e,t){x=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return x(e,t)}var A=function(e){T(t,e);function t(){O(this,t);return E(this,S(t).apply(this,arguments))}k(t,[{key:"shouldComponentUpdate",value:function e(t){return!t.loading}},{key:"render",value:function e(){if(this.props.loading){return p.createElement("span",null,v.avatarStrings.findingProfileInformation)}var t=this.props,n=t.nickname,r=t.username,o=t.avatar,a=t.bio,i=t.points,s=t.isActivityAccessible,l=t.isPhantom,c=t.isPublic;var u=s===false&&c===false;return p.createElement(f.View,{style:L.tooltipContainer},p.createElement(f.View,{style:L.avatarContainer},o&&n&&p.createElement("img",{className:(0,d.css)(L.tooltipAvatar),src:(0,g.default)(o.imageSrc),alt:v.avatarStrings.getAvatarForUser(o&&(0,y.getAriaAvatarName)(o.name),n)})),p.createElement(f.View,{style:L.tooltipBody},p.createElement(f.View,{style:L.tooltipHeader},p.createElement(m.HeadingSmall,{style:[L.nameText,L.nickname]},l?v.avatarStrings.unclaimedPoints:n),p.createElement(m.LabelMedium,{style:[L.nameText,L.username]},r?"@"+r:null)),p.createElement(m.LabelMedium,{style:L.bio},a),r==="sal"?p.createElement(m.LabelMedium,{style:L.points},"+∞"):p.createElement(m.LabelMedium,{style:L.points},(i||i===0)&&!u?"+"+i.toLocaleString():v.avatarStrings.questionMark)))}}]);return t}(p.Component);var j=(0,r.default)(b());var M=64;var L=d.StyleSheet.create({tooltipContainer:{flexDirection:"row",width:350},avatarContainer:{marginRight:i.default.xLarge,marginTop:i.default.xxSmall},tooltipAvatar:{width:M,height:M},tooltipBody:{width:"100%"},tooltipHeader:{flexDirection:"row",alignItems:"flex-end",flexWrap:"wrap",marginTop:i.default.xxSmall,marginBottom:i.default.small},nameText:{marginTop:i.default.xxSmall,maxWidth:272,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},nickname:{marginRight:i.default.small},username:{color:a.default.offBlack50,":hover":{textDecoration:"none"}},bio:{marginBottom:i.default.medium},points:{color:a.default.darkBlue,textAlign:"right",fontWeight:700,fontSize:16,marginBottom:i.default.small}});var I=function e(t){var n=t.data,r=n.user,o=n.loading;return u({loading:o},r,{isActivityAccessible:r&&r.isActivityAccessible===false?false:true,points:r&&r.points})};var F=function e(t){var n=t.kaid;return{variables:{kaid:n}}};var D=(0,o.graphql)(j,{options:F,props:I})(A);var K=function e(t){return p.createElement(s.default,null,p.createElement(D,t))};var R=K;t.default=R},TqM9:function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("5DmW");n("FZtP");var r=s(n("Pwnf"));var o=i(n("uEGL"));var a=i(n("x1xB"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function l(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){c(t,e,n[e])})}return t}function c(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var u=48;var p=13;var d=r.default.offBlack16;var f=(0,r.fade)(r.default.red,.025);var m=r.default.offWhite;var g="1px solid ".concat(d);var v={backgroundColor:"transparent",border:"none",padding:0,textAlign:"left",display:"inline-block",cursor:"pointer",borderRadius:"none"};var y={backgroundColor:r.default.offBlack16,height:1,position:"relative",top:-1};var h=l({},a.default.contentPadding,c({width:"100%",backgroundColor:r.default.white},o.default.xsOrSmaller,{paddingLeft:8,paddingRight:8}));var b={paddingTop:32,backgroundColor:r.default.white};var w={marginBottom:16};var O={marginBottom:12};var P={outerRepliesContainer:{paddingLeft:16,paddingRight:16},nameAndDatetime:{flexDirection:"column",alignItems:"flex-start"},datetime:{marginLeft:0},flagText:{display:"none"},answersList:{marginLeft:16}};var k={flexDirection:"row",alignItems:"flex-start"};var E={width:"100%"};var C={flexDirection:"row",justifyContent:"space-between",marginBottom:8,marginLeft:24};var S=c({flexDirection:"row",alignItems:"flex-end"},o.default.xsOrSmaller,P.nameAndDatetime);var T={maxWidth:200,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:r.default.offBlack};var x=c({marginLeft:8,color:r.default.offBlack64},o.default.xsOrSmaller,{marginLeft:0});var A={position:"relative",marginLeft:24};var j={color:r.default.offBlack,padding:"8px 0",wordWrap:"break-word"};var M={flexDirection:"row",alignItems:"center",marginLeft:24,height:40};var L={flexDirection:"row",alignItems:"center"};var I=c({},o.default.mdOrLarger,{display:"none"});var F=c({marginLeft:8},o.default.smOrSmaller,{display:"none"});e.exports={compactStyles:P,avatarContainerDiameter:u,avatarFormSpace:p,borderColor:d,border:g,errorBackgroundColor:f,secondaryBackgroundColor:m,notAButton:v,separator:y,discussionContainer:h,listWrapper:b,clarificationsListHeader:w,postWrapper:O,post:k,everythingButTheAvatar:E,postHeader:C,nameAndDatetime:S,authorNickname:T,datetime:x,contentContainer:A,content:j,postFooter:M,tools:L,actionPickerMobile:I,actionPickerDesktop:F}},XKyD:function(e,t,n){"use strict";n("5DmW");Object.defineProperty(t,"__esModule",{value:true});t.default=t.ConfirmDeletionModal=void 0;var o=d(n("q1tI"));var r=n("mR6N");var a=n("DzHr");var i=n("JimW");var s=n("Vxy9");var l=n("JasB");var c=p(n("wa3X"));var u=n("p3MR");function p(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}var f=function e(t){var n=t.handleClose,r=t.handleSubmit;return o.createElement(a.OneColumnModal,{content:o.createElement(i.View,null,o.createElement(s.Body,null,u.confirmDeletionModalStrings.confirmDeletion)),footer:o.createElement(i.View,{style:m.footer},o.createElement(c.default,{onClick:n,kind:"tertiary"},u.confirmDeletionModalStrings.cancel),o.createElement(l.Strut,{size:16}),o.createElement(c.default,{onClick:r,color:"destructive"},u.confirmDeletionModalStrings.delete))})};t.ConfirmDeletionModal=f;var m=r.StyleSheet.create({footer:{flexDirection:"row"}});var g=f;t.default=g},fjY8:function(e,t,n){"use strict";n("2B1R");n("5DmW");n("NBAS");n("U3f4");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=a(n("q1tI"));var r=n("mR6N");var s=n("DzHr");var l=n("JimW");var c=n("Vxy9");var u=o(n("wa3X"));var p=n("JasB");var d=o(n("SGU3"));var f=n("p3MR");function o(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function v(e,t,n){if(t)g(e.prototype,t);if(n)g(e,n);return e}function y(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return h(e)}function h(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function b(e){b=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return b(e)}function w(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)O(e,t)}function O(e,t){O=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return O(e,t)}var P=function(e){w(t,e);function t(){m(this,t);return y(this,b(t).apply(this,arguments))}v(t,[{key:"render",value:function e(){var t=this.props,n=t.flaggedBy,r=t.flags,o=t.onCancel,a=t.onClearAllFlags;return i.createElement(s.OneColumnModal,{content:i.createElement(l.View,null,i.createElement(c.Title,{style:k.title},f.clearFlagsModalStrings.flagsTitle),n.map(function(e,t){return i.createElement(c.Body,{key:e},i.createElement(d.default,{href:"/profile/".concat(e,"/discussion"),skipClientNav:true,target:"_blank"},e)," - ",r[t])})),footer:i.createElement(l.View,{style:k.footer},i.createElement(u.default,{onClick:o,kind:"tertiary"},f.clearFlagsModalStrings.cancel),i.createElement(p.Strut,{size:16}),i.createElement(u.default,{onClick:a},f.clearFlagsModalStrings.clearAllFlags))})}}]);return t}(i.Component);t.default=P;var k=r.StyleSheet.create({footer:{flexDirection:"row"},title:{marginBottom:24}})},gzgZ:function(e,t,n){"use strict";n("5DmW");n("NBAS");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var l=s(n("q1tI"));var r=n("mR6N");var o=i(n("Pwnf"));var c=n("Vxy9");var a=n("JimW");function i(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function d(e,t,n){if(t)p(e.prototype,t);if(n)p(e,n);return e}function f(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return m(e)}function m(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function g(e){g=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return g(e)}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)y(e,t)}function y(e,t){y=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return y(e,t)}var h=(0,a.addStyle)("button");var b=function(e){v(t,e);function t(){u(this,t);return f(this,g(t).apply(this,arguments))}d(t,[{key:"render",value:function e(){var t=this.props,n=t.disabled,r=t.icon,o=t.id,a=t.children,i=t.onClick,s=t.style;return l.createElement(h,{id:o,onClick:i,style:[w.linkStyledButton,w.toolButton,n&&w.disabled,s],disabled:n},r,l.createElement(c.LabelXSmall,{style:w.text},a))}}]);return t}(l.Component);t.default=b;var w=r.StyleSheet.create({linkStyledButton:{color:o.default.offBlack64,border:"none",backgroundColor:"transparent",cursor:"pointer",padding:0,margin:0,":focus":{outline:"auto"}},toolButton:{display:"flex",alignItems:"center"},text:{marginLeft:5},disabled:{cursor:"default",color:o.default.offBlack32}})},iRWY:function(e,t,n){"use strict";n("pNMO");n("4Brf");n("ma9I");n("TeQF");n("2B1R");n("5DmW");n("NBAS");n("U3f4");n("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(n("q1tI"));var r=n("mR6N");var l=n("JimW");var c=n("Vxy9");var u=a(n("Pwnf"));var p=i(n("hCZ8"));var d=a(n("Nw73"));var f=a(n("oia8"));var m=n("p3MR");var o=a(n("TqM9"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function g(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){E(t,e,n[e])})}return t}function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function h(e,t,n){if(t)y(e.prototype,t);if(n)y(e,n);return e}function b(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return O(e)}function w(e){w=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return w(e)}function O(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function P(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)k(e,t)}function k(e,t){k=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return k(e,t)}function E(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var C=(0,l.addStyle)("button");var S=function(e){P(a,e);function a(){var e;var t;v(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}t=b(this,(e=w(a)).call.apply(e,[this].concat(r)));E(O(t),"state",{flagType:null});E(O(t),"handleSubmit",function(){t.props.onClose(t.state.flagType)});return t}h(a,[{key:"render",value:function e(){var n=this;var t=this.props,r=t.onClose,o=t.post,a=t.tab;var i=["inappropriate"];if(a==="questions"){i.push("shouldBeTipsOrThanks")}else if(a==="comments"){i.push("shouldBeQuestion")}i.push.apply(i,["lowquality","spam"]);return s.createElement(p.default,{style:L.modal,onClose:r},s.createElement(l.View,{style:L.content},s.createElement(c.Title,{style:L.title},m.flagModalStrings.header),s.createElement(l.View,{style:L.post},s.createElement(c.Body,null,o.content)),s.createElement(l.View,null,i.map(function(t,e){return s.createElement(l.View,{key:t,style:[L.row,e>0&&L.separator]},s.createElement(C,{style:L.button,onClick:function e(){return n.setState({flagType:t})}},s.createElement(f.default,{selected:n.state.flagType===t}),s.createElement(c.Body,null,m.flagModalStrings.flags[t].title)),s.createElement(c.Body,{style:L.desc},m.flagModalStrings.flags[t].description))}))),s.createElement(p.ModalFooter,{style:I},s.createElement(d.default,{width:138,color:u.default.blue,onClick:this.handleSubmit,disabled:!this.state.flagType},m.flagModalStrings.submit)))}}]);return a}(s.Component);t.default=S;var T=16;var x=16;var A=8;var j=16;var M=16;var L=r.StyleSheet.create({modal:{width:662,maxHeight:"80%"},title:{marginBottom:24},content:{flex:1,padding:"64px 64px 0px 64px"},row:{padding:"".concat(T,"px 0"),flexShrink:0,alignItems:"start"},button:g({},o.default.notAButton,{display:"inline-flex",flexDirection:"row",alignItems:"center",":focus":{outline:"auto"}}),separator:{borderTop:"solid 1px ".concat(u.default.offBlack16)},desc:{color:u.default.offBlack64,paddingLeft:x+A},post:{flex:1,border:"solid 1px ".concat(u.default.offBlack16),color:u.default.offBlack64,borderRadius:4,padding:j,overflow:"auto"}});var I={justifyContent:"flex-end",paddingLeft:M,paddingRight:M}},mEQP:function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("5DmW");n("NBAS");n("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var g=l(n("q1tI"));var v=s(n("i8i4"));var r=n("mR6N");var y=s(n("wa3X"));var h=n("JasB");var b=n("JimW");var w=s(n("F4p2"));var O=n("p3MR");var o=s(n("6OHE"));var a=s(n("uEGL"));var i=s(n("TqM9"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function c(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){C(t,e,n[e])})}return t}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function d(e,t,n){if(t)p(e.prototype,t);if(n)p(e,n);return e}function f(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return P(e)}function m(e){m=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return m(e)}function P(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function k(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)E(e,t)}function E(e,t){E=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return E(e,t)}function C(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var S=o.default.domainColors("default").domain1;var T=function(e){k(o,e);function o(){var e;var i;u(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++){n[r]=arguments[r]}i=f(this,(e=m(o)).call.apply(e,[this].concat(n)));C(P(i),"renderFormattingOptionsButton",function(e){var t=i.props,n=t.onToggleFormattingOptionsExpanded,r=t.formattingOptionsExpanded;var o=!r;var a=r?O.footerStrings.hideFormattingOptions:O.footerStrings.showFormattingOptions;return g.createElement(y.default,{kind:"tertiary","aria-expanded":r,"aria-controls":e,"aria-label":a,style:(x.button,x.formattingButton),onClick:function e(){if(n){n(o)}}},a)});return i}d(o,[{key:"componentDidUpdate",value:function e(t){var n=this.submitButton;var r=n&&this.props.submitStatus==="failed"&&t.submitStatus==="submitting";if(r){setTimeout(function(){return n&&n.focus()},0)}}},{key:"getSubmitButtonCopy",value:function e(){var t=this.props,n=t.tab,r=t.isAnswer,o=t.isReply,a=t.editing,i=t.acceptingClarification,s=t.submitStatus;if(s==="submitting"){return O.footerStrings.submitting}else if(a){return O.postStrings.saveChanges}else if(i){return O.postStrings.acceptClarification}else if(o){return O.postStrings.comment}else if(!r&&n){return O.tabsStrings[n].buttonContents}else if(r&&n==="projecthelp"){return O.postStrings.answerButtonContents}else{return O.postStrings.replyButtonContents}}},{key:"render",value:function e(){var n=this;var t=this.props,r=t.isReply,o=t.editing,a=t.acceptingClarification,i=t.canShowFormattingOptions,s=t.formattingOptionsExpanded,l=t.submitButtonDisabled,c=t.submitStatus,u=t.onSubmit;var p=o||a;var d=c==="submitting";var f=this.getSubmitButtonCopy();var m=a?[x.textareaFooter,x.textareaFooterAcceptingClarification]:x.textareaFooter;return g.createElement(b.UniqueIDProvider,{mockOnFirstRender:true,scope:"discussion-post-formatting-options-button"},function(e){return g.createElement(b.View,{style:[x.textareaContainerFooter,r&&x.textareaReplyFooter]},g.createElement(b.View,{style:m,"aria-live":"polite"},!a&&n.renderFormattingOptionsButton(e.get("toggle-button")),g.createElement(b.View,{style:x.buttonContainer},p&&g.createElement(y.default,{kind:"tertiary",onClick:n.props.onCancel,style:x.button},O.postStrings.cancel),p&&g.createElement(h.Strut,{size:8}),g.createElement(y.default,{disabled:l||d,onClick:u,spinner:d,style:x.button,ref:function e(t){return n.submitButton=v.default.findDOMNode(t)},"aria-label":f},f))),g.createElement(b.View,{style:[x.formattingOptionsContainer,i&&s&&x.formattingOptionsContainerExpanded],id:e.get("toggle-button")},i&&s&&g.createElement(w.default,null)))})}}]);return o}(g.Component);t.default=T;C(T,"defaultProps",{editing:false,acceptingClarification:false});var x=r.StyleSheet.create({textareaContainerFooter:{padding:"12px 16px",border:i.default.border,borderTop:"none",borderBottomRightRadius:4,borderBottomLeftRadius:4},textareaFooter:C({flexDirection:"row",justifyContent:"space-between"},a.default.xsOrSmaller,{flexDirection:"column"}),textareaReplyFooter:{border:"none",paddingLeft:0,paddingRight:0},textareaFooterAcceptingClarification:{justifyContent:"flex-end"},submitButtonContents:{flexDirection:"row",alignItems:"center",justifyContent:"center"},button:C({},a.default.xsOrSmaller,{width:"calc(100% + 60px)"}),submitButtonSpinner:{marginRight:8},notAButton:c({},i.default.notAButton),footerSecondaryButton:C({color:S,marginRight:16,":hover":{textDecoration:"underline"}},a.default.xsOrSmaller,{width:"100%",marginBottom:16,marginRight:0}),formattingOptionsContainer:{display:"none"},formattingOptionsContainerExpanded:{display:"flex"},formattingLabel:{fontWeight:"bold"},formattingButton:C({},a.default.xsOrSmaller,{width:"100%"}),buttonContainer:{flexDirection:"row"}})},mt3D:function(e,t,n){"use strict";n("ma9I");n("5DmW");n("NBAS");var f=c(n("q1tI"));var i=n("mR6N");var s=n("JimW");var r=a(n("TqM9"));var o=a(n("6OHE"));var m=a(n("17AU"));var l=a(n("wINb"));var g=n("p3MR");var v=a(n("OsXK"));var y=a(n("RdRB"));var h=a(n("QCGh"));var b=n("AE4M");function a(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function d(e,t,n){if(t)p(e.prototype,t);if(n)p(e,n);return e}function w(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return P(e)}function O(e){O=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return O(e)}function P(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function k(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)E(e,t)}function E(e,t){E=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return E(e,t)}function C(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var S=function(e){k(a,e);function a(){var e;var t;u(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}t=w(this,(e=O(a)).call.apply(e,[this].concat(r)));C(P(t),"renderImage",function(e,t,n){var r=null;if(!t){r=f.createElement("img",{className:(0,i.css)(A.image),src:(0,l.default)(n),alt:"","aria-hidden":true})}else{r=f.createElement("img",{className:(0,i.css)(A.image),src:(0,l.default)(n),alt:g.avatarStrings.getAvatarForUser((0,b.getAriaAvatarName)(t),e)})}return f.createElement(s.View,{style:A.container},r)});return t}d(a,[{key:"render",value:function e(){var o=this;var t=this.props,n=t.showCurrentUserAvatar,a=t.avatarSrc,i=t.avatarName,s=t.username,r=t.enableProfilePreviewTooltip,l=t.kaid;var c;if(!n){c=this.renderImage(s,i,a)}else{c=f.createElement(m.default,{mockOnFirstRender:true},function(e){var t=e.getUserProfile()&&e.getUserProfile().get("username")||s;var n=e.getUserProfile()&&e.getUserProfile().get("avatarName")||i;var r=e.getUserProfile()&&e.getUserProfile().get("avatar").thumbnailSrc||a;return o.renderImage(t,n,r)})}var u=f.createElement(y.default,{kaid:l});var p="".concat(g.avatarStrings.getAvatarForUser((0,b.getAriaAvatarName)(i),s)," ").concat(g.avatarStrings.goToUserProfile(s));var d="/profile/".concat(l,"/discussion");return r?f.createElement(v.default,{content:u,side:"top",offset:12,horizontalAlignment:"left",enablePointerEvents:true,ariaLive:"polite"},f.createElement(h.default,{href:d,"aria-label":p},c)):c}}]);return a}(f.Component);C(S,"defaultProps",{showCurrentUserAvatar:false,avatarName:"Default Khan Academy avatar",avatarSrc:"/images/avatars/svg/leaf-green.svg",username:"",kaid:"",enableProfilePreviewTooltip:false});var T=48;var x=32;var A=i.StyleSheet.create({container:{borderRadius:"50%",width:T,minWidth:T,height:T,border:"solid 2px ".concat(r.default.borderColor),backgroundColor:o.default.colors.white,flexDirection:"row",justifyContent:"center",alignItems:"center"},image:{width:x,height:x}});e.exports=S},oia8:function(e,t,n){"use strict";n("5DmW");n("NBAS");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=c(n("q1tI"));var o=n("mR6N");var a=l(n("Pwnf"));var i=n("JimW");var s=l(n("TqM9"));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function d(e,t,n){if(t)p(e.prototype,t);if(n)p(e,n);return e}function f(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return m(e)}function m(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function g(e){g=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return g(e)}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)y(e,t)}function y(e,t){y=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return y(e,t)}function h(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var b=function(e){v(t,e);function t(){u(this,t);return f(this,g(t).apply(this,arguments))}d(t,[{key:"render",value:function e(){var t=this.props.selected;return r.createElement(i.View,{"aria-hidden":"true",style:[O.fakeRadioButton,t&&O.selectedFakeRadioButton]})}}]);return t}(r.Component);t.default=b;h(b,"defaultProps",{selected:false});var w=16;var O=o.StyleSheet.create({fakeRadioButton:{flexShrink:0,flexGrow:0,borderRadius:"50%",width:w,height:w,border:s.default.border,marginRight:8,boxSizing:"border-box"},selectedFakeRadioButton:{border:"4px solid ".concat(a.default.blue)}})},p3MR:function(e,t,n){"use strict";var i18n=n("HEOz");var r={loginUpsellHeading:i18n._("Want to join the conversation?"),loginUpsellButtonContent:i18n._("Log in"),notEnoughPoints:i18n._("You need at least 5000 energy points to get started."),wantToAskQuestion:i18n._("Want to ask a question to the community about improving your project?"),helpRequestsLink:i18n._("Head over to the help requests tab!"),questionsTabForQuestions:i18n._("We'll keep this area for questions that the community has for you about your project."),cantPostHelpRequest:i18n._("To give everyone a fair chance at getting help, you can't request help again until your current request is answered."),authorHelpRequestsWillAppearHere:i18n._("This area is reserved for help requests from this project's author."),authorAnsweringOwnHelpRequest:i18n._("By answering your own post, your request won't be shown in the help requests list. If you want to clarify instead, you can edit your original post."),postQuestionLabel:i18n._("Questions"),postQuestionButtonContents:i18n._("Ask question"),postQuestionTipLabel:i18n._("Tip for a good question"),postQuestionTipContents:i18n._("Be specific, and add a timestamp or section. Example: “At 5:31, how is the moon large enough to block the sun? Isn't the sun way larger than the moon?”"),postQuestionListTabsLabel:i18n._("Questions"),postQuestionPlaceholder:i18n._("Ask a question..."),postQuestionTextAreaLabel:i18n._("Question"),thankAuthorLabel:i18n._("Tips & Thanks"),thankAuthorButtonContents:i18n._("Post tip or thanks"),thankAuthorTipLabel:i18n._("Post a tip or thank the author"),thankAuthorTipContents:i18n._("Share a tip, or offer positive feedback that lets the creator know what is working well."),thankAuthorListTabsLabel:i18n._("Tips & Thanks"),thankAuthorPlaceholder:i18n._("Post a tip or thanks..."),thankAuthorTextAreaLabel:i18n._("Tip or Thanks"),reportMistakeLabel:i18n._("Mistakes"),reportMistakeButtonContents:i18n._("Report mistake"),reportMistakeTipLabel:i18n._("If you spot an error in the content, report it here"),reportMistakeTipContents:i18n._('Example: “At 2:33, Sal said "single bonds" but meant covalent bonds.”'),reportMistakeListTabsLabel:i18n._("Mistakes"),reportMistakePlaceholder:i18n._("Report a mistake..."),reportMistakeTextAreaLabel:i18n._("Mistake"),requestHelpLabel:i18n._("Help Requests"),requestHelpButtonContents:i18n._("Request help"),requestHelpTipLabel:i18n._("Request help from your peers"),requestHelpTipContents:i18n._("Please describe your problem or question in detail. The better you describe it, the more likely you are to get a great response. Make sure you've checked the documentation first!"),requestHelpListTabsLabel:i18n._("Help requests"),requestHelpPlaceholder:i18n._("Request help..."),requestHelpTextAreaLabel:i18n._("Help request"),timestampFromLabel:i18n.doNotTranslate("From"),timestampToLabel:i18n.doNotTranslate("to"),acceptedClarificationLabel:i18n._("Accepted clarification"),clarificationListAccepted:i18n._("Accepted clarifications"),clarificationListSuggested:i18n._("Suggested clarifications"),reportMistake:i18n._("Report a mistake"),helpCenter:i18n._("Go to our Help Center for technical issues or feature requests"),hideFormattingOptions:i18n._("Hide formatting options"),showFormattingOptions:i18n._("Show formatting options"),submitting:i18n._("Saving..."),rawTextHeading:i18n._("Typing this"),formattedTextHeading:i18n._("Displays this"),bold:i18n._("bold"),boldDescription:i18n._("Emphasize text using a bolded typeface."),italics:i18n._("italics"),italicsDescription:i18n._("Emphasize text using an italicized typeface."),code:i18n._("code"),codeDescription:i18n._("Emphasize text using a monospaced typeface."),showLabel:i18n._("Show"),automaticallyHidden:i18n._("Automatically hidden"),deleted:i18n._("Deleted"),postedIn:i18n._("Posted in"),toolOpensModal:i18n._("Button opens signup modal"),reply:i18n._("Reply"),replyButtonContents:i18n._("Post reply"),replyPlaceholder:i18n._("Post a reply..."),answer:i18n._("Answer"),answerButtonContents:i18n._("Post answer"),answerPlaceholder:i18n._("Post an answer..."),getVotes:function e(t){return i18n.ngettext("%(num)s vote","%(num)s votes",t)},upvote:i18n._("Upvote"),downvote:i18n._("Downvote"),alreadyUpVoted:i18n._("You've upvoted this post."),alreadyDownVoted:i18n._("You've downvoted this post."),ariaAbstained:function e(t,n){if(t.type==="answer"){return i18n.ngettext("Your vote has been removed. This answer has %(num)s vote total.","Your vote has been removed. This answer has %(num)s votes total.",n)}else if(t.type==="reply"){return i18n.ngettext("Your vote has been removed. This comment has %(num)s vote total.","Your vote has been removed. This comment has %(num)s votes total.",n)}else{return i18n.ngettext("Your vote has been removed. This post has %(num)s vote total.","Your vote has been removed. This post has %(num)s votes total.",n)}},ariaDownvoted:function e(t,n){if(t.type==="answer"){return i18n.ngettext("You downvoted. This answer has %(num)s vote total.","You downvoted. This answer has %(num)s votes total.",n)}else if(t.type==="reply"){return i18n.ngettext("You downvoted. This comment has %(num)s vote total.","You downvoted. This comment has %(num)s votes total.",n)}else{return i18n.ngettext("You downvoted. This post has %(num)s vote total.","You downvoted. This post has %(num)s votes total.",n)}},ariaUpvoted:function e(t,n){if(t.type==="answer"){return i18n.ngettext("You upvoted. This answer has %(num)s vote total.","You upvoted. This answer has %(num)s votes total.",n)}else if(t.type==="reply"){return i18n.ngettext("You upvoted. This comment has %(num)s vote total.","You upvoted. This comment has %(num)s votes total.",n)}else{return i18n.ngettext("You upvoted. This post has %(num)s vote total.","You upvoted. This post has %(num)s votes total.",n)}},flag:i18n._("Flag"),flagAriaLabel:i18n._("Opens a modal to flag content"),flagged:i18n._("Flagged"),ariaFlagged:i18n._("You flagged this post."),noSelfVoting:i18n._("You can't vote for your own posts"),atLeast5000:i18n._("You need at least 5000 energy points to vote"),comment:i18n._("Comment"),getComments:function e(t){return i18n.ngettext("%(num)s comment","%(num)s comments",t)},loading:i18n._("Loading..."),replyCommentPlaceholder:i18n._("Post a comment..."),flagModalHeader:i18n._("Flag for Guardian attention"),abuse:i18n._("Flag as abuse"),abuseDesc:i18n._("disrespectful or offensive, an advertisement"),tipsOrThanks:i18n._("Flag as a tip or thanks"),tipsOrThanksDesc:i18n._("Should be in “Tips & thanks”"),question:i18n._("Flag as a question"),questionDesc:i18n._("Should be in “Questions”"),notHelpful:i18n._("Flag as not helpful"),notHelpfulDesc:i18n._("Low quality, not about the video topic, soliciting votes or seeking badges, a homework question, repeatedly making the same post"),aboutTheSite:i18n._("Flag as about the site"),aboutTheSiteDesc:i18n._("A question about Khan Academy (e.g. “What software does Sal use?”), a post about badges, a technical problem with the site, a request for videos or features"),submit:i18n._("Submit"),topVoted:i18n._("Top Voted"),recent:i18n._("Recent"),sortBy:i18n._("Sort by:"),clearFlags:i18n._("Clear flags"),approve:i18n._("Approve"),skip:i18n._("Skip"),acceptClarification:i18n._("Accept clarification"),changeToQuestion:i18n._("Change to question"),changeToTipsAndThanks:i18n._("Change to tip/thanks"),changeToMistakes:i18n._("Change to mistake"),edit:i18n._("Edit"),delete:i18n._("Delete"),undelete:i18n._("Undelete"),confirmDeletion:i18n._("Are you sure you want to delete this?"),showMore:i18n._("Show more..."),fromTheAuthor:i18n._("From the author:"),turnNotificationsOff:i18n._("Turn notifications off"),turnNotificationsOn:i18n._("Turn notifications on"),notificationsUnavailable:i18n._("Answer email notifications are off"),notificationsUnavailableTitle:i18n._("This question is very old, so you won't receive notifications when someone answers it."),findingProfileInformation:i18n._("Finding profile information..."),unclaimedPoints:i18n._("Unclaimed points"),questionMark:i18n._("?"),more:i18n._("More..."),saveChanges:i18n._("Save changes"),cancel:i18n._("Cancel"),clearAllFlags:i18n._("Clear all flags"),flagsTitle:i18n._("Flags:"),getAvatarForUser:function e(t,n){return i18n._("%(avatarName)s avatar for user %(username)s",{avatarName:t,username:n})},goToUserProfile:function e(t){return i18n._("Go to %(username)s's user profile.",{username:t})},getResponses:function e(t){return i18n.ngettext("%(num)s Response","%(num)s Responses",t)},seeAllReplies:function e(t){return i18n.ngettext("See %(num)s more reply","See %(num)s more replies",t)},hideReplies:function e(t){return i18n.ngettext("Hide %(num)s reply","Hide %(num)s replies",t)},seeAllAnswers:function e(t){return i18n.ngettext("See %(num)s more answer","See %(num)s more answers",t)},hideAnswers:function e(t){return i18n.ngettext("Hide %(num)s answer","Hide %(num)s answers",t)},appearsAtTimestamp:function e(t,n){return i18n._("Appears at %(openTimestamp)s - %(closeTimestamp)s",{openTimestamp:t,closeTimestamp:n})},preview:i18n._("Preview"),noResponses:i18n._("No responses yet."),joinTheConversation:i18n._("Join the conversation."),timestampExceedsVideoLength:function e(t,n){return i18n._("Your timestamp (%(timestamp)s) exceeds the video length (%(videoLength)s).",{timestamp:t,videoLength:n})},showComments:function e(t){return i18n.ngettext("Show %(num)s comment","Show %(num)s comments",t)},closeFlaggingModal:i18n._("Cancel flagging this post"),mistakesAreHidden:i18n._("Previously reported mistakes are hidden."),thanksForAnswering:i18n._("Thanks for answering!"),answeringGuidelinesLink:i18n._("See our guidelines for answering questions here."),projectPassedEval:i18n._("This project has passed evaluation."),projectFailedEval:i18n._("This project needs more work."),fromTheEvaluator:i18n._("From the evaluator:"),needsMoreWork:i18n._("The following objectives need more work:"),created:i18n._("Created"),answerQuestion:i18n._("Question"),unknown:i18n._("Unknown"),englishDiscussionUpsell:i18n._("Do you understand English? Click here to see more discussion happening on Khan Academy's English site.")};var o={questions:{key:"questions",label:r.postQuestionLabel,buttonContents:r.postQuestionButtonContents,tipLabel:r.postQuestionTipLabel,tipContents:r.postQuestionTipContents,listTabsLabel:r.postQuestionListTabsLabel,placeholder:r.postQuestionPlaceholder,textAreaLabel:r.postQuestionTextAreaLabel},comments:{key:"comments",label:r.thankAuthorLabel,buttonContents:r.thankAuthorButtonContents,tipLabel:r.thankAuthorTipLabel,tipContents:r.thankAuthorTipContents,listTabsLabel:r.thankAuthorListTabsLabel,placeholder:r.thankAuthorPlaceholder,textAreaLabel:r.thankAuthorTextAreaLabel},clarifications:{key:"clarifications",label:r.reportMistakeLabel,buttonContents:r.reportMistakeButtonContents,tipLabel:r.reportMistakeTipLabel,tipContents:r.reportMistakeTipContents,listTabsLabel:r.reportMistakeListTabsLabel,placeholder:r.reportMistakePlaceholder,textAreaLabel:r.reportMistakeTextAreaLabel},projecthelp:{key:"projecthelp",label:r.requestHelpLabel,buttonContents:r.requestHelpButtonContents,tipLabel:r.requestHelpTipLabel,tipContents:r.requestHelpTipContents,listTabsLabel:r.requestHelpListTabsLabel,placeholder:r.requestHelpPlaceholder,textAreaLabel:r.requestHelpTextAreaLabel}};var a={heading:r.loginUpsellHeading,buttonContent:r.loginUpsellButtonContent,notEnoughPoints:r.notEnoughPoints};var i={topVoted:r.topVoted,recent:r.recent,getResponses:r.getResponses,sortBy:r.sortBy};var s={reportMistake:r.reportMistake,helpCenter:r.helpCenter,hideFormattingOptions:r.hideFormattingOptions,showFormattingOptions:r.showFormattingOptions,submitting:r.submitting};var l={rawTextHeading:r.rawTextHeading,formattedTextHeading:r.formattedTextHeading,bold:r.bold,boldDescription:r.boldDescription,italics:r.italics,italicsDescription:r.italicsDescription,code:r.code,codeDescription:r.codeDescription};var c={clarificationListAccepted:r.clarificationListAccepted,clarificationListSuggested:r.clarificationListSuggested,acceptedClarificationLabel:r.acceptedClarificationLabel,showLabel:r.showLabel,automaticallyHidden:r.automaticallyHidden,deleted:r.deleted,showMore:r.showMore,postedIn:r.postedIn,appearsAtTimestamp:r.appearsAtTimestamp,timestampFromLabel:r.timestampFromLabel,timestampToLabel:r.timestampToLabel,created:r.created,unknown:r.unknown,englishDiscussionUpsell:r.englishDiscussionUpsell};var u={wantToAskQuestion:r.wantToAskQuestion,helpRequestsLink:r.helpRequestsLink,questionsTabForQuestions:r.questionsTabForQuestions,cantPostHelpRequest:r.cantPostHelpRequest,authorHelpRequestsWillAppearHere:r.authorHelpRequestsWillAppearHere,authorAnsweringOwnHelpRequest:r.authorAnsweringOwnHelpRequest};var p={toolOpensModal:r.toolOpensModal,reply:r.reply,replyButtonContents:r.replyButtonContents,replyPlaceholder:r.replyPlaceholder,answer:r.answer,answerButtonContents:r.answerButtonContents,answerPlaceholder:r.answerPlaceholder,answerQuestion:r.answerQuestion,comment:r.comment,getComments:r.getComments,loading:r.loading,replyCommentPlaceholder:r.replyCommentPlaceholder,getVotes:r.getVotes,upvote:r.upvote,downvote:r.downvote,alreadyUpVoted:r.alreadyUpVoted,alreadyDownVoted:r.alreadyDownVoted,noSelfVoting:r.noSelfVoting,atLeast5000:r.atLeast5000,ariaAbstained:r.ariaAbstained,ariaDownvoted:r.ariaDownvoted,ariaUpvoted:r.ariaUpvoted,flag:r.flag,flagAriaLabel:r.flagAriaLabel,flagged:r.flagged,ariaFlagged:r.ariaFlagged,clearFlags:r.clearFlags,approve:r.approve,skip:r.skip,acceptClarification:r.acceptClarification,changeToQuestion:r.changeToQuestion,changeToTipsAndThanks:r.changeToTipsAndThanks,changeToMistakes:r.changeToMistakes,edit:r.edit,delete:r.delete,undelete:r.undelete,fromTheAuthor:r.fromTheAuthor,more:r.more,turnNotificationsOff:r.turnNotificationsOff,turnNotificationsOn:r.turnNotificationsOn,notificationsUnavailable:r.notificationsUnavailable,notificationsUnavailableTitle:r.notificationsUnavailableTitle,saveChanges:r.saveChanges,cancel:r.cancel};var d={seeAllReplies:r.seeAllReplies,hideReplies:r.hideReplies,seeAllAnswers:r.seeAllAnswers,hideAnswers:r.hideAnswers};var f={inappropriate:{title:r.abuse,description:r.abuseDesc},lowquality:{title:r.notHelpful,description:r.notHelpfulDesc},shouldBeTipsOrThanks:{title:r.tipsOrThanks,description:r.tipsOrThanksDesc},shouldBeQuestion:{title:r.question,description:r.questionDesc},spam:{title:r.aboutTheSite,description:r.aboutTheSiteDesc}};var m={header:r.flagModalHeader,flags:f,submit:r.submit};var g={cancel:r.cancel,clearAllFlags:r.clearAllFlags,flagsTitle:r.flagsTitle};var v={cancel:r.cancel,delete:r.delete,confirmDeletion:r.confirmDeletion};var y={getAvatarForUser:r.getAvatarForUser,goToUserProfile:r.goToUserProfile,findingProfileInformation:r.findingProfileInformation,unclaimedPoints:r.unclaimedPoints,questionMark:r.questionMark};var h={projectPassedEval:r.projectPassedEval,projectFailedEval:r.projectFailedEval,fromTheEvaluator:r.fromTheEvaluator,needsMoreWork:r.needsMoreWork};e.exports={tabsStrings:o,upsellStrings:a,headerStrings:i,footerStrings:s,formattingOptionsStrings:l,miscStrings:c,postStrings:p,flagModalStrings:m,clearFlagsModalStrings:g,confirmDeletionModalStrings:v,avatarStrings:y,answersStrings:d,userProjectsStrings:u,evalStrings:h}},qRmI:function(e,t,n){"use strict";n("ma9I");n("5DmW");n("NBAS");Object.defineProperty(t,"__esModule",{value:true});t.default=t.AcceptedClarificationInput=void 0;var i=m(n("q1tI"));var r=n("/MKj");var a=n("mR6N");var o=f(n("gE8/"));var s=n("JimW");var l=f(n("HbaH"));var c=n("IZy4");var u=n("p3MR");var p=f(n("TqM9"));var d=n("DDFQ");function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function y(e,t,n){if(t)v(e.prototype,t);if(n)v(e,n);return e}function h(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return w(e)}function b(e){b=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return b(e)}function w(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function O(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)P(e,t)}function P(e,t){P=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return P(e,t)}function k(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var E=function(e){O(o,e);function o(){var e;var f;g(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++){n[r]=arguments[r]}f=h(this,(e=b(o)).call.apply(e,[this].concat(n)));k(w(f),"state",{startingTimestampMinutes:0,startingTimestampSeconds:20,endingTimestampMinutes:0,endingTimestampSeconds:40});k(w(f),"handleSubmitAcceptedClarification",function(e){var t=f.props,n=t.post,r=t.editingOrAccepting,o=t.onSubmitClarificationAcceptance,a=t.onSubmitClarificationEdit;var i=f.state,s=i.startingTimestampMinutes,l=i.startingTimestampSeconds,c=i.endingTimestampMinutes,u=i.endingTimestampSeconds;var p=s*60+l;var d=c*60+u;if(p>=d){return}if(r==="editing"){a(e,p,d)}else if(n.authorAvatarSrc){o(n.key,n.authorAvatarSrc,n.authorNickname,n.authorKaid,e,p,d)}});k(w(f),"renderClarificationTimestampInput",function(o){var e=f.state[o];return i.createElement("input",{className:(0,a.css)(C.acceptClarificationInput),value:e,onChange:function e(t){var n=t.target.value;var r=n.length?Number(n):0;f.setState(k({},o,r))},type:"number",min:0,max:59})});return f}y(o,[{key:"render",value:function e(){var t=this.props,n=t.post,r=t.contentId,o=t.topicSlug,a=t.onCancel;return i.createElement(s.View,{style:C.replyInputContainer},i.createElement(l.default,{acceptingClarification:true,tab:"clarifications",contentKind:"Video",contentId:r,topicSlug:o,feedbackKey:n.key,initialPostContent:n.content,onCancel:a,onSubmitAcceptedClarification:this.handleSubmitAcceptedClarification}),i.createElement(s.View,{style:C.acceptClarificationContainer},u.miscStrings.timestampFromLabel,this.renderClarificationTimestampInput("startingTimestampMinutes"),":",this.renderClarificationTimestampInput("startingTimestampSeconds"),u.miscStrings.timestampToLabel,this.renderClarificationTimestampInput("endingTimestampMinutes"),":",this.renderClarificationTimestampInput("endingTimestampSeconds")))}}],[{key:"getDerivedStateFromProps",value:function e(t){var n=t.post,r=t.editingOrAccepting;var o=20;var a=40;if(r==="editing"&&n.closeTimestamp){o=n.openTimestamp;a=n.closeTimestamp}else if(n.content){o=(0,c.getTimestampSecondsFromText)(n.content);a=o+20}var i=(0,c.getTimestampFromSeconds)(o);var s=(0,c.getTimestampFromSeconds)(a);return{startingTimestampMinutes:Number(i.minutes),startingTimestampSeconds:Number(i.seconds),endingTimestampMinutes:Number(s.minutes),endingTimestampSeconds:Number(s.seconds)}}}]);return o}(i.Component);t.AcceptedClarificationInput=E;var C=a.StyleSheet.create({spinner:{marginRight:o.default.xSmall},replyInputContainer:{paddingBottom:o.default.large},acceptClarificationContainer:{display:"block",marginLeft:p.default.avatarContainerDiameter+p.default.avatarFormSpace},acceptClarificationInput:{width:40,padding:0,margin:"16px 4px 0 4px",textAlign:"right"}});var S={onSubmitClarificationAcceptance:d.acceptClarificationAction,onSubmitClarificationEdit:d.editAcceptedClarificationAction};var T=function e(t){return{contentId:t.contentId}};var x=(0,r.connect)(T,S)(E);var A=x;t.default=A},t0zn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=t.createDiscussionStore=void 0;var r=n("ANjH");var o=i(n("TdMD"));var a=i(n("wkgs"));function i(e){return e&&e.__esModule?e:{default:e}}var s={contentKind:"",contentId:"",youtubeId:null,posts:{},acceptedClarificationPosts:[],tabs:{questions:{cursor:"",isComplete:true,postKeys:[],totalCount:0},comments:{cursor:"",isComplete:true,postKeys:[],totalCount:0},clarifications:{cursor:"",isComplete:true,postKeys:[],totalCount:0},projecthelp:{cursor:"",isComplete:true,postKeys:[],totalCount:0}},newPostKey:null,currentTab:"questions",currentSort:"top-voted",currentCursor:"",qaExpandKey:null,expandFeedbackType:null,displayInputPostKey:null,apiId:"",clarificationBeingAcceptedKey:null,postBeingEditedKey:null,hasUnansweredHelpRequests:null};var l=(0,r.applyMiddleware)(o.default)(r.createStore);var c=function e(){return l(a.default,s)};t.createDiscussionStore=c;var u=c();t.default=u},tCRy:function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("yXV3");n("5DmW");n("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=t.defaultApi=t.fetchPostsParameters=t.fetchPostsUrl=void 0;var o=n("skGw");var a=r(n("gXb0"));function r(e){return e&&e.__esModule?e:{default:e}}function i(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){s(t,e,n[e])})}return t}function s(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function l(e,t){if(e==null)return{};var n=c(e,t);var r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++){r=a[o];if(t.indexOf(r)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,r))continue;n[r]=e[r]}}return n}function c(e,t){if(e==null)return{};var n={};var r=Object.keys(e);var o,a;for(a=0;a<r.length;a++){o=r[a];if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}var u=1;var p=2;var d={UP:1,ABSTAIN:0,DOWN:-1};var f={"top-voted":u,recent:p};var m={"Content-Type":"application/json"};var g={"Content-Type":"application/x-www-form-urlencoded"};var v="/api/internal/discussions";var y=function e(t){return"/api/internal/feedback/".concat(t)};var h=function e(t,n){var r="/api/internal/clarifications_for/".concat(t);return n?r+"/".concat(n):r};var b=function e(t){var n=O(t);var r=P(t);return w(n)(r)};var w=function e(r){return function(e){var t=(0,a.default)(e,true);var n="".concat(r).concat(t);return(0,o.khanFetch)(n).then(function(e){return e.json()})}};var O=function e(t){var n=t.contentKind,r=t.contentId,o=t.currentTab,a=t.youtubeId;var i=n.toLowerCase();var s=r;var l=o;if(n==="Video"&&o==="clarifications"&&a){i="youtubevideo";s=a}if(n==="scratchpad"&&o==="projecthelp"){l="projectfeedback"}return"".concat(v,"/").concat(i,"/").concat(s,"/").concat(l)};t.fetchPostsUrl=O;var P=function e(t){var n=t.currentTab,r=t.currentSort,o=t.qaExpandKey,a=t.expandFeedbackType,i=t.cursor;var s=f[r]||u;var l={casing:"camel",sort:s,limit:10,page:0};if(i){l.cursor=i}if(o&&a===n){l.qa_expand_key=o}return l};t.fetchPostsParameters=P;var k=function e(t){return(0,o.khanFetch)("".concat(y(t.postKey),"/notifications"),{method:t.enable?"PUT":"DELETE"}).then(function(e){return e.json()})};var E=function e(t){return(0,o.khanFetch)("".concat(v,"/voteentity"),{method:"POST",body:(0,a.default)(t),headers:g})};var C=function e(t){return E({entity_key:t.postKey,vote_type:t.upVoted?d.ABSTAIN:d.UP})};var S=function e(t){return E({entity_key:t.postKey,vote_type:t.downVoted?d.ABSTAIN:d.DOWN})};var T=function e(t){return(0,o.khanFetch)("".concat(v,"/flagentity"),{method:"POST",body:(0,a.default)(t),headers:g})};var x={inappropriate:"inappropriate",lowquality:"lowquality",shouldBeQuestion:"changetoquestion",shouldBeTipsOrThanks:"changetocomment",spam:"spam",plagiarism:"plagiarism","vote-soliciting":"vote-soliciting","using-disallowed":"using-disallowed"};var A=function e(t){var n=x[t.flag];return T({entity_key:t.postKey,flag:n})};var j=function e(t){return(0,o.khanFetch)("".concat(y(t.postKey),"/changetype"),{method:"PUT",body:JSON.stringify({type:t.intoType}),headers:m})};var M=function e(t){return(0,o.khanFetch)("".concat(y(t.postKey),"/clearflags"),{method:"PUT",headers:m})};var L=function e(t){return(0,o.khanFetch)("".concat(y(t.postKey)),{method:"DELETE",headers:m})};var I=function e(t){return(0,o.khanFetch)("".concat(y(t.postKey),"/undelete"),{method:"PUT",headers:m})};var F=function e(t){return(0,o.khanFetch)("".concat(v,"/").concat(t.postKey,"/replies?casing=camel")).then(function(e){return e.json()})};var D=function e(t){var n=t.postKey,r=l(t,["postKey"]);return(0,o.khanFetch)("".concat(v,"/").concat(n,"/replies?casing=camel"),{method:"POST",body:JSON.stringify(r),headers:m}).then(function(e){return e.json()})};var K=function e(t){return(0,o.khanFetch)(h(t.youtubeId)).then(function(e){return e.json()})};var R=function e(t){var n={reporter:{avatarSrc:t.avatarSrc,nickname:t.nickname,kaid:t.kaid},open_timestamp:t.openTimestamp,close_timestamp:t.closeTimestamp,text:t.text,youtube_id:t.youtubeId};return(0,o.khanFetch)(h(t.youtubeId),{method:"POST",headers:m,body:JSON.stringify(n)}).then(function(e){return e.json()})};var B=function e(t){var n={reporter:{avatarSrc:t.avatarSrc,nickname:t.nickname,kaid:t.kaid},open_timestamp:t.openTimestamp,close_timestamp:t.closeTimestamp,text:t.text,youtube_id:t.youtubeId,key:t.key};return(0,o.khanFetch)(h(t.youtubeId,t.key),{method:"PUT",headers:m,body:JSON.stringify(n)}).then(function(e){return e.json()})};var V=function e(t){return(0,o.khanFetch)(h(t.youtubeId,t.postKey),{method:"DELETE",headers:m})};var N={getId:function e(){return"default"},fetchPosts:b,modifyNotificationsFlag:k,upvotePost:C,downvotePost:S,flagPost:A,changeType:j,clearFlags:M,deletePost:L,undeletePost:I,fetchReplies:F,addReply:D,fetchAcceptedClarifications:K,acceptClarification:R,editAcceptedClarification:B,deleteAcceptedClarification:V};t.defaultApi=N;var q={};var U={get:function e(t){var n=t&&q[t];return n||i({},N)},register:function e(t,n){q[t]=n}};var H=U;t.default=H},wkgs:function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("fbCW");n("yq1k");n("2B1R");n("ToJy");n("5DmW");n("U3f4");n("JTJg");n("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.calcSumVotes=qe;t.flattenPosts=Ue;t.default=r;var Ke=n("AE4M");function Re(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){Be(t,e,n[e])})}return t}function Be(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var Ve=1;var Ne=-1;function qe(e,t){if(t===Ve){if(e.upVoted){return e.sumVotesIncremented-1}else{return e.sumVotesIncremented+(e.downVoted?2:1)}}else{if(e.downVoted){return e.sumVotesIncremented+1}else{return e.sumVotesIncremented-(e.upVoted?2:1)}}}function Ue(e){return e.reduce(function(e,t){var n=t.answers||[];return Re({},e,Ue(n),Be({},t.key,Re({},t,{answers:n.map(function(e){return e.key}),replies:[]})))},{})}function r(o,e){switch(e.type){case"initializeContent":{var t=e.contentKind,n=e.contentId,r=e.youtubeId,a=e.qaExpandKey;var i=e.expandFeedbackType==="projectfeedback"?"projecthelp":e.expandFeedbackType;return Re({},o,{contentKind:t,contentId:n,youtubeId:r,qaExpandKey:a,expandFeedbackType:i,currentTab:i?i:o.currentTab})}case"initializeDiscussionListComponent":{var s=e.tab,l=e.cursor,c=e.apiId;var u=o.tabs;return Re({},o,{apiId:c||"",contentKind:"Topic",currentTab:s,tabs:Re({},u,Be({},s,Re({},u[s],{cursor:l})))})}case"postSuccess":{var p=e.post,d=e.tab;p.answers=p.answers||[];var f=[];var m={};if(p.type==="answer"&&p.questionKey){var g;f=o.tabs[d].postKeys;var v=o.posts[p.questionKey];v.answers.unshift(p.key);m=Re({},o.posts,(g={},Be(g,p.questionKey,v),Be(g,p.key,p),g))}else{f=[p.key].concat(o.tabs[d].postKeys);m=Re(Be({},p.key,p),o.posts)}var y=o.hasUnansweredHelpRequests;if(p.type==="projecthelp"){y=true}else if(d==="projecthelp"&&p.type==="answer"&&y){var h=o.tabs.projecthelp.postKeys;if(h.length===1){y=false}else{var b=h.find(function(e){return(0,Ke.isPostUnanswered)(e,m)});y=!!b}}return Re({},o,{posts:m,hasUnansweredHelpRequests:y,tabs:Re({},o.tabs,Be({},d,Re({},o.tabs[d],{postKeys:f,totalCount:o.tabs[d].totalCount+1}))),newPostKey:p.key})}case"fetchingPosts":{return Re({},o,{fetchingPosts:true})}case"updatePosts":{var w=e.tab,O=e.cursor,P=e.isComplete,k=e.totalCount;var E=o.tabs;var C=Re({},o.posts,Ue(e.posts));var S=w!=="projecthelp"?e.posts:e.posts.filter(function(e){return e.type==="projecthelp"});var T=S.map(function(e){return e.key});var x=e.acceptedClarificationPosts||[];var A=function e(t,n){var r=function e(t){if(t.type!=="projecthelp"){return false}return(0,Ke.isPostUnanswered)(t.key,n)};return t.tab==="projecthelp"?t.posts.some(r):o.hasUnansweredHelpRequests};return Re({},o,{fetchingPosts:false,posts:C,acceptedClarificationPosts:x,hasUnansweredHelpRequests:A(e,C),tabs:Re({},E,Be({},w,{postKeys:T,cursor:O,isComplete:P,totalCount:k}))})}case"appendPosts":{var j=e.tab,M=e.cursor,L=e.isComplete;var I=o.tabs;var F=e.posts.filter(function(e){return!Object.keys(o.posts).includes(e.key)});var D=Re({},o.posts,Ue(F));var K=I[j].postKeys;var R=F.map(function(e){return e.key});var B=[].concat(K,R);return Re({},o,{fetchingPosts:false,posts:D,newPostKey:R.length?R[0]:null,tabs:Re({},I,Be({},j,Re({},o.tabs[j],{postKeys:B,cursor:M,isComplete:L})))})}case"updatePost":{var V=e.post;var N=o.posts[V.key];return Re({},o,{posts:Re({},o.posts,Be({},V.key,Re({},N,V)))})}case"updateReplies":{var q=e.replies,U=e.parentKey;var H=Re({},o.posts,Ue(q));return Re({},o,{posts:Re({},H,Be({},U,Re({},H[U],{replies:q.map(function(e){return e.key})})))})}case"addReply":{var W=e.parentKey,Q=e.post;var z=Re({},o.posts,Be({},Q.key,Q));z[W].replyCount+=1;var J=z[W].replies||[];z[W].replies=[].concat(J,[Q.key]);return Re({},o,{posts:z,newPostKey:Q.key})}case"upvotePost":{var Y=e.postKey;var G=o.posts[Y];if(!G){throw new Error("post doesn't exist")}return Re({},o,{posts:Re({},o.posts,Be({},Y,Re({},G,{downVoted:false,upVoted:!G.upVoted,sumVotesIncremented:qe(G,Ve)})))})}case"changePostType":{var X=e.postKey,Z=e.postType;var $=o.posts[X];if(Z==="answer"){throw new Error("Cannot change the type to an Answer")}else if(!$){throw new Error("post doesn't exist")}else if(!$.type){throw new Error("post has no type")}else if($.type==="reply"||$.type==="scratchpad"||$.type==="projecthelp"||$.type==="projecteval"||$.type==="projectevalanswer"){throw new Error('posts of type "'.concat($.type,"\" can't be changed to another type"))}var ee={comment:"comments",question:"questions",clarification:"clarifications"}[Z];var te=o.tabs[ee].postKeys;if($.type==="answer"||$.type==="projecthelp"){var ne;if(!$.questionKey){throw new Error("answer has no parent")}var re=o.posts[$.questionKey];if(!re){throw new Error("parent post does not exist")}return Re({},o,{posts:Re({},o.posts,(ne={},Be(ne,re.key,Re({},re,{answers:re.answers.filter(function(e){return e!==$.key})})),Be(ne,$.key,Re({},$,{type:Z})),ne)),tabs:Re({},o.tabs,Be({},ee,Re({},o.tabs[ee],{postKeys:[$.key].concat(te),totalCount:o.tabs[ee].totalCount+1})))})}else{var oe;var ae={comment:"comments",question:"questions",clarification:"clarifications"}[$.type];return Re({},o,{posts:Re({},o.posts,Be({},$.key,Re({},$,{type:Z}))),tabs:Re({},o.tabs,(oe={},Be(oe,ae,Re({},o.tabs[ae],{postKeys:o.tabs[ae].postKeys.filter(function(e){return e!==$.key}),totalCount:o.tabs[ae].totalCount-1})),Be(oe,ee,Re({},o.tabs[ee],{postKeys:[$.key].concat(te),totalCount:o.tabs[ee].totalCount+1})),oe))})}}case"clearFlags":{var ie=e.postKey;var se=o.posts[ie];if(!se){throw new Error("post doesn't exist")}return Re({},o,{posts:Re({},o.posts,Be({},ie,Re({},se,{flags:[],flaggedByUser:false})))})}case"downvotePost":{var le=e.postKey;var ce=o.posts[le];if(!ce){throw new Error("post doesn't exist")}return Re({},o,{posts:Re({},o.posts,Be({},le,Re({},ce,{downVoted:!ce.downVoted,upVoted:false,sumVotesIncremented:qe(ce,Ne)})))})}case"flagPost":{var ue=e.postKey,pe=e.flag;var de=o.posts[ue];var fe=de.flags||[];if(!de){throw new Error("post doesn't exist")}return Re({},o,{posts:Re({},o.posts,Be({},ue,Re({},de,{flaggedByUser:true,flags:[].concat(fe,[pe])})))})}case"changeTab":{return Re({},o,{currentTab:e.tab,newPostKey:null})}case"changeSortBy":{return Re({},o,{currentSort:e.sort,newPostKey:null})}case"resetNewPostKey":return Re({},o,{newPostKey:null});case"resetExpandKey":return Re({},o,{expandFeedbackType:null,qaExpandKey:null});case"deletePost":{var me=o.currentTab;var ge=e.postKey;var ve=o.posts[ge];if(!ve){throw new Error("post doesn't exist")}var ye=Re({},o.posts,Be({},ge,Re({},ve,{deleted:true})));var he=ve.type==="projecthelp";var be=o.hasUnansweredHelpRequests;if(he&&be){be=false;var we=o.tabs.projecthelp.postKeys;if(we.length>1){be=we.some(function(e){return(0,Ke.isPostUnanswered)(e,ye)})}}if(me==="projecthelp"&&ve.type==="answer"&&!be&&ve.questionKey){var Oe=o.posts[ve.questionKey];var Pe=Oe.answers;var ke=Pe.some(function(e){var t=ye[e];return t&&!t.deleted&&!t.appearsAsDeleted});be=!ke}return Re({},o,{hasUnansweredHelpRequests:be,posts:ye})}case"deleteAcceptedClarificationPost":{var Ee=e.postKey;var Ce=o.acceptedClarificationPosts.filter(function(e){return e.key!==Ee});if(Ce.length===o.acceptedClarificationPosts.length){throw new Error("accepted clarification doesn't exist")}return Re({},o,{acceptedClarificationPosts:Ce})}case"undeletePost":{var Se=e.postKey;var Te=o.posts[Se];if(!Te){throw new Error("post doesn't exist")}return Re({},o,{posts:Re({},o.posts,Be({},Se,Re({},Te,{deleted:false})))})}case"editPost":{var xe=e.postKey,Ae=e.content;var _e=o.posts[xe];if(!_e){throw new Error("post doesn't exist")}return Re({},o,{posts:Re({},o.posts,Be({},xe,Re({},_e,{content:Ae})))})}case"acceptClarification":{var je=e.originalPostKey,Me=e.post;var Le=Re({},o.posts);delete Le[je];var Ie=o.tabs.clarifications.postKeys.filter(function(e){return e!==je});if(Ie.length===o.tabs.clarifications.postKeys.length){throw new Error("Couldn't find the clarification to delete.")}return Re({},o,{posts:Le,acceptedClarificationPosts:[].concat(o.acceptedClarificationPosts,[Me]),tabs:Re({},o.tabs,{clarifications:Re({},o.tabs.clarifications,{postKeys:Ie,totalCount:o.tabs.clarifications.totalCount-1})})})}case"startAcceptingClarification":{return Re({},o,{clarificationBeingAcceptedKey:e.postKey})}case"stopAcceptingClarification":{return Re({},o,{clarificationBeingAcceptedKey:null})}case"startEditingPost":{return Re({},o,{postBeingEditedKey:e.postKey})}case"stopEditingPost":{return Re({},o,{postBeingEditedKey:null})}case"editAcceptedClarification":{var Fe=e.post;var De=o.acceptedClarificationPosts.map(function(e){if(e.key===Fe.key){return Fe}else{return e}});return Re({},o,{acceptedClarificationPosts:De})}case"toggleReplyInput":return Re({},o,{displayInputPostKey:o.displayInputPostKey===e.postKey?null:e.postKey});default:e.type;return o}}},y6Wz:function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("yq1k");n("yXV3");n("2B1R");n("zKZe");n("5DmW");n("NBAS");n("07d7");n("U3f4");n("JfAA");n("JTJg");n("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=t.DiscussionPost=void 0;var T=q(n("q1tI"));var x=q(n("i8i4"));var r=n("/MKj");var C=n("mR6N");var S=E(n("wd/R"));var A=n("JimW");var a=n("vwLt");var j=n("Vxy9");var o=E(n("wa3X"));var m=E(n("Pwnf"));var g=E(n("yts4"));var i=E(n("gE8/"));var s=n("DzHr");var M=E(n("qRmI"));var l=E(n("fjY8"));var L=E(n("mt3D"));var I=E(n("HbaH"));var d=E(n("iRWY"));var c=E(n("KPIR"));var u=E(n("RTsg"));var F=E(n("17AU"));var D=E(n("QCGh"));var f=E(n("hSyu"));var v=E(n("EIXS"));var p=E(n("XKyD"));var K=n("AE4M");var R=E(n("++Bp"));var y=E(n("mCQM"));var h=E(n("7e7+"));var b=E(n("gzgZ"));var B=n("p3MR");var w=E(n("6OHE"));var O=E(n("uEGL"));var V=E(n("TqM9"));var P=n("qRKg");var N=E(n("wINb"));var k=n("DDFQ");function E(e){return e&&e.__esModule?e:{default:e}}function q(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function U(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){Z(t,e,n[e])})}return t}function H(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function Q(e,t,n){if(t)W(e.prototype,t);if(n)W(e,n);return e}function z(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return Y(e)}function J(e){J=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return J(e)}function Y(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function G(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)X(e,t)}function X(e,t){X=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return X(e,t)}function Z(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function $(){$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};return $.apply(this,arguments)}function ee(e,t){if(e==null)return{};var n=te(e,t);var r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++){r=a[o];if(t.indexOf(r)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,r))continue;n[r]=e[r]}}return n}function te(e,t){if(e==null)return{};var n={};var r=Object.keys(e);var o,a;for(a=0;a<r.length;a++){o=r[a];if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}var ne=V.default.compactStyles;var re=(0,A.addStyle)("button");var oe=function e(t){var n=t.style,r=ee(t,["style"]);return T.createElement(re,$({style:[ue.linkStyledButton,n]},r))};var ae={downvoteSelected:{small:"M8.868 14.48l6.277-10.984A1 1 0 0 0 14.277 2H1.723a1 1 0 0 0-.868 1.496l6.277 10.985a1 1 0 0 0 1.736 0z"},downvote:{small:"M8 11.969L12.554 4H3.446L8 11.969zm.868 2.512a1 1 0 0 1-1.736 0L.855 3.496A1 1 0 0 1 1.723 2h12.554a1 1 0 0 1 .868 1.496L8.868 14.481z"},flagSelected:{small:"M4 11.775V15a1 1 0 0 1-2 0V2.66a1 1 0 0 1 .435-.826c1.04-.712 2.274-.968 3.701-.768 2.448.342 2.734 2.094 4.728 2.342 1.11.138 2.256-.05 3.436-.566a.5.5 0 0 1 .7.458v9.182a.5.5 0 0 1-.18.385c-1.097.914-2.416 1.275-3.956 1.083-2.439-.303-2.744-2.065-4.728-2.342A5.104 5.104 0 0 0 4 11.775z"},flag:{small:"M4 11.775V15a1 1 0 0 1-2 0V2.66a1 1 0 0 1 .435-.826c1.04-.712 2.274-.968 3.701-.768 2.448.342 2.734 2.094 4.728 2.342 1.11.138 2.256-.05 3.436-.566a.5.5 0 0 1 .7.458v9.182a.5.5 0 0 1-.18.385c-1.097.914-2.416 1.275-3.956 1.083-2.439-.303-2.744-2.065-4.728-2.342A5.104 5.104 0 0 0 4 11.775zm6.617-6.382c-1.2-.15-1.981-.57-2.99-1.39l-.279-.228c-.596-.484-.907-.647-1.489-.729-.735-.103-1.34-.035-1.859.195v6.474c.807-.169 1.614-.2 2.413-.088 1.185.166 1.945.585 2.957 1.41l.239.195c.618.503.92.661 1.501.733.743.093 1.354.002 1.89-.274V5.323a7.902 7.902 0 0 1-2.383.07z"},upvoteSelected:{small:"M8.868 2.52l6.277 10.984A1 1 0 0 1 14.277 15H1.723a1 1 0 0 1-.868-1.496L7.132 2.519a1 1 0 0 1 1.736 0z"},upvote:{small:"M3.446 13h9.108L8 5.031 3.446 13zM8.868 2.52l6.277 10.984A1 1 0 0 1 14.277 15H1.723a1 1 0 0 1-.868-1.496L7.132 2.519a1 1 0 0 1 1.736 0z"}};var ie=function e(t){var n=t.label,r=t.onClick;return T.createElement(o.default,{kind:"tertiary",size:"small",style:{marginRight:12},onClick:r},n)};var se=function(e){G(o,e);function o(){var e;var E;H(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++){n[r]=arguments[r]}E=z(this,(e=J(o)).call.apply(e,[this].concat(n)));Z(Y(E),"state",{ariaVoteMessage:"",ariaFlagMessage:"",repliesExpanded:false,showSignUpModal:false,editing:false,formattingOptionsExpanded:false,expandedKeys:[],skipped:false,isModalOpen:{clearFlags:false,confirmDeletion:false}});Z(Y(E),"nodes",{});Z(Y(E),"srOnlyToolOpensModal",T.createElement(A.View,{style:P.srOnly}," ",B.postStrings.toolOpensModal));Z(Y(E),"getRepliesContainerId",function(){return"".concat(E.props.post.key,"-replies-container")});Z(Y(E),"setModalVisibility",function(n){return function(t){E.setState(function(e){return{isModalOpen:U({},e.isModalOpen,Z({},t,n))}})}});Z(Y(E),"openModal",E.setModalVisibility(true));Z(Y(E),"closeModal",E.setModalVisibility(false));Z(Y(E),"handleUpvote",function(e){if(!e.isLoggedIn()){E.setState({showSignUpModal:true});return}var t=E.props.post;E.props.onUpvotePost(t);var n=t.sumVotesIncremented;if(E.props.post.upVoted){var r=n-1;E.setState({ariaVoteMessage:B.postStrings.ariaAbstained(t,r)})}else{var o=n+(E.props.post.downVoted?2:1);E.setState({ariaVoteMessage:B.postStrings.ariaUpvoted(t,o)})}});Z(Y(E),"handleDownvote",function(e){if(!e.isLoggedIn()){E.setState({showSignUpModal:true});return}var t=E.props.post;E.props.onDownvotePost(t);var n=t.sumVotesIncremented;if(E.props.post.downVoted){var r=n+1;E.setState({ariaVoteMessage:B.postStrings.ariaAbstained(t,r)})}else{var o=n-(E.props.post.upVoted?2:1);E.setState({ariaVoteMessage:B.postStrings.ariaDownvoted(t,o)})}});Z(Y(E),"handleChangeToQuestion",function(){E.props.onChangeType(E.props.post,"question")});Z(Y(E),"handleChangeToTipsAndThanks",function(){E.props.onChangeType(E.props.post,"comment")});Z(Y(E),"handleChangeToMistakes",function(){E.props.onChangeType(E.props.post,"clarification")});Z(Y(E),"handleClearAllFlags",function(){var e=E.props.moderatorMode;E.props.onClearFlags(E.props.post);if(e){E.setState({skipped:true})}});Z(Y(E),"handleDelete",function(){var e=E.props,t=e.moderatorMode,n=e.onDeletePost,r=e.post;n(r);if(t){E.setState({skipped:true})}});Z(Y(E),"handleSkip",function(){E.setState({skipped:true})});Z(Y(E),"handleClickComment",function(e){var t=E.props,n=t.post,r=t.onShowReplies;var o=n.replyCount,a=n.replies;if(!E.state.repliesExpanded&&o&&o>0&&a.length!==o){r(E.props.post.key)}if(!e.isLoggedIn()&&(!o||o===0)){E.setState({showSignUpModal:true})}else{E.setState({repliesExpanded:!E.state.repliesExpanded})}});Z(Y(E),"handleReplyInputToggle",function(){var e=E.props,t=e.displayInputPostKey,n=e.post;E.props.onToggleReplyInput(n.key);if(t===n.key){E.setState({formattingOptionsExpanded:false})}});Z(Y(E),"showFlagButton",function(e){var t=E.props.post;var n=t.type==="projecteval";if(n){return false}if(E.isCompactView()&&t.type!=="reply"){return false}return!e||e&&!e.attributes.isChildAccount});Z(Y(E),"renderPostHeader",function(e){var t=E.props,n=t.post,r=t.showPostedIn,o=t.showParentQuestion,a=t.moderatorMode;var i=n.key,s=n.authorNickname,l=n.created,c=n.date,u=n.badges,p=n.permalink,d=n.focus,f=n.authorKaid;var m=n.type==="scratchpad";var g=[V.default.datetime,!E.shouldShowAuthor()&&ne.datetime];var v=n.type==="reply";var y=a?(0,S.default)(c).toString():(0,S.default)(c).fromNow();var h=T.createElement(j.LabelMedium,{style:g},y);var b=null;if(m&&l){b=T.createElement(j.LabelMedium,{style:g},"(",B.miscStrings.created,": ",(0,S.default)(l).toString(),")")}var w=p?"".concat(p,"?qa_expand_key=").concat(i):"";var O=!v?T.createElement(D.default,{href:w},h):h;var P=null;if(n.deleted){P=T.createElement(j.HeadingXSmall,{style:ue.deletedPostLabel},B.miscStrings.deleted)}else if(n.appearsAsDeleted){P=T.createElement(j.HeadingXSmall,{style:ue.hiddenPostLabel},B.miscStrings.automaticallyHidden)}var k=[V.default.nameAndDatetime,E.isCompactView()&&ce.nameAndDatetime];return T.createElement(A.View,{style:[ue.postHeader,v&&ue.replyHeader]},T.createElement(A.View,null,T.createElement(A.View,{style:k},E.shouldShowAuthor()&&T.createElement(K.PostAuthorName,{name:s,kaid:f}),O,b,P),r&&!!d&&T.createElement(A.View,{style:ue.postedInContainer},T.createElement(j.LabelMedium,{style:ue.postedInLabel},B.miscStrings.postedIn),T.createElement(j.LabelMedium,null,T.createElement(D.default,{href:w,style:ue.postedInFocusLink},d.translatedTitle))),o&&n.question&&T.createElement(A.View,{style:ue.postedInContainer},T.createElement(j.LabelMedium,{style:ue.postedInLabel},B.postStrings.answerQuestion,":"),T.createElement(j.Caption,null,n.question&&n.question.content))),u&&u.length!==0&&T.createElement(A.View,{style:ue.badges},u.map(function(e,t){return T.createElement(A.View,{key:"discussionBadge".concat(t).concat(i),title:e.translatedDescription},T.createElement("img",{className:(0,C.css)(ue.badge),src:(0,N.default)(e.icons.small),alt:e.translatedDescription}))})),E.renderModeratorOrOwnerActionsAsDropdown(e,V.default.actionPickerMobile))});Z(Y(E),"renderReplyButton",function(e){var t=E.props,n=t.displayInputPostKey,r=t.post;var o=r.type==="projecthelp"?B.postStrings.answer:B.postStrings.reply;return e.isLoggedIn()?T.createElement("button",{className:(0,C.css)(ue.linkStyledButton),onClick:E.handleReplyInputToggle,"aria-expanded":n===r.key,"aria-controls":(0,K.getAnswerInputId)(r.key)},T.createElement(j.LabelLarge,null,o)):T.createElement("button",{className:(0,C.css)(ue.linkStyledButton),onClick:function e(){return E.setState({showSignUpModal:true})}},T.createElement(j.LabelLarge,null,o,E.srOnlyToolOpensModal))});Z(Y(E),"renderCommentButton",function(t){var e=E.props,n=e.post,r=e.restrictPosting;var o=E.state.repliesExpanded;var a=n.replyCount&&n.replyCount>0?B.postStrings.getComments(n.replyCount):B.postStrings.comment;if(n.replyCount&&n.replyCount>0||t.isLoggedIn()&&!r){return T.createElement("button",{className:(0,C.css)(ue.linkStyledButton),onClick:function e(){E.handleClickComment(t)},"aria-expanded":o,"aria-controls":E.getRepliesContainerId()},T.createElement(j.LabelLarge,null,a))}else if(!r){return T.createElement("button",{className:(0,C.css)(ue.linkStyledButton),onClick:function e(){return E.setState({showSignUpModal:true})}},T.createElement(j.LabelLarge,null,a,E.srOnlyToolOpensModal))}});Z(Y(E),"renderPostFooter",function(e){var t=E.props,n=t.post,r=t.restrictPosting,o=t.isMaximized;var a=e.getUserProfile();var i=n.type==="reply";var s=n.type==="question";var l=n.type==="projecthelp";var c=n.type==="projecteval";var u=n.type==="projectevalanswer";var p=r||E.isCompactView();var d=T.createElement(A.View,{style:ue.postFooterPrimary},(s||l)&&!p&&T.createElement(T.Fragment,null,E.renderReplyButton(e),T.createElement(j.LabelMedium,{style:ue.separator,"aria-hidden":true},"•")),!i&&!c&&!u&&!E.isCompactView()&&E.renderCommentButton(e),T.createElement(y.default,null),T.createElement(A.View,{style:V.default.tools},!i&&!c&&!u&&T.createElement(j.LabelXSmall,{style:ue.votesSum},"(",B.postStrings.getVotes(n.sumVotesIncremented),")"),E.renderTools(a,e)),!o&&E.renderModeratorOrOwnerActions(e,V.default.actionPickerDesktop));var f=T.createElement(A.View,null,o&&E.renderModeratorOrOwnerActions(e,ue.maximizedDesktop));return T.createElement(A.View,{style:ue.postFooter},d,f)});Z(Y(E),"renderReplies",function(e){var t=E.props,n=t.post,r=t.tab,o=t.topicSlug,a=t.resetNewPostKeyInfo,i=t.qaExpandKey,s=t.contentId,l=t.contentKind,c=t.restrictPosting;var u=n.replies,p=n.replyCount;var d=E.state.repliesExpanded;if(p===0&&(!e.isLoggedIn()||c)){return}if(d&&p&&p>0&&u.length===0){return T.createElement(A.View,{style:[ue.replyContainer,ue.loading]},T.createElement(h.default,{size:"xsmall",style:ue.spinner,sentryId:"discussion_replies_load",description:"Loading discussion post replies",sentryTeam:"learning-platform"}),B.postStrings.loading)}var f=[ue.outerRepliesContainer,E.isCompactView()&&ce.outerRepliesContainer];return T.createElement(A.View,{style:d?f:[ue.collapsedReplyContainer,ue.displayNone],id:E.getRepliesContainerId()},T.createElement(A.View,{style:ue.innerRepliesContainer},u&&u.map(function(e,t){return T.createElement(A.View,{style:ue.replyContainer,key:e},T.createElement(me,$({},E.props,{postKey:e,tab:r,autoFocusPost:t===0&&d})))})),e.isLoggedIn()&&!c&&T.createElement(A.View,{style:ue.replyInputContainer},T.createElement(I.default,{autoFocus:d&&!(u&&u.length)&&!(0,K.shouldAutoExpandPost)(n,l,i),isReply:true,tab:r,topicSlug:o,feedbackKey:n.key,resetNewPostKeyInfo:a,onPostSuccess:function e(t,n){},contentKind:l,contentId:s,showAvatar:E.isCompactView()})))});Z(Y(E),"handleAnswerPostSuccess",function(e,t){E.props.onPostSuccess(e,t);E.hideReplyInputField()});Z(Y(E),"handleEditingPost",function(e){E.setState({editing:false})});Z(Y(E),"hideReplyInputField",function(){E.props.onToggleReplyInput(E.props.post.key);E.setState({formattingOptionsExpanded:false})});return E}Q(o,[{key:"componentDidMount",value:function e(){var t=this.props,n=t.newPostKey,r=t.qaExpandKey,o=t.post,a=t.onShowReplies,i=t.resetExpandKey;var s=o.answers,l=o.replyCount,c=o.replies,u=o.key;var p=n&&n===u||this.props.autoFocusPost;if(p&&this.postElement){this.postElement.focus()}else if(r&&this.qaExpandElement){this.qaExpandElement.focus();i();if(l&&c.length!==l){a(u)}if(this.state.expandedKeys.length!==s.length){this.expandAnswers(u,"")}}}},{key:"componentDidUpdate",value:function e(t){var n=this.props,r=n.newPostKey,o=n.resetNewPostKeyInfo,a=n.post;var i=a.key;if(r&&r===i&&this.postElement){this.postElement.focus();o()}if(this.props.autoFocusPost&&!t.autoFocusPost&&this.postElement){this.postElement.focus()}}},{key:"renderFlagsTooltipContent",value:function e(){var t=this.props.post;var n=t.flaggedBy,r=t.flaggedByKaid,o=t.flags;var a=n||r||[];var i=a.map(function(e,t){return{kaid:e,flag:o&&o[t]}});return T.createElement(A.View,null,T.createElement("ul",null,i.map(function(e,t){return T.createElement("li",{key:t},T.createElement(A.View,{style:ue.flagsTooltipRow},T.createElement(j.LabelSmall,{style:ue.flagsTooltipKaid},e.kaid,":"),T.createElement(j.LabelSmall,{style:ue.flagsTooltipText},e.flag||B.miscStrings.unknown)))})))}},{key:"renderMinimalFlags",value:function e(t,n,r){var o=this;return T.createElement(A.UniqueIDProvider,{mockOnFirstRender:true,scope:"discussion-list"},function(e){return T.createElement(v.default,{content:o.renderFlagsTooltipContent(),toggleOnHover:t.length>0,offset:12,a11y:{title:{id:e.get("flag-tt")}}},T.createElement(A.View,{style:[r,ue.moderatorFlagged],"aria-labelledby":e.get("flag-tt")},B.postStrings.flagged,n))})}},{key:"renderFlagButton",value:function e(n){var r=this;var t=this.props,o=t.onFlagPost,a=t.post,i=t.tab;var s=a.flaggedByUser?m.default.blue:m.default.offBlack64;var l=[ue.flagText,this.isCompactView()&&ce.flagText];var c=a.flags||[];var u=" (".concat(c.length,")");var p=n.getUserProfile();if((0,K.isModeratorProfile)(p)){return this.renderMinimalFlags(c,u,l)}return T.createElement(A.UniqueIDProvider,{mockOnFirstRender:true,scope:"discussion-list"},function(e){return T.createElement(f.default,{modal:function e(t){var n=t.closeModal;return T.createElement(d.default,{post:a,tab:i,onClose:function e(t){if(t){o(a,t);r.setState({ariaFlagMessage:B.postStrings.ariaFlagged})}n()}})},ariaLabel:B.postStrings.flagAriaLabel,focusId:e.get("flag")},function(t){return T.createElement(b.default,{id:e.get("flag"),icon:T.createElement(g.default,{size:"small",icon:a.flaggedByUser?ae.flagSelected:ae.flag,color:s}),style:[ue.toolButton,ue.flagTool],disabled:a.flaggedByUser,onClick:function e(){if(n.isLoggedIn()){t()}else{r.setState({showSignUpModal:true})}}},T.createElement(A.View,{style:l},a.flaggedByUser?B.postStrings.flagged:B.postStrings.flag,(0,K.isModeratorProfile)(p)&&u,!n.isLoggedIn()&&r.srOnlyToolOpensModal))})})}},{key:"isCompactView",value:function e(){var t=this.props.viewMode;return t==="compact"}},{key:"shouldShowAuthor",value:function e(){var t=this.props,n=t.post,r=t.moderatorMode;var o=n.type==="projectevalanswer";if(r){return true}return!this.isCompactView()&&!o}},{key:"renderOpenModals",value:function e(){var r=this;var o=this.props.post;var t=this.state.isModalOpen;return T.createElement(T.Fragment,null,T.createElement(s.ModalLauncher,{key:"deletePost",onClose:function e(){return r.closeModal("confirmDeletion")},opened:t.confirmDeletion,modal:function e(t){var n=t.closeModal;return T.createElement(p.default,{handleClose:n,handleSubmit:function e(){r.handleDelete();n()}})}}),T.createElement(s.ModalLauncher,{key:"clearFlags",onClose:function e(){return r.closeModal("clearFlags")},opened:t.clearFlags,modal:function e(t){var n=t.closeModal;return T.createElement(l.default,{flaggedBy:o.flaggedBy||o.flaggedByKaid||[],flags:o.flags||[],postKey:o.key,onCancel:n,onClearAllFlags:r.handleClearAllFlags})}}))}},{key:"renderDeleteAction",value:function e(t,n){var r=this;var o=(0,K.isModeratorProfile)(t.getUserProfile())?this.handleDelete:function(){return r.openModal("confirmDeletion")};return T.createElement(n,{key:"delete",label:B.postStrings.delete,onClick:o})}},{key:"getModeratorOrOwnerActions",value:function e(t,n){var r=this;var o=this.props,a=o.moderatorMode,i=o.isProjectFeedback;var s=t.getUserProfile();if(!s){return[]}var l=this.props,c=l.post,u=l.tab,p=l.onUndeletePost,d=l.onModifyNotifications,f=l.contentKind,m=l.onStartAcceptingClarification;var g=s&&s.attributes.kaid===c.authorKaid;var v=c.type==="reply";var y=c.type==="scratchpad";var h=c.type==="projecteval";var b=c.type==="projectevalanswer";if(!(0,K.isModeratorProfile)(s)&&!g){return[]}var w=[];var O=(0,K.getPostContext)({profile:s,post:c,moderatorMode:!!a});if((0,K.isModeratorProfile)(s)&&!v&&!y&&!b&&!h){if(u==="comments"||u==="clarifications"){w.push(T.createElement(n,{key:"changeType",onClick:this.handleChangeToQuestion,label:B.postStrings.changeToQuestion}))}if(u==="questions"||u==="clarifications"){w.push(T.createElement(n,{key:"changeType",onClick:this.handleChangeToTipsAndThanks,label:B.postStrings.changeToTipsAndThanks}))}if(!i&&(u==="questions"||u==="comments")){w.push(T.createElement(n,{key:"changeType",onClick:this.handleChangeToMistakes,label:B.postStrings.changeToMistakes}))}}var P=c.notifyOnAnswer?B.postStrings.turnNotificationsOff:B.postStrings.turnNotificationsOn;if(c.type==="question"&&(g||(0,K.isModeratorProfile)(s))&&!c.isOld){w.push(T.createElement(n,{key:"notification",label:P,onClick:function e(){return d(c.key,!c.notifyOnAnswer)}}))}if(!y&&!h&&!b){w.push(T.createElement(n,{key:"edit",label:B.postStrings.edit,onClick:function e(){return r.setState({editing:true})}}))}if(!c.deleted){w.push(this.renderDeleteAction(t,n))}if((0,K.isModeratorProfile)(s)&&c.deleted){w.push(T.createElement(n,{key:"undelete",label:B.postStrings.undelete,onClick:function e(){return p(c)}}))}if(K.capabilities.clearFlags(O)){w.push(T.createElement(n,{key:"clearFlags2",label:B.postStrings.clearFlags,onClick:function e(){return r.openModal("clearFlags")}}))}if(K.capabilities.approve(O)){w.push(T.createElement(n,{key:"approve",label:B.postStrings.approve,onClick:this.handleClearAllFlags}))}if(a&&(0,K.isModeratorProfile)(s)){w.push(T.createElement(n,{key:"skip",label:B.postStrings.skip,onClick:this.handleSkip}))}if((0,K.isModeratorProfile)(s)&&u==="clarifications"&&(f==="Video"||f==="video")){w.push(T.createElement(n,{key:"accept_clarification",label:B.postStrings.acceptClarification,onClick:function e(){return m(c.key)}}))}return w}},{key:"renderModeratorOrOwnerActionsAsDropdown",value:function e(t,n){var r=this.getModeratorOrOwnerActions(t,a.ActionItem);return T.createElement(a.ActionMenu,{menuText:"more",alignment:"right",style:n},r)}},{key:"renderModeratorOrOwnerActionsAsFlat",value:function e(t,n){var r=this.getModeratorOrOwnerActions(t,ie);return T.createElement(A.View,{style:[n,ue.expandedActionList]},r.map(function(e,t){return T.createElement(A.View,{key:t},e)}))}},{key:"renderModeratorOrOwnerActions",value:function e(t,n){var r=this.props.isMaximized;return r?this.renderModeratorOrOwnerActionsAsFlat(t,n):this.renderModeratorOrOwnerActionsAsDropdown(t,n)}},{key:"renderTools",value:function e(t,n){var r=this.props.post;var o=r.type==="projecteval";var a=r.type==="projectevalanswer";var i=!this.isCompactView()&&!o&&!a;return T.createElement(T.Fragment,null,i&&this.renderVoteTools(t,n),this.showFlagButton(t)&&this.renderFlagButton(n))}},{key:"renderVoteTools",value:function e(t,n){var r=this;var o=this.props,a=o.post,i=o.restrictPosting;var s=a.type==="reply";var l=null;if(t){if(t.attributes.kaid===a.authorKaid){l="noSelfVoting"}else if(t.attributes.points<5e3&&!(0,K.isModeratorProfile)(t)){l="atLeast5000"}}var c=!!l;var u=c?m.default.offBlack32:a.upVoted?m.default.green:m.default.offBlack64;var p=c?m.default.offBlack32:a.downVoted?m.default.red:m.default.offBlack64;var d=a.upVoted?B.postStrings.alreadyUpVoted:undefined;var f=a.downVoted?B.postStrings.alreadyDownVoted:undefined;return!s&&!i&&T.createElement(T.Fragment,null,T.createElement(v.default,{content:l&&B.postStrings[l],toggleOnHover:c,offset:12,a11y:{title:{id:"upvote"}}},T.createElement(b.default,{icon:T.createElement(g.default,{"aria-label":d,size:"small",icon:a.upVoted?ae.upvoteSelected:ae.upvote,color:u}),style:ue.toolButton,onClick:function e(){return r.handleUpvote(n)},disabled:c,"aria-labelledby":"upvote"},T.createElement(A.View,{style:ue.voteText},B.postStrings.upvote,!n.isLoggedIn()&&this.srOnlyToolOpensModal,n.isLoggedIn()&&l&&T.createElement("span",{className:(0,C.css)(P.srOnly)},B.postStrings[l])))),T.createElement(v.default,{content:l&&B.postStrings[l],toggleOnHover:c,offset:12,a11y:{title:{id:"downvote"}}},T.createElement(b.default,{icon:T.createElement(g.default,{"aria-label":f,size:"small",icon:a.downVoted?ae.downvoteSelected:ae.downvote,color:p}),style:ue.toolButton,onClick:function e(){return r.handleDownvote(n)},disabled:c,"aria-labelledby":"downvote"},T.createElement(A.View,{style:ue.voteText},B.postStrings.downvote,!n.isLoggedIn()&&this.srOnlyToolOpensModal,n.isLoggedIn()&&l&&T.createElement("span",{className:(0,C.css)(P.srOnly)},B.postStrings[l])))),T.createElement(A.View,{style:P.srOnly,role:"status","aria-live":"polite"},T.createElement(A.View,null,this.state.ariaVoteMessage),T.createElement(A.View,null,this.state.ariaFlagMessage)))}},{key:"expandAnswers",value:function e(t,n){var r=this;this.setState({expandedKeys:[].concat(this.state.expandedKeys,[t])},function(){var e=r.nodes[n];if(e){e.focus()}})}},{key:"collapseAnswers",value:function e(t,n){var r=this;this.setState({expandedKeys:this.state.expandedKeys.filter(function(e){return e!==t})},function(){var e=r.nodes[n];if(e){e.focus()}})}},{key:"maybeRenderAnswers",value:function e(t,n){var r=this;var o=this.props,a=o.topicSlug,i=o.newPostKey,s=o.resetNewPostKeyInfo,l=o.tab,c=o.displayInputPostKey,u=o.restrictPosting,p=o.clarificationsEnabled,d=o.viewMode,f=o.post,m=o.moderatorMode,g=o.isMaximized,v=o.contentKind;var y=c===n;if(l!=="questions"&&l!=="projecthelp"){return null}if((!t||t.length===0)&&u){return null}var h=T.createElement("div",{className:(0,C.css)(ue.answerInputFieldContainer,y&&ue.answerInputFieldContainerExpanded),id:(0,K.getAnswerInputId)(n)},l==="projecthelp"&&T.createElement(F.default,{mockOnFirstRender:true},function(e){return e.getKaid()===f.authorKaid?B.userProjectsStrings.authorAnsweringOwnHelpRequest:null}),T.createElement(I.default,{isAnswer:true,autoFocus:y,tab:l,clarificationsEnabled:p,onPostSuccess:this.handleAnswerPostSuccess,topicSlug:a,feedbackKey:n,onToggleFormattingOptionsExpanded:function e(t){return r.setState({formattingOptionsExpanded:t})},showAvatar:!this.isCompactView(),contentKind:v}));if(t&&t.length!==0){var b=this.state.expandedKeys.includes(n)?t:[t[0]];var w=t.length-1;var O=f.type==="projecthelp"?B.answersStrings.seeAllAnswers(w):B.answersStrings.seeAllReplies(w);return T.createElement("div",{className:(0,C.css)(ue.answersList,d==="compact"&&ce.answersList)},!u&&h,T.createElement("ul",null,b.map(function(n){return T.createElement("li",{key:n,className:(0,C.css)(ue.answer)},T.createElement(me,{tab:l,postKey:n,newPostKey:i,resetNewPostKeyInfo:s,isAnswer:true,getRef:function e(t){return r.nodes[n]=t},topicSlug:a,restrictPosting:u,moderatorMode:m,viewMode:d,isMaximized:g}))})),b.length<t.length&&T.createElement(oe,{style:ue.expandCollapseButton,onClick:function e(){if(t){r.expandAnswers(n,t[1])}}},T.createElement(j.LabelLarge,null,O)),t.length>1&&b.length===t.length&&T.createElement(oe,{style:ue.expandCollapseButton,onClick:function e(){if(t){r.collapseAnswers(n,t[0])}}},T.createElement(j.LabelLarge,null,B.answersStrings.hideReplies(w))))}else{return T.createElement("div",{className:(0,C.css)(ue.answersList,this.isCompactView()&&ce.answersList,!c&&ue.displayNone)},h)}}},{key:"renderDefaultContent",value:function e(){var t=this.props.post;var n=t.content;var r=t.type==="reply";return T.createElement(j.Body,{style:[V.default.content,r&&ue.replyContent]},T.createElement(u.default,{string:n}))}},{key:"renderProjectEval",value:function e(){var t=this.props.post;return T.createElement(c.default,{post:t})}},{key:"renderScratchpadContent",value:function e(){var t=this.props.post;var n=t.relativeUrl,r=n===void 0?"":n,o=t.title,a=o===void 0?"":o;return T.createElement(A.View,null,T.createElement("h2",null,T.createElement("a",{href:r},a)),T.createElement("iframe",{src:(0,N.default)("".concat(r,"/embedded?editor=yes")),className:(0,C.css)(ue.scratchpadFrame),frameBorder:"0",scrolling:"no"}))}},{key:"renderProjectPreview",value:function e(){var t=this.props.post;var n=t.focus;if(!n||!n.relativeUrl){return null}return T.createElement("img",{className:(0,C.css)(ue.projectPreview),src:(0,N.default)("".concat(n.relativeUrl,"/latest.png")),alt:n.translatedTitle})}},{key:"renderContent",value:function e(){var t=this.props.post;var n=t.type;switch(n){case"scratchpad":return this.renderScratchpadContent();case"projectevalanswer":return this.renderProjectEval();case"projecteval":case"projecthelp":return T.createElement(A.View,null,this.renderDefaultContent(),this.renderProjectPreview());default:return this.renderDefaultContent()}}},{key:"render",value:function e(){var r=this;var t=this.props,n=t.post,o=t.isAnswer,a=t.qaExpandKey,i=t.tab,s=t.contentKind,l=t.contentId,c=t.topicSlug,u=t.resetNewPostKeyInfo,p=t.clarificationBeingAcceptedKey,d=t.onStopAcceptingClarification;var f=n.key,m=n.authorNickname,g=n.authorAvatarName,v=n.authorAvatarSrc,y=n.authorKaid,h=n.content,b=n.fromVideoAuthor;var w=this.state,O=w.editing,P=w.skipped;var k=f===p;var E=n.type==="reply";if(P){return null}var C=function e(t){var n=x.findDOMNode(t);if(r.props.getRef){r.props.getRef(n)}r.postElement=n};var S=function e(t){if(a&&(0,K.shouldAutoExpandPost)(n,s,a)){r.qaExpandElement=x.findDOMNode(t)}};return T.createElement(A.View,{tabIndex:-1,ref:S,testId:"discussion-post"},this.renderOpenModals(),!O&&!k&&T.createElement(A.View,{style:[V.default.post,E&&ue.horizontalSeparator],tabIndex:-1,ref:C},this.shouldShowAuthor()&&T.createElement(A.View,{style:ue.avatar},T.createElement(L.default,{username:m,avatarName:g,avatarSrc:v,kaid:y,enableProfilePreviewTooltip:true})),T.createElement(A.View,{style:V.default.everythingButTheAvatar},T.createElement(F.default,{mockOnFirstRender:true},function(e){return r.renderPostHeader(e)}),T.createElement(A.View,{style:ue.contentContainer},b&&T.createElement(j.LabelSmall,{style:ue.fromTheAuthor},B.postStrings.fromTheAuthor),this.renderContent(),(n.appearsAsDeleted||n.deleted)&&T.createElement(A.View,{style:[ue.contentBackdrop,n.deleted&&ue.deletedPost,n.appearsAsDeleted&&!n.deleted&&ue.hiddenPost]})),T.createElement(F.default,{mockOnFirstRender:true},function(e){return T.createElement(T.Fragment,null,r.renderPostFooter(e),!E&&r.renderReplies(e))}),this.state.showSignUpModal&&T.createElement(R.default,{initialPurpose:"signup",initialRole:"learner",onClose:function e(){return r.setState({showSignUpModal:false})},continueUrl:window.location.pathname}))),O&&T.createElement(A.View,{style:ue.replyInputContainer},T.createElement(I.default,{editing:O,postKey:n.key,isReply:E,isAnswer:o,tab:i,contentKind:s,contentId:l,topicSlug:c,feedbackKey:n.key,resetNewPostKeyInfo:u,initialPostContent:h,onPostSuccess:function e(t,n){return r.handleEditingPost(t)},onCancel:function e(){return r.setState({editing:false})},showAvatar:!this.isCompactView()}),!E&&T.createElement(F.default,{mockOnFirstRender:true},function(e){return T.createElement(A.View,{style:{marginLeft:48}},r.renderReplies(e))})),k&&T.createElement(M.default,{post:n,editingOrAccepting:"accepting",onCancel:d}),!o&&!E&&this.maybeRenderAnswers(n.answers,n.key))}}],[{key:"getDerivedStateFromProps",value:function e(t,n){var r=t.post,o=t.qaExpandKey,a=t.newPostKey,i=t.contentKind;var s=r.replyCount;if((0,K.shouldAutoExpandPost)(r,i,o)&&s&&s>0&&!a){return U({},n,{repliesExpanded:true})}return n}}]);return o}(T.Component);t.DiscussionPost=se;var le=m.default.offBlack64;var ce=C.StyleSheet.create(ne);var ue=C.StyleSheet.create({postHeader:{flexDirection:"row",justifyContent:"space-between",marginBottom:8},outerRepliesContainer:Z({backgroundColor:m.default.offWhite,marginTop:i.default.large,paddingTop:i.default.large,paddingLeft:i.default.large,paddingRight:i.default.large,maxHeight:"none",transition:"all ".concat(w.default.standardTransition)},O.default.xsOrSmaller,ne.outerRepliesContainer),outerRepliesContainerWithAvatar:Z({},O.default.xsOrSmaller,{marginLeft:-64}),collapsedReplyContainer:{paddingLeft:i.default.large,paddingRight:i.default.large,maxHeight:0,overflow:"hidden",transition:"all ".concat(w.default.standardTransition),visibility:"hidden"},innerRepliesContainer:{marginBottom:2},replyContainer:{marginBottom:2},replyHeader:{marginBottom:0},replyContent:{paddingTop:i.default.xxxSmall},loading:{flexDirection:"row",paddingTop:0,minHeight:48,alignItems:"center"},spinner:{marginRight:i.default.xSmall},replyInputContainer:{paddingBottom:i.default.large},postedInContainer:{marginTop:i.default.xxxSmall,flexDirection:"row",alignItems:"baseline"},postedInLabel:{color:m.default.offBlack64,marginRight:i.default.xxSmall},postedInFocusLink:{color:m.default.blue},hiddenPostLabel:{color:m.default.gold,marginLeft:8,alignSelf:"center"},deletedPostLabel:{color:m.default.red,marginLeft:8,alignSelf:"center"},badges:{flexDirection:"row"},badge:{width:16,height:16,marginLeft:4},contentContainer:{position:"relative"},contentBackdrop:{width:"100%",height:"100%",borderRadius:4,opacity:.1,position:"absolute",zIndex:-1},hiddenPost:{backgroundColor:m.default.gold},deletedPost:{backgroundColor:m.default.red},postFooter:{flexDirection:"row",flexWrap:"wrap",alignItems:"center",height:40},postFooterPrimary:{flexDirection:"row",alignItems:"center",width:"100%"},linkStyledButton:{color:le,border:"none",backgroundColor:"transparent",cursor:"pointer",padding:0,margin:0},votesSum:Z({color:le,marginLeft:12},O.default.xsOrSmaller,{display:"none"}),voteText:Z({},O.default.xsOrSmaller,{display:"none"}),toolButton:{marginLeft:12},flagTool:Z({},O.default.xsOrSmaller,{}),flagText:Z({},O.default.xsOrSmaller,ne.flagText),moderatorFlagged:{marginLeft:8},fromTheAuthor:{marginLeft:8},notificationsUnavailableText:{marginLeft:12},horizontalSeparator:{borderBottom:V.default.border,clear:"both",paddingBottom:i.default.small,":last-child":{borderBottom:"none",paddingBottom:0}},separator:{color:V.default.borderColor,paddingLeft:i.default.xxxSmall,paddingRight:i.default.xxxSmall},expandCollapseButton:{marginTop:24,marginBottom:8},answersList:Z({marginLeft:68},O.default.xsOrSmaller,ne.answersList),answerInputFieldContainer:{display:"none"},answerInputFieldContainerExpanded:{margin:"20px 0 28px 0",display:"block"},maximizedDesktop:Z({},O.default.smOrSmaller,{display:"none"}),displayNone:{display:"none"},answer:{marginTop:24},expandedActionList:{flexDirection:"row"},avatar:{marginRight:24},scratchpadFrame:{width:940,height:440,border:0},flagsTooltipRow:{flexDirection:"row"},flagsTooltipKaid:{color:m.default.blue},flagsTooltipText:{paddingLeft:8},projectPreview:{width:40}});var pe={onChangeType:k.changeType,onClearFlags:k.clearFlags,onDeletePost:k.deletePost,onDownvotePost:k.downvotePost,onFlagPost:k.flagPost,onModifyNotifications:k.modifyNotificationsAction,onPostSuccess:k.postSuccessAction,onShowReplies:k.fetchReplies,onToggleReplyInput:k.toggleReplyInputAction,onUndeletePost:k.undeletePost,onUpvotePost:k.upvotePost,resetExpandKey:k.resetExpandKeyAction,onStartAcceptingClarification:k.startAcceptingClarificationAction,onStopAcceptingClarification:k.stopAcceptingClarificationAction};var de=function e(t,n,r,o){if(r.focus){return{contentKind:r.focus.kind,contentId:r.focus.id}}else if(r.question&&r.question.focus){return{contentKind:r.question.focus.kind,contentId:r.question.focus.id}}else if(r.questionKey){var a=t[r.questionKey];if(a&&a.focus){return{contentKind:a.focus.kind,contentId:a.focus.id}}}else if(o){return{contentKind:o.contentKind,contentId:o.contentId}}return n};var fe=function e(t,n){var r=t.posts[n.postKey];var o=de(t.posts,{contentKind:t.contentKind,contentId:t.contentId},r,n.contentKind?{contentKind:n.contentKind,contentId:n.contentId}:undefined),a=o.contentKind,i=o.contentId;var s=t.contentKind==="Topic";var l=s&&r.type==="answer";return{post:r,contentId:i,contentKind:a,qaExpandKey:t.qaExpandKey,newPostKey:t.newPostKey,displayInputPostKey:t.displayInputPostKey,clarificationBeingAcceptedKey:t.clarificationBeingAcceptedKey,showPostedIn:s,showParentQuestion:l}};var me=(0,r.connect)(fe,pe)(se);var ge=me;t.default=ge}}]);
//# sourceMappingURL=../../sourcemaps/en/785952e5545ec823b6f564be3a737b5d.fec2b64de29550f62d21.js.map