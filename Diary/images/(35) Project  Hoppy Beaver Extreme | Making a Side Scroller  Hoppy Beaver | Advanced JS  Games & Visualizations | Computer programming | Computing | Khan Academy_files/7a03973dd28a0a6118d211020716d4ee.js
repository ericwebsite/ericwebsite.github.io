(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["7a03973dd28a0a6118d211020716d4ee"],{B4xi:function(e,t,r){"use strict";e.exports={SET_CURRENT_TOPIC:"SET_CURRENT_TOPIC",CLEAR_RECOMMENDATION:"CLEAR_RECOMMENDATION",CLEAR_RECOMMENDATIONS:"CLEAR_RECOMMENDATIONS",LOAD_USER_INFO:"LOAD_USER_INFO",UPDATE_FPM_MASTERY:"UPDATE_FPM_MASTERY",UPDATE_FPM_MASTERY_COMPLETE:"UPDATE_FPM_MASTERY_COMPLETE",UPDATE_PROGRESS:"UPDATE_PROGRESS",UPDATE_RECOMMENDATIONS:"UPDATE_RECOMMENDATIONS",UPDATE_STATUS:"UPDATE_STATUS",UPDATE_BEST_SCORE:"UPDATE_BEST_SCORE",UPDATE_QUIZ_SCORE:"UPDATE_QUIZ_SCORE",UPDATE_TASK_STATUS:"UPDATE_TASK_STATUS",UPDATE_LAST_SECOND_WATCHED:"UPDATE_LAST_SECOND_WATCHED",UPDATE_FLOATING_SIDEBAR_PROJECT_LINKS:"UPDATE_FLOATING_SIDEBAR_PROJECT_LINKS"}},Jayu:function(e,t,r){"use strict";r("5DmW");var n=r("ANjH");var a=i(r("kDsU"));var s=r("e5gs");var o=r("0zMT");function i(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}var u=(0,o.createCompose)({reduxDevtoolsOptions:{name:"User Info"}});var c=(0,s.handleSideEffects)(s.defaultCallbacks);var p=function e(n){return function(r){return function(e){var t=r(e);c(r,e,n.getState());return t}}};e.exports=(0,n.createStore)(a.default,a.defaultState,u((0,n.applyMiddleware)(p)))},e5gs:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("+2oP");r("3KgV");r("5DmW");r("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.defaultCallbacks=t.handleSideEffects=void 0;var n=u(r("lTCR"));var a=u(r("o1mU"));var o=u(r("j6G6"));var s=u(r("B4xi"));var i=r("pCog");function u(e){return e&&e.__esModule?e:{default:e}}function c(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){p(t,e,r[e])})}return t}function p(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function d(){var t=l(["\n    query getFpmMasteryForTopic($topicId: String!) {\n        user {\n            id\n            curationItemProgress(topicId: $topicId) {\n                masteryMap {\n                    progressKey\n                    status\n                }\n                currentMastery {\n                    percentage\n                    pointsEarned\n                    pointsAvailable\n                }\n            }\n        }\n    }\n"]);d=function e(){return t};return t}function l(e,t){if(!t){t=e.slice(0)}return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var f=function e(n){return function(e,t,r){switch(t.type){case s.default.SET_CURRENT_TOPIC:n.onSetCurrentTopic&&n.onSetCurrentTopic(e,t.topicId,t.masteryEnabled);break}}};t.handleSideEffects=f;var E=(0,n.default)(d());var y={onSetCurrentTopic:function e(s,t,r){if(!r||!o.default.getUserProfile()){return}(0,a.default)(E,{topicId:t}).then(function(e){var t=e.data;var r=t.user.curationItemProgress;var n=r.masteryMap.reduce(function(e,t){var r=t.progressKey,n=t.status;return c({},e,p({},r,n))},{});var a={masteryMap:n,masteryPercentage:r.currentMastery.percentage,masteryPointsEarned:r.currentMastery.pointsEarned,masteryPointsAvailable:r.currentMastery.pointsAvailable};s((0,i.updateFpmMastery)(a))}).then(function(){s((0,i.updateFpmMasteryComplete)())})}};t.defaultCallbacks=y},kDsU:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("5DmW");r("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=t.defaultState=void 0;var T=r("nA/X");function P(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){M(t,e,r[e])})}return t}function M(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var n=r("B4xi"),m=n.SET_CURRENT_TOPIC,S=n.CLEAR_RECOMMENDATION,A=n.CLEAR_RECOMMENDATIONS,O=n.LOAD_USER_INFO,v=n.UPDATE_FPM_MASTERY,I=n.UPDATE_FPM_MASTERY_COMPLETE,b=n.UPDATE_PROGRESS,D=n.UPDATE_STATUS,C=n.UPDATE_BEST_SCORE,U=n.UPDATE_QUIZ_SCORE,R=n.UPDATE_RECOMMENDATIONS,g=n.UPDATE_TASK_STATUS,N=n.UPDATE_LAST_SECOND_WATCHED,j=n.UPDATE_FLOATING_SIDEBAR_PROJECT_LINKS;function F(e,t,r){return{percentage:e,pointsEarned:t,pointsAvailable:r}}var a={currentTopic:null,bestScoreMap:{},masteryMap:{},unitMastery:{percentage:0,pointsEarned:0,pointsAvailable:0},subjectMastery:{percentage:0,pointsEarned:0,pointsAvailable:0},masteryUpdateComplete:false,quizScores:{},recommendations:[],statusMap:{},taskInProgressMap:{},floatingSidebarProjectLinkMap:{},lastSecondWatchedMap:{}};t.defaultState=a;var s=function e(t,r){if(r.type===b){var n=r.userExercise;var a=n.exerciseModel&&n.exerciseModel.progressKey;var s=a?M({},a,n.fpmMasteryLevel):{};var o=n.fpmPromotions||{};var i=(0,T.getUpdatedMasteryPoints)(t.unitMastery,t.masteryMap,o);var u=(0,T.getUpdatedMasteryPoints)(t.subjectMastery,t.masteryMap,o);var c=P({},t.masteryMap,o,s);return P({},t,{masteryMap:c,subjectMastery:u,unitMastery:i})}else if(r.type===m){return P({},t,{currentTopic:r.topicId})}else if(r.type===I){return P({},t,{masteryUpdateComplete:true})}else if(r.type===v){return P({},t,{masteryMap:r.masteryMap,unitMastery:typeof r.masteryPercentage==="number"?F(r.masteryPercentage,r.masteryPointsEarned||0,r.masteryPointsAvailable||0):t.unitMastery})}else if(r.type===D){var p=t.statusMap[r.progressKey];if(p!=="complete"&&r.status!=="unstarted"){if(p===r.status){return t}p=r.status}return P({},t,{statusMap:P({},t.statusMap,M({},r.progressKey,p))})}else if(r.type===g){return P({},t,{taskInProgressMap:P({},t.taskInProgressMap,M({},r.taskKey,r.inProgress))})}else if(r.type===C){var d=r.bestScore;var l=d.numCorrect/d.numAttempted;var f=t.bestScoreMap[r.progressKey];if(f&&f.numCorrect/f.numAttempted>l){d=f}return P({},t,{bestScoreMap:P({},t.bestScoreMap,M({},r.progressKey,d))})}else if(r.type===U){return P({},t,{quizScores:P({},t.quizScores,M({},r.quizKey,r.quizScore))})}else if(r.type===R){return P({},t,{recommendations:r.recommendations})}else if(r.type===S){var E=r;return P({},t,{recommendations:t.recommendations.filter(function(e){var t=e.contentId,r=e.kind;return r!==E.kind||t!==E.contentId})})}else if(r.type===A){var y=r;return P({},t,{recommendations:t.recommendations.filter(function(e){var t=e.sourceId;return t!==y.sourceId})})}else if(r.type===O){return P({},t,{masteryMap:r.userInfo.masteryMap||t.masteryMap,unitMastery:F(r.userInfo.masteryPercentage!=null?r.userInfo.masteryPercentage:t.unitMastery.percentage,r.userInfo.masteryPointsEarned!=null?r.userInfo.masteryPointsEarned:t.unitMastery.pointsEarned,r.userInfo.masteryPointsAvailable!=null?r.userInfo.masteryPointsAvailable:t.unitMastery.pointsAvailable),subjectMastery:F(r.userInfo.subjectMasteryPercentage,r.userInfo.subjectMasteryPointsEarned,r.userInfo.subjectMasteryPointsAvailable),quizScores:P({},r.userInfo.quizScores,t.quizScores),recommendations:r.userInfo.recommendations||t.recommendations,statusMap:P({},r.userInfo.statusMap,t.statusMap),taskInProgressMap:P({},r.userInfo.taskInProgressMap,t.taskInProgressMap),bestScoreMap:P({},r.userInfo.bestScoreMap,t.bestScoreMap)})}else if(r.type===N){if(r.lastSecondWatched===undefined||r.lastSecondWatched===t.lastSecondWatchedMap[r.readableId]){return t}else{return P({},t,{lastSecondWatchedMap:P({},t.lastSecondWatchedMap,M({},r.readableId,r.lastSecondWatched))})}}else if(r.type===j){return P({},t,{floatingSidebarProjectLinkMap:P({},t.floatingSidebarProjectLinkMap,M({},r.topicId,r.floatingSidebarProjectLinks))})}else{return t}};var o=s;t.default=o},pCog:function(e,t,r){"use strict";r("TeQF");Object.defineProperty(t,"__esModule",{value:true});t.updateRecommendations=t.updateProgress=t.updateFpmMasteryComplete=t.updateFpmMastery=t.reportQuizCompletion=t.startQuiz=t.retryQuiz=t.clearForItem=t.clearForTopic=t.setCurrentTopic=void 0;var a=r("skGw");var o=r("B4xi");var n=function e(t,r){return{type:o.SET_CURRENT_TOPIC,topicId:t,masteryEnabled:r}};t.setCurrentTopic=n;var s=function e(t,r){var n=(0,a.encodeParams)({topicId:t,sourceId:r});(0,a.khanFetch)("/api/internal/user/recommendations/clear_for_source?".concat(n),{method:"POST"});return{type:o.CLEAR_RECOMMENDATIONS,sourceId:r,topicId:t}};t.clearForTopic=s;var i=function e(t,r){var n=(0,a.encodeParams)({topicId:r,contentId:t.contentId,contentKind:t.kind});if(t.recommended){(0,a.khanFetch)("/api/internal/user/recommendations/clear_for_content_item?".concat(n),{method:"POST"})}return{type:o.CLEAR_RECOMMENDATION,topicId:r,contentId:t.contentId,kind:t.kind}};t.clearForItem=i;var u=function e(t){return{type:o.UPDATE_TASK_STATUS,taskKey:t,inProgress:false}};t.retryQuiz=u;var c=function e(t){return{type:o.UPDATE_TASK_STATUS,taskKey:t,inProgress:true}};t.startQuiz=c;var p=function e(t,r){return{type:o.UPDATE_QUIZ_SCORE,quizKey:t,quizScore:{completedDate:new Date,numCorrect:r.filter(function(e){return e.correct}).length,numAttempted:r.length}}};t.reportQuizCompletion=p;var d=function e(t){var r=t.masteryMap,n=t.masteryPercentage,a=t.masteryPointsEarned,s=t.masteryPointsAvailable;return{type:o.UPDATE_FPM_MASTERY,masteryMap:r,masteryPercentage:n,masteryPointsEarned:a,masteryPointsAvailable:s}};t.updateFpmMastery=d;var l=function e(){return{type:o.UPDATE_FPM_MASTERY_COMPLETE}};t.updateFpmMasteryComplete=l;var f=function e(t){return{type:o.UPDATE_PROGRESS,userExercise:t}};t.updateProgress=f;var E=function e(t){return{type:o.UPDATE_RECOMMENDATIONS,recommendations:t}};t.updateRecommendations=E}}]);
//# sourceMappingURL=../../sourcemaps/en/7a03973dd28a0a6118d211020716d4ee.d4c9e706144166d1e927.js.map