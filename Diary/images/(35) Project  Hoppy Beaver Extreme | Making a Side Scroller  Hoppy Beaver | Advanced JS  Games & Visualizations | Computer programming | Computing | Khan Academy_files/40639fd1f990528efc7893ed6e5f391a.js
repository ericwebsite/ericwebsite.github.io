(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["40639fd1f990528efc7893ed6e5f391a"],{"/tP0":function(e,t,n){"use strict";n("ma9I");n("2B1R");n("5DmW");n("NBAS");var c=r(n("q1tI"));function r(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function i(e,t,n){if(t)o(e.prototype,t);if(n)o(e,n);return e}function s(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return p(e)}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return u(e)}function p(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)f(e,t)}function f(e,t){f=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return f(e,t)}function d(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var m=n("17x9");var h=n("mR6N"),v=h.StyleSheet,g=h.css;var y=n("uKIX");var i18n=n("HEOz");var b=function(e){l(o,e);function o(){var e;var l;a(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++){n[r]=arguments[r]}l=s(this,(e=u(o)).call.apply(e,[this].concat(n)));d(p(l),"state",{justification:""});d(p(l),"handleClick",function(e,t){e.preventDefault();l.props.onSelectReason(t,l.state.justification);l.props.onClose()});d(p(l),"renderAction",function(e,t){var n=l.props.buttonsPerRow;var r=e.examples,o=e.header,a=e.name;var i=r.map(function(e,t){return c.createElement("li",{key:t},e)});return c.createElement("button",{key:t,className:"simple-button "+g(w.button),onClick:function e(t){return l.handleClick(t,a)},style:{width:"".concat(100/n,"%")}},c.createElement("div",{className:g(w.buttonContents)},c.createElement("h4",null,o),c.createElement("ul",{className:g(w.list)},i)))});d(p(l),"renderButtons",function(){var e=l.props,t=e.actions,n=e.buttonsPerRow;var r=[];for(var o=0;o<t.length;o+=n){var a=[];for(var i=0;i<n;i++){var s=o+i;if(t[s]){a.push(l.renderAction(t[s],s))}}r.push(c.createElement("div",{key:o,className:g(w.row)},a))}return r});return l}i(o,[{key:"render",value:function e(){var n=this;var t=this.props,r=t.bodyText,o=t.type;var a=275;var i=this.props.textContent;if(i.length>a){i=i.substring(0,a)+"..."}var s=null;if(o==="projectevalanswer"||o==="scratchpad"){s=c.createElement("div",null,c.createElement("label",null,i18n._("How does this violate our guidelines?"),c.createElement("br",null),c.createElement("textarea",{className:g(w.textarea),rows:"3",value:this.state.justification,onChange:function e(t){n.setState({justification:t.target.value})}})))}else{s=c.createElement("p",null,c.createElement("em",null,i))}return c.createElement(y,{onClose:this.props.onClose,title:i18n._("Flag for Guardian attention"),inline:this.props.inFixture,showCloseButton:true,wide:this.props.wide},r,s,c.createElement("div",{className:g(w.actions)},c.createElement("h4",{className:g(w.heading)},i18n._("This is instance of:")),this.renderButtons()))}}]);return o}(c.Component);d(b,"propTypes",{actions:m.arrayOf(m.shape({examples:m.arrayOf(m.node.isRequired).isRequired,header:m.node.isRequired,name:m.string.isRequired}).isRequired).isRequired,bodyText:m.node,buttonsPerRow:m.number,inFixture:m.bool,onClose:m.func.isRequired,onSelectReason:m.func.isRequired,textContent:m.string,type:m.string.isRequired,wide:m.bool});d(b,"defaultProps",{buttonsPerRow:2,textContent:""});var E=15;var w=v.create({actions:{borderSpacing:"0 6px",display:"table",marginTop:18,width:"100%"},heading:{marginBottom:10},row:{display:"flex",marginBottom:8},button:{fontSize:13,padding:E,position:"relative",textAlign:"left"},buttonContents:{height:"100%"},list:{listStyleType:"disc",marginLeft:20},textarea:{width:"100%"}});e.exports=b},"6/KF":function(e,t,n){"use strict";n("5DmW");n("NBAS");var r=o(n("q1tI"));function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function s(e,t,n){if(t)i(e.prototype,t);if(n)i(e,n);return e}function l(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return u(e)}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)f(e,t)}function f(e,t){f=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return f(e,t)}function d(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var m=n("17x9");var i18n=n("HEOz");var h=function(e){p(t,e);function t(){a(this,t);return l(this,u(t).apply(this,arguments))}s(t,[{key:"render",value:function e(){if(this.props.duplicate){return r.createElement("div",{className:"low-quality-notice-header"},r.createElement("h4",null,i18n._("Reduce, Reuse, Recycle.")),i18n._("Thank you for your %(translatedFeedbackType)s. Our "+"scrub-bots have integrated it into the earlier "+"%(translatedFeedbackType)s highlighted above and "+"voted that up.",{translatedFeedbackType:this.props.translatedFeedbackType}),r.createElement("br",null),i18n._("Yours in cleanliness, the Khan Academy Guardians."))}else{return r.createElement("div",{className:"low-quality-notice-header"},r.createElement("h4",null,i18n._("Please clarify your %(translatedFeedbackType)s.",{translatedFeedbackType:this.props.translatedFeedbackType})),i18n._('Our robot army has targeted your post as "low '+'quality". To appear on the site as originally '+"written, the Khan Academy Guardians must manually "+"approve your %(translatedFeedbackType)s.",{translatedFeedbackType:this.props.translatedFeedbackType}))}}}]);return t}(r.Component);d(h,"propTypes",{translatedFeedbackType:m.string.isRequired,duplicate:m.bool});var v=function(e){p(t,e);function t(){a(this,t);return l(this,u(t).apply(this,arguments))}s(t,[{key:"render",value:function e(){return r.createElement("div",{className:"low-quality-notice-footer"},r.createElement("em",null,this.props.translatedFeedbackEditTip))}}]);return t}(r.Component);d(v,"propTypes",{translatedFeedbackEditTip:m.string.isRequired});var g=function e(t){return{header:r.createElement(h,{duplicate:t.duplicate,translatedFeedbackType:t.translatedFeedbackType}),footer:r.createElement(v,{translatedFeedbackEditTip:t.translatedFeedbackEditTip})}};e.exports=g},JlCW:function(e,t,n){"use strict";n("ma9I");n("zKZe");n("5DmW");var a=r(n("q1tI"));function r(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function i(){i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};return i.apply(this,arguments)}var o=n("17x9");var s=n("/tP0");var i18n=n("HEOz");var l=function e(t){var n=t.type;var r=[{name:"inappropriate",header:i18n._("abuse"),examples:[i18n._("disrespectful or offensive"),i18n._("an advertisement")]}];if(n==="question"||n==="comment"){r.push({name:"changeto",header:{question:i18n._("a tip or thanks"),comment:i18n._("a question")}[n],examples:[{question:i18n._("should be in Tips & Thanks"),comment:i18n._("should be in Questions")}[n]]})}var o=[i18n._("a homework question"),i18n._("a duplicate answer")];r.push({name:"lowquality",header:i18n._("not helpful"),examples:[i18n._("low quality"),i18n._("not about the current topic"),i18n._("soliciting votes or seeking badges")].concat(n==="question"?o:[],[i18n._("repeatedly making the same post")])});if(n!=="projectevalanswer"){r.push({name:"doesnotbelong",header:i18n._("about the site"),examples:[i18n._('a question about Khan Academy (e.g. "What software does Sal use?")'),i18n._("a post about badges"),i18n._("a technical problem with the site"),i18n._("a request for videos or features")]})}return a.createElement(s,i({},t,{actions:r}))};l.propTypes={type:o.string};e.exports=l},NYIc:function(e,t,n){"use strict";n("TeQF");n("zKZe");n("5DmW");var a=r(n("q1tI"));function r(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function i(){i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};return i.apply(this,arguments)}var o=n("17x9");var s=n("/tP0");var i18n=n("HEOz");var l=function e(t){var n=t.isComputerProgramming;var r=i18n._("Please consult our project guidelines for what we consider to be an appropriate project.");var o=[{name:"inappropriate",header:i18n._("abuse"),examples:[i18n._("disrespectful or offensive"),i18n._("advertisement for off-site company/service")]},{name:"plagiarism",header:i18n._("plagiarism"),examples:[i18n._("not a spin-off and not giving credit to original author")]},{name:"vote-soliciting",header:i18n._("soliciting votes"),examples:[i18n._("requesting votes"),i18n._("making promises for votes"),i18n._("receiving votes from a voting ring")]},n&&{name:"using-disallowed",header:i18n._("using disallowed functionality"),examples:[i18n._("accessing externals or the DOM to go beyond "+"allowed functionality"),i18n._("examples: playing sounds inappropriately, using "+"localStorage")]},{name:"doesnotbelong",header:i18n._("off-topic"),examples:[i18n._("petitions to change the site"),i18n._("contentious projects about politics, "+"religion/atheism, or personal issues")]}].filter(function(e){return e});return a.createElement(s,i({},t,{type:"scratchpad",bodyText:r,actions:o,wide:true,buttonsPerRow:3}))};l.propTypes={isComputerProgramming:o.bool.isRequired};e.exports=l},PS29:function(e,t,n){"use strict";n("ma9I");n("yXV3");n("2B1R");n("5DmW");n("NBAS");var l=o(n("q1tI"));var s=r(n("j6G6"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function i(e,t,n){if(t)a(e.prototype,t);if(n)a(e,n);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return f(e)}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return m(e,t)}function h(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var v=n("e2gc");var g=n("17x9");var y=n("fhzG");var b=n("i8i4");var _=n("F/us");var i18n=n("HEOz");var E=n("J1r0");var w=n("XLNN");var O=n("mxj5");var C=n("4Arr").timestampRegex;var k=w.joinWidgets;var j=w.Separator;var P=w.todo;var T=w.DeleteFeedbackModal;var N=n("qgfM");var x=N.DiscussionItemModel;var R=N.OfficialClarificationModel;var S=function(e){d(a,e);function a(){var e;var t;c(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}t=u(this,(e=p(a)).call.apply(e,[this].concat(r)));h(f(t),"state",{clearedFlags:false});h(f(t),"handleClick",function(){t.props.model.clearFlags();t.setState({clearedFlags:true})});h(f(t),"handleMouseEnter",function(){var e=t.props.model.get("flaggedBy");var n=t.props.model.get("flags");var r=[];if(e){_.each(e,function(e,t){r.push({user:e,type:n[t]})})}else{r=_.map(n,function(e){return{type:e}})}v(b.findDOMNode(f(t))).qtip({content:{text:O({flags:r,arrowOnRight:true})},style:{classes:"custom-override flags-hovercard"},hide:{delay:100,fixed:true},position:{my:"top right",at:"bottom right"}})});return t}i(a,[{key:"render",value:function e(){var t=this.props.model.get("inQueue");var n=this.props.model.get("flags");if(this.state.clearedFlags){return l.createElement("span",null,i18n._("Cleared flags"))}else if(n.length){var r;if(t){r=i18n.ngettext("(C)lear Flag","(C)lear %(num)s Flags",n.length)}else{r=i18n.ngettext("Clear Flag","Clear %(num)s Flags",n.length)}return l.createElement("a",{href:"javascript:void(0);",onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,className:"clear-flags"},r)}else if(t){return l.createElement("a",{href:"javascript:void(0);",className:"approve"},i18n._("(A)pprove"))}else{throw new Error("Flags was rendered when it has nothing to show")}}}]);return a}(l.Component);h(S,"propTypes",{model:g.instanceOf(x).isRequired});var q=y({displayName:"Skip",propTypes:{model:g.instanceOf(x).isRequired},render:function e(){if(!this.props.model.get("inQueue")){return null}return l.createElement("span",{onClick:this.skip},i18n._("Skip"))},skip:P});var D=function(e){d(o,e);function o(){var e;var i;c(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++){n[r]=arguments[r]}i=u(this,(e=p(o)).call.apply(e,[this].concat(n)));h(f(i),"handleAcceptClarification",function(){var e=i.props.model;var t=R.forVideoModel(E._videoModel);var n=C.exec(e.get("content"));if(n){var r=parseFloat(n[1]);var o=parseFloat(n[2]);var a=60*r+o;t.set("open_timestamp",a);t.set("close_timestamp",a+20)}E._suggested.remove(e);t.set("text",e.get("content"));t.set("reporter",e.get("author"));e.destroy();E._official.add(t);t.save();t.set("status","editing")});h(f(i),"handleClarToQues",function(){var e=i.props.model;e.convertTo("question");E._suggested.remove(e)});h(f(i),"handleClarToComment",function(){var e=i.props.model;e.convertTo("comment");E._suggested.remove(e)});return i}i(o,[{key:"render",value:function e(){var t=this.props.model;var n=["change-to",t.get("highlightChangeButton")?"call-to-action":""].join(" ");var r;if(t.get("type")==="comment"){r=t.get("inQueue")?i18n._("Change to (Q)uestion"):i18n._("Change to Question")}else if(t.get("type")==="question"){r=t.get("inQueue")?i18n._("Change to (F)eedback"):i18n._("Change to Feedback")}else if(t.get("type")==="clarification"){var o=R.userIsOmnipotent()&&t.collection.videoModel;var a=s.default.getUserProfile();var i=a&&a.get("isModerator");return l.createElement("span",null,o&&l.createElement("a",{onClick:this.handleAcceptClarification,href:"javascript:void(0)",className:n},i18n._("Accept clarification")),o&&i&&l.createElement(j,null),i&&l.createElement("a",{onClick:this.handleClarToQues,href:"javascript:void(0)",className:n},i18n._("Change to question")),i&&l.createElement(j,null),i&&l.createElement("a",{onClick:this.handleClarToComment,href:"javascript:void(0)",className:n},i18n._("Change to feedback")))}else{throw new Error("ChangeTo was rendered when it has nothing to show")}return l.createElement("span",{onClick:P,className:n},r)}}]);return o}(l.Component);h(D,"propTypes",{model:g.instanceOf(x).isRequired});var F=function(e){d(a,e);function a(){var e;var t;c(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}t=u(this,(e=p(a)).call.apply(e,[this].concat(r)));h(f(t),"handleEdit",function(){t.props.model.set("editing",true)});return t}i(a,[{key:"render",value:function e(){return l.createElement("span",{className:"mod-tools__edit",onClick:this.handleEdit},this.props.model.get("inQueue")?i18n._("(E)dit"):i18n._("Edit"))}}]);return a}(l.Component);h(F,"propTypes",{model:g.instanceOf(x).isRequired});var M=function(e){d(a,e);function a(){var e;var t;c(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}t=u(this,(e=p(a)).call.apply(e,[this].concat(r)));h(f(t),"handleUndelete",function(){t.props.model.undelete()});h(f(t),"handleDelete",function(){t.mountPoint=v("<div>").appendTo(document.body)[0];b.render(l.createElement(T,{model:t.props.model,onClose:t.handleClose}),t.mountPoint)});h(f(t),"handleClose",function(){b.unmountComponentAtNode(t.mountPoint);t.mountPoint=null});return t}i(a,[{key:"render",value:function e(){var t=this.props.model;if(t.get("deleted")){var n=["mod-tools__undelete",t.get("highlightDeleteButton")?"call-to-action":""].join(" ");return l.createElement("span",{className:n,onClick:this.handleUndelete},i18n._("Undelete"))}else{return l.createElement("span",{className:"mod-tools__delete",onClick:this.handleDelete},t.get("inQueue")?i18n._("(D)elete"):i18n._("Delete"))}}}]);return a}(l.Component);h(M,"propTypes",{model:g.instanceOf(x).isRequired});var A=function(e){d(t,e);function t(){c(this,t);return u(this,p(t).apply(this,arguments))}i(t,[{key:"render",value:function e(){var t=this.props.model;var n=!t.get("definitelyNotSpam")&&(t.get("flags").length||t.get("inQueue"))&&["flags",S];var r=t.get("inQueue")&&["skip",q];var o=_(["comment","question","clarification"]).indexOf(t.get("type"))>0&&["change-to",D];var a=t.isEditable()&&["edit",F];var i=!t.get("hideModDelete")&&["delete",M];var s=k([n,r,o,a,i],this);return l.createElement("span",null,s)}}]);return t}(l.Component);h(A,"propTypes",{model:g.instanceOf(x).isRequired});e.exports={ModControls:A,ChangeTo:D}},Ulk2:function(e,t,n){"use strict";n("ma9I");n("5DmW");n("NBAS");var r=i(n("q1tI"));var o=a(n("wINb"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function c(e,t,n){if(t)l(e.prototype,t);if(n)l(e,n);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return f(e)}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return m(e,t)}function h(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var v=n("17x9");var g=n("i8i4");var y=n("HYvl");var i18n=n("HEOz");var b=function(e){d(a,e);function a(){var e;var t;s(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}t=u(this,(e=p(a)).call.apply(e,[this].concat(r)));h(f(t),"handleMouseEnter",function(){y.createHoverCardQtip(g.findDOMNode(f(t)))});return t}c(a,[{key:"render",value:function e(){var t=this.props.user;if(!t.nickname){return r.createElement("span",null,i18n._("Anonymous"))}return r.createElement("a",{className:"discussion-author",onMouseEnter:this.handleMouseEnter,"data-user-kaid":t.kaid},t.avatarSrc&&r.createElement("img",{alt:i18n._("Avatar for %(nickname)s",t.nickname),className:"discussion-author-avatar",src:(0,o.default)(t.avatarSrc)}),r.createElement("span",{className:"sr-only"},i18n._("View profile for:")," "),t.nickname)}}]);return a}(r.Component);h(b,"propTypes",{user:v.shape({kaid:v.string.isRequired,nickname:v.string,avatarSrc:v.string.isRequired}).isRequired});e.exports=b},XLNN:function(e,t,n){"use strict";n("ma9I");n("TeQF");n("2B1R");n("zKZe");n("NBAS");var o=r(n("q1tI"));function r(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function i(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function a(){a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};return a.apply(this,arguments)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function c(e,t,n){if(t)l(e.prototype,t);if(n)l(e,n);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return p(e)}function p(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e){f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return f(e)}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return m(e,t)}var h=n("e2gc");var v=n("q1z7");var g=n("17x9");var y=n("i8i4");var _=n("F/us");var b=n("P7jp");var i18n=n("HEOz");var E=function e(t,r,n){n=n||O;return _(t).chain().filter(_.identity).map(function(e){var t=e[0],n=e[1];return o.createElement(n,{model:r.props.model,key:t})}).intersperse(function(e){return o.createElement("span",{key:"separator"+e},o.createElement(n,null)," ")}).value()};var w=function e(t){b.log("TODO(joel) write this!");t&&b.log(t)};var O=function(e){d(t,e);function t(){s(this,t);return u(this,f(t).apply(this,arguments))}c(t,[{key:"render",value:function e(){return o.createElement("span",a({},this.props,{className:"discussion-meta-separator "+(this.props.className||"")})," ","•"," ")}}]);return t}(o.Component);var C=function(e){d(a,e);function a(){var e;var t;s(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}t=u(this,(e=f(a)).call.apply(e,[this].concat(r)));i(p(t),"handleDelete",function(){t.props.model.destroy();t.handleCancel()});i(p(t),"handleCancel",function(){h(y.findDOMNode(p(t))).modal("hide");t.props.onClose()});return t}c(a,[{key:"componentDidMount",value:function e(){h(y.findDOMNode(this)).modal()}},{key:"render",value:function e(){return this.props.body.call(this)}}]);return a}(o.Component);i(C,"propTypes",{model:g.instanceOf(v.Model).isRequired,body:g.func,onClose:g.func});i(C,"defaultProps",{body:function e(){return o.createElement("div",{className:"modal danger-modal"},o.createElement("p",{className:"modal-body"},i18n._("Really delete?")),o.createElement("div",{className:"modal-footer"},o.createElement("span",{className:"pointer btn",onClick:this.handleCancel}," ",i18n._("Cancel")," "),o.createElement("span",{className:"pointer btn btn-danger",onClick:this.handleDelete}," ",i18n._("Delete")," ")))},onClose:h.noop});e.exports={DeleteFeedbackModal:C,joinWidgets:E,Separator:O,todo:w}},gdZe:function(e,t,n){"use strict";n("pNMO");n("4Brf");n("ma9I");n("TeQF");n("fbCW");n("2B1R");n("5DmW");n("NBAS");n("FZtP");n("vxnP");var d=a(n("q1tI"));var m=r(n("j6G6"));var o=r(n("wINb"));var i=r(n("17AU"));var s=r(n("BIos"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function l(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){c(t,e,n[e])})}return t}function c(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function f(e,t,n){if(t)p(e.prototype,t);if(n)p(e,n);return e}function h(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return v(e)}function v(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function g(e){g=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return g(e)}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)b(e,t)}function b(e,t){b=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return b(e,t)}var E=n("e2gc");var w=n("17x9");var O=n("fhzG");var C=n("i8i4");var _=n("F/us");var k=n("TSYQ");var j=n("E9A0");var P=n("Ulk2");var T=n("XLNN");var N=n("4Arr").formatContent;var x=n("4Arr").stripProtocol;var R=n("JlCW");var S=n("NYIc");var q=n("nVHT");var D=n("2LjZ");var F=n("8UXB");var M=n("vRNn");var A=T.DeleteFeedbackModal;var I=T.joinWidgets;var U=T.Separator;var B=n("PS29");var H=B.ChangeTo;var V=B.ModControls;var Q=n("6/KF");var K=n("qgfM");var i18n=n("HEOz");var L=K.DiscussionItemModel;var W=K.DiscussionItemCollection;var z=K.OfficialClarificationModel;var Y=K.ReplyCollection;var G=function(e){y(t,e);function t(){u(this,t);return h(this,g(t).apply(this,arguments))}f(t,[{key:"render",value:function e(){var t=i18n._("Accent your posts with *bold* "+"or _italics_ and format `code`");return d.createElement("div",{className:"formatting-tips-container"},d.createElement("div",{className:"formatting-tips-triangle"}),d.createElement("div",{className:"formatting-tips-panel"},d.createElement("table",null,d.createElement("tbody",null,d.createElement("tr",{className:"discussion-guidelines-format-table-header"},d.createElement("td",null,i18n._("Typing this:")),d.createElement("td",null,i18n._("Displays this:"))),d.createElement("tr",{className:"discussion-guidelines-format-table"},d.createElement("td",null,t,d.createElement("pre",null,i18n.doNotTranslate("```if (x < 0) {\n    return;\n}```"))),d.createElement("td",null,d.createElement("span",{dangerouslySetInnerHTML:{__html:N(t)}}),d.createElement("pre",null,d.createElement("code",null,i18n.doNotTranslate("if (x < 0) {\n    return;\n}")))))))))}}]);return t}(d.Component);var J=function(e){y(o,e);function o(){var e;var a;u(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++){n[r]=arguments[r]}a=h(this,(e=g(o)).call.apply(e,[this].concat(n)));c(v(a),"state",{text:a.props.model.getTextContent(),isSaving:false});c(v(a),"handleTextChange",function(e){a.setState({text:e.target.value})});c(v(a),"handleSubmit",function(){var e=a.props.model;if(a.state.text!==""){var t=j.LegacyRequireIfLoaded["ScratchpadUIModule"];if(t){var n=t.ScratchpadUI;if(n.scratchpad&&n.isSaveable()&&n.hasUnsavedChanges()){var r=window.confirm(i18n._("We want to make sure "+"your code is up to date. Can we save it?"));if(r){n.triggerSave()}else{return}}}e.set({text:a.state.text,content:a.state.text});var o=a.props.collection&&a.props.collection.findDuplicate(e);if(o){o.markDuplicate();a.props.onDuplicate&&a.props.onDuplicate()}else{a.setState({isSaving:true});e.save({},{success:function(e){this.setState({isSaving:false});if(e.get("lowQualityNotice")){this.forceUpdate();return}else{this.props.onSave()}}.bind(v(a))})}}});return a}f(o,[{key:"render",value:function e(){var t=[""];var n={header:null,footer:null};if(this.props.model.get("lowQualityNotice")){n=Q(this.props.model.get("lowQualityNotice"));t.push("low-quality-notice");this._needsToFocus=true}return d.createElement("div",{className:"edit-content-form"},d.createElement("div",{className:t.join(" ")},this.props.guidelines,n.header,d.createElement("textarea",{className:"edit-content-form__textarea",onChange:this.handleTextChange,onFocus:this.props.onFocus,ref:"input",value:this.state.text}),n.footer,this.props.hideControls?null:d.createElement(X,{label:this.props.buttonLabel,onCancel:this.props.onCancel,onSubmit:this.handleSubmit,isSaving:this.state.isSaving})))}},{key:"componentDidMount",value:function e(){C.findDOMNode(this.refs.input).focus()}},{key:"componentDidUpdate",value:function e(){if(this.props.focus||this._needsToFocus){C.findDOMNode(this.refs.input).focus();this._needsToFocus=false}}}]);return o}(d.Component);c(J,"propTypes",{model:w.instanceOf(L).isRequired,onSave:w.func.isRequired,onCancel:w.func.isRequired,onDuplicate:w.func,onFocus:w.func,collection:w.instanceOf(W),guidelines:w.object,buttonLabel:w.string,focus:w.bool,hideControls:w.bool});c(J,"defaultProps",{guidelines:null,buttonLabel:i18n._("Save")});var X=function(e){y(a,e);function a(){var e;var t;u(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}t=h(this,(e=g(a)).call.apply(e,[this].concat(r)));c(v(t),"state",{showFormattingTips:false});c(v(t),"toggleFormattingTips",function(){t.setState({showFormattingTips:!t.state.showFormattingTips})});c(v(t),"handleKeyPress",function(e){if(e.keyCode===13||e.keyCode===32){e.preventDefault();t.props.onCancel()}});return t}f(a,[{key:"render",value:function e(){var t=d.createElement(q,null);return d.createElement("div",{className:"edit-content-form__controls"},d.createElement("div",{className:"edit-content-form__left"},d.createElement("a",{className:"edit-content-form__formatting-tips",href:"javascript:void 0",onClick:this.toggleFormattingTips},i18n._("Formatting tips"))),d.createElement("div",{className:"edit-content-form__right"},this.props.isSaving?t:null,d.createElement("input",{className:"simple-button primary edit-content-form__submit",type:"button",value:this.props.label,disabled:this.props.isSaving,onClick:this.props.onSubmit}),d.createElement("a",{className:"edit-content-form__cancel",onClick:this.props.onCancel,onKeyPress:this.handleKeyPress,href:"javascript:void(0);",tabIndex:0},i18n._("Cancel"))," "+i18n._("or")+" "),this.state.showFormattingTips&&d.createElement(G,null))}}]);return a}(d.Component);c(X,"propTypes",{onCancel:w.func,onSubmit:w.func,isSaving:w.bool});var Z=function(e){y(t,e);function t(){u(this,t);return h(this,g(t).apply(this,arguments))}f(t,[{key:"render",value:function e(){var t=_(this.props.model.get("badges")).map(function(e,t){return d.createElement("img",{key:t,className:"discussion-badge-icon",title:e.translatedDescription,src:(0,o.default)(x(e.iconSrc)),alt:e.translatedDescription})});return d.createElement("span",{className:"discussion-badges"},t)}}]);return t}(d.Component);c(Z,"propTypes",{model:w.instanceOf(L).isRequired});var $=function(e){y(t,e);function t(){u(this,t);return h(this,g(t).apply(this,arguments))}f(t,[{key:"render",value:function e(){return d.createElement("span",null,i18n.ngettext("%(num)s Spin-off","%(num)s Spin-offs",this.props.model.get("spinoffCount")))}}]);return t}(d.Component);c($,"propTypes",{model:w.instanceOf(L).isRequired});var ee=function(e){y(t,e);function t(){u(this,t);return h(this,g(t).apply(this,arguments))}f(t,[{key:"render",value:function e(){var t=!this.props.model.get("inUserProfile")&&!this.props.model.get("isScratchpadCard");if(this.props.model.get("voteUpOnly")){if(t){return d.createElement(te,{model:this.props.model})}else{return null}}return d.createElement("span",null,d.createElement(ne,{model:this.props.model}),t&&d.createElement(re,{model:this.props.model}))}}]);return t}(d.Component);c(ee,"propTypes",{model:w.instanceOf(L).isRequired});var te=function(e){y(a,e);function a(){var e;var n;u(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++){r[o]=arguments[o]}n=h(this,(e=g(a)).call.apply(e,[this].concat(r)));c(v(n),"state",{errorMessage:null});c(v(n),"registerVote",function(){var e=m.default.getUserProfile();var t=e&&!e.isPhantom();if(!t){return n.setState({errorMessage:i18n._("Log in first!")})}n.props.model.toggleVote("up",function(e){n.setState({errorMessage:e})})});return n}f(a,[{key:"render",value:function e(){var t=this;var n;var r=this.props.model;var o=r.get("upVoted");var a=r.get("sumVotesIncremented");if(this.state.errorMessage){n=d.createElement(ce,{description:this.state.errorMessage,onClose:function e(){return t.setState({errorMessage:null})}})}var i=o?i18n._("Voted Up!"):i18n._("Vote Up");var s=d.createElement("span",null,i," • ",a);var l=this.props.model.get("renderButton")({label:s,onClick:this.registerVote,disabled:o,typeStyle:"submit"});return d.createElement("span",{style:{display:"inline-block",position:"relative"}},l,n)}}]);return a}(d.Component);c(te,"propTypes",{model:w.instanceOf(L).isRequired});var ne=function(e){y(t,e);function t(){u(this,t);return h(this,g(t).apply(this,arguments))}f(t,[{key:"render",value:function e(){return d.createElement("span",{className:"sum-votes"},i18n.ngettext("%(num)s Vote","%(num)s Votes",this.props.model.get("sumVotesIncremented")))}}]);return t}(d.Component);c(ne,"propTypes",{model:w.instanceOf(L).isRequired});var re=function(e){y(a,e);function a(){var e;var r;u(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++){n[o]=arguments[o]}r=h(this,(e=g(a)).call.apply(e,[this].concat(n)));c(v(r),"registerVote",function(e){r.props.model.toggleVote(e,r.errorCallback)});c(v(r),"errorCallback",function(e){var t=d.createElement(ce,{description:e,onClose:r.closeNote,parent:C.findDOMNode(v(r))}),n=E("<div>").appendTo(document.body);C.render(t,n[0]);r.$note=n});c(v(r),"closeNote",function(){C.unmountComponentAtNode(r.$note[0]);r.$note=null});return r}f(a,[{key:"render",value:function e(){return d.createElement("div",{className:"discussion-vote"},d.createElement(oe,{title:i18n._("Vote up, this is encouraging or helpful "+"(click again to undo)"),upOrDown:"up",model:this.props.model,onClick:_(this.registerVote).partial("up")})," ",d.createElement(oe,{title:i18n._("Vote down, this is not encouraging or "+"helpful (click again to undo)"),upOrDown:"down",model:this.props.model,onClick:_(this.registerVote).partial("down")}))}}]);return a}(d.Component);c(re,"propTypes",{model:w.instanceOf(L).isRequired});var oe=function(e){y(t,e);function t(){u(this,t);return h(this,g(t).apply(this,arguments))}f(t,[{key:"render",value:function e(){var t=this.props.model;var n=["vote-for","vote-"+this.props.upOrDown];if(t.get("voteType")===this.props.upOrDown){n.push("voted")}n=n.join(" ");return d.createElement("div",{className:n,title:t.get("title"),onClick:this.props.onClick})}}]);return t}(d.Component);c(oe,"propTypes",{onClick:w.func.isRequired,model:w.instanceOf(L).isRequired,upOrDown:w.string.isRequired});var ae=function(e){y(t,e);function t(){u(this,t);return h(this,g(t).apply(this,arguments))}f(t,[{key:"render",value:function e(){var t;if(this.props.model.isPassingEvalAnswer()){if(this.props.isProgramOwner){t=i18n._("Your project has passed evaluation.")}else{t=i18n._("This project has passed evaluation.")}}else{if(this.props.isProgramOwner){t=i18n._("Your project needs more work.")}else{t=i18n._("This project needs more work.")}}return d.createElement("div",{className:"eval-title"},t)}}]);return t}(d.Component);c(ae,"propTypes",{model:w.instanceOf(L).isRequired,isProgramOwner:w.bool.isRequired});var ie=function(e){y(a,e);function a(){var e;var t;u(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}t=h(this,(e=g(a)).call.apply(e,[this].concat(r)));c(v(t),"getOverallInfoElement",function(e){var t=e.filter(".overall-eval-info").text();var n=t.length>0?d.createElement("div",{className:"more-info"},d.createElement("strong",null,i18n._("From the evaluator:")),d.createElement("div",{dangerouslySetInnerHTML:{__html:N(t,true)}})):null;return n});return t}f(a,[{key:"render",value:function e(){var t=E(E.parseHTML(this.props.model.get("content")));var n=E.makeArray(t.filter("li:not(.pass)"));if(this.props.model.isPassingEvalAnswer()){var r=this.getOverallInfoElement(t);if(!r){return null}return d.createElement("div",null,r)}var o=n.map(function(e,t){var n=E(e).find("div");var r=n.text().length>0?d.createElement("div",{className:"objective-more-info",dangerouslySetInnerHTML:{__html:N(n.text(),true)}}):null;n.empty();return d.createElement("li",{key:"objective-"+t},d.createElement("div",{className:"failed-objective-item"},d.createElement("strong",null,E(e).text())),r)});return d.createElement("div",null,this.getOverallInfoElement(t),d.createElement("div",{className:"failed-objectives"},d.createElement("strong",null,i18n._("The following objectives need more work:")),d.createElement("ul",{className:"styled-list"},o)))}}]);return a}(d.Component);c(ie,"propTypes",{model:w.instanceOf(L).isRequired});var se=function(e){y(a,e);function a(){var e;var t;u(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}t=h(this,(e=g(a)).call.apply(e,[this].concat(r)));c(v(t),"state",{currentTab:0});c(v(t),"handleTabClick",function(e){t.setState({currentTab:e})});return t}f(a,[{key:"render",value:function e(){var t=this.props.listType;var n=_(this.props.labels).map(function(e,t){var n=k({selected:t===this.state.currentTab});return d.createElement("a",{className:n,key:t,onClick:_(this.handleTabClick).partial(t),href:"javascript:void(0);"},e)},this);var r=this.props.collections[this.state.currentTab];var o=d.createElement(le,{key:this.state.currentTab,showFocus:true,showEmptyMessage:true,showRefresh:true,collection:r,listType:t});var a=d.createElement("div",{className:"discussion-list-header"},d.createElement("span",{className:"discussion-list-sort"},n));return d.createElement("div",{className:"discussion-list"},a,o)}}]);return a}(d.Component);c(se,"propTypes",{collections:w.array.isRequired,labels:w.array.isRequired,listType:w.string});var le=O({displayName:"DiscussionListContent",propTypes:{excludeProjectEval:w.bool,showFocus:w.bool,showEmptyMessage:w.bool,showRefresh:w.bool,collection:w.instanceOf(W).isRequired,expandKey:w.string,listType:w.string},mixins:[D,F],getBackboneModels:function e(){return[this.props.collection]},getDefaultProps:function e(){return{showFocus:false,showEmptyMessage:false,showRefresh:false}},getInitialState:function e(){return{fetchedInitial:false,fetchingMore:false,fetchingNew:false,minutesElapsed:0}},renderItems:function e(){var t=this;var n=this.props,r=n.collection,o=n.listType;var a=r.models.filter(function(e){return!t.props.excludeProjectEval||!e.isProjectEval()}).map(function(e){return e.toJSON()}).map(function(e){return l({},e,{authorAvatarSrc:e.author.avatarSrc,authorKaid:e.author.kaid,authorNickname:e.author.nickname})});return d.createElement(i.default,{mockOnFirstRender:true},function(e){var t=e.getUserProfile();var n=t&&t.attributes.isChildAccount;return d.createElement(s.default,{tab:o,posts:a,isComplete:true,discussionContext:{restrictPosting:n}})})},render:function e(){if(!this.state.fetchedInitial){return d.createElement(q,null)}if(this.props.collection.size()===0){return d.createElement("div",{className:"discussion-list"},this.props.showEmptyMessage?i18n._("All requests have been handled."):null)}var t=null;if(this.state.fetchingNew){t=d.createElement("span",{className:"discussion-list-refresh"},i18n._("Checking for updates..."))}else if(this.state.minutesElapsed>=2){var n=i18n.ngettext("%(num)s minute since we last checked for updates.","%(num)s minutes since we last checked for updates.",this.state.minutesElapsed);t=d.createElement("a",{className:"discussion-list-refresh",href:"javascript:void(0);",onClick:this.handleRefreshClick},n,d.createElement("span",{className:"icon-refresh"}),i18n._("Click to refresh"))}var r=d.createElement("button",{onClick:this.handleMoreClick,type:"button",className:"simple-button discussion-list-more"},i18n._("Show more comments"));var o=d.createElement("button",{className:"simple-button discussion-list-more",disabled:true},i18n._("Loading..."));var a=this.state.fetchingMore?o:r;var i=this.renderItems();return d.createElement("div",null,t,i,this.props.collection.isComplete()?null:a)},componentDidMount:function e(){this.fetchCollection();if(this.props.showRefresh){this.setInterval(function(){if(this.props.collection.autoRefresh){this.handleRefreshClick()}else{var e=(new Date).getTime()-this.state.lastFetchTime;var t=Math.floor(e/1e3/60);this.setState({minutesElapsed:t})}}.bind(this),1e3*60)}},componentDidUpdate:function e(){if(this.state.fetchedInitial&&this.props.expandKey){var t=E(C.findDOMNode(this)).find("#"+this.props.expandKey);if(!t.length){return}t.addClass("highlight success-highlight");E("html, body").animate({scrollTop:t.offset().top-10});this.props.expandKey=null}},fetchCollection:function e(t){var n=function(){this.setState({fetchedInitial:true,fetchingMore:false,fetchingNew:false,minutesElapsed:0,lastFetchTime:(new Date).getTime()});if(!this.props.collection.fetchedInitial){this.props.collection.fetchedInitial=true;this.props.collection.trigger("change")}}.bind(this);this.props.collection.fetch({remove:t||false,reset:t||false,success:n,error:n})},handleMoreClick:function e(){this.setState({fetchingMore:true});this.fetchCollection()},handleRefreshClick:function e(){this.setState({fetchingNew:true});this.props.collection.cursor=null;this.fetchCollection(true)}});var ce=function(e){y(i,e);function i(e){var t;u(this,i);t=h(this,g(i).call(this,e));var n=0;var r=0;if(e.parent){var o=E(e.parent);var a=o.offset();n=a.left+o.outerWidth(true)/2-172/2;r=a.top+o.outerHeight(true)/2-62/2}t.state={left:n,top:r};return t}f(i,[{key:"render",value:function e(){var t={left:this.state.left,top:this.state.top};return d.createElement("div",{className:"discussion-meta-note",style:t},d.createElement("span",null,this.props.description+" "),d.createElement("a",{className:"discussion-meta-note__close",href:"javascript:void(0);",onClick:this.props.onClose},i18n._("Close")))}}]);return i}(d.Component);c(ce,"propTypes",{parent:function e(t,n){if(!_(t[n]).isElement()){throw new Error("Note: "+n+" must be a dom node")}},description:w.string.isRequired,onClose:w.func.isRequired});var ue=function(e){y(a,e);function a(){var e;var t;u(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}t=h(this,(e=g(a)).call.apply(e,[this].concat(r)));c(v(t),"handleReplyClick",function(){var e=t.props.model.get("replyCountOpen");t.props.model.set("replyCountOpen",!e)});return t}f(a,[{key:"render",value:function e(){var t=this.props.model;var n=i18n.ngettext("%(num)s Comment","%(num)s Comments",t.get("replyCount"));if(!t.get("restrictPosting")&&t.get("replyCount")===0){n=i18n._("Comment")}return d.createElement("a",{className:"reply-count",href:"javascript:void(0);",onClick:this.handleReplyClick},n)}}]);return a}(d.Component);c(ue,"propTypes",{model:w.instanceOf(L).isRequired});var pe=function(e){y(a,e);function a(){var e;var t;u(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}t=h(this,(e=g(a)).call.apply(e,[this].concat(r)));c(v(t),"handleEdit",function(){t.props.model.set("editing",true)});c(v(t),"handleDelete",function(){t.mountPoint=E("<div>").appendTo(document.body)[0];C.render(d.createElement(A,{model:t.props.model,onClose:t.handleClose}),t.mountPoint)});c(v(t),"handleClose",function(){C.unmountComponentAtNode(t.mountPoint);t.mountPoint=null});return t}f(a,[{key:"render",value:function e(){var t=null;if(this.props.model.isEditable()){t=[d.createElement("a",{className:"mod-tools__edit",href:"javascript:void(0);",onClick:this.handleEdit,key:"edit"},i18n._("Edit")),d.createElement(U,{key:"separator"})]}return d.createElement("span",{className:"mod-tools"},t,d.createElement("a",{className:"mod-tools__delete",href:"javascript:void(0);",onClick:this.handleDelete,key:"delete"},i18n._("Delete")))}}]);return a}(d.Component);c(pe,"propTypes",{model:w.instanceOf(L).isRequired});var fe=function(e){y(o,e);function o(){var e;var i;u(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++){n[r]=arguments[r]}i=h(this,(e=g(o)).call.apply(e,[this].concat(n)));c(v(i),"handleClick",function(){var e=m.default.getUserProfile(),t=e&&!e.isPhantom();i.mountPoint=E("<div>").appendTo(document.body)[0];if(!t){var n=d.createElement(ce,{description:i18n._("You must log in to flag."),onClose:i.handleClose,parent:C.findDOMNode(v(i))});C.render(n,i.mountPoint)}else{var r=i.props.model.get("type");var o=r==="scratchpad"?S:R;var a=d.createElement(o,{onSelectReason:function e(){var t;return(t=i.props.model).flag.apply(t,arguments)},textContent:i.props.model.getTextContent(),type:i.props.model.get("type"),onClose:i.handleClose});C.render(a,i.mountPoint)}});c(v(i),"handleClose",function(){C.unmountComponentAtNode(i.mountPoint);i.mountPoint=null});return i}f(o,[{key:"render",value:function e(){var t=this.props.model;var n=t.get("flaggedByUser");var r=n?i18n._("Flagged"):i18n._("Flag");if(t.get("flagButton")){return t.get("renderButton")({label:r,onClick:this.handleClick,disabled:n})}return d.createElement("a",{title:i18n._("Flag for moderator attention"),href:"javascript:void(0);",onClick:this.handleClick},r)}}]);return o}(d.Component);c(fe,"propTypes",{model:w.instanceOf(L).isRequired});var de=function(e){y(t,e);function t(){u(this,t);return h(this,g(t).apply(this,arguments))}f(t,[{key:"render",value:function e(){var t=this.props.model,n=t.get("focusUrl")+"?qa_expand_key="+t.id;return d.createElement("a",{href:n},d.createElement(M,{time:t.get("date")}))}}]);return t}(d.Component);c(de,"propTypes",{model:w.instanceOf(L).isRequired});var me=function(e){y(t,e);function t(){u(this,t);return h(this,g(t).apply(this,arguments))}f(t,[{key:"render",value:function e(){var t=this.props.model;var n=t.get("focus");if(n.kind==="youtubevideo"){return d.createElement("span",null)}var r=null;if(t.canHaveAnswers()&&t.getThumbnailUrl()){r=d.createElement("a",{href:t.getFocusUrlWithExpandKey(),className:"discussion-item-thumbnail"},d.createElement("img",{src:(0,o.default)(t.getThumbnailUrl()),alt:n.translatedTitle}))}return d.createElement("span",null,d.createElement("span",{className:"discussion-meta-faded"}," "+i18n._("on")+" "),d.createElement("a",{href:t.getFocusUrlWithExpandKey()},n.translatedTitle),r)}}]);return t}(d.Component);c(me,"propTypes",{model:w.instanceOf(L).isRequired});var he=function(e){y(t,e);function t(){u(this,t);return h(this,g(t).apply(this,arguments))}f(t,[{key:"render",value:function e(){return d.createElement("span",null,d.createElement("span",{className:"discussion-meta-faded"}," "+i18n._("by")+" "),d.createElement(P,{user:this.props.model.get("author")}))}}]);return t}(d.Component);c(he,"propTypes",{model:w.instanceOf(L).isRequired});var ve=O({displayName:"DiscussionMeta",mixins:[D],propTypes:{model:w.instanceOf(L).isRequired,parent:w.instanceOf(L),showFocus:w.bool},getDefaultProps:function e(){return{showFocus:false}},render:function e(){var t=this.props.model;var n=t.get("badges").length&&["badges",Z];var r=null;if(t.canHaveVotes()){r=["voting",ee]}var o=t.get("spinoffCount")&&["spinoff-count",$];var a=null;if(!t.get("inUserProfile")&&t.canHaveReplies()){a=["reply-count",ue]}var i;var s=m.default.getUserProfile();if(s&&s.get("isModerator")){i=["mod-controls",V]}else if(t.get("type")==="clarification"&&z.userIsOmnipotent()){i=["mod-controls",H]}else if(t.get("showAuthorControls")){if(t.isEditable()){i=["author-controls",pe]}}else if(t.isFlaggable()){i=["flag-controls",fe]}var l=I([n,r,o,a,i],this);var c=null,u=null,p=null;if(t.get("type")!=="scratchpad"&&!t.isProjectEvalAnswer()){c=["permalink",de];u=t.get("focus")&&this.props.showFocus&&["on-focus",me];p=!t.get("inUserProfile")&&["by-author",he]}var f=I([c,p,u],this,"span");return d.createElement("div",null,d.createElement("div",{className:"discussion-meta"},d.createElement("div",{className:"discussion-meta-controls"},l),d.createElement("div",{className:"discussion-meta-info"},f)))},getBackboneModels:function e(){var t=[];if(this.props.model.canHaveAnswers()){t.push(this.state.answers)}if(this.props.model.canHaveReplies()){t.push(this.state.replies)}t.push(this.props.model);return t},getInitialState:function e(){var t={};if(this.props.model.canHaveAnswers()){t.answers=W.fromItemAnswers(this.props.model)}if(this.props.model.canHaveReplies()){t.replies=Y.fromItem(this.props.model);t.replies.bind("add remove",function(){this.props.model.set("replyCount",this.state.replies.length)}.bind(this))}return t}});e.exports={DiscussionMeta:ve,EditContentForm:J,Note:ce,DiscussionListContent:le,TabbedDiscussionList:se,ProjectEvalStatusViewer:ae,ProjectEvalReviewContent:ie,FormattingTips:G}},mxj5:function(e,t,n){"use strict";n("ma9I");var r=o(n("7JHY"));function o(e){return e&&e.__esModule?e:{default:e}}var i18n=n("HEOz");e.exports=r.default.compile('<div class="hover-card-container">\n    <div class="hover-card-triangle {{#if arrowOnRight}}right{{/if}}"></div>\n    <div class="hover-card-content-container vertical-shadow">\n        <div class="hover-card-content clearfix">\n            <h4 class="pulls">\n                '.concat(i18n._("Flags:"),'\n            </h4>\n            <ul class="flagged-by-users">\n            {{#each flags}}\n                <li class="sample-content-link">\n                    {{#if user}}\n                        <a href="/devadmin/users?userId={{user}}">{{user}}</a>\n                    {{else}}\n                        ').concat(i18n._("Unknown or deleted user"),'\n                    {{/if}}\n                    - <span class="flag-type">{{type}}</span>\n                </li>\n            {{/each}}\n            </ul>\n        </div>\n    </div>\n</div>'))}}]);
//# sourceMappingURL=../../sourcemaps/en/40639fd1f990528efc7893ed6e5f391a.dae73631c0ee0ca234aa.js.map